{"version":3,"sources":["webpack:///src/components/SubList.vue","webpack:///./src/components/SubMap/libs/subGlyph.js","webpack:///./src/components/color/color2D.js","webpack:///src/components/SubMap/panel/MapPanel.vue","webpack:///./src/components/SubMap/panel/MapPanel.vue?ff81","webpack:///./src/components/SubMap/panel/MapPanel.vue","webpack:///./src/components/SubMap/libs/graph.js","webpack:///./src/components/Main.vue?4e8c","webpack:///./src/components/Main.vue","webpack:///src/App.vue","webpack:///./src/App.vue?9463","webpack:///./src/App.vue","webpack:///./src/router/index.js","webpack:///./src/api/index.js","webpack:///./src/store/state.js","webpack:///./src/store/getters.js","webpack:///./src/store/mutation-type.js","webpack:///./src/store/mutations.js","webpack:///./src/store/actions.js","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///src/components/SubMap/index.vue","webpack:///./src/components/stripe.png","webpack:///src/components/SubProj.vue","webpack:///./src/components/SubProj.vue?8724","webpack:///./src/components/SubProj.vue","webpack:///src/components/Main.vue","webpack:///./src/components/LoadingPage.vue?e5a5","webpack:///./src/components/LoadingPage.vue","webpack:///src/components/LoadingPage.vue","webpack:///./src/components/SubMap/index.vue?f7fa","webpack:///./src/components/SubMap/index.vue","webpack:///./src/components/SubMap/libs/mst.js","webpack:///./src/components/SubMap/libs/route.js","webpack:///./src/components/SubList.vue?0abd","webpack:///./src/components/SubList.vue","webpack:///./src/components/SubMap/libs/visibility.js","webpack:///./src/components/SubMap/libs/geoElements.js","webpack:///./src/components/SubMap/libs/hexagon.js","webpack:///./src/components/SubMap/libs/subCluster.js","webpack:///./src/components/SubMap/libs/mapLayout.js","webpack:///./src/components/color/bremm.png"],"names":["__webpack_exports__","name","data","rotateDeg","histHeightRatio","histGHeightRatio","histGXMarginRatio","histFilterDimExpandedRatio","histFilterGHeightRatio","listItemHeightRatio","listXMarginRatio","listXMarginNewRatio","listTopMarginRatio","dimRibbonXMarginRatio","dimRibbonXSpacingRatio","dimRibbonXNewSpacingRatio","dimRibbonHeightRatio","hideDims","showDims","animationDuration","mounted","computed","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_extends___default","Object","__WEBPACK_IMPORTED_MODULE_5_vuex__","watch","updateMap","val","oldVal","this","updateParams","map","leafNodes","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_array_from___default","allLeaves","values","subOrder","getSubOrder","redraw","init","draw","updateSubList","newVal","_this","type","subs","undefined","path2This","getSubsByPath","subIds","currSubOrder","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator___default","next","done","order","value","currSubs","indexOf","Data","push","err","return","subsIdx","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","sub","firstItemOrder","Math","min","apply","lastItemOrder","max","maxItemNumOnScreen","floor","maxScrollNum","length","scrollHeight","listItemHeight","d3","select","$el","transition","duration","tween","scrollTopTween","on","i","item","listSvg","classed","style","updateView","selectAll","each","_i","_item","_groups","JSON","parse","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default","_i2","scrollTop","interpolateNumber","t","methods","width","offsetWidth","height","offsetHeight","file","histWidth","parseFloat","histFakeHeight","histHeight","ratio2px","histGHeight","histGXMargin","histFilterGY","histFilterGHeight","histFilterItemWidth","dims","histFilterDim1stR","histFilterDimCY","histFilterDim1stCX","histFilterDim2ndCX","histFilterDim2ndStrokeWidth","histFilterDim2ndR","histFilterDim1stSelectedR","histFilterDim2ndSelectedStrokeWidth","histFilterDim2ndSelectedR","histFilterDimNameX","histFilterDimNameY","histBarTopMargin","toPX","histBarBtmMargin","histBarMaxHeight","histBarX","histBarWidth","histBarY","scaleLinear","domain","subtree","dimCounts","range","histBarXSpacing","histBarNumX","histBarNumXSpacing","histBarNumYSpacing","listWidth","listHeight","dimRibbonXSpacing","listX","listY","listItemWidth","dimRibbonX","dimRibbonWidth","dimRibbonHeight","dimRibbonY","highlightRibbonStrokeWidth","highlightRibbonY","highlightRibbonX","highlightRibbonWidth","highlightRibbonHeight","color","h","c","l","append","attr","histSvg","clear","remove","drawList","drawHist","targetedModification","_this2","self","unclickDimShow","circle","unclickDimHide","histG","enter","d","text","histFilterG","p","idx","hideCirce","thisCircle","updateMapByDim","showCircle","slice","_this3","_this4","channels","colors","updateUpdateMapBySub","fontsize","Number","replace","clusterSubOrder","sortedIndices","yCoords","_loop","_i4","subId","node","find","ID","center","coordinates","y","arr","ind","sort","a","b","obj","getIndicesBySortingSubIds","nationalCaps","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_toConsumableArray___default","children","glbTraversalOrder","_i3","dscTraversalOrder","unshift","remainingSubIds","filterSubsByListItem","res","filterSubsByHistFilter","updateHist","updateList","isFilterByHide","isFilter","isFilterByShow","state","_this5","remainingDimCounts","Array","fill","_loop2","subArr","split","prevHiddenListItemIds","hiddenListItems","filter","thisId","parseInt","shownListItems","HideListItemsDeferred","$","Deferred","translateShownListItemsDeferred","deferred","neededHiddenListItems","resolve","makeHiddenListItemsInvisible","when","currHeight","translateShownListItems","thisDict","findByIndex","dict","_i5","dimStates","needed","_i6","updateUpdateMapByDim","histFilterDimNameFontSizeAdjustment","line","x","intersect","rectCoords","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","domRect","getBoundingClientRect","rectRotatedCoords","_rectRotatedCoords","_polygonsIntersect","_deg2rad","deg","PI","coords","rotatedCoords","rad","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","cx","cy","thisRectRotatedCoords","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","coord","originX","originY","cos","sin","minA","maxA","projected","i1","j","minB","maxB","polygons","polygon","i2","p1","p2","normal","SubGlyph","v_r","v_maxR","v_mapType","v_glyphType","v_colors","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_classCallCheck___default","t_init","r","sqrt","maxR","mapType","glyphType","strokeThin","strokeThick","fanAngleRatio","filterer","filterSettings","container","overallSelector","overallKey","controlAttr","invisibleOpac","static","attrs","match","miss","overallFilterFunc","getFilterFunc","animation","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_object_assign___default","v_options","rectGlyph","t_dimLength","dimLength","_v_options$size","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_slicedToArray___default","size","t_width","t_height","className","glyphWidth","glyphHeight","glyphSize","margin","marginWidth","marginHeight","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_createClass___default","key","v_g","v_dims","t_glyphSize","t_glyphWidth","t_glyphHeight","t_glyphMargin","t_marginWidth","t_type","v_dim","v_i","t_r","vv_g","vv_path","vv_col","vv_opa","vv_nghDist","vv_r","vv_empty","v_ngh","angle","dist","vv_dims","t_div","tt_ang","vv_id","v_capR","v_inR","v_outR","v_pattern","arguments","v_weights","v_ext","t_this","t_nationalcap","t_provincialCap","provincialCaps","t_dimArc","arc","outerRadius","innerRadius","startAngle","endAngle","t_capDimArc","score","exp","t_empty","t_scale","diffScale","call","vv_gs","forEach","vvv_g","tt_ngh","tt_isDiff","diff","tt_length","tt_spot1","tt_spot2","tt_triangle","join","v_container","t_filterer","t_filterSettings","PDFilter","dimCover","codeBook","allCount","gridCell","gridID","code","fitCount","fit","v_d3selection","v_fit","t_ftOpc","interrupt","t_zgOpc","t_ptOpc","isNaN","attrFunc","extraInfo","ready","initializeFilter","bvGetFromSelection","restore","v_ids","v_attr","v_attrFunc","ids","pick","v_gs","t_ext","extent","t_id","t_dim","t_index","t_weights","v_nghDist","v_id","v_col","v_isEmpty","showFrames","hexbin","hexagon","showStick","showFan","showBridge","exportClass","_len","params","_key","Function","prototype","bind","concat","v_filterSetting","t_ovlFiltFunc","v_d","subSelector","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_typeof___default","t_duration","filterers","filterID","t_animation","t_selection","filters","pickers","reducers","otherFilters","otherPickers","otherReducers","add","v_filterFunc","v_type","t_filterSign","id","sign","func","findID","findIndex","v_filterer","fitFilters","v_obj","v_sign","t_allFilters","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default","t_fit","t_sign_i","fitReducers","fitPickers","t_allPickers","t_newFit","t_reducers","getPickers","v_selection","t_filterers","t_objs","t_keys","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_set___default","t_keyName","t_key","has","restoreOthers","t_allSigns","t_sign","v_match","v_selLength","t_static","t_isNormal","empty","t_staticAttrs","t_matches","t_misses","t_normals","t_attr","t_noSpecial","t_match","t_normalValue","t_specialValue","t_value","v_values","v_reduce","t_filterID","t_oldSign","t_conditions","t_filterFunc","t_fAttr","t_oldSelection","t_newSelection","t_falseToTrue","t_trueToFalse","setStatic","setAnimation","t_return","t_eleNum","v_direct","v_ft","t_isPicker","t_isReducer","t_noPickers","t_allSelection","t_array","t_values","t_info","colormap","require","Color2D","context","callback","canvas","document","createElement","String","dimensions","body","appendChild","getContext","imgObj","Image","onload","drawImage","src","ranges","getScaledX","getScaledY","setColormap","getElementById","outerHTML","getColor","getImageData","MapPanel","legends","currMode","modes","modeTexts","currScaleLevel","scaleLevel","0","1","2","$nextTick","drawLegendIcon","panelWidth","btnGroupHeight","scaleTextHeight","btnWidth","extends_default","vuex_esm","changeLevelByMap","currLevel","level","changeMode","updateChangeMode","mode","changeScale","updateChangeLevelByPanel","d3el","thisIconSvg","v_svg","g","inR","outR","outStrokeWidth","drawNationalCap","drawProvincialCap","scale","gSize","thisHarbor","prevTranslate","getNewHarborCoords","drawHarbor","lineLength","startX","drawLandRoute","drawSeaRoute","panel_MapPanel","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_l","legend","span","domProps","innerHTML","_s","change","model","$$v","expression","label","plain","icon","disabled","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","Graph","extractKeys","keys","hasOwnProperty","sorter","findPaths","start","end","infinity","Infinity","costs","open","predecessors","addToOpen","cost","vertex","bucket","shift","currentCost","adjacentNodes","totalCost","vertexCost","extractShortest","nodes","u","reverse","findShortestPath","shortest","path","toArray","list","offset","e","toString","components_Main","toggleable","variant","href","is-nav","left","slot","changeData","__vue_styles__","App","components","Main","selectortype_template_index_0_src_App","src_App","App_normalizeComponent","Vue","use","Router","router","root","axios","toType","toLowerCase","apiAxios","method","url","success","failure","filterNull","o","trim","baseURL","withCredentials","then","window","alert","stringify_default","catch","console","log","response","api","get","post","put","delete","loadingPage","loadedData","updateMapBySub","changeLevelByPanel","drawProjection","changeProjInBrowseMode","resize","changeSubProjOpacity","getters","types","UPDATE_LOADING_PAGE","UPDATE_UPDATE_SUB_LIST","UPDATE_UPDATE_MAP_BY_DIM","UPDATE_UPDATE_MAP_BY_SUB","UPDATE_CHANGE_LEVEL_BY_PANEL","UPDATE_CHANGE_LEVEL_BY_MAP","UPDATE_CHANGE_MODE","UPDATE_DRAW_PROJECTION","UPDATE_CHANGE_PROJ_IN_BROWSE_MODE","UPDATE_UPDATE_MAP","UPDATE_RESIZE","UPDATE_CHANGE_SUB_PROJ_OPACITY","mutations","_types$UPDATE_LOADING","defineProperty_default","payload","newObj","keys_default","dKey","random","actions","updateLoadingPage","_ref","commit","updateUpdateSubList","_ref2","_ref3","_ref4","_ref5","updateChangeLevelByMap","_ref6","_ref7","updateDrawProjection","_ref8","updateChangeProjInBrowseMode","_ref9","updateUpdateMap","_ref10","updateResize","_ref11","updateChangeSubProjOpacity","_ref12","vue","vuex","store","Store","plugins","config","productionTip","$api","CommunicateWithServer","paramsObj","formData","URLSearchParams","error","ElementUI","BootstrapVue","assign_default","ratio2percent","ratio","what","L","ax","splice","getTransformation","transform","createElementNS","setAttributeNS","scaleX","scaleY","skewX","matrix","baseVal","consolidate","f","translateX","translateY","rotate","atan2","atan","setProjPointsOpacity","digit","opacity","resetProjPointsOpacity","el","template","numeric","__WEBPACK_IMPORTED_MODULE_19__components_SubMap_panel_MapPanel__","seaRouteDuration","__WEBPACK_IMPORTED_MODULE_12_babel_runtime_helpers_extends___default","__WEBPACK_IMPORTED_MODULE_13_vuex__","interactions","filterByDims","filterByIDs","pinByIDs","getTranslate","visible","toLevel","long","prevMode","resetSubList","__WEBPACK_IMPORTED_MODULE_11_babel_runtime_helpers_toConsumableArray___default","resetCapsOpacity","unselectRoute","resetTravelRouteSubs","recoverElemOrder","bindSubMapClustersEvent","airTravelMode","groundTravelMode","diffMat","distExt","mapWidth","mapHeight","fCodes","codes","dimIndices","dataIndeces","dimIndeces","filterCodes","fMatrix","mat","subI","subJ","k","getDiffMat","subDistMat","row","neighbors","subKNN","distMat","overallClusters","clusters","paths","aggregate","currClusters","showSize","canvasSize","scales","short","interval","pattern","hoveredID","clsColorReady","ovlDataWeights","sizeTolr","__WEBPACK_IMPORTED_MODULE_10_babel_runtime_core_js_number_epsilon___default","snapshotPar","ringR","ringRRatio","marginRatio","sshotR","sshotRRatio","anchorR","angInterval","travelIcon","travelIconScale","currTime","travelIconPos","isTravelIconDragging","subMapClustersEvent","svg","df1","df2","initInteractions","clustering","showTiling","setTimeout","leftBracketPos","commaPos","rightBracketPos","substring","thisView","thisCollection","transDuration","overallContainer","clickTimer","checkRelation","path2A","path2B","relationType","lengthCondition","endOFunction","confirmed","lengthOParents","standOut","thisContainer","clusterID","d3Selection","bvShowOnTop","parent","fadeOutAll","fadeOutOthers","fadedSelection","saveBrothers","path2Cluster","checkRelationFunction","brotherSelection","elemOThis","orderOThis","path2Parent","mouseOver","thisCluster","isOutlier","idsOThis","getClsByPath","dataWeightsOThis","dataWeights","overallDataWeights","informOthers","mouseOut","isTranslate","isPin","leafNames","projectByIDs","projectByCluster","pinning","isBlock","targetSelection","pinned","clsID","pickGlyphsByIDs","parentClsID","returnedData","indeces","filterGlyphsByDims","illegal","filterGlyphsByIDs","cid","fixCode","targetCodes","count","getIndices","dataIndices","levelOThis","pathLevel","prevCode","IDOThis","returnedIDs","outlier","previous","treturnedIDs","df","subHierClusters","getArrDepth","isArray","clusterInfoObj","v_prevObj","v_treePath","v_isOutlier","v_neighborPatterns","v_dimCounts","__WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_classCallCheck___default","neighborPatterns","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_core_js_map___default","prevPatterns","patterns","prevDimCounts","index","outliers","__WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_createClass___default","v_clusterInfoObj","map1","map2","combineFunc","map1Arr","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_core_js_array_from___default","entries","map2Arr","matchArr1","matchArr2","key1","val1","key2","val2","origVal","set","_origVal","_newVal","_val","_origVal2","_newVal2","combineMaps","overallNeighborDims","maskMap","findPair","setPair","mask","tree","subtreeFunc","leavesFunc","traverseTreeLevel","newTree","supernodes","subLeaves","leafIndices","onlyLeaves","newPath","subRes","newSubtree","supernode","leafRes","leafnode","resTree","traverseTree","subNodes","treePath","_clusterInfo","clusterInfo","combine","leaves","patternMap","_i7","neighbor","dimExtent","neighborDims","_j","simplifyTree","_i8","childRes","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_typeof___default","storeCluster","__WEBPACK_IMPORTED_MODULE_14__libs_mapLayout__","getMap","gridScales","centerPosition","viewSize","df4Map","df4Route","df4Cls","coordsRange","cellRadius","__WEBPACK_IMPORTED_MODULE_15__libs_visibility__","prepareContainer","renderMap","showClusters","update","updateClusterInfo","showRoutes","valueToSearch","theArray","currentIndex","newIndex","showCaps","addBorderToLeaves","event","shiftKey","centerCoords","highlightedGrids","dfOThis","renderNewMap","hideOldMap","longDuration","animationTime","glyphColors","aspectRatio","centerX","divX","centerY","divY","__WEBPACK_IMPORTED_MODULE_16__libs_subGlyph__","cell","bScale","filterMatrix","nghDistScale","dimWeights","cellFunction","containerCell","leafName","colorOCell","Length","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator___default","nghIndex","occupied","nghLeafName","nghID","round","weights","parameters","emptyCellParameters","cellParameters","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_set___default","cellParameter","_SubGlyph","showGlyph","clusterPaths","levels","cluster","getContourTree","_i9","clusterLevel","pathData","renderPaths","clusterIndices","contourTree","currentLevel","previousPath","idOThis","returnedCluster","simpleCluster","previousID","getClusterContours","selfID","clusterIndicesPaths","classNames","renderFunction","edge","startCoordinates","endCoordinates","action","v_name","v_time","v_func","t_timeObj","bTimer","Date","past","finished","timer","bTimerObj","clearTimeout","t_obj","bDelay","preventDefault","stopPropagation","parentNode","clsLevel","clsContainers","clsContainer","v_a","v_b","rangePath","rangePts","diameter","clusterPath","pathPoints","points","startPoint","point","closed","_i10","_j2","distance","norm2","_i11","v_arr","v_isColVec","t_arr","transpose","dim","t_mean","t_num","sum","bGetMeanVector","lines","t_centers","t_aggr","t_tree","t_collection","_this6","v_init","t_d","t_clsID","t_ovlWeights","t_cid","v_clsIDs","t_visibleList","v_visibleItem","avgCol","t_findCol","t_children","t_findWeight","info","t_updateClsProjections","routeOperation","date1","Route","__WEBPACK_IMPORTED_MODULE_17__libs_route__","date2","ajax","dataType","capG","nationalCapsCoords","provincialCapsCoords","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_values___default","v_outStrokeWidth","cancelSubMapClustersEventBinding","changeElemOrder","grids","caps","capGrids","nonCapGrids","capGs","clickCount","route","clickGrid","thisIndex","drawTravelIcon","clsID0","clsID1","travelRouteSubs","travelRouteCoords","travelRouteOD","travelRoute","constructGraph","landMST","getLandRouteSubs","landRoute","getRouteCoords","landRouteCoords","_travelRouteSubs","_travelRouteOD","_travelRouteOD2","_travelRouteSubs2","_travelRouteCoords","_travelRouteCoords2","mstGraph0","mstGraph1","graph0","graph1","harbor0","getHarborByClsID","harbor1","travelRoute0","travelRoute1","waterRouteInfo","clsIds","waterMST","waterRoute","waterRouteCoords","od","waterRouteSubs","waterRouteOD","_i17","harbor","getWaterRouteOD","getWaterRouteInfo","pop","nodeCoords","repeatingRouteSubIdPairs","getRepeatingElemIdPairs","removedRouteSubs","removeRepeatingElems","repeatingODIdPairs","removedElems","arrLen","removeRepeatingODs","countryDivisionIndices","highlightLandRouteCoords","_highlightLandRouteCo","nextSub","landSubCoords","_highlightLandRouteCo2","lastSub","fadeIrrelevantRoutesAndCaps","highlightTravelRouteSubs","travelRouteSubsInCountry","getRouteArrInCountry","travelRouteCoordsInCountry","durations","_i12","travelInCountry","countryIdx","setInterval","clearInterval","drag","thisIcon","nodeCoord","candidateNodes","dists","dist2Node","pow","_loop3","_i22","travelRouteNode","travelRouteNodeCoord","dist2TravelRouteNode","indexOfMinDist","nextNode","nextCoord","travelIconSizeDiff","dragged","_harbor","harbor2","seaRouteOD","routeReverse","seaRoute","thisOD","ease","easePoly","exponent","attrTween","pathReverse","pathLen","getTotalLength","getPointAtLength","harbor2Coords","mstGraph","graph","uniqueVertexes","uniqueU","uniqueV","v","getUniqueVertexes","_i13","neighborNodes","w","__WEBPACK_IMPORTED_MODULE_18__libs_graph__","_i14","v_landRoute","routeIds","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default","_i15","routePair","pairSubs","routeType","v_route","v_routeCoords","routeCoords","_i16","routeId","pairCoords","accIdNum","_i18","elem","countInArray","id2","get2ndIdOfElem","_i19","repeatingElemIdPairs","_i20","idPair","splicedElems","routeArr","routeArrInCountry","_i21","_j3","travelModeHoverGrid","travelModeUnhoverGrid","thisGrid","getElementsByClassName","travelIconCoords","neighborPositions","_loop4","neighborNode","position","neighborNodeCoord","dist2NeighborNode","_dist","unhoverAllGrids","travelIconG","mapSvgTransform","subMapTilingTransform","odPairs","drawHighlightLandRoute","raise","showHighlightLandRoute","mapG","events","_i23","thisClsID","v_scales","v_data","v_target","module","exports","SubProj","dimDominatingThreshold","browse","low","high","airTravel","groundTravel","showType","switchVal","groundTravelLegends","airTravelProjParam","btmLevelClsParam","maxProjNumOnScreen","setLayout","from_default","drawCapsProj","updateProjParams","drawProj","originSubId","_g","_g2","switchCityProj","_g3","includes","projOrder","child","attributes","nodeValue","projHeight","projYPadding","btnDiv","btnHeight","switchBtnHeight","boundaryCircleStrokeWidth","circleR","dimCircleR","dimPointR","backgroundDimPoint","-1","midgroundDimPoint","foregroundDimPoint","dimPointStrokeWidth","opcScale","flat","clamp","set_default","opcScaleNew","unifiedProj","dataNum","dataProjs","cellNum","ceil","svgProjWidthDiff","groundTravelProjG","airTravelProjG","drawGroundTravelLegend","changeShowType","proj","projPointScale","subMapTiling","SubMapTiling","_subMapTiling","capNum","clsIDs","unsortedSubIds","sortedSubIds","parentSubtree","centerLeafName","allDataWeights","thisDataWeights","toConsumableArray_default","allDataSimilarities","num","projNum","projWidth","updateSvgHeight","projSize","boundaryCircle","boundaryCircleOffset","projOffset","dimCircleCoords","dimDominatingFlag","thisSubtreeData","checkDimDominating","aggrNum","dataSimilarities","flag","getDimPointR","getDimPointStrokeWidth","drawDim","textType","dimTextG","dimLen","circleCoords","padding","smallFontsizeObj","OD280/OD315 of diluted wines","Nonflavanoid phenols","smallFontsizeDims","linebreakObj","Alcalinity of ash","linebreakDims","splitedDims","totalLineHeight","lineHeight","drawDimText","dimCount","threshold","lowThreshold","highThreshold","getThreshold","pointType","_this7","legendNum","components_SubProj","active-color","inactive-color","active-text","inactive-text","stripe","LoadingPage","__WEBPACK_IMPORTED_MODULE_3__components_LoadingPage__","SubList","__WEBPACK_IMPORTED_MODULE_4__components_SubList__","SubMap","__WEBPACK_IMPORTED_MODULE_5__components_SubMap_index__","__WEBPACK_IMPORTED_MODULE_6__components_SubProj__","popoverActive","defaultFile","fileList","changeSubColor","fanRRatio","circleRRatio","loadData","onresize","drawDimGlyphLegends","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default","__WEBPACK_IMPORTED_MODULE_2_vuex__","json","initProjection","childI","provincialCap","dataWeightsExtent","t_subTree","__WEBPACK_IMPORTED_MODULE_7__components_color_color2D_js__","subProjs","$store","fanR","fanInR","fanOutR","div","dimArc","drawFan","dimR","dimG","drawCircle","rowH","legend_fanR","legend_fanInR","legend_fanOutR","stripeW","stripeTextX","dimGlyphContainerH","dimGlyphContainerTop","viewH","col1X","col2X","row1","row1Col1","row1Col2","row2","row2Col1","row2Col2","row3","row3Col1","row3Col2","drawLegend","components_LoadingPage","_m","aria-hidden","components_SubMap","quickSort","right","temp","benchMark","MakeSet","rank","Find","Union","uRoot","vRoot","Kruskal","G","A","get_iterator_default","V","E","refer","Vertex","edges","map_default","constructor","initVertex","vertexs","initEdge","createLink","len","edgeNode","Edge","sibling","field","storageEdge","classCallCheck_default","nearestSeaRoute","kc","ks","cls","cap","initShapeInfo","saveRes","expansion","shapes","getPathFromPoints","ShapeInfo","leaf","getLinesFromEdges","xRangeDiff","yRangeDiff","_bScale","_bScale2","slicedToArray_default","origX","origY","harborIcon","harborIconScale","initLandRoute","initBoundaryGraph","initWaterRoute","addLandRoute","splitLandRoute","combineLandRoute","getLandSubCoords","blob","Blob","saveAs","landGraph","subCls","values_default","vertexes","MST","thisRoute","_loop5","occupiedPositions","getOccupiedPositions","emptyPositions","positionRange","_arrayAlreadyHasArray","getEmptyPositions","xRange","yRange","getPositionRange","clusterBoundarySubs","_boundarySubs","clusterBoundaryPositions","_boundarySubPositions","positions","getAvaliableNeighborPositions","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","neighborPosition","_neighborManhattanDist","pos","intPos","x0","x1","x2","x3","getNeighborPositions","avaliableNeighbors","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","boundaryGraph","waterGraph","harborCityPos","harborPos","harborCoords","harborRouteCorrespondence","seaGraph","seaRoutePos","seaRouteCoords","routeDist","graphs","_loop8","nodePos","_loop9","nearestCapPair","_nearestCapPair","uniqueCaps","_capsInNearestCapPair","capNearestBoundarySubs","_capNearestBoundarySubs","graphI","copy2dObj","graphIJ","extendObj","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","thisCapPair","cap1BoundarySubs","cap2BoundarySubs","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","cap1BoundarySub","cap1BoundarySubPos","getSubPos","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","cap2BoundarySub","cap2BoundarySubPos","_boundarySubManhattanDist","routeInfo","_shortestPathBetweenCapPair","_harborPos","_loop10","routeSub","nodeCoordX","nodeCoordY","routeHarbor","_routeHarbor","routeHarborPos","_routeHarborPos","getCoords","thisHarborPos","thisHarborCoords","indexes","_allIndexes","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_step11","_iterator11","_findIndex","constructSeaGraphByCoords","getCandidateRouteSubsPos","getHarborAndHarborPosMidCoords","simplifyCoords","kkey","obj1","obj2","posOThis","abs","range0","getClusterPosRangeFromSub","range1","xmin","xmax","ymin","ymax","_loop12","_loop13","subsPos","linkableVertexIdPairs","subPos","neighborsPos","getNeighborsInPosition","addIntraLinkToCoordGraph","getAvaliableInterCoords","getSubCenterAndVertexCoords","neighborPos","addToCoordGraph","halfDiagonalLen","interCoords","availableInterCoords","vertexIndices","coordI","coordJ","coord1","coord2","strCoord1","strCoord2","getCoordDist","routePos","harborNode","harborRealCoords","harborMapCoords","clsMembers","xPos","yPos","_loop15","simplifiedCoords","coord0","coord0Next","simplifiedCoordsLen","coord3","mergedLine","shapeIntersect","mergeCoords","coordsOfLines","lineCoords","pair","_loop16","thisPair","cap1","q","cap2","_subCoordsEuclideanDist","thisSortedCapPair","sub1","sub2","coords1","_getCoordsFromSub","coords2","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_step12","_iterator12","pairArr","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_step13","_iterator13","capPair","_loop17","clsId","thisClsBoundarySubs","_iteratorNormalCompletion15","_didIteratorError15","_iteratorError15","_step15","_iterator15","thisSortedPair","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_step14","_iterator14","boundarySubs","_iteratorNormalCompletion16","_didIteratorError16","_iteratorError16","_step16","_iterator16","clsBoundarySubs","_loop18","_loop19","_iteratorNormalCompletion18","_didIteratorError18","_iteratorError18","_step18","_iterator18","_iteratorNormalCompletion17","_didIteratorError17","_iteratorError17","_step17","_iterator17","subPositions","_iteratorNormalCompletion19","_didIteratorError19","_iteratorError19","_step19","_iterator19","thisClsSubPositions","_iteratorNormalCompletion20","_didIteratorError20","_iteratorError20","_step20","_iterator20","_subPos","harbor1Pos","harbor2Pos","_copy2dObj","y1","y2","emptyNeighborPositions","_iteratorNormalCompletion21","_didIteratorError21","_iteratorError21","_step21","_iterator21","subarr","checker","arr1","arr2","_routeManhattanDist","country1","country2","caps1","caps2","minRoute","minDist","currDist","nearestCap","getNearestCap","thisCoords","_loop20","country","city","cityPos","manhattanDist","landSplittedRoute","landSplittedRouteCoords","routes","splitRoute","splitRouteCoords","removeDuplicateElems","splittedRoute","splittedRouteCoords","splittedCoords","removedIndices","lineShape","Intersection","landCombinedRoute","landCombinedRouteCoords","coordsOfRoutes","combinedRoute","combinedRouteCoords","nextCoords","routeJLen","routeKLen","manipulateArr","concatIdx","spliceIdx","loc","spliceArr","_this8","curve","curveCatmullRom","alpha","_key5","components_SubList","Visibility","ringDiameter","zoomScale","maxLevel","zoomer","zoom","scaleExtent","translate","roundView","ctr","clsToScale","selection","visibleFunc","givenOpacity","clsVisibility","zoomLevel","Cls","thisObject","changeVisible","baseline","atLevel","lineVisible","pointVisible","originalOpacity","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_set___default","v_transform","t_trans","scaleFirst","t_indScale","t_indTrans","t_translate","t_scaleFirst","t_scaleLength","t_transLength","getTransform","grid","globalPosition","trans","zgOpacity","ftOpacity","ptOpacity","dictionary","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_map___default","zoomLevelPaths","zoomLevelVisible","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_toConsumableArray___default","avgPos","bSubArray","SShotAngle","givenID","findFunc","visibleItem","updateColors","colorsMap","v_colArr","returned","zoomLevelVisibleItem","sshotAngle","angleIntervel","bGetAngle","initializeVisible","MapCapVisible","MapRouteVisible","SubClsVisible","SubGlyphVisible","SubGridVisible","SubSnapshotVisible","zoomIdentity","oldScale","v_row_indeces","v_col_indeces","t_i","t_j","v_start","v_end","t_dx","t_dy","t_PI","t_tolerance","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_number_epsilon___default","t_angle","GeoElements","Point","externalID","tolerance","epsilon_default","getCoordinates","nghPositions","getLength","getNeighbors","thatEdge","compareWith","compareFunc","direction","s2s","e2e","s2e","e2s","Path","Methods","getPathsByEdges","indices","currentEdge","isNewPath","pathID","matchFound","connectPath","connectTo","_paths$pathID","Paths","Hexagon","radius","integerPosition","getCenterCoordinates","getEdges","getCoordinatesByPosition","vertexDistance","directionInDegree","directionInArc","vertexCoordinates","newEdge","startDirection","endDirection","edgeNghPosition","thisPosition","absolutePosition","moveVector","newJ","newI","extPosition","originalPosition","original","newPosition","changePosition","SubCluster","dcdID","subTree","anchor","polygonCreator","isTopChild","numberODCD","altitude","contour","subClsNum","countSubCls","alternativeMap","layout1","initialize","layoutLeaf","leafNode","updateRecords","leafPosition","nghPosition","nghPositionInStore","distMatrix","existingList","forbiddenList","prevLeafPositions","sameCluster","traversalOrder","nextLeafName","alternativeList","getAltPositions","getLeafPosition1","getLeafPosition2","checkIfSameCluster","nextId","substr","equal","firstAlternative","leafPos","breakFlag","prevPos","prevLeafNeighbors","prevLeafNeighbor","thisLeaf","weightFunc","move","MapLayout","gridScaling","numberOChildren","numberOLeaves","numberOAnchors","descendants","dcdTraversalOrder","layoutAnchors","layoutAll","summarize","seamCarving","gridRadius","gridRange","extrema","anchorID","centerInfo","anchorOccupied","originalCoords","newCoords","anchorPosition","getPositionByCoordinates","positionID","foundMatch","newExistingList","existingNode","nghPositionID","nghNode","anchorName","childCID","subClusterNode","leafID","dcdInfo","childCluster","_prepare4Layout","prepare4Layout","_prepare4Layout2","extList","fbdList","descendant","yFactor","extCoords","leafCoords","roughCarving","moveVectors","getRoughCarvingVectors","moveDescendants","getFineCarvingVectors","carveNode","overallRange","rangeSegments","carveRows","carveColumns","column","carvePointsRow","carvePointsColumn","segment","carvePointRow","carvePointColumn","IDsRow","IDsColumn","carveValue","IDs","vector","cellEnergy","cellsODCD","allCells","_iteratorNormalCompletion22","_didIteratorError22","_iteratorError22","_step22","_iterator22","_iteratorNormalCompletion23","_didIteratorError23","_iteratorError23","_step23","_iterator23","moveOrders","moveDirections","directionUpdated","dontMove","_iteratorNormalCompletion24","_didIteratorError24","_iteratorError24","_step24","_iterator24","directionOLeaf","distanceOLeaf","leafCells","leafDirection","leafDistance","dcd","noMoveDirection","every","failed","moveDistances","oldCellEnergy","newCellsODCD","newCellEnergy","newCells","originalCells","failedOThis","tryToMove","_iteratorNormalCompletion25","_didIteratorError25","_iteratorError25","_step25","_iterator25","dcdMoveVector","newOccupied","trying","step","tryNode","cells","moveValues","directionDistance","_iteratorNormalCompletion26","_didIteratorError26","_iteratorError26","_step26","_iterator26","newCell","_iteratorNormalCompletion27","_didIteratorError27","_iteratorError27","_step27","_iterator27","_iteratorNormalCompletion28","_didIteratorError28","_iteratorError28","_step28","_iterator28","clusterContours","nonRepeatEdges","_iteratorNormalCompletion29","_didIteratorError29","_iteratorError29","_step29","_iterator29","_iteratorNormalCompletion31","_didIteratorError31","_iteratorError31","_step31","_iterator31","edgePosition","contourEdges","_iteratorNormalCompletion30","_didIteratorError30","_iteratorError30","_step30","_iterator30"],"mappings":"mNASAA,EAAA,GACAC,KAAA,UACAC,KAFA,WAGA,OACAC,UAAA,GACAC,gBAAA,GACAC,iBAAA,GACAC,kBAAA,IACAC,2BAAA,KACAC,uBAAA,GACAC,oBAAA,IACAC,iBAAA,IACAC,oBAAA,IACAC,mBAAA,IACAC,sBAAA,KACAC,uBAAA,KACAC,0BAAA,GACAC,qBAAA,GACAC,YACAC,YACAC,kBAAA,MAGAC,QAvBA,aAwBAC,SAAYC,OACZC,OAAAC,EAAA,EAAAD,EAEA,YACA,mBAGAE,OAUAC,UAAA,SAAAC,EAAAC,GACAC,KAAAC,eACAD,KAAAE,IAAAJ,EAAAI,IACAF,KAAAG,UAAAC,IAAAJ,KAAAE,IAAAG,UAAAC,UACAN,KAAAO,SAAAP,KAAAQ,cACA,MAAAT,EAAAG,IACAF,KAAAS,UAEAT,KAAAU,OACAV,KAAAW,SAGAC,cAtBA,SAsBAC,GAAA,IAAAC,EAAAd,KACA,OAAAa,EAAAE,MACA,gBACA,IAAAC,OAAA,EAEAA,OADAC,IAAAJ,EAAAK,UACAlB,KAAAmB,cAAAN,EAAAK,WAEAL,EAAAO,OAWA,IAAAC,KAhBAC,GAAA,EAAAC,GAAA,EAAAC,OAAAP,EAAA,IAiBA,QAAAQ,EAAAC,EAAAC,IAAA3B,KAAAO,YAAAe,GAAAG,EAAAC,EAAAE,QAAAC,MAAAP,GAAA,OAAAQ,EAAAL,EAAAM,MACA/B,KAAAgC,SAAAC,QAAAC,KAAAlB,KAAAc,KAAA,GACAT,EAAAc,KAAAL,IAnBA,MAAAM,GAAAb,GAAA,EAAAC,EAAAY,EAAA,aAAAd,GAAAI,EAAAW,QAAAX,EAAAW,SAAA,WAAAd,EAAA,MAAAC,GAsBA,IAAAc,KAtBAC,GAAA,EAAAC,GAAA,EAAAC,OAAAxB,EAAA,IAuBA,QAAAyB,EAAAC,EAAAhB,IAAAX,KAAAuB,GAAAG,EAAAC,EAAAf,QAAAC,MAAAU,GAAA,OAAAK,EAAAF,EAAAX,MACAO,EAAAH,KAAAd,EAAAY,QAAAW,KAxBA,MAAAR,GAAAI,GAAA,EAAAC,EAAAL,EAAA,aAAAG,GAAAI,EAAAN,QAAAM,EAAAN,SAAA,WAAAG,EAAA,MAAAC,GA0BA,IAAAI,EAAAC,KAAAC,IAAAC,MAAAF,KAAAR,GACAW,EAAAH,KAAAI,IAAAF,MAAAF,KAAAR,GACAa,EAAAL,KAAAM,MAAA,EAAApD,KAAApB,qBACA,OAAAiE,GAAAI,EAAA,EAAAE,EAAA,CACA,IACAE,EADArD,KAAAgC,SAAAsB,OACAH,EAEAI,GADAV,EAAAQ,EAAA,EAAAA,EAAAR,GACA7C,KAAAwD,eACAC,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,SACAE,aACAC,SAAA,MACAC,MAAA,kBAAAC,EAAAR,IACAS,GAAA,iBACA,QAAAC,EAAA,EAAAA,EAAAjD,EAAAsC,OAAAW,IAAA,CACA,IAAAC,EAAApD,EAAAqD,QAAAT,OAAA,aAAA1C,EAAAiD,IACAC,EAAAE,QAAA,2BACAF,EAAAE,QAAA,sBACAF,EAAAR,OAAA,gBAAAW,MAAA,cAGAvD,EAAAwD,WAAA,mBAEA,CACA,QAAAL,EAAA,EAAAA,EAAAjD,EAAAsC,OAAAW,IAAA,CACA,IAAAC,EAAAlE,KAAAmE,QAAAT,OAAA,aAAA1C,EAAAiD,IACAC,EAAAE,QAAA,2BACAF,EAAAE,QAAA,sBACAF,EAAAR,OAAA,gBAAAW,MAAA,cAGArE,KAAAsE,WAAA,aAIA,MACA,eACAtE,KAAAmE,QAAAI,UAAA,cAAAC,KAAA,WACA,IAAAN,EAAAT,GAAAC,OAAA1D,MACAkE,EAAAE,QAAA,qBACAF,EAAAE,QAAA,sBACAF,EAAAE,QAAA,4BACAF,EAAAR,OAAA,gBAAAW,MAAA,gBAIAZ,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,SACAE,aACAC,SAAA,MACAC,MAAA,kBAAAC,EAAA,IAEA/D,KAAAsE,WAAA,eACA,MACA,YAGAtD,OADAC,IAAAJ,EAAAK,UACAlB,KAAAmB,cAAAN,EAAAK,WAEAL,EAAAO,OAEApB,KAAAmE,QAAAI,UAAA,cAAAC,KAAA,WACA,IAAAN,EAAAT,GAAAC,OAAA1D,MACAkE,EAAAE,QAAA,qBACAF,EAAAE,QAAA,sBACAF,EAAAE,QAAA,4BACAF,EAAAR,OAAA,gBAAAW,MAAA,gBAGA,QAAAI,EAAA,EAAAA,EAAAzD,EAAAsC,OAAAmB,IAAA,CACA,IAAAC,EAAA1E,KAAAmE,QAAAT,OAAA,aAAA1C,EAAAyD,IACAC,EAAAN,QAAA,qBACAM,EAAAN,QAAA,sBACAM,EAAAN,QAAA,sBACAM,EAAAN,QAAA,4BACA,IAAAM,EAAAH,UAAA,gBAAAI,QAAA,GAAArB,QACAoB,EAAAhB,OAAA,gBAAAW,MAAA,cAIArE,KAAAsE,WAAA,aACA,MACA,cACAtE,KAAAmE,QAAAI,UAAA,cAAAC,KAAA,WACA,IAAAN,EAAAT,GAAAC,OAAA1D,MACAkE,EAAAE,QAAA,qBACAF,EAAAE,QAAA,sBACAF,EAAAE,QAAA,4BACAF,EAAAR,OAAA,gBAAAW,MAAA,gBAGArE,KAAAsE,WAAA,eACA,MACA,uBACAtE,KAAAgC,YACA,IAAAZ,UACAH,IAAAJ,EAAAO,YACAH,IAAAJ,EAAAK,UACAE,EAAApB,KAAAmB,cAAAN,EAAAK,WAEAlB,KAAAgC,SAAA4C,KAAAC,MAAAC,IAAA5C,KAAAlB,OAGAI,EAAAP,EAAAO,OAEA,QAAA2D,EAAA,EAAAA,EAAA3D,EAAAkC,OAAAyB,IACA/E,KAAAgC,SAAAG,KAAAD,KAAAlB,KAAAI,EAAA2D,KAEA/E,KAAAsE,WAAA,YAIA,SAAAP,EAAAiB,GACA,kBACA,IAAAf,EAAAR,GAAAwB,kBAAAjF,KAAAgF,aACA,gBAAAE,GAAAlF,KAAAgF,UAAAf,EAAAiB,QAKAC,QAAW1F,OACXC,OAAAC,EAAA,EAAAD,EACA,uBACA,0BAEAO,aAAA,WACAD,KAAAoF,MAAApF,KAAA2D,IAAA0B,YACArF,KAAAsF,OAAAtF,KAAA2D,IAAA4B,aAEA,cAAArD,KAAAsD,MACA/B,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,SACAW,MAAA,WAAArE,KAAAsF,OAAA,MACAjB,MAAA,cAAArE,KAAAsF,OAAA,MAGAtF,KAAAyF,UAAAC,WAAAjC,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,SAAAW,MAAA,UACArE,KAAA2F,eAAAD,WAAAjC,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,SAAAW,MAAA,WACArE,KAAA4F,WAAAC,SAAA7F,KAAAzB,gBAAAyB,KAAAsF,QACAtF,KAAA8F,YAAAD,SAAA7F,KAAAxB,iBAAAwB,KAAA4F,YACA5F,KAAA+F,aAAAF,SAAA7F,KAAAvB,kBAAAuB,KAAAoF,OACApF,KAAAgG,aAAAhG,KAAA8F,YACA9F,KAAAiG,kBAAAJ,SAAA7F,KAAArB,uBAAAqB,KAAA4F,YACA5F,KAAAkG,qBAAAlG,KAAAyF,UAAA,EAAAzF,KAAA+F,cAAA7D,KAAAiE,KAAA7C,OACAtD,KAAAoG,kBAAApG,KAAAkG,oBAAA,EACAlG,KAAAqG,gBAAArG,KAAAoG,kBACApG,KAAAsG,mBAAA,EAAAtG,KAAAoG,kBACApG,KAAAuG,mBAAAvG,KAAAsG,mBAAA,EAAAtG,KAAAoG,kBACApG,KAAAwG,4BAAAxG,KAAAoG,kBAAA,IACApG,KAAAyG,kBAAAzG,KAAAoG,kBAAApG,KAAAwG,4BAAA,EACAxG,KAAA0G,0BAAA1G,KAAAoG,kBAAApG,KAAAtB,2BACAsB,KAAA2G,oCAAA3G,KAAAwG,4BAAAxG,KAAAtB,2BACAsB,KAAA4G,0BAAA5G,KAAA0G,0BAAA1G,KAAA2G,oCAAA,EACA3G,KAAA6G,mBAAA7G,KAAAoG,kBACApG,KAAA8G,mBAAA,EAAA9G,KAAAoG,kBAGApG,KAAA+G,iBAAA,IAAAC,KAAA,SACAhH,KAAAiH,iBAAA,GAAAjH,KAAA0G,0BAAA1G,KAAAoG,mBACApG,KAAAkH,iBAAArB,SAAA7F,KAAAxB,iBAAAwB,KAAA4F,YAAA5F,KAAAiH,iBACAjH,KAAAmH,SAAAnH,KAAAsG,mBACAtG,KAAAoH,aAAApH,KAAAuG,mBAAAvG,KAAAsG,mBACAtG,KAAAqH,SAAA5D,GAAA6D,cACAC,QAAA,EAAA9D,GAAAP,IAAAhB,KAAAsF,QAAAnJ,KAAAoJ,aACAC,OAAA1H,KAAAkH,iBAAAlH,KAAA+G,mBACA/G,KAAA2H,gBAAA3H,KAAAkG,oBACAlG,KAAA4H,YAAA5H,KAAAmH,SAAAnH,KAAAoH,aAAA,EACApH,KAAA6H,mBAAA7H,KAAA2H,gBACA3H,KAAA8H,mBAAA9H,KAAA+G,iBAAAC,KAAA,WAEAhH,KAAA+H,UAAArC,WAAAjC,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,SAAAW,MAAA,UACArE,KAAAwD,eAAAqC,SAAA7F,KAAApB,oBAAA8G,WAAAjC,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,SAAAW,MAAA,YACArE,KAAAgI,WAAAhI,KAAAwD,eAAAtB,KAAAlB,KAAAsC,OAiBAtD,KAAAiI,kBAAAjI,KAAAkG,qBAAAlG,KAAAuG,mBAAAvG,KAAAyG,mBAAAzG,KAAAsG,mBAAAtG,KAAAoG,oBACApG,KAAAkI,MAAAlI,KAAA+F,aAAA/F,KAAAsG,mBAAAtG,KAAAoG,kBAAAP,SAAA7F,KAAAlB,oBAAAkB,KAAA+H,WACA/H,KAAAmI,MAAA,EACAnI,KAAAoI,cAAApI,KAAA+H,UAAA,EAAA/H,KAAAkI,MACAlI,KAAAqI,WAAAxC,SAAA7F,KAAAlB,oBAAAkB,KAAA+H,WACA/H,KAAAsI,eAAAtI,KAAAuG,mBAAAvG,KAAAyG,mBAAAzG,KAAAsG,mBAAAtG,KAAAoG,mBACApG,KAAAuI,gBAAA1C,SAAA7F,KAAAb,qBAAAa,KAAAwD,gBACAxD,KAAAwI,YAAAxI,KAAAwD,eAAAxD,KAAAuI,iBAAA,EACAvI,KAAAyI,4BAAAzI,KAAAwD,eAAAxD,KAAAuI,iBAAA,EACAvI,KAAA0I,iBAAA1I,KAAAyI,2BAAA,EACAzI,KAAA2I,iBAAA3I,KAAAyI,2BAAA,EACAzI,KAAA4I,qBAAA5I,KAAAoI,cAAA,EAAApI,KAAA2I,iBACA3I,KAAA6I,sBAAA7I,KAAAwD,eAAA,EAAAxD,KAAA0I,iBAoBA1I,KAAA8I,OACAC,EAAAtF,GAAA6D,cAAAC,QAAA,MAAAG,OAAA,QACAsB,EAAAvF,GAAA6D,cAAAC,QAAA,MAAAG,OAAA,QACAuB,EAAAxF,GAAA6D,cAAAC,QAAA,MAAAG,OAAA,UAGAhH,KAAA,WACAV,KAAAgC,SAAAE,KAAAlB,KACAhB,KAAAmE,QAAAV,GAAAC,OAAA1D,KAAA2D,KACAD,OAAA,SACAwF,OAAA,OACAC,KAAA,QAAAnJ,KAAA+H,WACAoB,KAAA,SAAAnJ,KAAAgI,YACAkB,OAAA,KACAC,KAAA,mBACAA,KAAA,YAPA,aAOAnJ,KAAAkI,MAPA,KAOAlI,KAAAmI,MAPA,KAQAnI,KAAAoJ,QAAA3F,GAAAC,OAAA1D,KAAA2D,KACAD,OAAA,SACAwF,OAAA,OACAC,KAAA,QAAAnJ,KAAAyF,WAEA0D,KAAA,SAAAnJ,KAAA2F,gBACAuD,OAAA,KACAC,KAAA,mBACAA,KAAA,YARA,aAQAnJ,KAAA+F,aARA,SAUAtF,OAAA,WACAT,KAAAqJ,QACArJ,KAAAU,OACAV,KAAAW,QAEA0I,MAAA,WAGA5F,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,SAAAa,UAAA,KAAA+E,SACA7F,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,SAAAa,UAAA,KAAA+E,UAEA3I,KAAA,WACAX,KAAAuJ,WACAvJ,KAAAwJ,WACAxJ,KAAAyJ,wBAEAD,SAAA,eAAAE,EAAA1J,KACA2J,EAAA3J,KA4HA,SAAA4J,EAAAC,GACAA,EACAzF,QAAA,+BACA+E,KAAA,IAAAQ,EAAAvD,mBASA,SAAA0D,EAAAD,GACAA,EACAzF,QAAA,+BACA+E,KAAA,IAAAQ,EAAAlD,mBACApC,MAAA,oBACAA,MAAA,eAAAsF,EAAAnD,6BA3IAxG,KAAA+J,MAAA/J,KAAAoJ,QACAF,OAAA,KACAC,KAAA,cACAnJ,KAAA+J,MACAxF,UAAA,YACAlG,KAAA6D,KAAAsF,QAAAnJ,KAAAoJ,WACAuC,QACAd,OAAA,QACAC,KAAA,mBACAA,KAAA,cAAAc,EAAAhG,GAAA,iBAAAA,IACAkF,KAAA,aAAAc,EAAAhG,GAAA,OAAAyF,EAAAvC,SAAAuC,EAAA/B,gBAAA1D,IACAkF,KAAA,aAAAc,GAAA,OAAAP,EAAArC,SAAA4C,KACAd,KAAA,QAAAnJ,KAAAoH,cACA+B,KAAA,kBAAAc,GAAA,OAAAP,EAAArC,SAAA,GAAAqC,EAAArC,SAAA4C,KACAjK,KAAA+J,MACAxF,UAAA,eACAlG,KAAA6D,KAAAsF,QAAAnJ,KAAAoJ,WACAuC,QACAd,OAAA,QACAC,KAAA,sBACAA,KAAA,aAAAc,EAAAhG,GAAA,OAAAyF,EAAA9B,YAAA8B,EAAA7B,mBAAA5D,IACAkF,KAAA,aAAAc,GAAA,OAAAP,EAAArC,SAAA4C,GAAAP,EAAA5B,qBACAoC,KAAA,SAAAD,GAAA,OAAAA,IAEAjK,KAAAmK,YAAAnK,KAAAoJ,QAAAF,OAAA,KACAC,KAAA,oBACAA,KAAA,YAFA,gBAEAnJ,KAAAgG,aAFA,KAGAhG,KAAAmK,YACA5F,UAAA,oBACAlG,KAAA6D,KAAAiE,MACA6D,QACAd,OAAA,KACAC,KAAA,2BACAA,KAAA,cAAAc,EAAAhG,GAAA,wBAAAA,IACAkF,KAAA,qBAAAc,EAAAhG,GAAA,mBAAAyF,EAAAxD,oBAAAjC,EAAA,SACAO,KAAA,SAAA4F,EAAAC,GACA5G,GAAAC,OAAA1D,MACAkJ,OAAA,UACAC,KAAA,6BACAA,KAAA,KAAAQ,EAAArD,oBACA6C,KAAA,KAAAQ,EAAAtD,iBACA8C,KAAA,IAAAQ,EAAAvD,mBACApC,GAAA,mBACA,IAAAsG,EAAAX,EAAAQ,YAAAzG,OAAA,mBAAA2G,GAAA3G,OAAA,sBACA4G,EAAAlG,QAAA,8BACA0F,EAAAQ,GACAX,EAAAvK,SAAAkK,OAAAe,IAEA,IAAAE,EAAA9G,GAAAC,OAAA1D,MACAuK,EAAAnG,QAAA,6BACAwF,EAAAW,GACAZ,EAAAtK,SAAAiK,OAAAe,KAEAE,EAkEAnG,QAAA,+BACA+E,KAAA,IAAAQ,EAAAjD,2BAlEAiD,EAAAtK,SAAA8C,KAAAkI,IAEAV,EAAArF,WAAA,YACAqF,EAAAa,mBAEA/G,GAAAC,OAAA1D,MACAkJ,OAAA,UACAC,KAAA,6BACAA,KAAA,KAAAQ,EAAApD,oBACA4C,KAAA,KAAAQ,EAAAtD,iBACA8C,KAAA,IAAAQ,EAAAlD,mBACApC,MAAA,oBACAA,MAAA,eAAAsF,EAAAnD,6BACAxC,GAAA,mBACA,IAAAyG,EAAAd,EAAAQ,YAAAzG,OAAA,mBAAA2G,GAAA3G,OAAA,sBACA+G,EAAArG,QAAA,8BACAwF,EAAAa,GACAd,EAAAtK,SAAAiK,OAAAe,IAEA,IAAAE,EAAA9G,GAAAC,OAAA1D,MACAuK,EAAAnG,QAAA,6BACA0F,EAAAS,GACAZ,EAAAvK,SAAAkK,OAAAe,KAEAE,EAmDAnG,QAAA,+BACA+E,KAAA,IAAAQ,EAAA/C,2BACAvC,MAAA,oBACAA,MAAA,eAAAsF,EAAAhD,qCArDAgD,EAAAvK,SAAA+C,KAAAkI,IAEAV,EAAArF,WAAA,YACAqF,EAAAa,mBAEA/G,GAAAC,OAAA1D,MACAkJ,OAAA,QACAC,KAAA,6BACAA,KAAA,IAAAQ,EAAA9C,oBACAsC,KAAA,IAAAQ,EAAA7C,oBAEAoD,KAAA,WACA,OAAAE,EAAA9G,OAAA,EACA8G,EAAAM,MAAA,WAEAN,IAGApG,GAAA,uBACAP,GAAAC,OAAA1D,MACAkK,KAAAE,KAEApG,GAAA,sBACAP,GAAAC,OAAA1D,MACAkK,KAAA,WACA,OAAAE,EAAA9G,OAAA,EACA8G,EAAAM,MAAA,WAEAN,QAQApK,KAAAoJ,QAAA7E,UAAA,sBAAA4E,KAAA,sBAAAnJ,KAAA1B,UAAA,MA2BAiL,SAAA,eAAAoB,EAAA3K,KACA2J,EAAA3J,KAEAA,KAAAmE,QACAI,UAAA,cACAlG,KAAA2B,KAAAO,UACAyJ,QACAd,OAAA,KACAC,KAAA,qBACAA,KAAA,cAAAc,GAAA,kBAAAA,IACAd,KAAA,iBAAAc,GAAA,OAAAA,IACAd,KAAA,qBAAAc,EAAAhG,GAAA,sBAAA0G,EAAAnH,eAAAS,EAAA,MAEAO,KAAA,SAAA4F,EAAAC,GAAA,IAAAO,EAAA5K,KACAyD,GAAAC,OAAA1D,MACAkJ,OAAA,QACAC,KAAA,qBACAA,KAAA,OACAA,KAAA,OACAA,KAAA,QAAAQ,EAAAvB,eACAe,KAAA,SAAAQ,EAAAnG,gBACA2F,KAAA,gBAAAc,GACA,IAAAY,EAAA3I,KAAA4I,OAAAb,GAMA,iBAJA,IAAAY,EAAA,OACA,IAAAA,EAAA,OACA,IAAAA,EAAA,KAEA,MAGApH,GAAAC,OAAA1D,MACAuE,UAAA,cACAlG,KAAA6D,KAAAiE,MACA6D,QACAd,OAAA,QACAC,KAAA,qBACAA,KAAA,aAAAc,EAAAhG,GAAA,OAAA0F,EAAAtB,YAAAsB,EAAArB,eAAAqB,EAAA1B,mBAAAhE,IACAkF,KAAA,IAAAQ,EAAAnB,YACAW,KAAA,QAAAQ,EAAArB,gBACAa,KAAA,SAAAQ,EAAApB,iBACAY,KAAA,gBAAAc,EAAAhG,GAAA,YAAA/B,KAAAlB,KAAAoJ,GAAAnG,GAAA,oBAEAR,GAAAC,OAAA1D,MACAkJ,OAAA,QACAC,KAAA,uBACAA,KAAA,IAAAQ,EAAAhB,kBACAQ,KAAA,IAAAQ,EAAAjB,kBACAS,KAAA,QAAAQ,EAAAf,sBACAO,KAAA,SAAAQ,EAAAd,uBACAxE,MAAA,eAAAsF,EAAAlB,4BACApE,MAAA,aACAZ,GAAAC,OAAA1D,MACAgE,GAAA,uBACAP,GAAAC,OAAAkH,GAAAxG,QAAA,2BACAX,GAAAC,OAAAkH,GAAAxG,QAAA,sBACAX,GAAAC,OAAAkH,GAAAlH,OAAA,gBAAAW,MAAA,aACAsF,EAAArF,WAAA,aACAqF,EAAAoB,sBACA3J,QAAAgJ,EAAA,IACArJ,KAAA,aAIAiD,GAAA,sBACAP,GAAAC,OAAAkH,GAAAxG,QAAA,qBACAX,GAAAC,OAAAkH,GACAxG,QAAA,sBACAA,QAAA,4BACAX,GAAAC,OAAAkH,GAAAlH,OAAA,gBAAAW,MAAA,aACAsF,EAAArF,WAAA,eACAqF,EAAAoB,sBACA3J,YAAAH,EACAF,KAAA,aAIAiD,GAAA,mBACAP,GAAAC,OAAAkH,GAAAxG,QAAA,oBACAX,GAAAC,OAAAkH,GACAxG,QAAA,sBACAA,QAAA,4BACAX,GAAAC,OAAAkH,GAAAlH,OAAA,gBAAAW,MAAA,aACAsF,EAAArF,WAAA,eACAqF,EAAAoB,sBACA3J,YAAAH,EACAF,KAAA,YAIA4I,EAAAxF,QAAAI,UAAA,cACAH,QAAA,sBACAA,QAAA,4BACAuF,EAAAxF,QAAAI,UAAA,gBAAAF,MAAA,aACAZ,GAAAC,OAAAkH,GACAxG,QAAA,sBACAA,QAAA,sBACAA,QAAA,4BACAX,GAAAC,OAAAkH,GAAAlH,OAAA,gBAAAW,MAAA,aACAsF,EAAArF,WAAA,aACAqF,EAAAoB,sBACA3J,QAAAgJ,EAAA,IACArJ,KAAA,eAWAf,KAAAmE,QAAAI,UAAA,cACA4E,KAAA,oBAEAM,qBAAA,WACA,IAAAjE,EAAAtD,KAAAsD,KAEAwF,OAAA,EAEA,OAAAxF,GACA,WACAwF,EAAA,GACAhL,KAAA1B,UAAA,GACA0B,KAAA8G,mBAAA,IAAA9G,KAAAoG,kBACA,MACA,gBACA4E,EAAA,GAEAhL,KAAA1B,UAAA,EACA0B,KAAA6G,mBAAA7G,KAAAkG,oBAAA,EACAlG,KAAA8G,mBAAA,EAAA9G,KAAAoG,kBACApG,KAAAoJ,QAAA7E,UAAA,sBACA4E,KAAA,IAAAnJ,KAAA6G,oBACAxC,MAAA,wBACArE,KAAAoJ,QAAA7E,UAAA,eACAF,MAAA,qBACA,MACA,QACA2G,EAAA,IACAhL,KAAA1B,UAAA,GACA0B,KAAA8G,mBAAA,EAAA9G,KAAAoG,kBAGApG,KAAAoJ,QAAA7E,UAAA,sBACA4E,KAAA,IAAAnJ,KAAA8G,oBACAqC,KAAA,YAFA,UAEAnJ,KAAA1B,UAFA,KAGA+F,MAAA,YAAA2G,EAHA,MAKA,cAAAxF,GACAxF,KAAAoJ,QAAA7E,UAAA,sBACAC,KAAA,SAAAyF,GACAgB,OAAAxH,GAAAC,OAAA1D,MAAAkK,OAAAgB,QAAA,UACA,GACAzH,GAAAC,OAAA1D,MAAAqE,MAAA,yBAKA7D,YAAA,WAgBA,IAfA,IAAAL,EAAAH,KAAAG,UACAI,KACA4K,KACA3D,EAAAtF,KAAAsF,QAWA4D,EAaA,SAAAhK,GAEA,IADA,IAAAiK,KADAC,EAAA,SAEAC,GACA,IAAAC,EAAApK,EAAAmK,GACAE,EAAAtL,EAAAuL,KAAA,SAAAD,GAAA,OAAAA,EAAAE,KAAAH,IACAH,EAAAlJ,KAAAsJ,EAAAG,OAAAC,YAAAC,IAHAP,EAAA,EAAAA,EAAAnK,EAAAkC,OAAAiI,IAAAD,EAAAC,GAKA,OAGAQ,EAHAV,EAIAU,EAAA7L,IAAA,SAAAJ,EAAAkM,GAAA,OAAAA,MAAAlM,SACAmM,KAAA,SAAAC,EAAAC,GAAA,OAAAD,EAAApM,IAAAqM,EAAArM,IAAA,EAAAoM,EAAApM,KAAAqM,EAAArM,IAAA,OACAI,IAAA,SAAAkM,GAAA,OAAAA,EAAAJ,MAHA,IAAAD,EAvBAM,CAAAnK,KAAAoK,cACArI,EAAA,EAAAA,EAAAmH,EAAA9H,OAAAW,IACAkH,EAAAhJ,KAAAa,MAAAmI,EAAAoB,IAAA/E,EAAAgF,SAAApB,EAAAnH,IAAA5F,KAAAoO,oBAEA,QAAAC,EAAA,EAAAA,EAAAlF,EAAAnJ,KAAAsO,kBAAArJ,OAAAoJ,IACA,GAAAlF,EAAAnJ,KAAAsO,kBAAAD,GAAA,IACAnM,EAAA4B,KAAAqF,EAAAnJ,KAAAsO,kBAAAD,GAAA,IAKA,OADAnM,EAAAqM,QAAA5J,MAAAzC,EAAA4K,GACA5K,GAkBA+D,WAAA,SAAAvD,GACA,IAAA4I,EAAA3J,KACA6M,OAAA,EAgBA,SAAAC,IACA,IAAAC,KAMA,OALApD,EAAAxF,QAAAI,UAAA,cAAAC,KAAA,SAAA4F,EAAAC,IACA5G,GAAAC,OAAA1D,MAAAoE,QAAA,oBAAAX,GAAAC,OAAA1D,MAAAoE,QAAA,qBACA2I,EAAA5K,KAAAiI,KAGA2C,EAtBA,aAAAhM,GACA8L,EAAA7M,KAAAgN,uBAAAhN,KAAAgC,UACAhC,KAAAiN,WAAAJ,GACA7M,KAAAkN,WAAAL,IACA,cAAA9L,GACA8L,EAAAC,IACA9M,KAAAiN,WAAAJ,IACA,gBAAA9L,IAEA,KADA8L,EAAAC,KACAxJ,SACAuJ,EAAA7M,KAAAgN,uBAAAhN,KAAAgC,WAEAhC,KAAAiN,WAAAJ,KAaAG,uBAAA,SAAAhM,GAGA,IAFA,IAAA2I,EAAA3J,KACA+M,KACA9I,EAAA,EAAAA,EAAAjD,EAAAsC,OAAAW,IAAA,CACA,IAAAkJ,EAAAC,EAAApM,EAAAiD,GAAA,QACAoJ,EAAAD,EAAApM,EAAAiD,GAAA,QACAkJ,GAAAE,GACAN,EAAA5K,KAAAD,KAAAlB,KAAAiB,QAAAjB,EAAAiD,KAGA,OAAA8I,EAEA,SAAAK,EAAAxK,EAAA0K,GACA,IAAAjD,EAAA,EACA,YAAAiD,EACA,KAAAjD,EAAAV,EAAAvK,SAAAkE,QAAA,CAEA,SAAAV,EADA+G,EAAAvK,SAAAiL,IAEA,SAEAA,SAGA,KAAAA,EAAAV,EAAAtK,SAAAiE,QAAA,CAEA,SAAAV,EADA+G,EAAAtK,SAAAgL,IAEA,SAEAA,IAGA,WAGA4C,WAAA,SAAAJ,GAEA,IAFA,IAAAU,EAAAvN,KACAwN,EAAA,IAAAC,MAAAvL,KAAAiE,KAAA7C,QAAAoK,KAAA,GADAC,EAAA,SAEA1J,GACA,IAAA2J,EAAA1L,KAAAlB,KAAA6L,EAAA5I,IAAA4J,MAAA,IAAA3N,IAAA+K,QACAuC,IAAAtN,IAAA,SAAA+J,EAAAhG,GAAA,OAAAgG,EAAA2D,EAAA3J,MAFAA,EAAA,EAAAA,EAAA4I,EAAAvJ,OAAAW,IAAA0J,EAAA1J,GAIAjE,KAAAqH,SAAAE,QAAA,EAAA9D,GAAAP,IAAAsK,KACAxN,KAAA+J,MACAxF,UAAA,YACAlG,KAAAmP,GACA5J,aACAC,SAAA7D,KAAAV,mBACA6J,KAAA,aAAAc,GAAA,OAAAsD,EAAAlG,SAAA4C,KACAd,KAAA,kBAAAc,GAAA,OAAAsD,EAAAlG,SAAA,GAAAkG,EAAAlG,SAAA4C,KAEAjK,KAAA+J,MACAxF,UAAA,eACAlG,KAAAmP,GACA5J,aACAC,SAAA7D,KAAAV,mBACA6J,KAAA,aAAAc,GAAA,OAAAsD,EAAAlG,SAAA4C,GAAAsD,EAAAzF,qBACAoC,KAAA,SAAAD,GAAA,OAAAA,KAEAiD,WAAA,SAAAL,GACA,IAAAlD,EAAA3J,KACA8N,KASAC,GARA/N,KAAAmE,QAAAI,UAAA,cACAyJ,OAAA,WACA,cAAAvK,GAAAC,OAAA1D,MAAAqE,MAAA,eACA,IAAA4J,EAAAC,SAAAzK,GAAAC,OAAA1D,MAAAmJ,KAAA,UAEA,OADA2E,EAAA3L,KAAA8L,IACA,KAGAjO,KAAAmE,QAAAI,UAAA,cACAyJ,OAAA,WACA,IAAAC,EAAAC,SAAAzK,GAAAC,OAAA1D,MAAAmJ,KAAA,UACA,WAAA0D,EAAA5K,QAAAgM,MAEAE,EAAAnO,KAAAmE,QAAAI,UAAA,cACAyJ,OAAA,WACA,IAAAC,EAAAC,SAAAzK,GAAAC,OAAA1D,MAAAmJ,KAAA,UACA,UAAA0D,EAAA5K,QAAAgM,KAGAG,EAAAC,EAAAC,WACAC,EAAAF,EAAAC,YAMA,SAAAE,GACA,IAAAC,EAAAV,EAAAC,OAAA,WACA,IAAAC,EAAAC,SAAAzK,GAAAC,OAAA1D,MAAAmJ,KAAA,UACA,WAAA2E,EAAA7L,QAAAgM,KAEA,OAAAQ,EAAA9J,QAAA,GAAArB,OAEA,YADAkL,EAAAE,UAGAD,EACA7K,aACAC,SAAA,KACAQ,MAAA,aACAL,GAAA,eAAAiG,EAAAhG,GACAR,GAAAC,OAAA1D,MAAAqE,MAAA,uBACAJ,IAAAwK,EAAA9J,QAAA,GAAArB,OAAA,GACAkL,EAAAE,YApBAC,CAAAP,GACAC,EAAAO,KAAAR,GAAAvM,KAAA,kBAwBA,SAAA2M,GACA,IAAAK,EAAAlF,EAAAnG,eAAAqJ,EAAAvJ,OACAuL,EAAAlF,EAAA3B,aACA2B,EAAA3B,WAAA6G,EACApL,GAAAC,OAAAiG,EAAAhG,KAAAD,OAAA,SAAAA,OAAA,OACAyF,KAAA,SAAAQ,EAAA3B,aAEAmG,EACAvK,aACAC,SAAA,KACAsF,KAAA,qBAAAc,EAAAhG,GAAA,sBAAA0F,EAAAnG,eAAAS,EAAA,MACAD,GAAA,eAAAiG,EAAAhG,GACAA,IAAAkK,EAAAxJ,QAAA,GAAArB,OAAA,GACAkL,EAAAE,YArCAI,CAAAP,KACAF,EAAAO,KAAAL,GAAA1M,KAyCA,WACA8H,EAAA3B,WAAA2B,EAAAnG,eAAAqJ,EAAAvJ,OACAG,GAAAC,OAAAiG,EAAAhG,KAAAD,OAAA,SAAAA,OAAA,OACAyF,KAAA,SAAAQ,EAAA3B,YACAmG,EACA9J,MAAA,wBACAT,aACAC,SAAA,KACAQ,MAAA,gBAmDAlD,cAAA,SAAAD,GAGA,IAFA,IAAA6N,EAAA7M,KAAAsF,QAAAwH,YAAA9N,GAAA+N,KACA7N,KACA6C,EAAA,EAAAA,EAAA8K,EAAAzL,OAAAW,IACA7C,EAAAe,KAAA4M,EAAA9K,GAAA,IAGA,IADA,IAAAjD,KACAkO,EAAA,EAAAA,EAAA9N,EAAAkC,OAAA4L,IACAlO,EAAAmB,KAAAD,KAAAlB,KAAAI,EAAA8N,KAGA,OADA9N,EAAApB,KAAAgN,uBAAAhM,IAGAwJ,eAAA,WACA,IAAA2E,EAAA,IAAA1B,MAAAvL,KAAAiE,KAAA7C,QAAAoK,MAAA,GACAyB,EAAAC,QAAA,EACA,QAAAnL,EAAA,EAAAA,EAAAjE,KAAAX,SAAAiE,OAAAW,IACAkL,EAAAnP,KAAAX,SAAA4E,IAAA,EAEA,QAAAoL,EAAA,EAAAA,EAAArP,KAAAZ,SAAAkE,OAAA+L,IACAF,EAAAnP,KAAAZ,SAAAiQ,IAAA,EAEA,IAAArP,KAAAX,SAAAiE,QAAA,IAAAtD,KAAAZ,SAAAkE,SACA6L,EAAAC,QAAA,GAEApP,KAAAsP,sBACAH,eAGAI,oCAAA,WACA9L,GAAA+L,OACAC,EAAA,SAAAxF,GAAA,OAAAA,EAAAwF,IACA3D,EAAA,SAAA7B,GAAA,OAAAA,EAAA6B,IAIA,IANA,IAIAd,OAAA,EACA0E,GAAA,EACAA,GAAA,CACA1E,EAAAtF,WAAA1F,KAAAoJ,QAAA1F,OAAA,sBAAAW,MAAA,cACAqL,GAAA,EACA,IAAAC,KAHAC,GAAA,EAAAC,GAAA,EAAAC,OAAA7O,EAAA,IAIA,QAAA8O,EAAAC,EAAArO,IAAA3B,KAAAoJ,QAAA7E,UAAA,sBAAAI,QAAA,MAAAiL,GAAAG,EAAAC,EAAApO,QAAAC,MAAA+N,GAAA,OACAK,EADAF,EAAAhO,MACAmO,wBACAP,EAAAxN,OACAsN,EAAAQ,EAAAR,EAAA3D,EAAAmE,EAAAnE,IACA2D,EAAAQ,EAAAR,EAAAQ,EAAA7K,MAAA0G,EAAAmE,EAAAnE,IACA2D,EAAAQ,EAAAR,EAAAQ,EAAA7K,MAAA0G,EAAAmE,EAAAnE,EAAAmE,EAAA3K,SACAmK,EAAAQ,EAAAR,EAAA3D,EAAAmE,EAAAnE,EAAAmE,EAAA3K,WAVA,MAAAlD,GAAAyN,GAAA,EAAAC,EAAA1N,EAAA,aAAAwN,GAAAI,EAAA3N,QAAA2N,EAAA3N,SAAA,WAAAwN,EAAA,MAAAC,GAcA,IADA,IAAAK,EAAAnQ,KAAAoQ,mBAAAT,EAAA3P,KAAA1B,WACA2F,EAAA,EAAAA,EAAAkM,EAAA7M,OAAA,EAAAW,IACA,GAAAjE,KAAAqQ,mBAAAF,EAAAlM,GAAAkM,EAAAlM,EAAA,KACA+G,GAAA,GACAhL,KAAAoJ,QAAA7E,UAAA,sBAAAF,MAAA,YAAA2G,EAAA,MACA0E,GAAA,EACA,SAgBAY,SAAA,SAAAC,GACA,OAAAA,EAAAzN,KAAA0N,GAAA,KAEAJ,mBAAA,SAAAK,EAAAF,GACA,IAAAG,KACAC,EAAA3Q,KAAAsQ,SAAAC,GAFAK,GAAA,EAAAC,GAAA,EAAAC,OAAA7P,EAAA,IAIA,QAAA8P,EAAAC,EAAArP,IAAA8O,KAAAG,GAAAG,EAAAC,EAAApP,QAAAC,MAAA+O,GAAA,OAAAjB,EAAAoB,EAAAhP,MACAkP,GAAAtB,EAAA,GAAAF,EAAAE,EAAA,GAAAF,GAAA,EACAyB,GAAAvB,EAAA,GAAA7D,EAAA6D,EAAA,GAAA7D,GAAA,EACAqF,KAHAC,GAAA,EAAAC,GAAA,EAAAC,OAAArQ,EAAA,IAIA,QAAAsQ,EAAAC,EAAA7P,IAAAgO,KAAAyB,GAAAG,EAAAC,EAAA5P,QAAAC,MAAAuP,GAAA,OAAAK,EAAAF,EAAAxP,MACA2P,EAAAD,EAAAhC,EAAAwB,EACAU,EAAAF,EAAA3F,EAAAoF,EAGAzB,EAFAiC,EAAA5O,KAAA8O,IAAAjB,GAAAgB,EAAA7O,KAAA+O,IAAAlB,GAEAM,EACAnF,EAFA4F,EAAA5O,KAAA+O,IAAAlB,GAAAgB,EAAA7O,KAAA8O,IAAAjB,GAEAO,EACAC,EAAAhP,MAAAsN,IAAA3D,OAXA,MAAA1J,GAAAiP,GAAA,EAAAC,EAAAlP,EAAA,aAAAgP,GAAAI,EAAAnP,QAAAmP,EAAAnP,SAAA,WAAAgP,EAAA,MAAAC,GAaAZ,EAAAvO,KAAAgP,IAjBA,MAAA/O,GAAAyO,GAAA,EAAAC,EAAA1O,EAAA,aAAAwO,GAAAI,EAAA3O,QAAA2O,EAAA3O,SAAA,WAAAwO,EAAA,MAAAC,GAoBA,OAAAJ,GAEAL,mBAAA,SAAAnE,EAAAC,GACA,IACA2F,EAAAC,EAAAC,EAAA/N,EAAAgO,EAAAC,EAAAC,EAAAC,EADAC,GAAAnG,EAAAC,GAGA,IAAAlI,EAAA,EAAAA,EAAAoO,EAAA/O,OAAAW,IAAA,CAIA,IAAAqO,EAAAD,EAAApO,GACA,IAAAgO,EAAA,EAAAA,EAAAK,EAAAhP,OAAA2O,IAAA,CAGA,IAAAM,GAAAN,EAAA,GAAAK,EAAAhP,OACAkP,EAAAF,EAAAL,GACAQ,EAAAH,EAAAC,GAGAG,GAAAjD,EAAAgD,EAAA3G,EAAA0G,EAAA1G,IAAA0G,EAAA/C,EAAAgD,EAAAhD,GAKA,IAHAqC,EAAAC,OAAA9Q,EAGAiR,EAAA,EAAAA,EAAAhG,EAAA5I,OAAA4O,IACAF,EAAAU,EAAAjD,EAAAvD,EAAAgG,GAAAzC,EAAAiD,EAAA5G,EAAAI,EAAAgG,GAAApG,QACA7K,IAAA6Q,GAAAE,EAAAF,KACAA,EAAAE,SAEA/Q,IAAA8Q,GAAAC,EAAAD,KACAA,EAAAC,GAOA,IADAG,EAAAC,OAAAnR,EACAiR,EAAA,EAAAA,EAAA/F,EAAA7I,OAAA4O,IACAF,EAAAU,EAAAjD,EAAAtD,EAAA+F,GAAAzC,EAAAiD,EAAA5G,EAAAK,EAAA+F,GAAApG,QACA7K,IAAAkR,GAAAH,EAAAG,KACAA,EAAAH,SAEA/Q,IAAAmR,GAAAJ,EAAAI,KACAA,EAAAJ,GAMA,GAAAD,EAAAI,GAAAC,EAAAN,EACA,UAIA,0OCniCMa,aACJ,SAAAA,EAAaC,EAAKC,EAAQC,EAAWC,EAAaC,GAAUC,IAAAjT,KAAA2S,GAC1D,IAAIO,GACFC,EAAS,EAANP,EAAU9P,KAAKsQ,KAAK,GAAK,EAC5BC,KAAMR,EACNS,QAASR,EACTS,UAAWR,EACXS,WAAY,EACZC,YAAa,EACbC,cAAe,GACf5I,OAAQkI,EACRW,SAAU,KACVC,gBACEC,UAAW,KACXC,gBAAiB,eACjBC,WAAY,QACZC,YAAa,UACbC,cAAe,GACfC,QACEC,OAAQ,SACRC,OAAQ,UACRC,MAAO,MACP3B,SAAS,IAEX4B,kBAAmB,KACnBC,cAAe,aACfC,UAAW,eAGfC,IAAczU,KAAMkT,oDAGRwB,GAwDZ,OAAO,IAxDgB,WAErB,SAAAC,EAAaD,GAAWzB,IAAAjT,KAAA2U,GAClB,IAAAC,EAAcF,EAAUG,UAAxBC,EAAAC,IACoBL,EAAUM,KAD9B,GACDC,EADCH,EAAA,GACQI,EADRJ,EAAA,GAEJ9U,KAAKgV,MAAQC,EAASC,GACtBlV,KAAKmV,UAAYT,EAAUS,UAC3BnV,KAAKoV,WAAuB,GAAVH,GAAiBL,EAAkC,MAAnBA,EAAc,IAChE5U,KAAKqV,YAAyB,GAAXH,EACnBlV,KAAKsV,UAAYxS,KAAKC,IAAI/C,KAAKoV,WAAYpV,KAAKqV,aAChDrV,KAAKuV,OAASb,EAAUa,OACxBvV,KAAKwV,aAAeP,EAAUL,EAAc5U,KAAKoV,WAA8B,EAAjBpV,KAAKuV,OAAO,KAAWX,EAAc,GACnG5U,KAAKyV,cAAgBP,EAAWlV,KAAKqV,aAAe,EACpDrV,KAAKe,KAAO2T,EAAU3T,KAbH,OAAA2U,IAAAf,IAAAgB,IAAA,OAAA5T,MAAA,SAef6T,EAAKC,GAAQ,IAAA/U,EAAAd,KACb8V,EAAc9V,KAAKsV,UACrBS,EAAe/V,KAAKoV,WACpBY,EAAgBhW,KAAKqV,YACrBY,EAAgBjW,KAAKuV,OAErBW,GADsBlW,KAAKyV,aACXzV,KAAKwV,aACrBW,EAASnW,KAAKe,KAChB6U,EACGrR,UAAU,IAAMvE,KAAKmV,WACrB9W,KAAKwX,GACL7L,QACAd,OAAO,KACPC,KAAK,QAASnJ,KAAKmV,WACnBhM,KAAK,YAAa,SAACiN,EAAOC,GACzB,MAAO,cAAgBJ,EAAc,IAAMF,EAAeG,GAAiBG,EAAMH,EAAepV,EAAKyU,OAAO,GAAKzU,EAAK2U,cAAgB,MAEvIjR,KAAK,SAAU4R,GACd,OAAQD,GACN,IAAK,YACH1S,GAAGC,OAAO1D,MACPoE,QAAQ,QAAkB,GAATgS,GACjBlN,OAAO,QACPC,KAAK,IAAK,GACVA,KAAK,IAAK,GACVA,KAAK,QAAS4M,GACd5M,KAAK,SAAU6M,GAClB,MACF,IAAK,SACH,IAAIM,EAAMR,EAAc,EACxBrS,GAAGC,OAAO1D,MACPoE,QAAQ,QAAkB,GAATgS,GACjBlN,OAAO,UACPC,KAAK,KAAMmN,GACXnN,KAAK,KAAMmN,GACXnN,KAAK,IAAKmN,UAlDF3B,EAAA,GAwDhB,CAAcD,sCAGX6B,EAAMC,EAASC,EAAQC,GACjCH,EAAKrN,OAAO,QACT9E,QAAQ,aAAa,GACrBA,QAAQ,QAAQ,GAChB+E,KAAK,IAAKqN,GACVrN,KAAK,OAAQsN,GACbtN,KAAK,eAAgBuN,GACrBtS,QAAQ,QAAQ,0CAGLmS,EAAMI,EAAYC,EAAMC,GAAU,IAAAnN,EAAA1J,KAChDuW,EAAKhS,UAAU,QACZlG,KAAKsY,GACL3M,QACAd,OAAO,KACPC,KAAK,QAAS,YACdA,KAAK,YAAa,SAAA2N,GACjB,MAAO,UAAaA,EAAMC,MAAQjU,KAAK0N,GAAK,IAAO,MAEpDtH,OAAO,QACPC,KAAK,KAAMyN,EAAO9T,KAAKsQ,KAAK,GAAK,GACjCjK,KAAK,KAAMyN,EAAO9T,KAAKsQ,KAAK,GAAK,GACjCjK,KAAK,KAAa,GAAPyN,GACXzN,KAAK,KAAc,IAAPyN,GACZzN,KAAK,UAAW,SAAA2N,GACf,OAAkB,MAAdA,EAAME,KACJH,EACK,GAEA,EAGDC,EAAME,OAIjB7N,KAAK,SAAU,QACfA,KAAK,eAAgB,SAAA2N,GACpB,OAAkB,MAAdA,EAAME,KACJH,EACKnN,EAAK8J,WAAa,KAElB,MAGW,GAAbsD,EAAME,KAAatN,EAAK+J,YAAc,yCAK1C8C,EAAMU,GAEf,IADA,IAAIC,EAAkB,EAAVpU,KAAK0N,GAASyG,EAAQ3T,OACzBW,EAAI,EAAGA,EAAIgT,EAAQ3T,OAAQW,IAAK,CACvC,IAAIkT,EAASD,EAAQjT,EACrBsS,EAAKrN,OAAO,QACTC,KAAK,QAAS,WACdA,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAkB,GAAZnJ,KAAKqT,KAAa4D,EAAQhT,GAAKnB,KAAK8O,IAAIuF,IACnDhO,KAAK,KAAkB,GAAZnJ,KAAKqT,KAAa4D,EAAQhT,GAAKnB,KAAK+O,IAAIsF,qCAIjDZ,EAAMU,EAASG,EAAOX,EAAQY,EAAQC,EAAOC,GAepD,IAf+G,IAAnDC,EAAmDC,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,IAAAA,UAAA,GAAhCC,EAAgCD,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,GAAAA,UAAA,GAApB,KAAME,EAAcF,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,GAAAA,UAAA,GAAN,KACrGP,EAAkB,EAAVpU,KAAK0N,GAASyG,EAAQ3T,OAChCsU,EAAS5X,KACT6X,GAAsD,IAAtC3V,KAAKoK,aAAarK,QAAQmV,GAC1CU,GAA0D,IAAxC5V,KAAK6V,eAAe9V,QAAQmV,GAC9CY,EAAWvU,GAAGwU,MACXC,YAAYX,GACZY,YAAYb,GACZc,YAAYlB,EAAQlX,KAAK0T,eACzB2E,SAASnB,EAAQlX,KAAK0T,eACzB4E,EAAc7U,GAAGwU,MACdC,YAAYX,GACZY,YAAYd,GACZe,YAAYlB,EAAQlX,KAAK0T,eACzB2E,SAASnB,EAAQlX,KAAK0T,eAdoFpI,EAAA,SAetGrH,GACP,IAAIkT,EAAS,IAAMF,EAAQ3T,OAASW,EACpCsS,EAAKrN,OAAO,KACTC,KAAK,QAAS,UACd/E,QAAQ,aAAa,GACrB+E,KAAK,YAAa,UAAYgO,EAAS,KACvChO,KAAK,QAASiO,EAAQ,IAAMnT,GAC5BkF,KAAK,YAAa,WACjB,GAAKqO,EAEE,CAEL,IAAIe,GAASb,EAAUzT,GAAK0T,EAAM5U,MAAQ4U,EAAMzU,IAAMyU,EAAM5U,KAG5D,OAFAwV,EAAgB,GAARA,EAAa,GAEd,IADPA,EAAQ,GAAKzV,KAAK0V,KAAKD,GAAS,IALhC,OAAO,IAUVpP,KAAK,UAAW,WACf,OAAKqO,GAGUE,EAAUzT,GAAK0T,EAAM5U,MAAQ4U,EAAMzU,IAAMyU,EAAM5U,KAFrD,IAQVmG,OAAO,QACP9E,QAAQ,OAAuB,GAAd6S,EAAQhT,IAEzBkF,KAAK,IAAK,kBAAM0O,EAAgBS,IAAgBR,EAAkBQ,IAAgBN,MAClF7O,KAAK,OAAuB,GAAd8N,EAAQhT,GAAW,OAASwS,GAE1CtN,KAAK,SAAU,WACd,IAAIsP,GAAYhV,GAAGC,OAAO1D,MAAMoE,QAAQ,QACxC,OAAOoT,GAAaiB,EAAUhC,EAAmB,SAGlDtN,KAAK,eAAgB,WACpB,IAAIsP,GAAYhV,GAAGC,OAAO1D,MAAMoE,QAAQ,QACxC,OAAOoT,GAAaiB,EAAUb,EAAOpE,WAAsB,SA1CxDvP,EAAI,EAAGA,EAAIgT,EAAQ3T,OAAQW,IAAKqH,EAAhCrH,GAoDL4T,IAMFtB,EAAKrN,OAAO,UACTC,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,IAAKkO,GACVhT,MAAM,OAAQ,QACdA,MAAM,SAAU,QAChBA,MAAM,eAAgBgT,EAAS,GAClCd,EAAKrN,OAAO,UACTC,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,IAAKmO,GACVjT,MAAM,OAAQ,SAEfyT,GACFvB,EAAKrN,OAAO,UACTC,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,IAAKkO,GACVhT,MAAM,OAAQ,QACdA,MAAM,SAAU,QAChBA,MAAM,eAAgBgT,EAAS,sCAI1Bd,EAAMI,EAAYC,EAAMH,GAClC,IAAIiC,EAAU/B,EAAWgC,UACzBpC,EAAKhS,UAAU,YACZlG,KAAKsY,GACL3M,QACAd,OAAO,KACPC,KAAK,QAAS,WACdA,KAAK,YAAa,SAAA2N,GAAW,MAAO,UAAaA,EAAMC,MAAQjU,KAAK0N,GAAK,IAAO,MAChFoI,KAAK,SAAAC,GACJA,EAAM,GAAGC,QAAQ,SAAAC,GACf,IAAIC,EAASvV,GAAGC,OAAOqV,GAAO1a,OAAO,GACnC4a,EAA2B,MAAfD,EAAOE,KACrB,GAAKD,EAAL,CAGA,IAAIE,EAAYF,EAAYP,EAAQM,EAAOE,MAAQ,KACjDE,GAAYxC,EAAmB,IAAZuC,GACnBE,GAAYzC,EAAkB,GAAZuC,GAClBG,EAAc,SAAgBF,EAASG,KAAK,KAAO,KAAOF,EAASE,KAAK,KAAO,KACjF9V,GAAGC,OAAOqV,GACP5P,KAAK,UAAW6P,EAAOhC,MACvB9N,OAAO,QACPC,KAAK,IAAKmQ,GACVnQ,KAAK,OAAQsN,GAChBhT,GAAGC,OAAOqV,GACP7P,OAAO,QACPC,KAAK,KAAM,GACXA,KAAK,KAAMiQ,EAAS,IACpBjQ,KAAK,KAAM,GACXA,KAAK,KAAMiQ,EAAS,IACpBjQ,KAAK,eAAgC,EAAf6P,EAAOhC,MAChCvT,GAAGC,OAAOqV,GACP7P,OAAO,QACPC,KAAK,KAAM,GACXA,KAAK,KAAMkQ,EAAS,IACpBlQ,KAAK,KAAM,GACXA,KAAK,KAAMkQ,EAAS,IACpBlQ,KAAK,eAAgC,EAAf6P,EAAOhC,oDAKtBwC,GAChB,IAAIC,EAAazZ,KAAK2T,SACpB+F,EAAmB1Z,KAAK4T,eACR,MAAd6F,IACFC,EAAiB7F,UAAY2F,EAC7BxZ,KAAK2T,SAAW8F,EAkoBb,IAAIE,EAloB+BD,IAiBxCA,EAAiBnF,cAAgB,SAACqF,EAAUC,GAC1C,IACIC,EADYF,EAAS5L,OAAO,SAAC/D,GAAQ,OAAOA,GAAK,IAC5B3G,OACzB,OAAiB,IAAbwW,EACK,SAACC,GAAe,OAAO,GAEvB,SAACA,GAKN,IAJA,IAAIC,EAASD,EAAS,GAAGpO,GACrBsO,EAAOJ,EAASG,GAChBE,EAAW,EACXC,GAAM,EACDlW,EAAI,EAAGA,EAAI2V,EAAStW,OAAQW,IAC/B2V,EAAS3V,IAAM,GAAKgH,OAAOgP,EAAKhW,MAAQ2V,EAAS3V,IACnDiW,IAMJ,OAHIA,EAAWJ,IACbK,GAAM,GAEDA,IAIbV,EAAWjF,UAtCS,SAAC4F,EAAeC,GAClC,IAAIC,EAAUD,EAAQ,EAAIX,EAAiBzF,cAC3CmG,EACGjR,KAAK,YAAamR,GAClBC,YACA3W,aACAuF,KAAK,UAAW,WACf,IAAIyO,EAASnU,GAAGC,OAAO1D,MACrBwa,EAAU9U,WAAWkS,EAAOzO,KAAK,cACjCsR,EAAU/U,WAAWkS,EAAOzO,KAAK,cAGnC,OAFAqR,EAAUE,MAAMF,GAAW,EAAMA,EACjCC,EAAUC,MAAMD,GAAW,EAAMA,EAC1BD,EAAUF,EAAUG,KA2BjChB,EAAW/Y,kDAGOmT,EAAW+F,EAAUzQ,EAAMwR,EAAUC,GACvD,IAAIjH,EAAW3T,KAAK2T,SACJ,MAAZA,GAAqBA,EAASkH,OAChC7a,KAAK8a,iBAAiBjH,GAQxB,OAAOkH,EALS,MAAZnB,GAAoBA,EAASxK,OAChBpP,KAAK2T,SAAS3F,OAAO,aAAc,OAAQ,KAAMhO,KAAK4T,eAAeW,cAAcqF,EAAUgB,IAAY,GAEzG5a,KAAK2T,SAASqH,QAAQ,cAEC7R,EAAMwR,6CAG7BnB,EAAayB,EAAOC,EAAQC,GAC7C,IAAI1B,EAAazZ,KAAK2T,SAWtB,OATkB,MAAd8F,GAAuBA,EAAWoB,QACpC7a,KAAK8a,iBAAiBtB,GACtBC,EAAazZ,KAAK2T,UAOboH,EALM,MAATE,EACaxB,EAAWzL,OAAO,YAAa,QAASiN,GAExCxB,EAAWuB,QAAQ,aAEIE,EAAQC,2CAGjCtH,EAAWuH,EAAKjS,EAAMwR,GACrC,IAAIhH,EAAW3T,KAAK2T,SAWpB,OATgB,MAAZA,GAAqBA,EAASkH,QAChC7a,KAAK8a,iBAAiBjH,GACtBF,EAAW3T,KAAK2T,UAOXoH,EALI,MAAPK,EACazH,EAAS0H,KAAK,UAAW,QAASD,GAElCzH,EAASqH,QAAQ,WAEM7R,EAAMwR,uCAGnCW,EAAM9D,EAAWE,GAC5B,IAAIE,EAAS5X,KACXub,EAAQ7D,EAAU8D,OACpB,OAAQxb,KAAKsT,SACX,IAAK,OACH,OAAQtT,KAAKuT,WACX,IAAK,OAEL,IAAK,QACH,MACF,IAAK,MACH+H,EAAK/W,UAAU,WACZ4E,KAAK,YAAa,WACjB,IACEsS,EAAMC,EADJC,EAAUlY,GAAGC,OAAO1D,MAAMmJ,KAAK,SAGnCsS,GADAE,EAAUA,EAAQ9N,MAAM,MACT,GACf6N,EAAQC,EAAQ,GAChB,IAAIC,EAAYlE,EAAU+D,GAC1B,GAAKjE,EAEE,CAEL,IAAIe,GAASqD,EAAUF,GAASH,EAAMxY,MAAQwY,EAAMrY,IAAMqY,EAAMxY,KAGhE,OAFAwV,EAAgB,GAARA,EAAa,GAEd,IADPA,EAAQ,GAAKzV,KAAK0V,KAAKD,GAAS,IALhC,OAAO,IAUV3U,aACAuF,KAAK,UAAW,WACf,OAAO1F,GAAGC,OAAO1D,MAAMmJ,KAAK,eAEhCmS,EAAK/W,UAAU,WACZb,OAAO,QACPE,aACAuF,KAAK,SAAU,WAId,MAAO,SAERA,KAAK,eAAgB,WAIpB,OAFgB1F,GAAGC,OAAO1D,MAAMoE,QAAQ,QAEvBwT,EAAOpE,WAAa,4CAQxCoC,EAAKiG,EAAWC,EAAMjG,EAAQkG,GAA0D,IAAnDvE,EAAmDC,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,IAAAA,UAAA,GAAhCC,EAAgCD,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,GAAAA,UAAA,GAApB,KAAME,EAAcF,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,GAAAA,UAAA,GAAN,KACvFuE,EAAqB,MAARF,EACfxF,EAAMtW,KAAKmT,EAQb,OAPI0C,GAAUA,EAAOvS,QACnBtD,KAAKwT,WAAa,EAAIqC,EAAOvS,OAC7BtD,KAAKyT,YAAc,GAAKoC,EAAOvS,SAE/BtD,KAAKwT,WAAa,GAClBxT,KAAKyT,YAAc,GAEbzT,KAAKsT,SACX,IAAK,OACH,OAAQtT,KAAKuT,WACX,IAAK,OACHvT,KAAKic,WAAWrG,EAAKnS,GAAGyY,SAASC,QAAQ7F,GAAMyF,EAAO,IAEtD,MACF,IAAK,QACH/b,KAAKic,WAAWrG,EAAKnS,GAAGyY,SAASC,QAAQ7F,GAAMyF,EAAO,IAElDzF,EAAM,GAAKT,GAAUA,EAAOvS,OAAS,GACvCtD,KAAKoc,UAAUxG,EAAKC,GAEtB,MACF,IAAK,MACH7V,KAAKic,WAAWrG,EAAKnS,GAAGyY,SAASC,QAAQ7F,GAAe,MAARwF,EAAgB,OAASC,EAAgB,MAARD,EAAgB,GAAM,KAElGE,GAAanG,GAAUA,EAAOvS,OAAS,GAC1CtD,KAAKqc,QAAQzG,EAAKC,EAAQiG,EAAM,OAAc,GAANxF,EAAiB,GAANA,EAAiB,GAANA,EAAWkB,EAAWE,EAAWC,GAIrG,MACF,IAAK,OACH3X,KAAKic,WAAWrG,EAAKnS,GAAGyY,SAASC,QAAQ7F,GAAe,MAARwF,EAAgB,OAASC,EAAO,IAE3EC,GACHhc,KAAKsc,WAAW1G,EAAKiG,EAAW7b,KAAKqT,KAAM0I,GAIjD,OAAOnG,WAUI2G,IALN,WAAe,QAAAC,EAAA/E,UAAAnU,OAAXmZ,EAAWhP,MAAA+O,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAXD,EAAWC,GAAAjF,UAAAiF,GACpB,WAAAC,SAAAC,UAAAC,KAAA7Z,MAAW2P,GAAX,MAAAmK,OAAuBL,UAQrB9C,aACJ,SAAAA,EAAaoD,GAAiB9J,IAAAjT,KAAA2Z,GAC5B3Z,KAAK6T,UAAYkJ,EAAgBlJ,UACjC7T,KAAK8T,gBAAkBiJ,EAAgBjJ,gBACvC9T,KAAK+T,WAAagJ,EAAgBhJ,WAClC,IAAIiJ,EAAgBD,EAAgBzI,kBAQpC,GAPAtU,KAAKsU,kBAAsC,MAAjB0I,EAAyB,SAACC,GAClD,OAAO,GACLD,EACJhd,KAAKkd,YAAcH,EAAgBG,YACnCld,KAAKgU,YAAc+I,EAAgB/I,YACnChU,KAAKkU,OAAS6I,EAAgB7I,OAC9BlU,KAAKwU,UAAYuI,EAAgBvI,UACD,WAA5B2I,IAAQnd,KAAKwU,WAAyB,CACxC,IAAI4I,EAAapd,KAAKwU,UAAU3Q,SAChC7D,KAAKwU,UAAU3Q,SAA0B,MAAduZ,EAAsBA,EAAa,IAEhEpd,KAAKqd,UAAY,IAAI5P,MACrBzN,KAAKsd,SAAW,EAChBtd,KAAK6a,OAAQ,6CAGb7a,KAAK6a,OAAQ,EACb,IAAIjD,EAAS5X,KAAMud,EAAcvd,KAAKwU,UAEpCgJ,GADcxd,KAAKsU,kBACLtU,KAAK6T,UAAUtP,UAAUvE,KAAK8T,iBAAiB9F,OAAOhO,KAAKsU,oBACnD,MAApBtU,KAAKkd,cACPM,EAAcA,EAAYjZ,UAAUvE,KAAKkd,cAEd,mBAAjBK,EACVA,EAAYC,GAAa,IAEU,mBAAvBD,EAAYnJ,QACtBmJ,EAAYnJ,MAAQ,WAAQ,OAAOmJ,EAAYnJ,QAEf,mBAAtBmJ,EAAYlJ,OACtBkJ,EAAYlJ,KAAO,WAAQ,OAAOkJ,EAAYlJ,OAEhDmJ,EAAYrU,KAAKoU,EAAYpU,KAAMoU,EAAYnJ,UAEjDpU,KAAKqd,UAAUI,QAAU,IAAIhQ,MAC7BzN,KAAKqd,UAAUK,QAAU,IAAIjQ,MAC7BzN,KAAKqd,UAAUM,SAAW,IAAIlQ,MAC9BzN,KAAKqd,UAAUO,aAAe,IAAInQ,MAClCzN,KAAKqd,UAAUQ,aAAe,IAAIpQ,MAClCzN,KAAKqd,UAAUS,cAAgB,IAAIrQ,MACnCzN,KAAKqd,UAAUU,IAAM,SAAUjC,EAAMZ,EAAQ8C,GAAiC,IAAnBC,EAAmBxG,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,GAAAA,UAAA,GAAV,SAC9ByG,GAAlBtG,EAAOpD,UAA0B,cAAgBsH,EAAO,IAAMlE,EAAO0F,UACvE1F,EAAO/D,UAAUtP,UAAUqT,EAAO9D,iBAC7C9F,OAAO4J,EAAOtD,mBACdlQ,QAAQ8Z,GAAc,GAQ3B,OAPAle,KAAKmC,MACHgc,GAAIrC,EACJ3S,KAAM+R,EACNkD,KAAMF,EACNG,KAAML,EACNjd,KAAMkd,IAEAA,GACN,IAAK,SACHje,KAAK2d,SAASxb,KAAK+b,GACnB,MACF,IAAK,SACHle,KAAKyd,QAAQtb,KAAK+b,GAClB,MACF,IAAK,OACHle,KAAK0d,QAAQvb,KAAK+b,GAItB,OADAtG,EAAO0F,WACA1F,EAAO0F,SAAW,GAE3Btd,KAAKqd,UAAUiB,OAAS,SAAUxC,GAChC,OAAO9b,KAAKue,UAAU,SAACC,GAAiB,OAAOA,EAAWL,IAAMrC,KAElE9b,KAAKqd,UAAUoB,WAAa,SAAUC,EAAOC,GAE3C,IAFuE,IACnEC,EADmEnH,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,IAAAA,UAAA,GACtCzX,KAAKyd,WAAnBX,OAAA+B,IAAkC7e,KAAKyd,SAAvCoB,IAAmD7e,KAAK4d,eAAekB,GAAQ,EACzF7a,EAAI,EAAGA,EAAI2a,EAAatb,OAAQW,IAAK,CAC5C,IAAI8a,EAAWH,EAAa3a,GAC5B,GAAI8a,GAAYJ,IAGTlb,GAAGC,OAAOgb,GAAOta,QAAQ2a,GAAW,CACvCD,GAAQ,EACR,OAON,OAHIA,IACFA,EAAQ9e,KAAKgf,YAAYN,EAAOC,IAE3BG,GAET9e,KAAKqd,UAAU4B,WAAa,SAAUP,EAAOC,GAE3C,IAFuE,IACnEO,EADmEzH,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,IAAAA,UAAA,GACtCzX,KAAK0d,WAAnBZ,OAAA+B,IAAkC7e,KAAK0d,SAAvCmB,IAAmD7e,KAAK6d,eAAeiB,GAAQ,EACzF7a,EAAI,EAAGA,EAAIib,EAAa5b,OAAQW,IAAK,CAC5C,IAAI8a,EAAWG,EAAajb,GAC5B,IAAc,MAAV0a,GAAkBA,GAAUI,IAG5Btb,GAAGC,OAAOgb,GAAOta,QAAQ2a,GAAW,CACtCD,GAAQ,EACR,OAGJ,GAAIA,EAAO,CACT,IAAIK,EAAWnf,KAAKgf,YAAYN,EAAOC,GACnCG,GAASK,IAAYL,EAAQK,GAEnC,OAAOL,GAET9e,KAAKqd,UAAU2B,YAAc,SAAUN,EAAOC,GAA4B,IACpES,EADoE3H,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,IAAAA,UAAA,GACzCzX,KAAK2d,YAAnBb,OAAA+B,IAAmC7e,KAAK2d,UAAxCkB,IAAqD7e,KAAK8d,gBAAgBgB,GAAQ,EACnG,GAAIM,EAAW9b,OAAS,EACtB,IAAK,IAAIW,EAAI,EAAGA,EAAImb,EAAW9b,OAAQW,IAAK,CAC1C,IAAI8a,EAAWK,EAAWnb,GAC1B,GAAI8a,GAAYJ,IAGTlb,GAAGC,OAAOgb,GAAOta,QAAQ2a,GAAW,CACvCD,GAAQ,EACR,OAKR,OAAOA,GAET9e,KAAKqd,UAAUgC,WAAa,SAAUC,EAAaX,GACjD,IAAIY,EAAcvf,KAOhBwf,EANkB5H,EAAO/D,UACtBtP,UAAUqT,EAAO9D,iBACjB9F,OAAO4J,EAAOtD,mBACdtG,OAAO,WACN,OAAOuR,EAAYN,WAAWjf,KAAM2e,KAEfha,QAAQ,GAC/B8a,EAAS,IAAIC,EAAAxT,EAAOyT,EAAY/H,EAAO7D,WAC3CuL,EAAY9a,KAAK,WACfib,EAAO1B,IAAI1P,EAAErO,MAAMmJ,KAAKwW,MAE1B,IAAK,IAAI1b,EAAI,EAAGA,EAAIub,EAAOlc,OAAQW,IAAK,CACtC,IAAI2b,EAAQvR,EAAEmR,EAAOvb,IAAIkF,KAAKwW,GACzBF,EAAOI,IAAID,IACdN,EAAY3a,QAAQ,GAAGxC,KAAKqd,EAAOvb,MAKzCjE,KAAKqd,UAAUyC,cAAgB,SAAUnB,GAGvC,IAFA,IAAIoB,EAAa/f,KAAKyd,QAAS+B,EAAS5H,EAAO/D,UAAUtP,UAAUqT,EAAO9D,iBAC7D9F,OAAO4J,EAAOtD,mBAAmBlQ,QAAQua,GAAQ,GAFfhR,EAAA,SAGtC1J,GACP,IAAI+b,EAASD,EAAW9b,GACxB,GAAI+b,GAAUrB,EACZ,iBAEFa,EAASA,EAAOxR,OAAO,WACrB,OAAOvK,GAAGC,OAAO1D,MAAMoE,QAAQ4b,MAN1B/b,EAAI,EAAGA,EAAI8b,EAAWzc,OAAQW,IAAK0J,EAAnC1J,GAST,OAAOub,qCAGAF,EAAaW,EAASC,GAC/B,IAAIC,EAAWngB,KAAKkU,OAIlBkM,GAHcpgB,KAAKqd,UACFrd,KAAK6T,UAAUtP,UAAUvE,KAAK8T,iBAAiB9F,OAAOhO,KAAKsU,mBAE/C3P,QAAQ,GAAGrB,QAAU4c,GAClD1C,EAAc8B,EAChB,GAAgB,MAAZa,IAAqB3C,EAAY6C,QAEnC,IADA,IAAIC,EAAgBH,EAAShM,MAAOoM,EAAYJ,EAAS/L,MAAOoM,EAAWL,EAAS9L,KAAMoM,EAAYN,EAASzN,OACtGzO,EAAI,EAAGA,EAAIqc,EAAchd,OAAQW,IAAK,CAC7C,IAAIyc,EAASJ,EAAcrc,GAAI0c,EAA4B,MAAbF,GAA2BA,EAAUxc,GACnF,GAAc,SAAVyc,EAAmB,CACrB,IAAIE,EAAUD,EAAcV,GAAWG,GAAqBH,EACxC,UAAhBM,EAAUtc,IACQ,MAAhBsc,EAAUtc,IACZuZ,EAAYpZ,QAAQmc,EAAUtc,GAAI2c,GAGnB,MAAfJ,EAASvc,IACXuZ,EAAYpZ,QAAQoc,EAASvc,IAAK2c,OAE/B,CACL,IAAIC,EAAiBZ,EAAUM,EAAUtc,GAAKuc,EAASvc,GACrD6c,EAAkBb,EAAUO,EAASvc,GAAKsc,EAAUtc,GACpD8c,EAAUJ,EAAcE,EAAiBT,EAAaS,EAAgBC,EACxEtD,EAAYrU,KAAKuX,EAAQK,0CAKnBzB,EAAaW,GACzB,IAAI1C,EAAcvd,KAAKwU,UACM,mBAAjB+I,EACVA,EAAY+B,EAAaW,GAEzBX,EACG/E,YACA3W,aACAC,SAAS0Z,EAAY1Z,UACrBsF,KAAKoU,EAAYpU,KAAM8W,EAAU1C,EAAYnJ,QAAUmJ,EAAYlJ,6CAG5DyH,EAAMZ,EAAQ8F,EAAUhD,GAAgC,IAAlBiD,EAAkBxJ,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,IAAAA,UAAA,GAChEyJ,EAAalhB,KAAKqd,UAAUiB,OAAOxC,IACpB,GAAfoF,IACFA,EAAalhB,KAAKqd,UAAUU,IAAIjC,EAAMZ,EAAQ8C,EAAciD,EAAW,SAAW,WAEpF,IAAI1B,EAAcvf,KAAKqd,UACrB5D,EAAa8F,EAAY2B,GACzBlB,EAASvG,EAAW2E,KACpB+C,EAAYnB,EAAS,OAErBoB,GADcphB,KAAKwU,UACJ,IAAIkL,EAAAxT,EAAI8U,IACvBK,EAAe5H,EAAW4E,KAC1BiD,EAAU7H,EAAWtQ,KACrBoY,EAAiBvhB,KAAK6T,UAAUtP,UAAUvE,KAAK8T,gBAAkB,IAAMkM,GACpEhS,OAAOhO,KAAKsU,mBACZlQ,QAAQ+c,GAAW,GACnB/c,QAAQ4b,GAAQ,GACnBwB,EAAiBxhB,KAAK6T,UAAUtP,UAAUvE,KAAK8T,iBAC5C9F,OAAOhO,KAAKsU,mBACZtG,OAAO,WACN,IAAI0S,EAASjd,GAAGC,OAAO1D,MAAMmJ,KAAKmY,GAClC,OAAoB,MAAhBD,EACKD,EAAavB,IAAIa,GAEjBW,EAAaX,KAGvB1S,OAAO,WACN,OAAOuR,EAAYd,WAAWze,KAAMggB,KAErC5b,QAAQ4b,GAAQ,GACrBT,EAAYF,WAAWmC,GACvB,IAAIC,EAAgBD,EAAexT,OAAO,WACtC,OAAQvK,GAAGC,OAAO1D,MAAMoE,QAAQ+c,KAElCO,EAAgBH,EAAevT,OAAO,WACpC,OAAQvK,GAAGC,OAAO1D,MAAMoE,QAAQ4b,KAQpC,OANAhgB,KAAK6T,UAAUtP,UAAU,IAAM4c,GACxB/c,QAAQ+c,GAAW,GAC1BnhB,KAAK2hB,UAAUF,GAAe,EAAMA,EAAc,GAAGne,QACrDtD,KAAK2hB,UAAUD,GAAe,EAAOA,EAAc,GAAGpe,QACtDtD,KAAK4hB,aAAaH,GAAe,GACjCzhB,KAAK4hB,aAAaF,GAAe,GAC1BF,+BAEH1F,EAAMZ,EAAQ8F,EAAUhD,GAC5B,IAA8C6D,EAA1CX,EAAalhB,KAAKqd,UAAUiB,OAAOxC,IACpB,GAAfoF,IACFA,EAAalhB,KAAKqd,UAAUU,IAAIjC,EAAMZ,EAAQ8C,EAAc,SAE9D,IAAIuB,EAAcvf,KAAKqd,UACrB5D,EAAa8F,EAAY2B,GACzBlB,EAASvG,EAAW2E,KACpBgD,EAAe,IAAI1B,EAAAxT,EAAI8U,GACvBK,EAAe5H,EAAW4E,KAC1BiD,EAAU7H,EAAWtQ,KACH,MAAhB6U,IACFvE,EAAW4E,KAAOgD,EAAerD,GAEnChe,KAAKgb,QAAQc,GAAM,GACnB,IAAI0B,EAAcxd,KAAK6T,UAAUtP,UAAUvE,KAAK8T,iBAC7C9F,OAAOhO,KAAKsU,mBACZtG,OAAO,WACN,IAAI0S,SAMJ,OAJEA,EADa,QAAXY,EACO7d,GAAGC,OAAO1D,MAAM3B,OAEhBoF,GAAGC,OAAO1D,MAAMmJ,KAAKmY,GAEZ,MAAhBD,EACKD,EAAavB,IAAIa,GAEjBW,EAAaX,KAGvB1S,OAAO,WACN,OAAOuR,EAAYP,YAAYhf,QAEhCoE,QAAQ4b,GAAQ,GACnBT,EAAYF,WAAW7B,EAAawC,GACpC6B,EAAWrE,EACX,IAAIsE,EAAWtE,EAAY7Y,QAAQ,GAAGrB,OAMtC,OALwB,MAApBtD,KAAKkd,cACPM,EAAcA,EAAYjZ,UAAUvE,KAAKkd,cAE3Cld,KAAK2hB,UAAUnE,GAAa,EAAMsE,GAClC9hB,KAAK4hB,aAAapE,GAAa,GACxBqE,iCAED/F,EAAMZ,EAAQ8F,EAAUhD,GAAgC,IAChB6D,EADFZ,EAAkBxJ,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,IAAAA,UAAA,GAC1DyJ,EAAalhB,KAAKqd,UAAUiB,OAAOxC,IACpB,GAAfoF,IACFA,EAAalhB,KAAKqd,UAAUU,IAAIjC,EAAMZ,EAAQ8C,EAAciD,EAAW,SAAW,WAEpF,IAAI1B,EAAcvf,KAAKqd,UACrB5D,EAAa8F,EAAY2B,GACzBlB,EAASvG,EAAW2E,KACpBgD,EAAe,IAAI1B,EAAAxT,EAAI8U,GACvBK,EAAe5H,EAAW4E,KAC1BiD,EAAU7H,EAAWtQ,KACH,MAAhB6U,IACFvE,EAAW4E,KAAOgD,EAAerD,GAEnChe,KAAKgb,QAAQc,GAAM,GACnB,IAAI0B,EAAcxd,KAAK6T,UAAUtP,UAAUvE,KAAK8T,iBAC7C9F,OAAOhO,KAAKsU,mBACZtG,OAAO,WACN,IAAI0S,SAMJ,OAJEA,EADa,QAAXY,EACO7d,GAAGC,OAAO1D,MAAM3B,OAEhBoF,GAAGC,OAAO1D,MAAMmJ,KAAKmY,GAEZ,MAAhBD,EACKD,EAAavB,IAAIa,GAEZW,EAAaX,KAI5B1S,OAAO,WACN,OAAOuR,EAAYd,WAAWze,KAAMggB,KAErC5b,QAAQ4b,GAAQ,GACnBT,EAAYF,WAAW7B,GACvBqE,EAAWrE,EACX,IAAIsE,EAAWtE,EAAY7Y,QAAQ,GAAGrB,OAMtC,OALwB,MAApBtD,KAAKkd,cACPM,EAAcA,EAAYjZ,UAAUvE,KAAKkd,cAE3Cld,KAAK2hB,UAAUnE,GAAa,EAAMsE,GAClC9hB,KAAK4hB,aAAapE,GAAa,GACxBqE,kCAEA/F,GAAuB,IAAjBiG,IAAiBtK,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,KAAAA,UAAA,GAC1BgC,EAAazZ,KAAKqd,UAAU3R,KAAK,SAACsW,GAAW,OAAQA,EAAK7D,IAAMrC,IACpE,GAAkB,MAAdrC,EACF,OAAO,KAET,IAAIuG,EAASvG,EAAW2E,KACtB6D,EAAiC,QAAnBxI,EAAW1Y,KACzBmhB,EAAkC,UAAnBzI,EAAW1Y,KAC1Bwe,EAAcvf,KAAKqd,UAAWG,SAC9B2E,GAAc,EACdC,EAAiBpiB,KAAK6T,UAAUtP,UAAUvE,KAAK8T,iBAAiB9F,OAAOhO,KAAKsU,mBAM9E,GAFEkJ,EAHGyE,EAGWG,EAAehe,QAAQ4b,GAAQ,GAF/BT,EAAYO,cAAcE,GAAQ5b,QAAQ4b,EAAQ+B,IAI7DE,GAAcjiB,KAAKqd,UAAUK,QAAQpa,OAAS,EAAG,CACpD,IAAIke,EAAiBhE,EACZxP,OAAO,WACN,OAASuR,EAAYN,WAAWjf,QAEtCwhB,EAAe7c,QAAQ,GAAGrB,QAAUka,EAAY7Y,QAAQ,GAAGrB,SAC7D6e,GAAc,EACd3E,EAAcgE,GAGlB,IAAIM,EAAWtE,EAAY7Y,QAAQ,GAAGrB,OACpCsd,IAAWmB,GAAWI,EACpBvB,IACFpD,EAAcA,EAAYxP,OAAO,WAC/B,OAAOuR,EAAYP,YAAYhf,SAGX,MAApBA,KAAKkd,cACPM,EAAcA,EAAYjZ,UAAUvE,KAAKkd,cAE3Cld,KAAK2hB,UAAUnE,EAAaoD,EAASkB,GACrC9hB,KAAK4hB,aAAapE,EAAaoD,GAC/B,IAAIiB,SAUJ,OATIE,IAMAF,EALGK,EAKQE,EAJAA,EAAepU,OAAO,WAC/B,OAAOuR,EAAYN,WAAWjf,OAASuf,EAAYP,YAAYhf,SAM9D6hB,mCAEC5D,GACR,IAAIxE,EAAazZ,KAAKqd,UAAWwE,SACjC,OAAQ5D,GACN,IAAK,SACH4D,EAAWpI,EAAWqE,cACtB,MACF,IAAK,SACH+D,EAAWpI,EAAWmE,aACtB,MACF,IAAK,OACHiE,EAAWpI,EAAWoE,aAG1B,OAAOgE,8BAEJ5D,GACH,IAAIxE,EAAazZ,KAAKqd,UAAWwE,SACjC,OAAQ5D,GACN,IAAK,SACH4D,EAAWpI,EAAWkE,SACtB,MACF,IAAK,SACHkE,EAAWpI,EAAWgE,QACtB,MACF,IAAK,OACHoE,EAAWpI,EAAWiE,QAG1B,OAAOmE,8BAEJ5D,EAAQ+C,GACX,IAAIvH,EAAazZ,KAAKqd,UAAWgF,SACjC,OAAQpE,GACN,IAAK,SACHoE,EAAU5I,EAAWqE,cACrB,MACF,IAAK,SACHuE,EAAU5I,EAAWmE,aACrB,MACF,IAAK,OACHyE,EAAU5I,EAAWoE,aAGzB,IAAK,IAAI5Z,EAAI,EAAGA,EAAI+c,EAAS1d,OAAQW,IAAK,CACxC,IAAI8c,EAAUC,EAAS/c,GACnBoe,EAAQpgB,QAAQ8e,GAAW,GAC7BsB,EAAQlgB,KAAK4e,aAUrB,SAAShG,EAAoBuE,EAAapE,EAAQC,GAChD,GAAmB,MAAfmE,GAAuBA,EAAYe,QACrC,OAAO,KAET,IAAIiC,EAAW,IAAI7U,MACnB,OAAc,MAAVyN,GAAgC,MAAdC,EACbmE,GAEO,MAAVpE,EACFoE,EAAY9a,KAAK,WACf8d,EAASngB,KAAKkM,EAAErO,MAAMmJ,KAAK+R,MAGD,mBAAhBC,GACVmE,EAAY9a,KAAK,SAAUyY,GACzB,IAAIsF,EAASpH,EAAWnb,KAAMid,GAC9BqF,EAASngB,KAAKogB,KAKfD,6DCp8BT,IAAME,EAAWC,EAAQ,QAErBC,GAEJA,YACEtd,MAAO,IACPE,OAAQ,MAGVod,EAAQF,SAAWA,EAEnBE,EAAQC,QAAU,KAElBD,EAAQhiB,KAAO,SAAUkiB,GACvB,IAAIC,EAASC,SAASC,cAAc,UACpCF,EAAO1E,GAAK,WACZ0E,EAAOzd,MAAQ4d,OAAON,EAAQO,WAAW7d,OACzCyd,EAAOvd,OAAS0d,OAAON,EAAQO,WAAW3d,QAC1Cud,EAAOxe,MAAQ,eACfye,SAASI,KAAKC,YAAYN,GAE1BH,EAAQC,QAAUE,EAAOO,WAAW,MAEpC,IAAIC,EAAS,IAAIC,MACjBD,EAAOE,OAAS,WACdb,EAAQC,QAAQa,UAAUH,EAAQ,EAAG,GACrCT,KAEFS,EAAOI,IAAMf,EAAQF,UAGvBE,EAAQgB,QACNjU,GAAI,EAAG,GACP3D,GAAI,EAAG,IAGT4W,EAAQiB,WAAa,SAAUlU,GAG7B,OAFWA,EAAI,GAAKiT,EAAQgB,OAAOjU,EAAE,GAAK,KACvCiT,EAAQgB,OAAOjU,EAAE,GAAK,GAAKiT,EAAQgB,OAAOjU,EAAE,GAAK,KACtCiT,EAAQO,WAAW7d,MAAQ,IAG3Csd,EAAQkB,WAAa,SAAU9X,GAG7B,OAFWA,EAAI,GAAK4W,EAAQgB,OAAO5X,EAAE,GAAK,KACvC4W,EAAQgB,OAAO5X,EAAE,GAAK,GAAK4W,EAAQgB,OAAO5X,EAAE,GAAK,KACtC4W,EAAQO,WAAW3d,OAAS,IAG5Cod,EAAQmB,YAAc,SAAUrB,EAAUI,GACxCF,EAAQF,SAAWA,EACyB,OAAxCM,SAASgB,eAAe,cAC1BhB,SAASgB,eAAe,YAAYC,UAAY,GACzCjB,SAASgB,eAAe,aAEjCpB,EAAQhiB,KAAKkiB,IAGfF,EAAQsB,SAAW,SAAUvU,EAAG3D,GAC9B,IAAIhD,EAAQ4Z,EAAQC,QAAQsB,aAAavB,EAAQiB,WAAWlU,GAAIiT,EAAQkB,WAAW9X,GAAI,EAAG,GAI1F,OAHQhD,EAAMzK,KAAK,GACXyK,EAAMzK,KAAK,GACXyK,EAAMzK,KAAK,KAINqkB,4HCXfwB,GACA9lB,KAAA,WACAC,KAFA,WAGA,OAEA8lB,SAAA,sFACAC,SAAA,SACAC,OAAA,qCACAC,WAAA,qDACAC,eAAA,EACAC,YACAC,EAAA,iBACAC,EAAA,mBACAC,EAAA,iBAIAplB,QAjBA,WAkBAS,KAAA4kB,UAAA,WAEA5kB,KAAA6kB,iBAEA,IAAAC,EAAApf,WAAAjC,GAAAC,OAAA1D,KAAA2D,KAAAU,MAAA,UAEA0gB,EAAArf,WAAAjC,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,qBAAAW,MAAA,WACA2gB,EAAAtf,WAAAjC,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,iBAAAW,MAAA,WACAZ,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,iBAAAW,MAAA,OAAA0gB,EAAAC,GAAA,QACA,IAAAC,EAAAvf,WAAAjC,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,qBAAAA,OAAA,UAAAW,MAAA,UACAZ,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,iBAAAW,MAAA,OAAA4gB,EAAAH,EAAA,WACArhB,GAAAC,OAAA1D,KAAA2D,KACAD,OAAA,qBACAa,UAAA,UACAP,GAAA,uBACAP,GAAAC,OAAA1D,MACAoE,QAAA,yBACAA,QAAA,6BAEAJ,GAAA,sBACAP,GAAAC,OAAA1D,MACAoE,QAAA,yBACAA,QAAA,gCAWA5E,SAAY0lB,OACZxlB,OAAAylB,EAAA,EAAAzlB,EACA,YACA,sBAGAE,OACAC,UAAA,WACA4D,GAAAC,OAAA,aAAAW,MAAA,yBAEA+gB,iBAAA,SAAAvkB,GACA,IAAAwkB,OAAA,EAEAA,OADApkB,IAAAJ,EAAAykB,MACA,EAEAzkB,EAAAykB,MAEAtlB,KAAAukB,eAAAc,IAGAlgB,QAAW+f,OACXxlB,OAAAylB,EAAA,EAAAzlB,EACA,2BACA,sBAEA6lB,WALA,SAKA1kB,GACAb,KAAAwlB,kBACAC,KAAA5kB,KAGA6kB,YAVA,SAUA3kB,GAEA,SAAAA,GACAf,KAAAukB,gBAAA,EACAvkB,KAAA2lB,0BACAL,MAAAtlB,KAAAukB,kBAEA,UAAAxjB,IACAf,KAAAukB,gBAAA,EACAvkB,KAAA2lB,0BACAL,MAAAtlB,KAAAukB,mBAIAM,eAxBA,WAyBA7kB,KAAA4lB,KAAAniB,GAAAC,OAAA1D,KAAA2D,KACA,IAAAgG,EAAA3J,KACAgV,EAAAlS,KAAAC,IACA/C,KAAA4lB,KAAAliB,OAAA,cAAA+H,OAAAyE,wBAAA9K,MACApF,KAAA4lB,KAAAliB,OAAA,cAAA+H,OAAAyE,wBAAA5K,QAEAtF,KAAA4lB,KAAArhB,UAAA,kBAAAC,KAAA,SAAA4F,EAAAC,GACA,IACAwb,EADApiB,GAAAC,OAAA1D,MAEAkJ,OAAA,OACAC,KAAA,QAAA6L,GACA7L,KAAA,SAAA6L,GACA,OAAArL,EAAAwa,QAAA9Z,IACA,6BAiBA,SAAAyb,EAAA9Q,GACA,IAAA+Q,EAAAD,EAAA5c,OAAA,KACAC,KAAA,YADA,aACA6L,EAAA,EADA,KACAA,EAAA,EADA,KAEA7B,EAAA6B,EAAA,EACAgR,EAAA,GAAA7S,EACA8S,EAAA,GAAA9S,EACA+S,EAAA,GAAA/S,EACA4S,EAAA7c,OAAA,UACAC,KAAA,QACAA,KAAA,QACAA,KAAA,IAAA8c,GACA5hB,MAAA,eACAA,MAAA,iBACAA,MAAA,eAAA6hB,GACAH,EAAA7c,OAAA,UACAC,KAAA,QACAA,KAAA,QACAA,KAAA,IAAA6c,GACA3hB,MAAA,eAlCA8hB,CAAAN,EAAA7Q,GACA,MACA,+BAkCA,SAAA8Q,EAAA9Q,GACA,IAAA+Q,EAAAD,EAAA5c,OAAA,KACAC,KAAA,YADA,aACA6L,EAAA,EADA,KACAA,EAAA,EADA,KAEA7B,EAAA6B,EAAA,MACAkR,EAAAlR,EAAA,KACA+Q,EAAA7c,OAAA,UACAC,KAAA,QACAA,KAAA,QACAA,KAAA,IAAAgK,GACA9O,MAAA,eACAA,MAAA,iBACAA,MAAA,eAAA6hB,GA5CAE,CAAAP,EAAA7Q,GACA,MACA,cA4CA,SAAA8Q,EAAA9Q,GACA,IACAqR,EAAA,KACAN,EAAAD,EAAA5c,OAAA,KACAC,KAAA,YADA,aACA6L,EAAA,EADA,KACAA,EAAA,EADA,UACAqR,EADA,KAEAhiB,MAAA,aACA0hB,EAAA7c,OAAA,QACAC,KAAA,IANA,+mBAOA,IAAAmd,EAAAP,EAAAta,OAAAyE,wBACA6V,EAAA5c,KAAA,uBACA,OAGA,SAAAod,EAAAD,GACA,IAAAE,GAAAxR,EAAA,EAAAA,EAAA,GAEA,oBADAwR,EAAA,GAAAF,EAAAlhB,MAAA,EAAAohB,EAAA,GAAAF,EAAAhhB,OAAA,GACA,UAAA+gB,EAAA,IANAI,CAAAV,EAAAO,KAEAjiB,MAAA,aAvDAqiB,CAAAb,EAAA7Q,GACA,MACA,uBA4DA,SAAA8Q,EAAA9Q,GACA,IAAA2R,EAAA,GAAA3R,EACA4R,GAAA5R,EAAA2R,GAAA,EACAnX,IAAAoX,EAAA5R,EAAA,IAAA4R,EAAAD,EAAA3R,EAAA,IACA8Q,EAAA5c,OAAA,KACAA,OAAA,QACAC,KAAA,IAAA1F,GAAA+L,MAAA/L,CAAA+L,IACAnL,MAAA,oBACAA,MAAA,eACAA,MAAA,eAAA2Q,EAAA,GApEA6R,CAAAhB,EAAA7Q,GACA,MACA,sBAoEA,SAAA8Q,EAAA9Q,GACA,IAAA2R,EAAA,EAAA3R,EACA4R,GAAA5R,EAAA2R,GAAA,EACAnX,IAAAoX,EAAA5R,EAAA,IAAA4R,EAAAD,EAAA3R,EAAA,IACA8Q,EAAA5c,OAAA,KACAA,OAAA,QACAC,KAAA,IAAA1F,GAAA+L,MAAA/L,CAAA+L,IACAnL,MAAA,oBACAA,MAAA,eACAA,MAAA,eAAA2Q,EAAA,IACA3Q,MAAA,sBA7EAyiB,CAAAjB,EAAA7Q,UC7Ke+R,GADEC,OAFjB,WAA0B,IAAAC,EAAAjnB,KAAaknB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBjT,OAAOgK,GAAA,cAAiBiJ,EAAA,UAAAA,EAAA,UAAAA,EAAA,OAAsCE,YAAA,oBAA8BL,EAAAM,GAAA,qCAAAN,EAAAM,GAAA,KAAAN,EAAAO,GAAAP,EAAA,iBAAAQ,GAAgG,OAAAL,EAAA,UAAqBzR,IAAA8R,EAAAH,YAAA,cAAmCF,EAAA,UAAejT,OAAOuT,KAAA,KAAUN,EAAA,OAAYE,YAAA,oBAA4BL,EAAAM,GAAA,KAAAH,EAAA,UAA6BjT,OAAOuT,KAAA,MAAWN,EAAA,OAAYE,YAAA,mBAAAK,UAAyCC,UAAAX,EAAAY,GAAAJ,SAA4B,MAASR,EAAAM,GAAA,KAAAH,EAAA,UAAAA,EAAA,UAAAA,EAAA,OAAkDE,YAAA,oBAA8BL,EAAAM,GAAA,8CAAAN,EAAAM,GAAA,KAAAN,EAAAO,GAAAP,EAAA,eAAAxB,EAAApb,GAAyG,OAAA+c,EAAA,OAAiBzR,IAAA8P,EAAA6B,YAAA,YAA+BF,EAAA,kBAAuBpjB,IAAI8jB,OAAAb,EAAA1B,YAAwBwC,OAAQhmB,MAAAklB,EAAA,SAAArE,SAAA,SAAAoF,GAA8Cf,EAAA7C,SAAA4D,GAAiBC,WAAA,cAAwBb,EAAA,YAAiBjT,OAAO+T,MAAAzC,KAAcwB,EAAAM,GAAAN,EAAAY,GAAAZ,EAAA3C,UAAAja,QAAA,SAA+C4c,EAAAM,GAAA,KAAAH,EAAA,UAAAA,EAAA,UAAAA,EAAA,OAAkDE,YAAA,oBAA8BL,EAAAM,GAAA,mCAAAN,EAAAM,GAAA,KAAAH,EAAA,OAAkEE,YAAA,aAAuBF,EAAA,OAAYE,YAAA,qBAA+BF,EAAA,OAAYE,YAAA,cAAAnT,OAAiCgK,GAAA,qBAAwBiJ,EAAA,aAAkBjT,OAAOgU,MAAA,GAAAC,KAAA,eAAApT,KAAA,OAAAqT,SAAA,IAAApB,EAAA1C,gBAAiFvgB,IAAKskB,MAAA,SAAAC,GAAyB,OAAAtB,EAAAvB,YAAA,aAAiC,GAAAuB,EAAAM,GAAA,KAAAH,EAAA,OAA4BE,YAAA,cAAAnT,OAAiCgK,GAAA,sBAAyBiJ,EAAA,aAAkBjT,OAAOgU,MAAA,GAAAC,KAAA,gBAAApT,KAAA,OAAAqT,SAAA,IAAApB,EAAA1C,gBAAkFvgB,IAAKskB,MAAA,SAAAC,GAAyB,OAAAtB,EAAAvB,YAAA,cAAkC,KAAAuB,EAAAM,GAAA,KAAAH,EAAA,OAA8BE,YAAA,eAAAK,UAAqCC,UAAAX,EAAAY,GAAAZ,EAAAzC,WAAAyC,EAAA1C,uBAAwD,IAE5yDiE,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEzE,EACA6C,GATF,EAVA,SAAA6B,GACEF,EAAQ,SAaV,KAEA,MAUevqB,EAAA,EAAAsqB,EAAiB,0GC1BhC,IAAII,EAAS,SAAU5nB,GAEtB,IAAI6nB,EAAc,SAAU1c,GAC3B,IAAeuJ,EAAXoT,KACJ,IAAKpT,KAAOvJ,EACR1M,OAAOkd,UAAUoM,eAAepQ,KAAKxM,EAAIuJ,IAAQoT,EAAK5mB,KAAKwT,GAE/D,OAAOoT,GAGJE,EAAS,SAAU/c,EAAGC,GACzB,OAAOzG,WAAYwG,GAAKxG,WAAYyG,IAGjC+c,EAAY,SAAUhpB,EAAKipB,EAAOC,EAAKC,GAC1CA,EAAWA,GAAYC,IAEvB,IAGIP,EAHAQ,KACAC,GAAQ/E,GAAM0E,IACdM,KAGAC,EAAY,SAAUC,EAAMC,GAC/B,IAAIjU,EAAM,GAAKgU,EACVH,EAAK7T,KAAM6T,EAAK7T,OACrB6T,EAAK7T,GAAKxT,KAAKynB,IAKhB,IAFAL,EAAMJ,GAAS,EAERK,IACDT,EAAOD,EAAYU,IAAOlmB,QADnB,CAGZylB,EAAK9c,KAAKgd,GAEV,IAAItT,EAAMoT,EAAK,GACXc,EAASL,EAAK7T,GACdlK,EAAOoe,EAAOC,QACdC,EAAcrkB,WAAWiQ,GACzBqU,EAAgB9pB,EAAIuL,OAIxB,IAAK,IAAIme,KAFJC,EAAOvmB,eAAekmB,EAAK7T,GAEbqU,EACf,GAAItqB,OAAOkd,UAAUoM,eAAepQ,KAAKoR,EAAeJ,GAAS,CACnE,IACIK,EADOD,EAAcJ,GACFG,EACnBG,EAAaX,EAAMK,SA/Cf,IAiDHM,GAA8BA,EAAaD,KAC/CV,EAAMK,GAAUK,EAChBP,EAAUO,EAAWL,GACrBH,EAAaG,GAAUne,IAM3B,YA1DW,IA0DP8d,EAAMH,GACF,KAEAK,GAKLU,EAAkB,SAAUV,EAAcL,GAI7C,IAHA,IAAIgB,KACAC,EAAIjB,OApEG,IAsEJiB,GACND,EAAMjoB,KAAKkoB,GACXA,EAAIZ,EAAaY,GAIlB,OADAD,EAAME,UACCF,GAGJG,EAAmB,SAAUrqB,EAAKkqB,GAOrC,IANA,IACIhB,EACAK,EAEAe,EAJArB,EAAQiB,EAAMN,QAGdW,KAGGL,EAAM9mB,QAAQ,CAIpB,GAHA8lB,EAAMgB,EAAMN,UACZL,EAAeP,EAAUhpB,EAAKipB,EAAOC,IAUpC,OAAO,KANP,GADAoB,EAAWL,EAAgBV,EAAcL,IACrCgB,EAAM9mB,OAGT,OAAOmnB,EAAK3N,OAAO0N,GAFnBC,EAAKtoB,KAAKa,MAAMynB,EAAMD,EAAS9f,MAAM,GAAI,IAQ3Cye,EAAQC,IAINsB,EAAU,SAAUC,EAAMC,GAC7B,IACC,OAAOnd,MAAMmP,UAAUlS,MAAMkO,KAAK+R,EAAMC,GACvC,MAAOC,GAER,IADA,IAAI3e,KACKjI,EAAI2mB,GAAU,EAAG3hB,EAAI0hB,EAAKrnB,OAAQW,EAAIgF,IAAKhF,EACnDiI,EAAE/J,KAAKwoB,EAAK1mB,IAEb,OAAOiI,IAIL2c,EAAQ,SAAU3oB,GACrBF,KAAKE,IAAMA,GAuBZ,OApBA2oB,EAAMjM,UAAU2N,iBAAmB,SAAUpB,EAAOC,GACnD,MAA8C,mBAA1C1pB,OAAOkd,UAAUkO,SAASlS,KAAKuQ,GAC3BoB,EAAiBvqB,KAAKE,IAAKipB,GACH,IAArB1R,UAAUnU,OACbinB,EAAiBvqB,KAAKE,KAAMipB,EAAOC,IAEnCmB,EAAiBvqB,KAAKE,IAAKwqB,EAAQjT,aAI5CoR,EAAM0B,iBAAmB,SAAUrqB,EAAKipB,EAAOC,GAC9C,MAA8C,mBAA1C1pB,OAAOkd,UAAUkO,SAASlS,KAAKuQ,GAC3BoB,EAAiBrqB,EAAKipB,GACE,IAArB1R,UAAUnU,OACbinB,EAAiBrqB,GAAMipB,EAAOC,IAE9BmB,EAAiBrqB,EAAKwqB,EAAQjT,UAAW,KAI3CoR,EA7IK,GAiJEA,gKC9IAkC,GADE/D,OAFjB,WAA0B,IAAAC,EAAAjnB,KAAaknB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBjT,OAAOgK,GAAA,UAAaiJ,EAAA,OAAYjT,OAAOgK,GAAA,aAAgBiJ,EAAA,YAAiBjT,OAAOgK,GAAA,SAAA6M,WAAA,KAAAjqB,KAAA,OAAAkqB,QAAA,UAAgE7D,EAAA,kBAAuBjT,OAAO+W,KAAA,OAAYjE,EAAAM,GAAA,kBAAAN,EAAAM,GAAA,KAAAH,EAAA,cAAwDjT,OAAOgX,SAAA,GAAAhN,GAAA,kBAAiCiJ,EAAA,uBAA4BjT,OAAOgK,GAAA,cAAAiN,KAAA,MAA8BhE,EAAA,YAAiBiE,KAAA,mBAAsBpE,EAAAM,GAAA,UAAAN,EAAAM,GAAA,KAAAN,EAAAO,GAAAP,EAAA,kBAAAzhB,GAAoE,OAAA4hB,EAAA,mBAA6BzR,IAAAnQ,EAAAxB,IAAaskB,MAAA,SAAAC,GAAyB,OAAAtB,EAAAqE,WAAA9lB,OAA8ByhB,EAAAM,GAAAN,EAAAY,GAAAriB,SAAyB,eAAAyhB,EAAAM,GAAA,KAAAH,EAAA,WAA4CjT,OAAOgK,GAAA,sBAAyBiJ,EAAA,eAAAH,EAAAM,GAAA,KAAAH,EAAA,WAA8CjT,OAAOgK,GAAA,qBAAwBiJ,EAAA,cAAAH,EAAAM,GAAA,KAAAH,EAAA,OAAyCjT,OAAOgK,GAAA,uBAA0BiJ,EAAA,OAAYjT,OAAOgK,GAAA,mBAAoB8I,EAAAM,GAAA,KAAAH,EAAA,WAA8BjT,OAAOgK,GAAA,sBAAyBiJ,EAAA,eAAAH,EAAAM,GAAA,KAAAH,EAAA,oBAEh+BoB,oBCCjB,IASA+C,EAZA,SAAA3C,GACEF,EAAQ,SCMV8C,GACAptB,KAAA,MACAqtB,YACAC,KDPyBhD,EAAQ,OAcjCC,CACE+C,EAAA,EACAX,GATF,EAWAQ,EAPA,kBAEA,MAUgC,SCdhCpmB,WACA5F,QANA,cCJeosB,GADE3E,OAFP,WAAgB,IAAaE,EAAblnB,KAAamnB,eAA0BC,EAAvCpnB,KAAuCqnB,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBjT,OAAOgK,GAAA,SAAYiJ,EAAA,aAE7FoB,oBCChC,IAuBeoD,EAvBUlD,EAAQ,OAcjBmD,CACdL,EACAG,GAT6B,EAV/B,SAAoB/C,GAClBF,EAAQ,SAaS,KAEU,MAUG,oBCtBhCoD,UAAIC,IAAIC,KAEO,IAAAC,EAAA,IAAID,KACjBvG,KAAK,iCCNHyG,EAAO,0BAIPC,EAAQ1J,EAAQ,QAEpB,SAAS2J,EAAOhgB,GACd,SAAY0e,SAASlS,KAAKxM,GAAKgI,MAAM,iBAAiB,GAAGiY,cAyB3D,SAASC,EAASC,EAAQC,EAAK/P,EAAQgQ,EAASC,GAE1CjQ,IACFA,EAzBJ,SAASkQ,EAAWC,GAClB,IAAK,IAAIjX,KAAOiX,EACC,OAAXA,EAAEjX,WACGiX,EAAEjX,GAEY,WAAnByW,EAAOQ,EAAEjX,IACXiX,EAAEjX,GAAOiX,EAAEjX,GAAKkX,OACY,WAAnBT,EAAOQ,EAAEjX,IAClBiX,EAAEjX,GAAOgX,EAAWC,EAAEjX,IACM,UAAnByW,EAAOQ,EAAEjX,MAClBiX,EAAEjX,GAAOgX,EAAWC,EAAEjX,KAG1B,OAAOiX,EAYID,CAAWlQ,IAEtB0P,GACII,OAAQA,EACRC,IAAKA,EACLnuB,KAAiB,SAAXkuB,GAAgC,QAAXA,EAAmB9P,EAAS,KACvDA,OAAmB,QAAX8P,GAA+B,WAAXA,EAAsB9P,EAAS,KAC3DqQ,QAASZ,EACTa,iBAAiB,IAElBC,KAAK,SAASjgB,GACTA,EAAI1O,KACFouB,GACFA,EAAQ1f,EAAI1O,MAGVquB,EACFA,EAAQ3f,EAAI1O,MAEV4uB,OAAOC,MAAM,UAAYC,IAAepgB,EAAI1O,SAInD+uB,MAAM,SAAShrB,GACdirB,QAAQC,IAAI,QAASlrB,GACrB,IAAI2K,EAAM3K,EAAImrB,SACVnrB,GAEFirB,QAAQC,IAAI,yBAA2BvgB,KAMhC,MAAAygB,GACbC,IAAK,SAASjB,EAAK/P,EAAQgQ,EAASC,GAClC,OAAOJ,EAAS,MAAOE,EAAK/P,EAAQgQ,EAASC,IAE/CgB,KAAM,SAASlB,EAAK/P,EAAQgQ,EAASC,GACnC,OAAOJ,EAAS,OAAQE,EAAK/P,EAAQgQ,EAASC,IAEhDiB,IAAK,SAASnB,EAAK/P,EAAQgQ,EAASC,GAClC,OAAOJ,EAAS,MAAOE,EAAK/P,EAAQgQ,EAASC,IAE/CkB,OAAQ,SAASpB,EAAK/P,EAAQgQ,EAASC,GACrC,OAAOJ,EAAS,SAAUE,EAAK/P,EAAQgQ,EAASC,sHCzDrCpf,GAfbugB,YAAa,KACbC,WAAY,KACZltB,iBACA4J,kBACAujB,kBACAC,sBACA5I,oBACAG,cACA0I,kBACAC,0BACAruB,aACAsuB,OAAQ,KACRC,yBC+BaC,GA5CbR,YAAa,SAAUvgB,GACrB,OAAOA,EAAMugB,aAEfC,WAAY,SAAUxgB,GACpB,OAAOA,EAAMwgB,YAEfltB,cAAe,SAAU0M,GACvB,OAAOA,EAAM1M,eAEf4J,eAAgB,SAAU8C,GACxB,OAAOA,EAAM9C,gBAEfujB,eAAgB,SAAUzgB,GACxB,OAAOA,EAAMygB,gBAEfC,mBAAoB,SAAU1gB,GAC5B,OAAOA,EAAM0gB,oBAEf5I,iBAAkB,SAAU9X,GAC1B,OAAOA,EAAM8X,kBAEfG,WAAY,SAAUjY,GACpB,OAAOA,EAAMiY,YAEf0I,eAAgB,SAAU3gB,GACxB,OAAOA,EAAM2gB,gBAEfC,uBAAwB,SAAU5gB,GAChC,OAAOA,EAAM4gB,wBAEfruB,UAAW,SAAUyN,GACnB,OAAOA,EAAMzN,WAEfsuB,OAAQ,SAAU7gB,GAChB,OAAOA,EAAM6gB,QAEfC,qBAAsB,SAAU9gB,GAC9B,OAAOA,EAAM8gB,iECvBFE,GAdbC,oBAAqB,sBACrBC,uBAAwB,yBACxBC,yBAA0B,2BAC1BC,yBAA0B,2BAC1BC,6BAA8B,+BAC9BC,2BAA4B,6BAC5BC,mBAAoB,qBACpBC,uBAAwB,yBACxBC,kCAAmC,oCACnCC,kBAAmB,oBACnBC,cAAe,gBACfC,+BAAgC,kCCXlCC,GAAAC,KAAAC,IAAAD,EACGd,EAAMC,oBADT,SAC+BjhB,EAAOgiB,GAKlChiB,EAAMugB,YAAcyB,IANxBD,IAAAD,EAQGd,EAAME,uBART,SAQkClhB,EAAOgiB,GACrC,IAAIC,KACJC,IAAYF,GAASxW,QAAQ,SAAA2W,GAC3BF,EAAOE,GAAQH,EAAQG,KAEzBniB,EAAM1M,cAAgB2uB,IAb1BF,IAAAD,EAeGd,EAAMG,yBAfT,SAeoCnhB,EAAOgiB,GACvC,IAAIC,KACJC,IAAYF,GAASxW,QAAQ,SAAA2W,GAC3BF,EAAOE,GAAQH,EAAQG,KAEzBniB,EAAM9C,eAAiB+kB,IApB3BF,IAAAD,EAsBGd,EAAMI,yBAtBT,SAsBoCphB,EAAOgiB,GACvC,IAAIC,KACJC,IAAYF,GAASxW,QAAQ,SAAA2W,GAC3BF,EAAOE,GAAQH,EAAQG,KAEzBniB,EAAMygB,eAAiBwB,IA3B3BF,IAAAD,EA6BGd,EAAMK,6BA7BT,SA6BwCrhB,EAAOgiB,GAC3C,IAAIC,KACJC,IAAYF,GAASxW,QAAQ,SAAA2W,GAC3BF,EAAOE,GAAQH,EAAQG,KAEzBniB,EAAM0gB,mBAAqBuB,IAlC/BF,IAAAD,EAoCGd,EAAMM,2BApCT,SAoCsCthB,EAAOgiB,GACzC,IAAIC,KACJC,IAAYF,GAASxW,QAAQ,SAAA2W,GAC3BF,EAAOE,GAAQH,EAAQG,KAEzBniB,EAAM8X,iBAAmBmK,IAzC7BF,IAAAD,EA2CGd,EAAMO,mBA3CT,SA2C8BvhB,EAAOgiB,GACjC,IAAIC,KACJC,IAAYF,GAASxW,QAAQ,SAAA2W,GAC3BF,EAAOE,GAAQH,EAAQG,KAEzBniB,EAAMiY,WAAagK,IAhDvBF,IAAAD,EAkDGd,EAAMQ,uBAlDT,SAkDkCxhB,EAAOgiB,GACrC,IAAIC,KACJC,IAAYF,GAASxW,QAAQ,SAAA2W,GAC3BF,EAAOE,GAAQH,EAAQG,KAEzBniB,EAAM2gB,eAAiBsB,IAvD3BF,IAAAD,EAyDGd,EAAMS,kCAzDT,SAyD6CzhB,EAAOgiB,GAChD,IAAIC,KACJC,IAAYF,GAASxW,QAAQ,SAAA2W,GAC3BF,EAAOE,GAAQH,EAAQG,KAEzBniB,EAAM4gB,uBAAyBqB,IA9DnCF,IAAAD,EAgEGd,EAAMU,kBAhET,SAgE6B1hB,EAAOgiB,GAChC,IAAIC,KACJC,IAAYF,GAASxW,QAAQ,SAAA2W,GAC3BF,EAAOE,GAAQH,EAAQG,KAEzBniB,EAAMzN,UAAY0vB,IArEtBF,IAAAD,EAuEGd,EAAMW,cAvET,SAuEyB3hB,EAAOgiB,GAK5BhiB,EAAM6gB,OAASrrB,KAAK4sB,WA5ExBL,IAAAD,EA8EGd,EAAMY,+BA9ET,SA8E0C5hB,EAAOgiB,GAC7C,IAAIC,KACJC,IAAYF,GAASxW,QAAQ,SAAA2W,GAC3BF,EAAOE,GAAQH,EAAQG,KAEzBniB,EAAM8gB,qBAAuBmB,IAnFjCH,GCAeO,GACbC,kBADa,SAAAC,EACgBP,IAC3BQ,EADoCD,EAAlBC,QACXxB,EAAMC,oBAAqBe,IAEpCS,oBAJa,SAAAC,EAIkBV,IAC7BQ,EADsCE,EAAlBF,QACbxB,EAAME,uBAAwBc,IAEvChgB,qBAPa,SAAA2gB,EAOmBX,IAC9BQ,EADuCG,EAAlBH,QACdxB,EAAMG,yBAA0Ba,IAEzCvkB,qBAVa,SAAAmlB,EAUmBZ,IAC9BQ,EADuCI,EAAlBJ,QACdxB,EAAMI,yBAA0BY,IAEzC3J,yBAba,SAAAwK,EAauBb,IAClCQ,EAD2CK,EAAlBL,QAClBxB,EAAMK,6BAA8BW,IAE7Cc,uBAhBa,SAAAC,EAgBqBf,IAChCQ,EADyCO,EAAlBP,QAChBxB,EAAMM,2BAA4BU,IAE3C9J,iBAnBa,SAAA8K,EAmBehB,IAC1BQ,EADmCQ,EAAlBR,QACVxB,EAAMO,mBAAoBS,IAEnCiB,qBAtBa,SAAAC,EAsBmBlB,IAC9BQ,EADuCU,EAAlBV,QACdxB,EAAMQ,uBAAwBQ,IAEvCmB,6BAzBa,SAAAC,EAyB2BpB,IACtCQ,EAD+CY,EAAlBZ,QACtBxB,EAAMS,kCAAmCO,IAElDqB,gBA5Ba,SAAAC,EA4BctB,IACzBQ,EADkCc,EAAlBd,QACTxB,EAAMU,kBAAmBM,IAElCuB,aA/Ba,SAAAC,EA+BWxB,IACtBQ,EAD+BgB,EAAlBhB,QACNxB,EAAMW,cAAeK,IAE9ByB,2BAlCa,SAAAC,EAkCyB1B,IACpCQ,EAD6CkB,EAAlBlB,QACpBxB,EAAMY,+BAAgCI,eC7BjD2B,UAAIlF,IAAImF,KAER,IAEeC,EAAA,IAAID,IAAKE,OACpB9jB,QACA+gB,UACAc,YACAQ,UACA0B,aChBJvF,UAAIwF,OAAOC,eAAgB,EAE3BzF,UAAIlP,UAAU4U,KAAOhE,EAIrBP,OAAO5e,EAAIA,IAKT4e,OAAOwE,sBAAwB,SAAS1wB,EAAM2wB,EAAWlF,EAAK5J,GAgB1D,IAAI+O,EAAW,IAAIC,gBACnBD,EAASzoB,OAAO,SAAUikB,IAAeuE,IAC7B,OAAR3wB,EACFysB,EAAIC,IACFjB,EACAmF,EACA,SAAAtzB,GACEukB,EAASvkB,IAEX,SAAAwzB,GACEjP,EAASiP,KAGI,QAAR9wB,GACTysB,EAAIE,KACFlB,EACAmF,EACA,SAAAtzB,GACEukB,EAASvkB,IAEX,SAAAwzB,GACEjP,EAASiP,MAcrB/F,UAAIC,IAAI+F,KAWRhG,UAAIC,IAAIgG,KAIRjG,UAAIwF,OAAOC,eAAgB,EAE3BtE,OAAOxpB,GAAKA,EAEZuuB,IAAcvuB,EAAIyY,GAElB+Q,OAAO/qB,KAAO,KAEd+qB,OAAOgF,cAAgB,SAASC,GAC9B,OAAe,IAARA,EAAc,KAEvBjF,OAAOpnB,SAAW,SAASqsB,EAAOld,GAChC,OAAOkd,EAAQld,GAGjBiY,OAAOjmB,KAAOyb,EAAQ,QAGtBhV,MAAMmP,UAAUtT,OAAS,WAKvB,IAJA,IAAI6oB,SACFjmB,EAAIuL,UACJ2a,EAAIlmB,EAAE5I,OACN+uB,SACKD,GAAKpyB,KAAKsD,QAEf,IADA6uB,EAAOjmB,IAAIkmB,IAC2B,KAA9BC,EAAKryB,KAAKiC,QAAQkwB,KACxBnyB,KAAKsyB,OAAOD,EAAI,GAGpB,OAAOryB,MAGTitB,OAAOsF,kBAAoB,SAAUC,GAInC,IAAIzM,EAAIjD,SAAS2P,gBAAgB,6BAA8B,KAG/D1M,EAAE2M,eAAe,KAAM,YAAaF,GAKpC,IAMIG,EAAQC,EAAQC,EANhBC,EAAS/M,EAAEyM,UAAUO,QAAQC,cAAcF,OAI1C5mB,EAAoB4mB,EAApB5mB,EAAGC,EAAiB2mB,EAAjB3mB,EAAGnD,EAAc8pB,EAAd9pB,EAAGiB,EAAW6oB,EAAX7oB,EAAG4gB,EAAQiI,EAARjI,EAAGoI,EAAKH,EAALG,EAOpB,OAJIN,EAAS7vB,KAAKsQ,KAAKlH,EAAIA,EAAIC,EAAIA,MAAID,GAAKymB,EAAQxmB,GAAKwmB,IACrDE,EAAQ3mB,EAAIlD,EAAImD,EAAIlC,KAAGjB,GAAKkD,EAAI2mB,EAAO5oB,GAAKkC,EAAI0mB,IAChDD,EAAS9vB,KAAKsQ,KAAKpK,EAAIA,EAAIiB,EAAIA,MAAIjB,GAAK4pB,EAAQ3oB,GAAK2oB,EAAQC,GAASD,GACtE1mB,EAAIjC,EAAIkC,EAAInD,IAAGkD,GAAKA,EAAGC,GAAKA,EAAG0mB,GAASA,EAAOF,GAAUA,IAE3DO,WAAYrI,EACZsI,WAAYF,EACZG,OAA2B,IAAnBtwB,KAAKuwB,MAAMlnB,EAAGD,GAAWpJ,KAAK0N,GACtCqiB,MAA0B,IAAnB/vB,KAAKwwB,KAAKT,GAAe/vB,KAAK0N,GACrCmiB,OAAQA,EACRC,OAAQA,IAIZ3F,OAAOsG,qBAAuB,SAAUC,GAAoB,IAAbC,EAAahc,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,GAAAA,UAAA,GAAH,EACvDhU,YAAa,eACVuK,OAAO,WACN,OAAOvK,SAAUzD,MAAMmJ,KAAK,WAAa6Z,OAAOwQ,KAEjDnvB,MAAM,eAAgBovB,GACzBhwB,YAAa,eACVuK,OAAO,WACN,OAAOvK,SAAUzD,MAAMmJ,KAAK,WAAa6Z,OAAOwQ,KAEjDnvB,MAAM,eAAgB,MAE3B4oB,OAAOyG,uBAAyB,WAC9BjwB,YAAa,eAAee,KAAK,WAC/B,IAAMivB,EAAUxoB,OAAOxH,SAAUzD,MAAMmJ,KAAK,QAC5C1F,SAAUzD,MACPqE,MAAM,eAAgBovB,MAK7B,IAAI3H,WACF6H,GAAI,OACJxC,QACAlF,SACAR,YAAcD,OACdoI,SAAU,oaC9JZC,EAAAnL,EAAA,QACAvqB,EAAA,GACAC,KAAA,SACAqtB,YAAAvH,SAAA4P,EAAA,GACAz1B,KAHA,WAIA,OACA01B,iBAAA,OAGAx0B,QARA,aASAC,SAAYw0B,OACZt0B,OAAAu0B,EAAA,EAAAv0B,EACA,aACA,iBACA,iBACA,qBACA,aACA,YAGAE,OACAkuB,WAAA,SAAAhuB,EAAAC,GACAC,KAAAC,eACA,MAAAF,EACAC,KAAAS,UAEAT,KAAAU,OACAV,KAAAW,SAGAwtB,OAAA,SAAAttB,GACAb,KAAAC,eACAD,KAAAS,UAEA+J,eAAA,SAAA3J,GACAb,KAAAk0B,aAAAC,aAAAtzB,EAAAsO,YAEA4e,eAAA,SAAAltB,GACA,OAAAA,EAAAE,MACA,YACAf,KAAAk0B,aAAAE,YAAAvzB,EAAAO,QACA,MACA,YACApB,KAAAk0B,aAAAG,SAAAxzB,EAAAO,UAIA4sB,mBAAA,SAAAntB,GACA,IAAAgT,EAAA7T,KAAA4lB,KAAAliB,OAAA,iBACA8iB,OAAA,EAEAA,EADA,OAAA3S,EAAA1K,KAAA,aACAnJ,KAAAs0B,aAAAzgB,GAAA3T,IAAA,SAAA+J,GAAA,OAAAA,KAEA,KAEAjK,KAAAu0B,QAAAC,QACA3gB,EAAApI,OACA+a,EACA3lB,EAAAykB,MACAtlB,KAAA4D,WAAA6wB,OAGAlP,WAAA,SAAA1kB,EAAAd,GAIA,YAHAkB,IAAAlB,EAAA0lB,OACAzlB,KAAA00B,SAAA30B,EAAA0lB,MAEA5kB,EAAA4kB,MACA,aAEAzlB,KAAA20B,eACA30B,KAAA+vB,qBACA7uB,UAAA,KACAH,KAAA,YAEA,iBAAAf,KAAA00B,WACA10B,KAAA+vB,qBACA7uB,eAAAD,EACAG,UAAA0b,OAAA8X,IAAAnnB,MAAAvL,KAAAlB,KAAAsC,QAAAylB,SACAhoB,KAAA,qBAEAf,KAAA60B,mBACA70B,KAAA80B,gBACA90B,KAAA+0B,wBAEA/0B,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,eAAA+E,SACAtJ,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,gBACAH,QAAA,uBACAA,QAAA,kBACAA,QAAA,oBACA+E,KAAA,oBACAA,KAAA,aACAnF,GAAA,kBACAA,GAAA,iBACAA,GAAA,cACAhE,KAAAg1B,mBACAh1B,KAAAi1B,0BACA,MACA,gBACA,oBAAAj1B,KAAA00B,SACA10B,KAAA60B,mBACA70B,KAAA+0B,uBACA/0B,KAAA+vB,qBACA7uB,eAAAD,EACAG,UAAA0b,OAAA8X,IAAAnnB,MAAAvL,KAAAlB,KAAAsC,QAAAylB,SACAhoB,KAAA,qBAEAf,KAAA80B,gBACA90B,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,eAAA+E,SACAtJ,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,gBACAH,QAAA,uBACAA,QAAA,kBACA+E,KAAA,oBACAA,KAAA,aACAnF,GAAA,kBACAA,GAAA,iBACAA,GAAA,cAEAhE,KAAA20B,eACA30B,KAAAk1B,gBACA,MACA,mBACA,iBAAAl1B,KAAA00B,SACA10B,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,gBACAH,QAAA,oBACAA,QAAA,kBACAJ,GAAA,kBACAA,GAAA,iBACAA,GAAA,cACAhE,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,eAAA+E,SAEAtJ,KAAA20B,eACA30B,KAAAm1B,sBAKAhwB,QAAW6uB,OACXt0B,OAAAu0B,EAAA,EAAAv0B,EACA,oBACA,kBACA,sBACA,yBACA,uBACA,+BACA,gCAMAO,aAAA,WAuFA,IACAm1B,EACAC,EAxFAr1B,KAAAoF,MAAApF,KAAA2D,IAAA0B,YACArF,KAAAsF,OAAAtF,KAAA2D,IAAA4B,aAEAvF,KAAA4lB,KAAAniB,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,QAEA1D,KAAAs1B,SAAA5vB,WAAA1F,KAAA4lB,KAAAvhB,MAAA,UACArE,KAAAu1B,UAAA7vB,WAAA1F,KAAA4lB,KAAAvhB,MAAA,WAEArE,KAAAw1B,OAkEA,SAAAC,GAEA,IADA,IAAAC,EAAA,IAAAjoB,MAAAgoB,EAAA,GAAAnyB,QACAW,EAAA,EAAAA,EAAAyxB,EAAApyB,OAAAW,IACAyxB,EAAAzxB,KAEA,OACAwxB,QACAE,YAAA,KACAC,WAAAF,GA1EAG,CAAA3zB,KAAAlB,MACAhB,KAAA81B,SAAA5zB,KAAAlB,KAAAhB,KAAAw1B,OAAAG,YA8EAP,EAWA,WAEA,IADA,IAAAW,EAAA,IAAAtoB,MAAAvL,KAAAlB,KAAAsC,QACAW,EAAA,EAAAA,EAAA8xB,EAAAzyB,OAAAW,IACA8xB,EAAA9xB,GAAA,IAAAwJ,MAAAvL,KAAAlB,KAAAsC,QAGA,QAAAmB,EAAA,EAAAA,EAAAsxB,EAAAzyB,OAAA,EAAAmB,IACA,QAAAyN,EAAAzN,EAAA,EAAAyN,EAAA6jB,EAAAtxB,GAAAnB,OAAA4O,IAAA,CAIA,IAHA,IAAA8jB,EAAA9zB,KAAAlB,KAAAyD,GACAwxB,EAAA/zB,KAAAlB,KAAAkR,GACAgH,EAAA,EACAgd,EAAA,EAAAA,EAAAF,EAAA1yB,OAAA4yB,IACAF,EAAAE,KAAAD,EAAAC,IACAhd,IAGA6c,EAAAtxB,GAAAyN,GAAAgH,EAGA,OAAA6c,EA9BAI,GACAd,EAAAvyB,KAAAI,IAAAF,MAAAF,KAAA8xB,IAAA1yB,KAAAk0B,WAAAl2B,IAAA,SAAAm2B,GAAA,OAAAvzB,KAAAI,IAAAF,MAAAF,KAAA8xB,IAAAyB,SAEAC,UAAAp0B,KAAAq0B,OACAC,QAAAt0B,KAAAk0B,WACAhB,UACAC,UACAvqB,OAAA5I,KAAA4I,SApFA9K,KAAAy2B,iBACAC,SAAA,KACApR,MAAA,KACAqR,MAAA,KACAC,UAAA,MAEA52B,KAAA62B,cACAH,SAAA,KACApR,MAAA,KACAqR,MAAA,KACAC,UAAA,MAEA52B,KAAAyH,UAAA,KACAzH,KAAA82B,SAAAh0B,KAAAC,IAAA/C,KAAAs1B,SAAAt1B,KAAAu1B,WACAv1B,KAAA+2B,WAAA,IACA/2B,KAAAg3B,QACAvnB,EAAAhM,GAAA6D,cACAC,QAAA,MACAG,OAAA,IAAA1H,KAAA+2B,WAAA,GAAA/2B,KAAA+2B,aACAjrB,EAAArI,GAAA6D,cACAC,QAAA,MACAG,OAAA,IAAA1H,KAAA+2B,WAAA,GAAA/2B,KAAA+2B,cAEA/2B,KAAA4D,YACAC,SAAA,IACA4wB,KAAA,IACAwC,MAAA,IACAC,SAAA,IAEAl3B,KAAAm3B,SAAA,EACAn3B,KAAAk0B,cACArZ,OAAA,EACAuc,UAAA,MAEAp3B,KAAAq3B,eAAA,EACAr3B,KAAAs3B,eAAA,KACAt3B,KAAAu3B,SAAA,IAAAC,EAAAtrB,GAAAlM,KAAA82B,SAAA92B,KAAA+2B,YACA/2B,KAAAy3B,aACAC,MAAA,KACAC,WAAA,GACAC,YAAA,IACAC,OAAA,KACAC,YAAA,IACA7R,KAAA,KACA8R,QAAA,EACAC,YAAA,GAGAh4B,KAAA8I,OACAC,EAAAtF,GAAA6D,cAAAC,QAAA,MAAAG,OAAA,QACAsB,EAAAvF,GAAA6D,cAAAC,QAAA,MAAAG,OAAA,QACAuB,EAAAxF,GAAA6D,cAAAC,QAAA,MAAAG,OAAA,SAGA1H,KAAAi4B,WAAA,2hBACAj4B,KAAAk4B,gBAAA,SAAAh2B,KAAAsD,KAAA,SAEAxF,KAAAm4B,SAAA,EACAn4B,KAAAo4B,cAAA,KACAp4B,KAAAq4B,sBAAA,EAEAr4B,KAAAs4B,oBAAA,KACAt4B,KAAA00B,SAAA,UAgDAh0B,KAAA,WACAV,KAAAu4B,IAAAv4B,KAAA4lB,KACA1c,OAAA,OACAC,KAAA,QAAAnJ,KAAAs1B,UACAnsB,KAAA,SAAAnJ,KAAAu1B,WACArsB,OAAA,KACAC,KAAA,eACAA,KAAA,YANA,aAMAnJ,KAAAs1B,SAAA,EANA,KAMAt1B,KAAAu1B,UAAA,EANA,UAMAv1B,KAAA82B,SAAA92B,KAAA+2B,WANA,MAQAt2B,OAAA,WACAT,KAAAqJ,QACArJ,KAAAU,OACAV,KAAAW,QAEA0I,MAAA,WAEA5F,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,QAAAa,UAAA,KAAA+E,UAEA3I,KAAA,eAAAG,EAAAd,KACAw4B,EAAAnqB,EAAAC,WACAmqB,EAAApqB,EAAAC,WACAtO,KAAA04B,mBACA14B,KAAA24B,WAAAH,GACAnqB,EAAAO,KAAA4pB,GAAA32B,KAAA,WACAf,EAAA83B,WAAAH,KAEApqB,EAAAO,KAAA6pB,GAAA52B,KAAA,WAEAg3B,WAAA,WACAp1B,GAAAC,OAAA,iBAAAW,MAAA,mBACA,QAIAiwB,aAAA,SAAAvO,GACA,IAAAyM,EAAAzM,EAAA5c,KAAA,aACA2vB,EAAAtG,EAAAvwB,QAAA,KACA82B,EAAAvG,EAAAvwB,QAAA,KACA+2B,EAAAxG,EAAAvwB,QAAA,KACA,OACAyD,WAAA8sB,EAAAyG,UAAAH,EAAA,EAAAC,IACArzB,WAAA8sB,EAAAyG,UAAAF,EAAA,EAAAC,MAGAN,iBAAA,WACA,IAAAQ,EAAAl5B,KACA4lB,EAAA5lB,KAAA4lB,KACAuT,EAAAj3B,KACAgyB,EAAAl0B,KAAAk0B,aACAkF,EAAAp5B,KAAA4D,WAAAC,SACAgyB,EAAA71B,KAAAw1B,OACA6D,EAAAH,EAAAtT,KACAsO,EAAArZ,QACAqZ,EAAArZ,OAAA,EACAqZ,EAAArwB,SAAAu1B,EACAlF,EAAArgB,UAAAqlB,EAAAtT,KACAsO,EAAAoF,WAAA,KACApF,EAAAqF,cAAA,SACAC,EACAC,EACAC,GAEA,IAAAC,GAAA,EACAC,GAAA,EACAC,GAAA,EACAC,OAAA,EACA,OAAAJ,GACA,cACAG,EAAAF,EAAAF,EAAAn2B,SAAAk2B,EAAAl2B,OACAs2B,GAAA,EACA,MACA,eACAD,EAAAF,EAAAn2B,SAAAk2B,EAAAl2B,OACAw2B,EAAAN,EAAAl2B,OAAA,EACA,MACA,kBACAq2B,EAAAF,EAAAn2B,OAAAk2B,EAAAl2B,OACAw2B,EAAAN,EAAAl2B,OAGA,GAAAs2B,EACA,OAAAC,EAEA,IAAAF,EACA,SAEA,QAAA11B,EAAA,EAAAA,EAAA61B,EAAA71B,IACA,GAAAw1B,EAAAx1B,KAAAu1B,EAAAv1B,GAAA,CACA41B,GAAA,EACA,MAOA,MAJA,aAAAH,IACAG,EACAA,GAAAJ,EAAAK,KAAAN,EAAAM,IAEAD,GAEA3F,EAAA6F,SAAA,SAAAC,EAAAC,GAEAx2B,GAAAC,OAAAs2B,GACAz1B,UAAA,QACAH,QAAA,aACAmW,YACA3W,aACAC,SAAAu1B,GACAjwB,KAAA,iBACAA,KAAA,oBACA,IAAA+wB,EAAAb,EACA90B,UAAA,gBACAyJ,OAAA,WACA,OAAAvK,GAAAC,OAAA1D,MAAAmJ,KAAA,WAAA8wB,IAEAE,EAAAD,EAAA,GAAA7rB,EAAA6rB,EAAA,IAAAE,SAAA,KAEAlG,EAAAmG,WAAA,WACAhB,EACA90B,UAAA,wBACAgW,YACA3W,aACAC,SAAAu1B,GACAjwB,KAAA,kBACAkwB,EACA90B,UAAA,wBACAH,QAAA,aACAmW,YACA3W,aACAC,SAAAu1B,GACAjwB,KAAA,iBACAA,KAAA,sBAEA+qB,EAAAoG,cAAA,SAAAnlB,GAEA,IAAAolB,EAAAlB,EACA90B,UAAA,mBACAyJ,OAAA,SAAA/D,EAAAhG,GACA,OAAAkR,IAAA1R,GAAAC,OAAA1D,MAAAmJ,KAAA,WAEAoxB,EACAh2B,UAAA,QACAgW,YACA3W,aACAC,SAAAu1B,GACAjwB,KAAA,mBACAoxB,EACAh2B,UAAA,QACAgW,YACA3W,aACAC,SAAAu1B,GACAjwB,KAAA,qBAEA+qB,EAAAsG,aAAA,SAAAC,GACA,IAAAC,EAAA16B,KAAAu5B,cACAoB,EAAAtB,EACA90B,UAAA,mBACAyJ,OAAA,SAAA4sB,EAAAC,GACA,IAAA35B,EAAAuC,GAAAC,OAAA1D,MAAAmJ,KAAA,SAIA,GAHA,MAAAjI,IACAA,IAAA2M,MAAA,MAEApK,GAAAC,OAAA1D,MAAAoE,QAAA,aACA,IAAA02B,EAAAL,EAAA/vB,MACA,EACA+vB,EAAAn3B,OAAA,GAEA,OAAAo3B,EACAI,EACA55B,EACA,eAGA,OAAAw5B,EACAD,EACAv5B,EACA,cAIAy5B,EACAp2B,UAAA,QACAgW,YACA3W,aACAC,SAAAu1B,GACAjwB,KAAA,mBACAwxB,EACAp2B,UAAA,QACAgW,YACA3W,aACAC,SAAAu1B,GACAjwB,KAAA,iBACAA,KAAA,qBAEA+qB,EAAA6G,UAAA,SAAAC,EAAAC,GACA,IAAAA,EAAA,CACAd,EAAAa,EAAA,iBACA,IAAA95B,EAAAuC,GAAAC,OAAAs3B,GAAA7xB,KAAA,SACA,SAAAjI,KAAAoC,OAAA,GACApC,IAAA2M,MAAA,KACA,IAAAqtB,EAAAl7B,KAAAo0B,YACA8E,EAAAiC,aAAAviB,KAAAsgB,EAAAh4B,IAEAk6B,EAAAjC,EAAA3xB,QAAAwH,YAAA9N,GAAA7C,KAAAg9B,YACAC,EAAApC,EAAA5B,eAAA6B,EAAA3xB,QAAAnJ,KAAAg9B,YACAD,EAAAvH,EAAAjxB,IAAA04B,EAAAF,GACAp7B,KAAAu7B,aAAAL,EAAAE,GAAA,GAKAlC,EAAAnJ,qBACA7uB,YACAH,KAAA,cAGAf,KAAA+5B,SAAAiB,EAAA95B,KAGAgzB,EAAAsH,SAAA,SAAAP,GACA,IAAAA,EAAA,CACAj7B,KAAAq6B,aACA,IAAAjf,EAAApb,KAAAo0B,cACAp0B,KAAAu7B,aAAAngB,EAAA,SAKA8d,EAAAnJ,qBACA7uB,UAAA,KACAH,KAAA,aAEAf,KAAAo0B,cACAp0B,KAAAu7B,iBAGArH,EAAAqH,aAAA,SACAngB,EACAigB,GAGA,IAFAI,IAEAhkB,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,KAAAA,UAAA,GADAikB,EACAjkB,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,IAAAA,UAAA,GACAkkB,OAAA,EACA,MAAAvgB,IAEAugB,EADAF,EACAvC,EAAAiC,aAAA/f,GAEAA,GAIAsgB,KACA,IAAAD,EACAz7B,KAAA47B,aAAAD,GAEA37B,KAAA67B,iBAAAzgB,KAaA8Y,EAAA4H,QAAA,SAAA9B,GAAA,IAAA+B,IAAAtkB,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,KAAAA,UAAA,GACAukB,EAAAv4B,GAAAC,OAAAs2B,GACAiC,EAAAD,EAAA53B,QAAA,UACA83B,OAAA,EACAP,OAAA,EACA/V,EAAArhB,UAAA,0BAAAH,QAAA,aACA63B,GAuBA/C,EAAAvmB,SAAAwpB,gBAAAvW,EAAA,cAUAsT,EAAAvE,eACAuE,EAAAnJ,qBACA7uB,UAAA,KACAH,KAAA,YAEAm4B,EAAAnJ,qBACA7uB,eAAAD,EACAG,UAAA0b,OAAA8X,IAAAnnB,MAAAvL,KAAAlB,KAAAsC,QAAAylB,SACAhoB,KAAA,qBAEAm4B,EAAAzI,8BACA2L,YAAA,QA3CAL,GACAG,EAAAF,EAAA7yB,KAAA,SAAA0E,MAAA,KACA8tB,EAAAzC,EAAAiC,aAAAviB,KAAAsgB,EAAAgD,GACAP,EAAAzC,EAAAvmB,SAAAwpB,gBAAAvW,EAAA+V,EAAA,SACAK,EAAA53B,QAAA,aAKA80B,EAAAnJ,qBACA7uB,UAAAg7B,EACA96B,YAAAH,EACAF,KAAA,qBAEAm4B,EAAAzI,8BACA2L,YAAAF,MAGAP,GAAAK,EAAA7yB,KAAA,UACAwyB,EAAAzC,EAAAvmB,SAAAwpB,gBAAAvW,EAAA+V,EAAA,WA4BA,IAAAI,EACA/7B,KAAAu7B,aAAAW,EAAA,YAEAl8B,KAAAu7B,aAAAI,EAAA,aAIAzH,EAAAC,aAAA,SAAAvgB,GACA,IAAAyoB,GACAC,QAAApD,EAAAvmB,SAAA4pB,mBACA3W,EACAhS,EACA,QACA,KACAiiB,EAAAJ,OAEA+G,QACA5oB,EAAA5F,OAAA,SAAA/D,GACA,WAAAA,IACA3G,OAAA,GAOA+4B,EAAAC,QACAh5B,QAAAuyB,EAAAJ,MAAAnyB,OACA4wB,EAAA0H,aAAA,MAEA1H,EAAA0H,aAAAS,EAAAC,UAGApI,EAAAE,YAAA,SAAAuH,GACA,OAAAzC,EAAAvmB,SAAA8pB,kBAAA7W,EAAA+V,EAAA,UAEAzH,EAAAG,SAAA,SAAAsH,GACA/V,EAAArhB,UAAA,0BAAAH,QAAA,aACA80B,EAAAvmB,SAAAwpB,gBAAAvW,EAAA+V,GACA37B,KAAA47B,aAAAD,IAEAzH,EAAA0H,aAAA,SAAAD,GAEA,SAAAA,GAAA,IAAAA,EAAAr4B,YAMA,CAEA,IAAAuW,EAAAsf,EAAAn4B,KAEA,OAAA26B,EAAAr4B,OACAuW,EAAA8hB,EAAA,MAgBAzH,EAAA2H,iBAAA,SAAAa,KAOAxI,EAAAyI,QAAA,SAAAC,GAKA,IAJA,IAAAhjB,EAAAsf,EAAAtf,SACA/E,EAAA+E,EAAAtW,OACA2W,EAAA,IAAAxM,MAAAoH,GACAgoB,EAAA,EACA54B,EAAA,EAAAA,EAAA4Q,EAAA5Q,IACA2V,EAAA3V,IAAA,EACAgW,EAAAhW,GAAA2V,EAAA3V,IAEAgW,EAAAhW,GAAA24B,EAAAC,GACAA,KAGA,OAAA5iB,KA+BAkhB,aAAA,SAAAj6B,GAAA,IAAA47B,IAAArlB,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,KAAAA,UAAA,GACAslB,EAAA/8B,KAAAw1B,OAAAG,YACAqH,EAAA97B,EAAAoC,OAAA,EACA25B,EAAAj9B,KAAA62B,aAAAF,MAAAqG,GACAE,EAAAh8B,EAAAwJ,MAAA,EAAAxJ,EAAAoC,OAAA,GAAAiW,KAAA,KACA4jB,EAAAj8B,IAAAoC,OAAA,GACA85B,EAAAH,EAAAjvB,OAAA,SAAAysB,GACA,OAAAA,EAAA4C,SAGA5C,EAAA6C,SAAA/jB,KAAA,OACA2jB,IACA,GAAA9hB,IAAA+hB,GACA,GAAAL,GAAA,MAAAC,EAAA,CAEA,IADA,IAAAQ,EAAA,IAAA9vB,MAAA2vB,EAAA95B,QACAW,EAAA,EAAAA,EAAAm5B,EAAA95B,OAAAW,IACAs5B,EAAAt5B,GAAA84B,EAAAK,EAAAn5B,IAAA,GAEAm5B,EAAAG,OAEA,QAAAx4B,EAAA,EAAAA,EAAAq4B,EAAA95B,OAAAyB,IACAq4B,EAAAr4B,GAAAq4B,EAAAr4B,GAAA,GAGA,OAAAq4B,GAEAzE,WAAA,SAAA6E,GACA,IAAA7zB,EAAA3J,KACA,MAAAA,KAAAy2B,gBAAAC,WAOA,WACA/sB,EAAAktB,aAAAH,SAAAx0B,KAAAu7B,gBACA9zB,EAAAktB,aAAAvR,MAyOA,SAAAoY,EAAA3xB,GACA,OAAA0B,MAAAkwB,QAAA5xB,GACA,EAAAjJ,KAAAI,IAAAF,MAAAF,KAAA8xB,IAAA7oB,EAAA7L,IAAA,SAAAgF,GAAA,OAAAw4B,EAAAx4B,OAEA,EA7OAw4B,CAAA/zB,EAAAktB,aAAAH,UAAA,EAFA,IAIAkH,EAJA,WAKA,SAAAA,EAAAC,EAAAC,GAAA,IAAAC,EAAAtmB,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,IAAAA,UAAA,GAAAumB,EAAAvmB,UAAA,GAAAwmB,EAAAxmB,UAAA,GAAAymB,IAAAl+B,KAAA49B,GACA,IAAAO,EAAA,IAAAC,EAAAlyB,EACAmyB,EAAAR,IAAAS,SAAA,KACA72B,EAAA,IAAAgG,MAAAvL,KAAAiE,KAAA7C,QAAAoK,KAAA,GACA6wB,EAAAV,IAAAp2B,UAAA,KAEAzH,KAAAyH,UAAA,MAAAw2B,EAAAM,GAAA92B,EAAAw2B,EACAj+B,KAAAs+B,SAAA,MAAAN,EAAAK,GAAAF,EAAAH,EACAh+B,KAAAw+B,MAAA,MAAAV,OACA99B,KAAAy+B,SAAAV,EAdA,OAAAW,IAAAd,IAAAjoB,IAAA,UAAA5T,MAAA,SAgBA48B,GACA3+B,KAAAyH,UAAAosB,EAAA9V,IAAA/d,KAAAyH,UAAAk3B,EAAAl3B,WACAzH,KAAAs+B,SAEA,SAAAM,EAAAC,EAAAC,GAMA,IALA,IAAA5+B,EAAA,IAAAk+B,EAAAlyB,EACA6yB,EAAAC,IAAAJ,EAAAK,WACAC,EAAAF,IAAAH,EAAAI,WACAE,EAAA,IAAA1xB,MAAAsxB,EAAAz7B,QAAAoK,MAAA,GACA0xB,EAAA,IAAA3xB,MAAAyxB,EAAA57B,QAAAoK,MAAA,GACAzJ,EAAA,EAAAA,EAAA86B,EAAAz7B,OAAAW,IAGA,IAFA,IAAAo7B,EAAAN,EAAA96B,GAAA,GACAq7B,EAAAP,EAAA96B,GAAA,GACAiO,EAAA,EAAAA,EAAAgtB,EAAA57B,OAAA4O,IAAA,CACA,IAAAqtB,EAAAL,EAAAhtB,GAAA,GACAstB,EAAAN,EAAAhtB,GAAA,GACArR,OAAA,EACA,GAAAw+B,GAAAE,EAAA,CAEA,GADA1+B,EAAAi+B,EAAAQ,EAAAE,GACAt/B,EAAA2f,IAAAwf,GAEA,CACA,IAAAI,EAAAv/B,EAAAutB,IAAA4R,GACAx+B,EAAAi+B,EAAAW,EAAA5+B,GACAX,EAAAw/B,IAAAL,EAAAx+B,QAJAX,EAAAw/B,IAAAL,EAAAx+B,GAMAs+B,EAAAl7B,IAAA,EACAm7B,EAAAltB,IAAA,GAIA,QAAAxF,EAAA,EAAAA,EAAAyyB,EAAA77B,OAAAoJ,IACA,IAAAyyB,EAAAzyB,GAAA,CACA,IAAAiJ,EAAAopB,EAAAryB,GAAA,GACA5M,EAAAi/B,EAAAryB,GAAA,GACA,GAAAxM,EAAA2f,IAAAlK,GAEA,CACA,IAAAgqB,EAAAz/B,EAAAutB,IAAA9X,GACAiqB,EAAAd,EAAAa,EAAA7/B,GACAI,EAAAw/B,IAAA/pB,EAAAiqB,QAJA1/B,EAAAw/B,IAAA/pB,EAAA7V,GAQA,QAAAyL,EAAA,EAAAA,EAAA6zB,EAAA97B,OAAAiI,IACA,IAAA6zB,EAAA7zB,GAAA,CACA,IAAAmR,EAAAwiB,EAAA3zB,GAAA,GACAs0B,EAAAX,EAAA3zB,GAAA,GACA,GAAArL,EAAA2f,IAAAnD,GAEA,CACA,IAAAojB,EAAA5/B,EAAAutB,IAAA/Q,GACAqjB,EAAAjB,EAAAgB,EAAAD,GACA3/B,EAAAw/B,IAAAhjB,EAAAqjB,QAJA7/B,EAAAw/B,IAAAhjB,EAAAmjB,GAQA,OAAA3/B,EAvDA8/B,CAAAhgC,KAAAs+B,SAAAK,EAAAL,SA0DA,SAAAr6B,EAAAiO,GACA,OAAAjO,EAAAiO,QA7EA0rB,EAAA,IAoFA,WAGA,IADA,IAAAqC,EAAA,IAAAxyB,MAAAvL,KAAAlB,KAAAsC,QACAW,EAAA,EAAAA,EAAAg8B,EAAA38B,OAAAW,IACAg8B,EAAAh8B,GAAA,IAAAwJ,MAAAvL,KAAAiE,KAAA7C,QAAAoK,KAAA,GAGA,IAAAwyB,EAAA,IAAA9B,EAAAlyB,EACAg0B,EAAAC,SAAA,SAAAl8B,EAAAiO,GACA,IAAAyD,EAAA1R,EAAAiO,EAAAjO,EAAA,IAAAiO,IAAA,IAAAjO,EACA,OAAAjE,KAAAytB,IAAA9X,IAEAuqB,EAAAE,QAAA,SAAAn8B,EAAAiO,EAAAmuB,GAEA,IADA,IAAA1qB,EAAA1R,EAAAiO,EAAAjO,EAAA,IAAAiO,IAAA,IAAAjO,EACAiyB,EAAA,EAAAA,EAAAmK,EAAA/8B,OAAA4yB,IACA,KAAAmK,EAAAnK,KACA+J,EAAAh8B,GAAAiyB,KACA+J,EAAA/tB,GAAAgkB,MAGA,OAAAl2B,KAAA0/B,IAAA/pB,EAAA0qB,IAEA12B,EAAAktB,aAAAD,UASA,SAAA0J,EAAAC,EAAAC,GACA,IAAAzzB,EAMA,SAAA0zB,EAAAH,EAAAC,EAAAC,EAAA/V,GACA,SAAA6V,EAAAh9B,OACA,YAEA,IAAAo9B,KACA,IAAAC,KACA,IAAAC,KACA,IAAAC,KACA,IAAAC,GAAA,EACA,QAAA5xB,EAAA,EAAAA,EAAAoxB,EAAAh9B,OAAA4L,IAAA,CACA,IAAA1H,EAAA84B,EAAApxB,GACA,SAAA1H,EAAAlE,OAAA,CACA,IAAAy9B,KAAAjkB,OAAA8X,IAAAnK,IAAAvb,IACA8xB,EAAAP,EAAAj5B,EAAA+4B,EAAAC,EAAAO,GACAE,EAAAD,EAAAx5B,QACAy5B,EAAAC,UAAAX,EAAAU,EAAAF,GACAJ,EAAAx+B,KAAA8+B,GACAP,EAAAv+B,KAAA8+B,GACAH,GAAA,OAEAF,EAAAz+B,KAAAqF,GACAq5B,EAAA1+B,KAAA+M,GAGA,IAAAiyB,EAAAX,EAAAI,EAAAE,KAAAhkB,OAAA8X,IAAAnK,IAAAoW,KACAD,EAAAO,EAAAC,SACAR,EAAAM,UAAAC,EAAAD,UACAP,EAAAx+B,KAAAg/B,EAAAD,WACAR,EAAAv+B,KAAAy+B,GACA,OACAp5B,QAAAk5B,EACAC,cArCAF,CAAAH,EAAAC,EAAAC,MACAa,EAAAt0B,EAAAvF,QAEA,OADA65B,EAAAH,UAAAX,EAAAxzB,EAAAvF,YACA65B,EAbAC,CAAA33B,EAAAktB,aAAAH,SAmDA,SAAA6K,EAAAC,GACA,MAAAD,EAAAj+B,OAAA,CACA,IAAAm+B,EAAA,IAAA7D,EAAA2D,EAAA,GAAAL,UAAAM,GACA,OAAAC,EAEA,IAAAC,EAAA,IAAA9D,EAAA,KAAA4D,GACA,MAAAD,EAAAj+B,OACA,OAAAo+B,EAEA,QAAAryB,EAAA,EAAAA,EAAAkyB,EAAAj+B,OAAA+L,IACAqyB,EAAAC,QAAAJ,EAAAlyB,GAAA6xB,WAEA,OAAAQ,GAGA,SAAAE,EAAAd,EAAAU,GAIA,IAHA,IAAAE,EAAA,IAAA9D,EAAA,KAAA4D,GAAAV,GACAe,EAAAH,EAAApD,SACA72B,EAAAi6B,EAAAj6B,UACAq6B,EAAA,EAAAA,EAAAF,EAAAt+B,OAAAw+B,IAAA,CAKA,IAJA,IAAAz3B,EAAAu3B,EAAAE,GACAxL,EAAAp0B,KAAAq0B,OAAAlsB,GACA2rB,EAAA9zB,KAAAlB,KAAAqJ,GAEA6H,EAAA,EAAAA,EAAAokB,EAAAhzB,OAAA4O,IAAA,CACA,IAAA6vB,EAAAzL,EAAApkB,GACA+jB,EAAA/zB,KAAAlB,KAAA+gC,GACAC,EAAA9B,EAAAC,SAAA91B,EAAA03B,GACAE,OAAA,EACA,SAAAD,EAAA,CACAC,EAAA,IAAAx0B,MAAAvL,KAAAiE,KAAA7C,QAAAoK,KAAA,GACA,QAAAwoB,EAAA,EAAAA,EAAAF,EAAA1yB,OAAA4yB,IACAF,EAAAE,IAAAD,EAAAC,KACA+L,EAAA/L,GAAA,GAGA+L,IAAA1oB,KAAA,IACA2mB,EAAAE,QAAA/1B,EAAA03B,EAAAE,QAEAA,EAAAD,EAEAH,EAAAhiB,IAAAoiB,IACAJ,EAAAnC,IAAAuC,EAAA,GAEAJ,EAAAnC,IAAAuC,EAAAJ,EAAApU,IAAAwU,GAAA,GAGA,QAAAC,EAAA,EAAAA,EAAAlM,EAAA1yB,OAAA4+B,IACA,GAAAlM,EAAAkM,IACAz6B,EAAAy6B,KAIA,OACAhB,UAAAQ,EACAN,SAAAQ,KAzGA3B,EAAAzkB,QACAzY,IAAAD,KAAAC,IAAAC,MAAAF,KAAA8xB,IAAAqL,EAAA//B,IAAA,SAAAm2B,GAAA,OAAAvzB,KAAAC,IAAAC,MAAAF,KAAA8xB,IAAAyB,QACAnzB,IAAAJ,KAAAI,IAAAF,MAAAF,KAAA8xB,IAAAqL,EAAA//B,IAAA,SAAAm2B,GAAA,OAAAvzB,KAAAI,IAAAF,MAAAF,KAAA8xB,IAAAyB,SAEA1sB,EAAAs4B,aAAAhC,EAyGA,SAAAkC,EAAA7B,GACA,IAAAvzB,EAAA,IAAAU,MAAA9D,EAAAs4B,aAAA,GAAA3+B,QAAAoK,KAAA,GACA,QAAA00B,EAAA,EAAAA,EAAA9B,EAAAh9B,OAAA8+B,IAAA,CACA,IAAAC,EAAA,IAAA50B,MAAA9D,EAAAs4B,aAAA,GAAA3+B,QAAAoK,KAAA,GACA,aAAA40B,IAAAhC,EAAA8B,GAAA,IACAC,EAAAF,EAAA7B,EAAA8B,QACA,CACA,QAAAlwB,EAAA,EAAAA,EAAAouB,EAAA8B,GAAA9+B,OAAA4O,IACAmwB,EAAAxO,EAAA9V,IAAAskB,EAAApC,EAAAK,EAAA8B,GAAAlwB,KAEAouB,EAAA8B,GAAAlB,UAAAe,aAAAI,EAEAt1B,EAAA8mB,EAAA9V,IAAAhR,EAAAs1B,GAEA/B,EAAAY,UAAAe,aAAAl1B,EACA,OAAAA,EAvHAo1B,CAAAx4B,EAAAktB,aAAAD,WACA4G,EAAA9uB,UA/BAkoB,GAxFA2L,GACAviC,KAAAy2B,gBAAAz2B,KAAA62B,cAEA72B,KAAA62B,aAAA72B,KAAAy2B,iBAuPAmC,WAAA,SAAA4E,GAAA,IAAA9zB,EAAA1J,KACA2J,EAAA3J,KACAE,EAAA,IAAAsiC,EAAA,EAAAtgC,KAAAsF,QAAAtF,KAAAk0B,WAAAl0B,KAAAlB,KAAA,GACAd,EAAAuiC,SACAziC,KAAAE,MACAF,KAAA2wB,iBACAzwB,MACAiuB,QAAA,IAGA,IAAAuU,EAAA1iC,KAAAg3B,OACA2L,GACA,IAAAD,EAAAjzB,EAAA/H,QAAA,GAAAg7B,EAAAjzB,EAAA/H,QAAA,IACA,IAAAg7B,EAAA52B,EAAApE,QAAA,GAAAg7B,EAAA52B,EAAApE,QAAA,KAEAk7B,GACAF,EAAAjzB,EAAA/H,QAAA,GAAAg7B,EAAAjzB,EAAA/H,QAAA,GACAg7B,EAAA52B,EAAApE,QAAA,GAAAg7B,EAAA52B,EAAApE,QAAA,IAEAm7B,EAAAx0B,EAAAC,WACAw0B,EAAAz0B,EAAAC,WACAy0B,EAAA10B,EAAAC,WACA00B,EAAA9iC,EAAA8iC,YACAA,EAAAlgC,KAAAI,IAAA8/B,EAAAvzB,EAAAvM,IAAA8/B,EAAAvzB,EAAA1M,IAAAigC,EAAAl3B,EAAA5I,IAAA8/B,EAAAl3B,EAAA/I,KACA/C,KAAAsV,UAAAstB,EAAA,GAAA1iC,EAAA+iC,WAAAD,EACAhjC,KAAA4lB,KACAliB,OAAA,iBACAU,QAAA,mBACAA,QAAA,mBACApE,KAAAu0B,QAAA70B,OAAAwjC,EAAA,EAAAxjC,CACAM,KACA2iC,EACAC,EAAA,GACA5iC,KAAAsV,UACAtV,KAAA62B,aAAAvR,MACApjB,KAAA4I,OACA9K,KAAA4D,WAAAC,SACA7D,KAAAowB,wBAGA,IAAAvc,EAAA7T,KAAAu0B,QAAA4O,iBAAAnjC,KAAAu4B,KACA1kB,EAAA3K,OAAA,QACAC,KAAA,6BACAA,KAAA,KAAAnJ,KAAAs1B,SAAA,GACAnsB,KAAA,KAAAnJ,KAAAu1B,UAAA,GACApsB,KAAA,QAAAnJ,KAAAs1B,UACAnsB,KAAA,SAAAnJ,KAAAu1B,WACAv1B,KAAAojC,UAAAP,EAAAhvB,EAAA3T,GACAmO,EAAAO,KAAAi0B,GAAAhhC,KAAA,WACA6H,EAAA25B,aAAAnjC,EAAAwiC,GACAh5B,EAAA6qB,QAAA+O,QAAA,QACA55B,EAAA2tB,eAAA,EACA3tB,EAAA65B,oBACAR,EAAAr0B,YAEAL,EAAAO,KAAAm0B,GAAAlhC,KAAA,WACA6H,EAAA85B,WAAAV,EAAA5iC,EAAAwiC,KAEAr0B,EAAAO,KAAAk0B,GAAAjhC,KAAA,WAuDA,SAAA0c,EAAAklB,EAAAC,EAAAC,GAEA,QADA1iC,GAAA0iC,MAAA,IACAl2B,MAAAkwB,QAAA+F,IACA,QAAAz/B,EAAA,EAAAA,EAAAy/B,EAAApgC,OAAAW,IACA,GAAAwJ,MAAAkwB,QAAA+F,EAAAz/B,IAAA,CACA,IAAA2/B,EAAArlB,EAAAklB,EAAAC,EAAAz/B,GAAA0/B,EAAA1/B,EAAA,KACA,GAAA2/B,EAAA,OAAAA,OACA,GAAAF,EAAAz/B,IAAAw/B,EACA,OAAAE,EAAA1/B,OAGA,GAAAy/B,GAAAD,EACA,OAAAE,EAAA1/B,EAEA,SApEAyF,EAAAm6B,SAAA3jC,EAAAwiC,GACAh5B,EAAAo6B,oBACAjwB,EAAAtP,UAAA,gBACAP,GAAA,oBAAAiG,GACA,GAAAxG,GAAAsgC,MAAAC,SAAA,CACA,IAAAxF,EAAAvzB,OAAAxH,GAAAC,OAAA1D,MAAAmJ,KAAA,UACAqd,OAAA,EAEAA,EADA,OAAA3S,EAAA1K,KAAA,aACAQ,EAAA2qB,aAAAzgB,GAAA3T,IAAA,SAAA+J,GAAA,OAAAA,KAEA,KAEA,IAAAqb,OAAA,EACA4W,OAAA,EACA+H,OAAA,EACAtI,OAAA,EACAS,OAAA,EAEA,GAAAl6B,KAAAsF,QAAAo6B,OAAA3/B,QAAAu8B,IAAA,SAEA,IAAA3qB,EAAAnQ,OAAA,aAAAU,QAAA,YAAAyP,EAAAnQ,OAAA,cAAAU,QAAA,WACAkhB,EAAA,EACA4W,EAAAjxB,OAAAsT,EAAAigB,EAAAt8B,KAAAu7B,iBAAA,IACAwG,EAAAt6B,EAAAktB,aAAAF,MAAA,MAAAA,MAAAuF,GAAAtwB,OACA+vB,EAAA,KACAS,UACA,IAAAvoB,EAAAnQ,OAAA,cAAAU,QAAA,YACAkhB,EAAA,EAEA4W,EAAA3d,GA6CA2lB,EAAArwB,EAAAtP,UAAA,gBAAAyJ,OAAA,WACA,OAAAvK,GAAAC,OAAA1D,MAAAqE,MAAA,gBAEA4G,OAAAxH,GAAAC,OAAAwgC,EAAAv/B,QAAA,OAAAwE,KAAA,WAhDAjH,KAAAu7B,iBAAA5vB,MAAA,KAAA3N,IAAA+K,QACAg5B,EAAAt6B,EAAAktB,aAAAF,MAAA,GAAAuF,EAAA,IAAAvF,MAAAuF,EAAA,IAAAtwB,OACAwwB,GAAAF,EAAA,IACAP,EAAAhyB,EAAAwxB,aAAAviB,KAAAjP,EAAAyyB,EAAAl8B,IAAA8iB,SACAnP,EAAAtP,UAAA,0BAAAH,QAAA,aAEAuF,EAAA4qB,QAAAC,QACA3gB,EAAApI,OACAooB,EAAA9V,IAAAkmB,EAAA/jC,IAAA,SAAA+J,GAAA,SAAAA,IAAAuc,GACAlB,EACA3b,EAAA/F,WAAA6wB,MAEA9qB,EAAAymB,wBAAA9K,UACA3b,EAAAgJ,SAAAwpB,gBAAAxyB,EAAAic,KAAA+V,EAAA,SACAhyB,EAAAomB,qBACA7uB,UAAAk7B,EACAh7B,YAAAH,EACAF,KAAA,qBAEA4I,EAAA8mB,8BACA2L,gBAwBA,IACA8H,IAJA1G,EAAA9uB,YAUA8uB,EAAA9uB,WAEA00B,UAAA,SAAA5F,EAAA3pB,EAAA3T,GAAA,IAAAyK,EAAA3K,KACAmkC,EAAA91B,EAAAC,WAEA61B,EAAAz1B,QAAA,GACAL,EAAAO,KAAAu1B,GAAAtiC,KAAA,SAAAu3B,GACAzuB,EAAAy5B,aAAAvwB,EAAA3T,EAAAk5B,GACAoE,EAAA9uB,aAGA21B,WAAA,SAAA7G,EAAAt9B,GACAF,KAAAsV,UACAtV,KAAAg3B,OACA90B,KAAA4I,OAFA,IAGAw5B,EAAAtkC,KAAA4D,WAAA6wB,KACA8P,EAAAvkC,KAAAu0B,QAAAC,SAAA,OAAA8P,GACAH,EAAA91B,EAAAC,WACAuqB,WAAA,WACAsL,EAAAz1B,WACA61B,GACAl2B,EAAAO,KAAAu1B,GAAAtiC,KAAA,WAGA27B,EAAA9uB,QAFA,MAQA01B,aAAA,SAAAvwB,EAAA3T,EAAAk5B,GAAA,IAAAxuB,EAAA5K,KAEA61B,EAAA71B,KAAAw1B,OACAkN,EAAA1iC,KAAAg3B,OACA1hB,EAAAtV,KAAAsV,UACAkvB,EAAAtiC,KAAA4I,OACA3K,EAAA6+B,IAAA9+B,EAAAG,UAAAC,UACA0iC,EAAA9iC,EAAA8iC,YACAyB,EAAAzB,EAAAyB,YACA,GAAAA,EAAA,GACA,IAAAC,GAAA1B,EAAAvzB,EAAA1M,IAAAigC,EAAAvzB,EAAAvM,KAAA,EACAyhC,GAAA3B,EAAAvzB,EAAAvM,IAAA8/B,EAAAvzB,EAAA1M,KAAA,EACA2/B,EAAAjzB,EAAAlI,QACAm9B,EAAAC,EAAAF,EACAC,EAAAC,EAAAF,IAEA/B,EAAA52B,EAAAvE,QAAAy7B,EAAAl3B,EAAA/I,IAAAigC,EAAAl3B,EAAA5I,UACA,CACA,IAAA0hC,GAAA5B,EAAAl3B,EAAA/I,IAAAigC,EAAAl3B,EAAA5I,KAAA,EACA2hC,GAAA7B,EAAAl3B,EAAA5I,IAAA8/B,EAAAl3B,EAAA/I,KAAA,EACA2/B,EAAAjzB,EAAAlI,QAAAy7B,EAAAvzB,EAAA1M,IAAAigC,EAAAvzB,EAAAvM,MACAw/B,EAAA52B,EAAAvE,QACAq9B,EAAAC,EAAAJ,EACAG,EAAAC,EAAAJ,IAGAzkC,KAAA2S,SAAAjT,OAAAolC,EAAA,EAAAplC,CACA4V,EACAA,EACA,OACA,MACAkvB,GAGAnX,QAAAC,IAAA,cAAAntB,GACA,IAAA65B,EAAAnmB,EACAtP,UAAA,gBACAlG,KAAA8B,GACA6J,QACAd,OAAA,KACAC,KAAA,uBACAA,KAAA,iBAAA47B,GACA,aAAAlP,EAAAF,YACAoP,EAAAp5B,GAEAkqB,EAAAF,YAAAoP,EAAAp5B,MAGAxC,KAAA,QAAAmM,GACAlR,QAAA,iBAAA2gC,GACA,aAAAA,EAAAp5B,KAEAxC,KAAA,oBAAA47B,GACA,IAAAd,EAAAc,EAAAn5B,OAAAC,YACA,OAAAm5B,EAAAtC,GACAuB,EAAAx0B,EACAw0B,EAAAn4B,IACAyN,KAAA,OAEApQ,KAAA,qBAAA47B,GACA,IAAAd,EAAAc,EAAAn5B,OAAAC,YACA,MACA,aACAm5B,EAAAtC,GAAAuB,EAAAx0B,EAAAw0B,EAAAn4B,IACA,MAIA9L,KAAA4lB,KACArhB,UAAA,iBACA4E,KAAA,aACAvF,aACAC,SAAAu1B,GACAjwB,KAAA,aAEA,IAAA87B,EAAAjlC,KAAA81B,QACAoP,EAAAzhC,GAAA6D,cACAC,QAAA09B,EAAA5P,QAAAtyB,IAAAkiC,EAAA5P,QAAAnyB,MACAwE,OAAA,OACAy9B,EAAAnlC,KAAAiiC,aACA9K,EAAAn3B,KAAAm3B,QAEAiO,EAAA,SAAAC,GACA,IAAAN,EAAAthC,GAAAC,OAAA2hC,GAAAhnC,OAAA,GACAinC,EAAAP,EAAAp5B,GAEA45B,EAAAf,EAAAc,GAMAC,EAAA,QALAA,MACA,IAAAA,EAAA,OACA,IAAAA,EAAA,OACA,IAAAA,EAAA,MAEA,IAUA,IAFA,IAAAjP,EAAA,IAAA7oB,MAAA,GAEAxJ,EAAA,EAAAA,EAAA,EAAAA,IACAqyB,EAAAryB,IACA8S,MAHA,GAGA9S,EAAA,IAAAnB,KAAA0N,GACA0I,KAAA,KACAlC,KAAA,MAKAsf,EAAA3d,UAAAlV,GAAA6D,cACAC,QAAA,EAAAsuB,EAAAJ,MAAA,GAAA+P,SACA99B,OAAA,EAAA4N,EAAAxS,KAAAsQ,KAAA,SA/BA,IAAA9R,GAAA,EAAAC,GAAA,EAAAC,OAAAP,EAAA,IAkCA,QAAAQ,EAAAC,EAAA+jC,IAAAV,EAAAzO,aAAAh1B,GAAAG,EAAAC,EAAAE,QAAAC,MAAAP,GAAA,OAAAygC,EAAAtgC,EAAAM,MAEA2jC,EADA3D,EAAA,GACAxoB,KAAA,KACA,GAAArZ,EAAAylC,SAAA9lB,IAAA6lB,GAAA,CAEA,IAAAE,EAAA1lC,EAAAylC,SAAAlY,IAAAiY,GACAG,EAAA/iC,KAAAgjC,MAAA/D,EAAA,GArBA,IAsBAzL,EAAAuP,GAAA7uB,KAAAkuB,EACAD,EAAAzO,QAAA8O,GAAAM,IAEAtP,EAAAuP,GAAA3sB,KACA+rB,EAAA7P,QAAAkQ,GAAAM,KA7CA,MAAAxjC,GAAAb,GAAA,EAAAC,EAAAY,EAAA,aAAAd,GAAAI,EAAAW,QAAAX,EAAAW,SAAA,WAAAd,EAAA,MAAAC,GAkDA,IAAAukC,EAAAZ,EAAAG,GACAU,GACAviC,GAAAC,OAAA2hC,GACA/O,EACAgP,EACAzP,EAAAJ,MAAA6P,GACAC,EACApO,EACA4O,EACAZ,EAAA3pB,QAEA,MAAA8pB,EACAW,EAAAloB,IAAAioB,GAEAE,EAAAnoB,IAAAioB,IAGAC,EAAA,IAAAE,EAAAj6B,EACAg6B,EAAA,IAAAC,EAAAj6B,EACA8tB,EAAAr1B,QAAAmU,QAAA,SAAAjF,GACAA,EAAAiF,QAAAssB,KAGA,IAAAlR,EAAAl0B,KAAAk0B,aACAgS,EAAAptB,QAAA,SAAAstB,GAAA,IAAAC,GACAA,EAAAz7B,EAAA+H,UAAA2zB,UAAAtjC,MAAAqjC,EAAAzR,IAAAwR,IACApiC,GAAA,iBAAA+gC,GACA,MAAAA,EAAA5mB,IAGA+V,EAAA4H,QAAA97B,MAAA,QAIAqjC,aAAA,SAAAnjC,EAAA82B,GACA,IAAAuP,KACAC,EAAAxmC,KAAA62B,aAAAvR,MACA,SAAAtlB,KAAAy2B,gBAAAE,MACA4P,EAAAvmC,KAAA62B,aAAAF,UACA,CAEA,IADA,IAAA8P,EAAAzmC,KAAA62B,aAAAH,SACAzyB,EAAA,EAAAA,EAAAuiC,EAAAviC,IACAsiC,EAAApkC,SAEAnC,KAAA0mC,eAAAxmC,EAAAumC,EAAAF,EAAA,WACAvmC,KAAA62B,aAAAF,MAAA4P,EAEA,QAAAI,EAAAJ,EAAAjjC,OAAAqjC,EAAA,EAAAA,IAEA,IADA,IAAAC,EAAAL,EAAAI,EAAA,GACAz0B,EAAA,EAAAA,EAAA00B,EAAAtjC,OAAA4O,IAAA,CACA,IAAA20B,EAAAD,EAAA10B,GACAlS,KAAA8mC,YACAD,EAAAlQ,MACA,SAAAkQ,EAAAvJ,SAAA/jB,KAAA,KACAstB,EAAAvJ,SACAuJ,EAAAxJ,QACArG,GAIAh3B,KAAAujC,qBAEAmD,eAAA,SAAAxmC,EAAA6mC,EAAAC,EAAAC,EAAAC,EAAAC,GAIA,IAHA,IAAAV,KACApJ,KACA+J,KACAnjC,EAAA,EAAAA,EAAA8iC,EAAAzjC,OAAAW,IACA,SAAA8iC,EAAA9iC,GAAAX,OAAA,CACA,IAAA+jC,EACAC,EAAAJ,EAAAx8B,MAAA,GACA48B,EAAAnlC,KAAA8B,GACAojC,EAAArnC,KAAA0mC,eACAxmC,EACA6mC,EAAA9iC,GACA+iC,EACAC,EAAA,EACAK,EACArjC,GAEAwiC,EAAAtkC,KAAAklC,GACAD,EAAAjlC,KAAAa,MAAAokC,EAAAxS,IAAAyS,SAEAD,EAAAjlC,KAAA4kC,EAAA9iC,IACAo5B,EAAAl7B,KAAA4kC,EAAA9iC,IAGA,GAAAwiC,EAAAnjC,OAAA,GACA,IAAAqzB,EAAAz2B,EAAAqnC,mBAAAd,GACAO,EAAAC,GAAA9kC,MACAm7B,SAAA4J,EACAM,OAAAL,EAAA,GACAxQ,QACAvb,IAAAqrB,EACApJ,SAAA,IAGA,OAAA+J,GAEAN,YAAA,SAAAW,EAAAC,EAAAR,EAAAjM,EAAAjE,GACA,IAAA9C,EAAAl0B,KAAAk0B,aACA0S,EAAAM,EAAA5jC,OACAqG,EAAA3J,KA0GA2nC,EAAA,SAAAC,EAAApJ,GACA,IAAAqJ,GACAD,EAAAze,MAAAtd,YAAA4D,EACAm4B,EAAAze,MAAAtd,YAAAC,GAEAg8B,GACAF,EAAAxe,IAAAvd,YAAA4D,EACAm4B,EAAAxe,IAAAvd,YAAAC,GAEAqd,EAAA6b,EAAAhO,EAAA6Q,GACAze,EAAA4b,EAAAhO,EAAA8Q,GACAt4B,GAAA2Z,EAAAC,GAAA7P,KAAA,KACA9V,GAAAC,OAAA1D,MACAmJ,KAAA,MAAAqG,GACAjL,UAAA,QACAlG,MAAAupC,IACA59B,QACAd,OAAA,QACAC,KAAA,KAAAggB,EAAA,IACAhgB,KAAA,KAAAggB,EAAA,IACAhgB,KAAA,KAAAigB,EAAA,IACAjgB,KAAA,KAAAigB,EAAA,IACAjgB,KAAA,kBA/HAnJ,KAAA4lB,KACAliB,OAAA,iBACAa,UAAA,IAAAmjC,GACArpC,KAAAopC,GACAz9B,QACAd,OAAA,KACAC,KAAA,iBAAAc,EAAAu0B,GACA,MACA,kBACAkJ,EACA,IACAlJ,GACAvD,EAAA,kBAGA9xB,KAAA,iBAAAc,EAAAu0B,GACA,SAAA1hB,OAAA8X,IAAAsS,IAAA1I,IAAAjlB,KAAA,OAEApQ,KAAA,kBACAnF,GAAA,qBAAAiG,EAAAu0B,GACA,IAAAvE,EAAAx2B,GAAAC,OAAA1D,MAAAmJ,KAAA,SACA+qB,EAAAkD,YAAA6C,IACA/F,EAAAkD,UAAA6C,EACA/F,EAAA6G,UAAA/6B,KAAAi7B,GACAtxB,EAAAonB,4BACAgX,OAAA,YACA7L,MAAAjC,EACAxG,QAAA,QAIAzvB,GAAA,oBAAAiG,EAAAu0B,GACAtK,EAAAkD,UAAA,KACAlD,EAAAsH,SAAAP,GACAtxB,EAAAonB,4BACAgX,OAAA,WACA7L,MAAA,KACAzI,QAAA,MAGAzvB,GAAA,iBAAAiG,EAAAu0B,GAAA,IAAAjxB,EAAAvN,MA83CA,SAAAgoC,EAAAC,EAAAC,GACA,IAAAC,EAAAC,EAAAJ,GACA,SAAAG,EACAC,EAAAJ,GAjBA,SAAAA,EAAAC,EAAAC,GACA,OACA/e,MAAA,IAAAkf,KACAC,KAAA,EACAzkC,SAAAokC,EACA5pB,KAAA6pB,EACAK,UAAA,EACAC,MAAA3P,WAAA,WACAqP,IACAE,EAAAJ,GAAA,MACAC,IAOAQ,CAAAT,EAAAC,EAAAC,OACA,CACAC,EAAAI,WACAG,aAAAP,EAAAK,OACAL,EAAA,MAEA,IAAAQ,EAAAP,EAAAJ,GACAW,EAAAL,KAAA,IAAAD,KAAAM,EAAAxf,MACAwf,EAAAL,MAAAK,EAAA9kC,UACAqkC,IACAS,EAAAJ,UAAA,EACAG,aAAAC,EAAAH,OACAJ,EAAAJ,GAAA,OAEAW,EAAAxf,MAAA,IAAAkf,KACAM,EAAAtqB,KAAA6pB,IA/4CAU,CAAA,8BACA1U,EAAA4H,QAAAvuB,OAaAvJ,GAAA,oBAAAiG,EAAAu0B,GAs4CA,IACA2J,EAr4CA,GAs4CA,OADAA,EAAAC,EAt4CA,mBAw4CAM,aAAAP,EAAAK,OACAL,EAAA,OAx4CAlN,EAAA,CACA,IAAApnB,EAAAlK,EAAAic,KAAAliB,OAAA,iBACA8iB,OAAA,EAEAA,EADA,OAAA3S,EAAA1K,KAAA,aACAQ,EAAA2qB,aAAAzgB,GAAA3T,IAAA,SAAA+J,GAAA,OAAAA,KAEA,KAEA,IAAAiyB,EAAAz4B,GAAAC,OAAA1D,MAAAmJ,KAAA,SAAA0E,MAAA,KACA,GAAApK,GAAAsgC,MAAAC,SAAA,CAGAvgC,GAAAsgC,MAAA8E,iBACAplC,GAAAsgC,MAAA+E,kBACA5M,IAAAxxB,MAAA,EAAAwxB,EAAA54B,OAAA,GACA,IAAA2gC,EAAAt6B,EAAAktB,aAAAF,MAAA,MAAAA,MAAA1rB,OAAAixB,EAAA,KAAAtwB,OACAjC,EAAA4qB,QAAAC,QACAx0B,KAAA+oC,WACAlV,EAAA9V,IAAAkmB,EAAA/jC,IAAA,SAAA+J,GAAA,SAAAA,IAAAuc,GACAvc,EAAA++B,SAAA,EACAr/B,EAAA/F,WAAA6wB,MAEA9qB,EAAAymB,wBACA9K,MAAArb,EAAA++B,SAAA,IAEAr/B,EAAAgJ,SAAAwpB,gBAAAxyB,EAAAic,KAAA,cACAsW,UAEAvyB,EAAAymB,wBACA9K,MAAArb,EAAA++B,SAAA,IAEAr/B,EAAA4qB,QAAAC,QACAx0B,KAAA+oC,WAEAlV,EAAA9V,IAAAyI,EAAAvc,EAAA2B,QACA3B,EAAA++B,SAAA,EACAr/B,EAAA/F,WAAA6wB,MAGA9qB,EAAAomB,qBACA7uB,UAAAg7B,EACA96B,YAAAH,EACAF,KAAA,qBAEA4I,EAAA8mB,8BACA2L,YAAAF,OA2BAtjB,KAAA,SAAAqwB,GACAA,EAAAtkC,QAAA,GAAAmU,QAAA,SAAAowB,GAOA,IANA,IA60CAC,EAAAC,EA70CA7C,EAAA9iC,GAAAC,OAAAwlC,GAAA7qC,OAAA,GACAs4B,KACA0S,KACAC,OAAA,EACAC,EAAA,EAEAtlC,EAAA,EAAAA,EAAAsiC,EAAA5P,MAAArzB,OAAAW,IAAA,CAQA,IAPA,IAAAulC,EAAAjD,EAAA5P,MAAA1yB,GACAwlC,EAAAD,EAAAE,OACAC,EAAA3E,EAAAhO,GACAyS,EAAA,GAAA59B,YAAA4D,EACAg6B,EAAA,GAAA59B,YAAAC,IAEA2e,EAAA,IAAAkf,EACAz3B,EAAA,EAAAA,EAAAu3B,EAAAnmC,OAAA4O,IAAA,CACA,IAAA03B,EAAA5E,EAAAhO,GACAyS,EAAAv3B,GAAArG,YAAA4D,EACAg6B,EAAAv3B,GAAArG,YAAAC,IAEA2e,GAAA,KAAAmf,EACAP,EAAAlnC,KAAAynC,GAEAJ,EAAAK,SACApf,GAAA,IAAAkf,GAEAhT,EAAAx0B,KAAAsoB,GAEA,QAAAqf,EAAA,EAAAA,EAAAT,EAAA/lC,OAAA,EAAAwmC,IACA,QAAAC,EAAAD,EAAA,EAAAC,EAAAV,EAAA/lC,OAAAymC,IAAA,CACA,IAAAC,GAgzCAb,EAhzCAE,EAAAS,GAgzCAV,EAhzCAC,EAAAU,GAizCAlW,EAAAoW,MAAApW,EAAAjxB,IAAAumC,EAAAC,KAhzCAY,EAAAT,IACAA,EAAAS,EACAV,GAAAQ,EAAAC,IAIA,QAAAG,EAAA,EAAAA,EAAAZ,EAAAhmC,OAAA4mC,IACAZ,EAAAY,GAAAb,EAAAC,EAAAY,IAEA3D,EAAA36B,OA2xCA,SAAAu+B,EAAAC,GAKA,IAJA,IAAAC,EAAAD,EAAAD,EAAAtW,EAAAyW,UAAAH,GACAzuB,EAAAmY,EAAA0W,IAAAF,GACAG,EAAA,IAAA/8B,MAAAiO,EAAA,IACA+uB,EAAA/uB,EAAA,GACAzX,EAAA,EAAAA,EAAAomC,EAAA/mC,OAAAW,IACAumC,EAAAvmC,GAAA4vB,EAAA6W,IAAAL,EAAApmC,IAAAwmC,EAEA,OAAAD,EAnyCAG,CAAArB,GAAA,GACA/C,EAAAgD,WACAhD,EAAAyC,SAAApC,EACAnjC,GAAAC,OAAAwlC,GACA3kC,UAAA,QACAlG,KAAAs4B,GACA3sB,QACAd,OAAA,QACAC,KAAA,aAAAiB,GACA,OAAAA,IAGA3G,GAAAC,OAAAwlC,GAAA9kC,QAAA,aACAX,GAAAC,OAAAwlC,GACAhgC,OAAA,KACAC,KAAA,uBACA5E,UAAA,eACAlG,KAAAkoC,EAAAqE,OACA5gC,QACAd,OAAA,KACAC,KAAA,sBACA3E,KAAAmjC,QAKApE,kBAAA,eAMAsH,EACAC,EACAC,EAsBAC,EA9BAC,EAAAjrC,KAAAkrC,IAAAzzB,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,KAAAA,UAAA,GACA,GAAAzX,KAAAq3B,cAGA,GAAA6T,EAAA,CAEAL,EAAA,IAAAp9B,MACAq9B,EAAAG,EAAApU,aAAAD,UACAmU,EAAA7oC,KAAAsF,QAsBAwjC,EAAA9oC,KACA+oC,EAAArlB,KAAArhB,UAAA,mBAAAC,KAAA,SAAA2mC,GACA,IAAAvzB,EAAAnU,GAAAC,OAAA1D,MAEA,IADA4X,EAAAxT,QAAA,YACA,CAGA,IAAAgnC,EAAAxzB,EAAAzO,KAAA,SAAA0E,MAAA,KAEA+N,EADAovB,EAAAxjC,QAAAwH,YAAAo8B,GACA/sC,KAAAg9B,YACAgQ,OACApqC,GAAAjB,KAAAs3B,eACA0T,EAAAxjC,QAAAnJ,KAAAg9B,YACAr7B,KAAAs3B,eACA1b,EAAAiY,EAAAjxB,IAAAgZ,EAAAyvB,GACA,IAAAC,EAAAF,EAAA9nC,OAAA,EACAif,GACA3W,OAAAu/B,EAAAv/B,OACAswB,MAAAkP,EACAtiC,MAxCA,SAAAyiC,GACA,IAAAC,EAAAP,EAAApU,aAAAtC,QACAgX,EAAAjoC,OAAA,GAEA8nC,EAAAG,EAAAhyB,KAAA,KAIA,OAHAiyB,EAAAx9B,OAAA,SAAAy9B,GACA,OAAAA,EAAAvP,OAAAkP,IACA,GACAM,OAgCAC,CAAAP,GACAvO,MAAAkO,EAAA/7B,YAAAo8B,GAAAn8B,KAAA3L,OACAyiC,QAhCA,SAAAwF,GAEA,IADA,IAAAK,EAAAd,EACA7mC,EAAA,EAAAA,EAAAsnC,EAAAjoC,OAAAW,IACA2nC,IAAAL,EAAAtnC,IAMA,OAFA2nC,EAAA1K,UAAAje,WAyBA4oB,CAAAT,GACA/sC,KAAAud,QAEA3a,GAAA4pC,EAAAS,KACAT,EAAAS,OAEAT,EAAAS,GAAAnpC,KAAAogB,UAKA,EACA,WACA,IAAAsoB,EAAA,IAAAp9B,MACAw9B,EAAApU,aAAAD,UACA10B,KAAAsF,QAWAyjC,EAAArlB,KAAArhB,UAAA,mBAAAC,KAAA,SAAA2mC,GACA,IAAAvzB,EAAAnU,GAAAC,OAAA1D,MAEA,IADA4X,EAAAxT,QAAA,YACA,CAGA,IAhBAmnC,EACAC,EAGAJ,EAYAlP,EAAAtkB,EAAAzO,KAAA,SAAA0E,MAAA,KACA6uB,EAAAR,EAAA54B,OAAA,EACAwoC,GACA5P,MAAAtkB,EAAAzO,KAAA,SACAorB,SApBAgX,EAoBArP,EAnBAsP,EAAAP,EAAApU,aAAAtC,QACAgX,EAAAjoC,OAAA,GAEA8nC,EAAAG,EAAAhyB,KAAA,KACAiyB,EAAAx9B,OAAA,SAAAy9B,GACA,OAAAA,EAAAvP,OAAAkP,IACA,GACA7W,eAcAtzB,IAAA4pC,EAAAnO,KACAmO,EAAAnO,OAEAmO,EAAAnO,GAAAv6B,KAAA2pC,MAOAC,KAGAvI,WAAA,SAAAhG,EAAAt9B,EAAA82B,GACA,IAAArtB,EAAA3J,KACAG,EAAA6+B,IAAA9+B,EAAAG,UAAAC,UACAksB,EAAA,0BAAAtqB,KAAAsD,KAAA,cAcA,SAAAwmC,EAAA3tC,GACA,IAAA4tC,EAAA,IAAA5D,KACA1+B,EAAAuiC,MAAAxsC,OAAAysC,EAAA,EAAAzsC,CAAAS,EAAA62B,EAAA34B,GACAsL,EAAAuiC,MAAAvrC,KAAAgJ,EAAAic,KAAAliB,OAAA,kBACA,IAAA0oC,EAAA,IAAA/D,KACAhb,QAAAC,IAAA,cAAA8e,EAAAH,GAAA,KACA5e,QAAAC,IAAA,UAAA3jB,EAAAuiC,OACA1O,EAAA9uB,UApBAL,EAAAg+B,MACA7f,MACA8f,SAAA,OACAza,MAAA,WACAxE,QAAAC,IAAA,wBACA0e,OAAA/qC,IAEAwrB,QAAA,SAAApuB,GACAgvB,QAAAC,IAAA,2BACA0e,EAAA3tC,OAmBAwlC,SAAA,SAAA3jC,EAAA82B,GA8BA,IA7BA,IAwBA72B,EAAA6+B,IAAA9+B,EAAAG,UAAAC,UACA6S,EAAA,EAAAnT,KAAAsV,UAAAxS,KAAAsQ,KAAA,KACAm5B,EAAAvsC,KAAA4lB,KAAAliB,OAAA,iBAAAwF,OAAA,KAAAC,KAAA,mBACAqjC,KACAC,KA7BAnhC,EAAA,SA8BArH,GACA,IAAAwH,EAAAtL,EAAAuL,KAAA,SAAAD,GAAA,OAAAA,EAAAE,KAAAzJ,KAAAoK,aAAArI,KACAuoC,EAAArqC,KAAA6iC,EAAAhO,EAAA0V,IAAAjhC,EAAAG,OAAAC,gBAFA5H,EAAA,EAAAA,EAAA/B,KAAAoK,aAAAhJ,OAAAW,IAAAqH,EAAArH,GA9BA,IAAA0J,EAAA,SAkCA1J,GACA,IAAAwH,EAAAtL,EAAAuL,KAAA,SAAAD,GAAA,OAAAA,EAAAE,KAAAzJ,KAAA6V,eAAA9T,KACAwoC,EAAAtqC,KAAA6iC,EAAAhO,EAAA0V,IAAAjhC,EAAAG,OAAAC,gBAFA,IAAA5H,EAAA,EAAAA,EAAA/B,KAAA6V,eAAAzU,OAAAW,IAAA0J,EAAA1J,GAIAsoC,EAAAhoC,UAAA,iBACAlG,KAAAmuC,GACAxiC,QACAd,OAAA,KACAC,KAAA,wBACA/E,QAAA,WACA+E,KAAA,iBAAAc,EAAAhG,GAAA,OAAA/B,KAAAoK,aAAArI,KACAkF,KAAA,qBAAAc,GAAA,mBAAAA,EAAA,QAAAA,EAAA,SACAzF,KAAA,WA7CA,IAAA+R,EAAAe,EAAAC,EAAAo1B,EAAAp2B,EA8CA9S,GAAAC,OAAA1D,MA9CAsX,EA8CA,GAAAnE,EA9CAoE,EA8CA,GAAApE,EA9CAw5B,EA8CA,GAAAx5B,EA7CAoD,EAAArN,OAAA,UACAC,KAAA,QACAA,KAAA,QACAA,KAAA,IAAAoO,GACAlT,MAAA,eACAA,MAAA,iBACAA,MAAA,eAAAsoC,GACAp2B,EAAArN,OAAA,UACAC,KAAA,QACAA,KAAA,QACAA,KAAA,IAAAmO,GACAjT,MAAA,iBAoCAkoC,EAAAhoC,UAAA,mBACAlG,KAAAouC,GACAziC,QACAd,OAAA,KACAC,KAAA,0BACA/E,QAAA,WACA+E,KAAA,iBAAAc,EAAAhG,GAAA,OAAA/B,KAAA6V,eAAA9T,KACAkF,KAAA,qBAAAc,GAAA,mBAAAA,EAAA,QAAAA,EAAA,SACAzF,KAAA,WA1CA,IAAA+R,EAAAK,EAAA+1B,EAAAp2B,EA2CA9S,GAAAC,OAAA1D,MA3CA4W,EA2CA,IAAAzD,EA3CAw5B,EA2CA,GAAAx5B,EA1CAoD,EAAArN,OAAA,UACAC,KAAA,QACAA,KAAA,QACAA,KAAA,IAAAyN,GACAvS,MAAA,eACAA,MAAA,iBACAA,MAAA,eAAAsoC,MAuCA7I,kBAAA,WACArgC,GAAAc,UAAA,gBAAAyJ,OAAA,WACA,WAAA9L,KAAAsF,QAAAo6B,OAAA3/B,QAAAgJ,OAAAxH,GAAAC,OAAA1D,MAAAmJ,KAAA,aACA3E,KAAA,WACAf,GAAAC,OAAA1D,MAAA0D,OAAA,SACAW,MAAA,iBACAA,MAAA,0BACAA,MAAA,6BAGA8wB,iBAAA,WACA,IAAAxrB,EAAA3J,KACAG,EAAA6+B,IAAAh/B,KAAAE,IAAAG,UAAAC,UACAN,KAAA4sC,mCACA5sC,KAAA6sC,kBACA,IAAAC,EAAA9sC,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,gBACAwoC,EAAA7qC,KAAAoK,aAAAwQ,OAAA5a,KAAA6V,gBACAi1B,EAAAF,EAAA9+B,OAAA,WACA,WAAA++B,EAAA9qC,QAAAgJ,OAAAxH,GAAAC,OAAA1D,MAAAmJ,KAAA,aAEA8jC,EAAAH,EAAA9+B,OAAA,WACA,WAAA++B,EAAA9qC,QAAAgJ,OAAAxH,GAAAC,OAAA1D,MAAAmJ,KAAA,aAEA+jC,EAAAltC,KAAA4lB,KAAAliB,OAAA,iBAAAA,OAAA,YAAAa,UAAA,SACA0oC,EACA9jC,KAAA,oBACAvF,aACAC,SAAA7D,KAAA4D,WAAAC,UACAsF,KAAA,cACAnJ,KAAA+vB,qBACA7uB,eAAAD,EACAG,OAAA2rC,EACAhsC,KAAA,qBAEA,IAAAosC,EAAA,EACAC,KAoBA,SAAAC,IACA,IAAAC,EAAA7pC,GAAAC,OAAA1D,MAAAmJ,KAAA,SAEA,KADAgkC,EACA,KAEAxjC,EAAAic,KAAAliB,OAAA,iBAAAa,UAAA,eAAA+E,SACAK,EAAAmrB,gBACAnrB,EAAAomB,qBACA7uB,eAAAD,EACAG,OAAA2rC,EACAhsC,KAAA,qBAEA4I,EAAAkrB,mBACAlrB,EAAAorB,wBACAqY,MACAjrC,KAAA8I,OAAAqiC,IACAN,EAAA5oC,QAAA,uBACA4oC,EAAA5oC,QAAA,kBACA4oC,EACAh/B,OAAA,WACA,OAAAvK,GAAAC,OAAA1D,MAAAmJ,KAAA,WAAAmkC,IAEAlpC,QAAA,kBACAuF,EAAA4jC,eAAA9pC,GAAAC,OAAA1D,OACA2J,EAAA4mB,sBACAxvB,KAAA,SACAyK,MAAAP,OAAAqiC,SAEA,CACA,GAAAF,EAAA,KAAAniC,OAAAqiC,GAKA,OAJA3jC,EAAAic,KAAAliB,OAAA,iBAAAa,UAAA,eAAA+E,SACAK,EAAAyuB,cAAA,KACA4U,EAAA5oC,QAAA,uBACA4oC,EAAA5oC,QAAA,uBAIAgpC,EAAAjrC,KAAA8I,OAAAqiC,IACAN,EACAh/B,OAAA,WACA,OAAAvK,GAAAC,OAAA1D,MAAAmJ,KAAA,WAAAmkC,IAEAlpC,QAAA,kBACA4oC,EACAh/B,OAAA,WACA,WAAAo/B,EAAAnrC,QAAAgJ,OAAAxH,GAAAC,OAAA1D,MAAAmJ,KAAA,aAEA/E,QAAA,uBAEA,IAAAopC,EAAAviC,OAAAsT,GAAA6uB,EAAA,GAAAlrC,KAAAu7B,iBAAA,IACAgQ,EAAAxiC,OAAAsT,GAAA6uB,EAAA,GAAAlrC,KAAAu7B,iBAAA,IACAiQ,OAAA,EACAC,OAAA,EACAC,OAAA,EACA,GAAAJ,IAAAC,EAAA,CAEA,IAEAI,EADAC,GADAnkC,EAAAuiC,MAAA6B,QAAAP,IAEAjjB,iBAAA6iB,EAAA,GAAAA,EAAA,IAAAltC,IAAA+K,QACA2iC,EAAAC,EACAH,EAAAM,GAAAH,EAAAlkC,EAAAuiC,MAAA+B,UAAAT,IACAG,EAAAO,GAAA,OAAAL,EAAAlkC,EAAAuiC,MAAA+B,UAAAT,GAAA7jC,EAAAuiC,MAAAiC,gBAAAX,QACA,KAAAY,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAEAC,EAAA/kC,EAAAuiC,MAAA6B,QAAAP,GACAmB,EAAAhlC,EAAAuiC,MAAA6B,QAAAN,GACAmB,EAAAd,GAAAY,GACAG,EAAAf,GAAAa,GACAG,EAAAC,GAAAvB,GACAwB,EAAAD,GAAAtB,GACAwB,EAAAL,EAAArkB,iBAAA6iB,EAAA,GAAA0B,GAAA5uC,IAAA+K,QACA2iC,EAAAhpC,KAAAC,MAAAC,IAAAmqC,IACA,IAAAC,EAAAL,EAAAtkB,iBAAAykB,EAAA5B,EAAA,IAAAltC,IAAA+K,QACAkkC,EA4SA,SAAAC,GACA,IAAAtD,KAIA+B,EADAC,GADAnkC,EAAAuiC,MAAAmD,UAEA9kB,iBAAA6kB,EAAA,GAAAA,EAAA,IAAAlvC,IAAA+K,QACAjK,EAAAgtC,GAAAH,EAAAlkC,EAAAuiC,MAAAoD,YACA7+B,EAAAy9B,GAAA,QAAAL,EAAAlkC,EAAAuiC,MAAAoD,WAAA3lC,EAAAuiC,MAAAqD,kBACAC,EA4BA,SAAAC,GAEA,IADA,IAAAC,KACAC,EAAA,EAAAA,EAAAF,EAAAnsC,OAAAqsC,KACA,IAAA5C,EAAA9qC,QAAAwtC,EAAAE,MAAA,IAAAhmC,EAAAuiC,MAAA0D,OAAA3tC,QAAAwtC,EAAAE,KACAD,EAAAvtC,KAAAstC,EAAAE,IAGA,OAAAD,EAnCAG,CAAA7uC,GAYA,OAJA8qC,EAAA,KAAA9qC,EACA8qC,EAAA,OAAAr7B,EACAq7B,EAAA,GAAA0D,EAEA1D,EAhUAgE,EAAAtC,EAAAC,IACAgC,EAAAN,EAAA,KAiBA,IAhBAzB,EAAAM,GAAAiB,EAAAtlC,EAAAuiC,MAAA+B,UAAAT,KACAuC,OACA3B,EAAAV,GAAAvrC,KAAAa,MAAAorC,EAAAxZ,IAAA6a,IACA7B,EAAAmC,OACA1B,EAAAT,GAAAzrC,KAAAa,MAAAqrC,EAAAzZ,IAAAua,EAAA,KACAvB,EAAAmC,OACAzB,EAAAV,GAAAzrC,KAAAa,MAAAsrC,EAAA1Z,IAAAhwB,KAAAC,MAAAC,IAAAoqC,MACAxB,EAAAqC,OACAxB,EAAAb,GAAAvrC,KAAAa,MAAAurC,EAAA3Z,IAAAoZ,GAAAkB,EAAAvlC,EAAAuiC,MAAA+B,UAAAR,OAEAE,EAAAO,GAAA,OAAAe,EAAAtlC,EAAAuiC,MAAA+B,UAAAT,GAAA7jC,EAAAuiC,MAAAiC,gBAAAX,KACAuC,OACAvB,EAAAb,GAAAxrC,KAAAa,MAAAwrC,EAAA5Z,IAAAua,EAAA,SACAxB,EAAAoC,OACAtB,EAAAd,GAAAxrC,KAAAa,MAAAyrC,EAAA7Z,IAAAsZ,GAAA,OAAAgB,EAAAvlC,EAAAuiC,MAAA+B,UAAAR,GAAA9jC,EAAAuiC,MAAAiC,gBAAAV,MAEA,IAAAyB,EAAA5rC,OAAA,CAEAoqC,EAAAvrC,KAAA6sC,GACA,IAAAvjC,EAAAtL,EAAAuL,KAAA,SAAAD,GAAA,OAAAA,EAAAE,KAAAqjC,IACAgB,EAAAhL,EAAAr7B,EAAAqtB,OAAA0V,IAAAjhC,EAAAG,OAAAC,cACA8hC,EAAAxrC,MACAsN,EAAAugC,EAAA,GACAlkC,EAAAkkC,EAAA,MAkFA,IAAAC,EAAAC,GAAAxC,GACAyC,EAAAC,GAAA1C,EAAAuC,GACAG,GAAAzC,EAAAsC,IAyRA,SAAAlkC,EAAAskC,EAAAC,GACAF,GAAArkC,EAAAskC,GACA,IAAAE,EAAAxkC,EAAAzI,OACAW,EAAA,EACA,KAAAA,EAAAssC,GACAD,EAAAruC,QAAA8J,EAAA9H,KAAA,GACA8H,EAAAumB,OAAAruB,EAAA,GACAssC,GAAA,GAEAtsC,IAhSAusC,CAAA5C,EADAsC,GAAAtC,GACAuC,GACA9iB,QAAAC,IAAA,oBAAAogB,GAGA,IAFA,IAAA+C,GAAA,GACAC,OACAzsC,EAAA,EAAAA,EAAAypC,EAAApqC,OAAA,EAAAW,IAAA,CACA,IAEA0sC,EAFA/tC,EAAA8qC,EAAAzpC,GACA2sC,EAAAlD,EAAAzpC,EAAA,GACA,GAAA0F,EAAAuiC,MAAA0D,OAAA3tC,QAAAW,IAAA,GAAA+G,EAAAuiC,MAAA0D,OAAA3tC,QAAA2uC,IAAA,EACAH,EAAAtuC,KAAA8B,EAAA,IACA0sC,EAAAD,IAAAptC,OAAA,IAAAnB,KAAAa,MAAA2tC,EAAA/b,IAAAjrB,EAAAuiC,MAAA2E,cAAApjB,IAAA7qB,KACA8tC,EAAAvuC,cACA,GAAAwH,EAAAuiC,MAAA0D,OAAA3tC,QAAAW,IAAA,QAAA+G,EAAAuiC,MAAA0D,OAAA3tC,QAAA2uC,GAAA,KAAAE,EACArgC,EAAA7L,KAAAC,MAAAC,IAAA6E,EAAAuiC,MAAA2E,cAAApjB,IAAA7qB,MACAkuC,EAAAJ,IAAAptC,OAAA,IAAAnB,KAAAa,MAAA8tC,EAAAlc,IAAAnkB,EAAA6Z,iBAEAomB,IAAAptC,OAAA,GAAAnB,KAAAwH,EAAAuiC,MAAA2E,cAAApjB,IAAA7qB,IAGA6tC,EAAAtuC,KAAAurC,EAAApqC,QACA,IAAAytC,EAAArD,IAAApqC,OAAA,GACAqG,EAAAuiC,MAAA0D,OAAA3tC,QAAA8uC,IAAA,GACAL,IAAAptC,OAAA,GAAAnB,KAAAwH,EAAAuiC,MAAA2E,cAAApjB,IAAAsjB,GAAA,IACAvD,IAAAC,GAEAiD,IAAAptC,OAAA,GAAAnB,KAAAwH,EAAAuiC,MAAA2E,cAAApjB,IAAAsjB,GAAA,KAGAL,IAAAptC,OAAA,GAAAnB,KAAAwH,EAAAuiC,MAAA2E,cAAApjB,IAAAsjB,IAEA1jB,QAAAC,IAAA,2BAAAojB,GACA/mC,EAAAqnC,4BAAAN,EAAA9C,GACAjkC,EAAAsnC,yBAAAvD,GACA/jC,EAAAomB,qBACA7uB,eAAAD,EACAG,OAAA49B,IAAA,IAAAmH,EAAAj6B,EAAA6gC,EAAAjwB,OAAA4wB,KACA3sC,KAAA,qBAOA,IALA,IAEAmwC,EAAAC,GAAAzD,EAAA+C,GACAW,EAAAD,GAAAxD,EAAA8C,GACAY,KACAC,EAAA,EAAAA,EAAAJ,EAAA5tC,OAAAguC,IACAD,EAAAlvC,KANA,IAMA+uC,EAAAI,GAAAhuC,QAEAqG,EAAAyuB,cAAAntB,OAAAqiC,GACA3jC,EAAA4mB,sBACAxvB,KAAA,cACAyK,MAAAP,OAAAqiC,KAyQA,SAAAiE,EAAAra,EAAAma,EAAA3D,EAAAC,EAAA8C,EAAAS,EAAAE,EAAAI,GACA,IAAAhJ,EAAAiJ,YAAA,WACA,GAAA9nC,EAAAwuB,UAAAkZ,EAAAG,GAAA,CAGA,GAFAE,cAAAlJ,GACA7+B,EAAAwuB,SAAA,EACAqZ,IAAAH,EAAA/tC,OAAA,EAGA,YAFAqG,EAAAic,KAAAliB,OAAA,iBAAAA,OAAA,eACAkV,KAAAnV,GAAAkuC,OAAA3tC,GAAA,mBA8DA,SAAA4tC,EAAAlE,GASA,IARA,IAAAjiC,EAAAtL,EAAAuL,KAAA,SAAAD,GAAA,OAAAA,EAAAE,KAAAhC,EAAAyuB,gBACAyZ,EAAA7M,EAAAr7B,EAAAqtB,QACAvrB,EAAAG,OAAAC,YAAA4D,EACAhE,EAAAG,OAAAC,YAAAC,IAEAgmC,KACAC,KACAC,EAAAlvC,KAAAsQ,KAAAtQ,KAAAmvC,IAAAxuC,GAAAsgC,MAAAt0B,EAAAoiC,EAAA,MAAA/uC,KAAAmvC,IAAAxuC,GAAAsgC,MAAAj4B,EAAA+lC,EAAA,OARAK,EAAA,SASAC,GACA,IAAAC,EAAAjyC,EAAAuL,KAAA,SAAAD,GAAA,OAAAA,EAAAE,KAAA+hC,EAAAyE,KACAE,EAAArN,EAAAr7B,EAAAqtB,QACAob,EAAAxmC,OAAAC,YAAA4D,EACA2iC,EAAAxmC,OAAAC,YAAAC,IAEAwmC,EAAAxvC,KAAAsQ,KAAAtQ,KAAAmvC,IAAAI,EAAA,GAAA5uC,GAAAsgC,MAAAt0B,EAAA,GAAA3M,KAAAmvC,IAAAI,EAAA,GAAA5uC,GAAAsgC,MAAAj4B,EAAA,IACAkL,EAAAg7B,EAAAM,EACAt7B,EAAA,IACA+6B,EAAA5vC,KAAA6U,GACA86B,EAAA3vC,KAAAiwC,KAVAD,EAAA,EAAAA,EAAAzE,EAAApqC,OAAA6uC,IAAAD,EAAAC,GAaA,OAAAJ,EAAAzuC,OAAA,CACA,IAAAivC,EAAAR,EAAA9vC,QAAAa,KAAAC,IAAAC,MAAAF,KAAAivC,IACAS,EAAAV,EAAAS,GACA5oC,EAAAyuB,cAAAoa,EAAA7mC,GACA,IAAA8mC,GACA9oC,EAAAqtB,OAAAvnB,EAAA+iC,EAAA5mC,OAAAC,YAAA4D,GAAA9F,EAAA+oC,mBAAAttC,MACAuE,EAAAqtB,OAAAlrB,EAAA0mC,EAAA5mC,OAAAC,YAAAC,GAAAnC,EAAA+oC,mBAAAptC,QAEAssC,EACAzoC,KAAA,YADA,aACAspC,EADA,UACA9oC,EAAAuuB,gBADA,KAEAvuB,EAAAgrB,eACAhrB,EAAAomB,qBACA7uB,eAAAD,EACAG,QAAAuI,EAAAyuB,eACAr3B,KAAA,cAEA4I,EAAA4mB,sBACAxvB,KAAA,aACAyK,MAAA7B,EAAAyuB,iBAtGAua,CAAAlvC,GAAAC,OAAA1D,MAAA0tC,MAGA,IAAAkF,EAAAlF,EAAA+C,EAAAe,EAAA,MACAqB,EAAAnF,EAAA+C,EAAAe,EAAA,IACAsB,GAAAF,EAAAC,GACAE,GAAA,EACAC,EAAArpC,EAAAic,KAAAliB,OAAA,iBAAAa,UAAA,aACAyJ,OAAA,WACA,IAAAilC,EAAAxvC,GAAAC,OAAA1D,MAAAmJ,KAAA,MACA,OAAA8pC,IAAAjwB,OAAA8vB,KAEA,IAAAE,EAAAruC,QAAA,GAAArB,SACAyvC,GAAA,EACAD,EAAAxoB,UACA0oB,EAAArpC,EAAAic,KAAAliB,OAAA,iBAAAa,UAAA,aACAyJ,OAAA,WACA,IAAAilC,EAAAxvC,GAAAC,OAAA1D,MAAAmJ,KAAA,MACA,OAAA8pC,IAAAjwB,OAAA8vB,MAGAnpC,EAAAic,KAAAliB,OAAA,iBAAAA,OAAA,eACAE,aACAC,SAAA8F,EAAAoqB,kBACAmf,KAAAzvC,GAAA0vC,SAAAC,SAAA,IACAC,UAAA,aAuBA5oB,EAvBAuoB,EAAAvnC,OAuBA6nC,EAvBAP,EAwBAQ,EAAA9oB,EAAA+oB,iBACA,WACA,gBAAAtuC,GACA,IAAAkF,EAAAkpC,EAAA7oB,EAAAgpB,iBAAAF,EAAAruC,EAAAquC,GAAA9oB,EAAAgpB,iBAAAvuC,EAAAquC,GAEA,oBACAnpC,EAAAqF,EAAA9F,EAAA+oC,mBAAAttC,MACAgF,EAAA0B,EAAAnC,EAAA+oC,mBAAAptC,QAFA,UAGAqE,EAAAuuB,gBAHA,QA5BAl0B,GAAA,iBACA,IAAA0vC,EAAA/F,EAAA8C,EAAAe,EAAA,IACA7nC,EAAA4mB,sBACAxvB,KAAA,aACAyK,MAAAqnC,IAEAlpC,EAAArF,WAAAovC,EAAAb,GACAtB,EAAAra,EAAAma,EAAA3D,EAAAC,EAAA8C,EAAAS,EAAAE,EAAAI,EAAA,SAGA,CACA,IAAAnnC,EAAAV,EAAAwuB,SAAAjB,EACAvtB,EAAA4mB,sBACAxvB,KAAA,aACAyK,MAAA0lC,EAAAM,GAAAnnC,KAEAV,EAAArF,WAAA8sC,EAAAI,GAAAnnC,GAAA6mC,EAAAM,GAAAnnC,IACAV,EAAAwuB,UAAAjB,EAKA,IAAAzM,EAAA6oB,EACAC,GAJArc,GA3TAqa,CAbA,IAaAF,EAAA3D,EAAAC,EAAA8C,EAAAS,EAAAE,EAAA,GAsBA,SAAA7yB,GAAAklB,EAAAC,EAAAC,GAEA,QADA1iC,GAAA0iC,MAAA,IACAl2B,MAAAkwB,QAAA+F,IACA,QAAAz/B,EAAA,EAAAA,EAAAy/B,EAAApgC,OAAAW,IACA,GAAAwJ,MAAAkwB,QAAA+F,EAAAz/B,IAAA,CACA,IAAA2/B,EAAArlB,GAAAklB,EAAAC,EAAAz/B,GAAA0/B,EAAA1/B,EAAA,KACA,GAAA2/B,EAAA,OAAAA,OACA,GAAAF,EAAAz/B,IAAAw/B,EACA,OAAAE,EAAA1/B,OAGA,GAAAy/B,GAAAD,EACA,OAAAE,EAAA1/B,EAEA,SAGA,SAAA6pC,GAAA6F,GAGA,IAFA,IAAAC,KACAC,EAeA,SAAAF,GACA,IAAAG,KAAAh3B,OAAA8X,IAAA,IAAAuR,EAAAj6B,EAAAynC,EAAAzzC,IAAA,SAAAgE,GAAA,OAAAA,EAAAmmB,OACA0pB,KAAAj3B,OAAA8X,IAAA,IAAAuR,EAAAj6B,EAAAynC,EAAAzzC,IAAA,SAAAgE,GAAA,OAAAA,EAAA8vC,OACA,OAAAhV,IAAA,IAAAmH,EAAAj6B,EAAA4nC,EAAAh3B,OAAAi3B,KAlBAE,CAAAN,GACAO,EAAA,EAAAA,EAAAL,EAAAvwC,OAAA4wC,IAAA,CAGA,IAFA,IAAAtqB,EAAAiqB,EAAAK,GACAC,KACAjiC,EAAA,EAAAA,EAAAyhC,EAAArwC,OAAA4O,IACAyhC,EAAAzhC,GAAAmY,IAAAT,EACAuqB,EAAAR,EAAAzhC,GAAA8hC,GAAAL,EAAAzhC,GAAAkiC,EACAT,EAAAzhC,GAAA8hC,IAAApqB,IACAuqB,EAAAR,EAAAzhC,GAAAmY,GAAAspB,EAAAzhC,GAAAkiC,GAGAR,EAAAhqB,GAAAuqB,EAEA,WAAAE,EAAA,EAAAT,GASA,SAAA7E,GAAApjC,GACA,QAAA2oC,EAAA,EAAAA,EAAA3qC,EAAAuiC,MAAA0D,OAAAtsC,OAAAgxC,IACA,GAAArpC,OAAAsT,GAAA5U,EAAAuiC,MAAA0D,OAAA0E,GAAApyC,KAAAu7B,iBAAA,MAAA9xB,EACA,OAAAhC,EAAAuiC,MAAA0D,OAAA0E,GAKA,SAAAtG,GAAAH,EAAA0G,GAIA,IAHA,IAAAtG,EAAArpC,KAAAC,MAAAC,IAAAyvC,IACAvzC,KACAwzC,EAAAC,IAAAxG,GACAyG,EAAA,EAAAA,EAAA7G,EAAAvqC,OAAA,EAAAoxC,IAAA,CACA,IAAAC,GAAA9G,EAAA6G,GAAA7G,EAAA6G,EAAA,IAEAE,OAAA,EAGAA,EAFAJ,EAAAvyC,QAAA+gB,OAAA2xB,KAAA,EAEA1G,EAAA0G,MAGA73B,OAAA8X,IAAAqZ,EAAA0G,EAAArqB,uBAEAoqB,IAAA7G,EAAAvqC,OAAA,EACAtC,EAAAmB,KAAAa,MAAAhC,EAAA4zB,IAAAggB,KAEAA,EAAA7E,MACA/uC,EAAAmB,KAAAa,MAAAhC,EAAA4zB,IAAAggB,KAGA,OAAA5zC,EAGA,SAAAktC,GAAA2G,EAAAhH,EAAAiH,EAAAC,GAKA,IAJA,IAAA3H,EAAAxoC,KAAAC,MAAAC,IAAAgwC,IACAE,EAAApwC,KAAAC,MAAAC,IAAAiwC,IACAtkC,KACA+jC,EAAAC,IAAArH,GACA6H,EAAA,EAAAA,EAAApH,EAAAvqC,OAAA,EAAA2xC,IAAA,CACA,IAAAN,GAAA9G,EAAAoH,GAAApH,EAAAoH,EAAA,IACAC,OAAA,EACAC,OAAA,EACA,SAAAN,EACAL,EAAAvyC,QAAA+gB,OAAA2xB,KAAA,EAEAQ,EAAAH,EADAE,EAAAV,EAAAvyC,QAAA+gB,OAAA2xB,MAGAO,EAAAV,EAAAvyC,QAAA+gB,OAAA2xB,EAAArqB,YACA6qB,KAAAr4B,OAAA8X,IAAAogB,EAAAE,KAAA5qB,WAEA,UAAAuqB,IAEAM,EADAX,EAAAvyC,QAAA+gB,OAAA2xB,KAAA,EACAK,EAAAhyB,OAAA2xB,OAEA73B,OAAA8X,IAAAogB,EAAAhyB,OAAA2xB,EAAArqB,yBAGA2qB,IAAApH,EAAAvqC,OAAA,EACAmN,EAAAtO,KAAAa,MAAAyN,EAAAmkB,IAAAugB,KAEAA,EAAApF,MACAt/B,EAAAtO,KAAAa,MAAAyN,EAAAmkB,IAAAugB,KAGA,OAAA1kC,EA0DA,SAAAy/B,GAAAnkC,GAIA,IAHA,IAAAqP,KACAg6B,EAAA,EAEAC,EAAA,EAAAA,EAAAtpC,EAAAzI,OAAA+xC,IAAA,CACA,IAAAC,EAAAvpC,EAAAspC,GACA,GAAAE,EAAAxpC,EAAAupC,GAAA,GACA,IAAAE,EAAAC,EAAA1pC,EAAAupC,GACAl6B,EAAAjZ,MAAAkzC,EAAA,EAAAD,EAAAI,EAAAJ,IACAA,GAAAI,EAAAH,EACAA,EAAAG,GAGA,OAAAp6B,EAEA,SAAAm6B,EAAAxpC,EAAAupC,GACA,OAAAvpC,EAAAiC,OAAA,SAAA9J,GAAA,OAAAA,IAAAoxC,IAAAhyC,OAGA,SAAAmyC,EAAA1pC,EAAAupC,GAEA,IADA,IAAAzY,EAAA,EACA6Y,EAAA,EAAAA,EAAA3pC,EAAAzI,OAAAoyC,IACA,GAAA3pC,EAAA2pC,KAAAJ,GAEA,MADAzY,EAEA,OAAA6Y,EAIA,aAIA,SAAAtF,GAAArkC,EAAA4pC,GAEA,IADA,IAAArF,KACAsF,EAAA,EAAAA,EAAAD,EAAAryC,OAAAsyC,IAAA,CACA,IAAAC,EAAAF,EAAAC,GACAE,EAAA/pC,EAAAumB,OAAAujB,EAAA,GAAAA,EAAA,GAAAA,EAAA,OACAvF,IAAAxzB,OAAAg5B,IACA/F,MAEA,SAAAjzB,OAAA8X,IAAA,IAAAuR,EAAAj6B,EAAAokC,KAiBA,SAAAa,GAAA4E,EAAAtF,GAEA,IADA,IAAAuF,KACAC,EAAA,EAAAA,EAAAxF,EAAAntC,OAAA,EAAA2yC,IAEA,GADAD,EAAA7zC,SACA8zC,EAAA,EAIA,QAAA/jC,EAAAu+B,EAAAwF,GAAA,EAAA/jC,EAAAu+B,EAAAwF,EAAA,GAAA/jC,IACA8jC,EAAAC,GAAA9zC,KAAA4zC,EAAA7jC,SAGA,QAAAgkC,EAAAzF,EAAAwF,GAAAC,EAAAzF,EAAAwF,EAAA,GAAAC,IACAF,EAAAC,GAAA9zC,KAAA4zC,EAAAG,IAIA,OAAAF,GAjgBAhJ,EACAhpC,GAAA,uBAAA2F,EAAAwsC,oBAAA1yC,GAAAC,OAAA1D,MAAAgtC,KACAhpC,GAAA,sBAAA2F,EAAAysC,sBAAA3yC,GAAAC,OAAA1D,MAAAgtC,EAAA,kBACAhpC,GAAA,QAAAqpC,GACAH,EACAlpC,GAAA,uBACA,IAAAspC,EAAA7pC,GAAAC,OAAA1D,MAAAmJ,KAAA,SACAktC,EAAA1sC,EAAAic,KAAAliB,OAAA,iBAAAa,UAAA,gBACAyJ,OAAA,kBAAAvK,GAAAC,OAAA1D,MAAAmJ,KAAA,WAAAmkC,IACA3jC,EAAAwsC,oBAAAE,EAAArJ,KAEAhpC,GAAA,sBACA,IAAAspC,EAAA7pC,GAAAC,OAAA1D,MAAAmJ,KAAA,SACAktC,EAAA1sC,EAAAic,KAAAliB,OAAA,iBAAAa,UAAA,gBACAyJ,OAAA,kBAAAvK,GAAAC,OAAA1D,MAAAmJ,KAAA,WAAAmkC,IACA3jC,EAAAysC,sBAAAC,EAAArJ,EAAA,kBAEAhpC,GAAA,QAAAqpC,IAsmBAnY,cAAA,SAAAzY,GACA,IAAA9S,EAAA3J,KACAG,EAAA6+B,IAAAh/B,KAAAE,IAAAG,UAAAC,UACAN,KAAA4sC,mCACA5sC,KAAA6sC,kBACA,IAAAC,EAAA9sC,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,gBACA2oC,EAAAltC,KAAA4lB,KAAAliB,OAAA,iBAAAA,OAAA,YAAAa,UAAA,SAyBA,SAAA8oC,EAAAgJ,GACA,IAAA/I,EAAA+I,EAAAltC,KAAA,SACA,GAAAQ,EAAAyuB,gBAAAntB,OAAAqiC,GAEA3jC,EAAAic,KAAAliB,OAAA,iBAAAa,UAAA,eAAA+E,SACAK,EAAAyuB,cAAA,KACAzuB,EAAAic,KAAAliB,OAAA,iBAAAa,UAAA,gBAAAH,QAAA,kBACAuF,EAAAomB,qBACA7uB,UAAA,KACAH,KAAA,YAEA4I,EAAA4mB,sBACAxvB,KAAA,QACAyK,MAAA,WAEA,CAEA,OAAAsX,SAAAwzB,uBAAA,cAAAhzC,OAEAqG,EAAA4jC,eAAA8I,GACA1sC,EAAAic,KAAAliB,OAAA,iBAAAA,OAAA,eACAkV,KAAAnV,GAAAkuC,OACA3tC,GAAA,mBACA2F,EAAA0uB,sBAAA,IAEAr0B,GAAA,OAAA2uC,IACA3uC,GAAA,iBACA2F,EAAA0uB,sBAAA,IAEA1uB,EAAA4mB,sBACAxvB,KAAA,SACAyK,MAAAP,OAAAqiC,SAEA,CAEA3jC,EAAAgrB,eACA,IAAA4hB,EAAA5sC,EAAA2qB,aAAA+hB,GACA1sC,EAAAic,KAAAliB,OAAA,iBAAAA,OAAA,eACAyF,KAAA,YADA,cAEAotC,EAAA,GAAA5sC,EAAA+oC,mBAAAttC,MACAmxC,EAAA,GAAA5sC,EAAA+oC,mBAAAptC,QAHA,UAIAqE,EAAAuuB,gBAJA,KAKAvuB,EAAA4mB,sBACAxvB,KAAA,aACAyK,MAAAP,OAAAqiC,KAGA3jC,EAAAic,KAAAliB,OAAA,iBAAAa,UAAA,gBAAAH,QAAA,kBACAiyC,EAAAjyC,QAAA,kBACAuF,EAAAyuB,cAAAntB,OAAAqiC,GACA3jC,EAAAomB,qBACA7uB,eAAAD,EACAG,QAAAuI,EAAAyuB,eACAr3B,KAAA,WAIA,SAAA4xC,IAUA,IATA,IAAAlnC,EAAAtL,EAAAuL,KAAA,SAAAD,GAAA,OAAAA,EAAAE,KAAAhC,EAAAyuB,gBACAyZ,EAAA7M,EAAAr7B,EAAAqtB,QACAvrB,EAAAG,OAAAC,YAAA4D,EACAhE,EAAAG,OAAAC,YAAAC,IAEA0qC,EAAAxX,IAAAvzB,EAAA6qB,UAAAh2B,UACAwxC,KACAC,KACAC,EAAAlvC,KAAAsQ,KAAAtQ,KAAAmvC,IAAAxuC,GAAAsgC,MAAAt0B,EAAAoiC,EAAA,MAAA/uC,KAAAmvC,IAAAxuC,GAAAsgC,MAAAj4B,EAAA+lC,EAAA,OATA4E,EAAA,SAUAxyC,GACA,IAAAyyC,EAAAv2C,EAAAuL,KAAA,SAAAD,GAAA,OAAA3G,IAAA4nC,IAAAjhC,EAAAkrC,aAAA7xC,IAAA0xC,EAAAvyC,MACA,QAAAhD,IAAAy1C,EAAA,CACA,IAAAE,EAAA5R,EAAAr7B,EAAAqtB,QACA0f,EAAA9qC,OAAAC,YAAA4D,EACAinC,EAAA9qC,OAAAC,YAAAC,IAEA+qC,EAAA/zC,KAAAsQ,KAAAtQ,KAAAmvC,IAAA2E,EAAA,GAAAnzC,GAAAsgC,MAAAt0B,EAAA,GAAA3M,KAAAmvC,IAAA2E,EAAA,GAAAnzC,GAAAsgC,MAAAj4B,EAAA,IACAgrC,EAAA9E,EAAA6E,EACAC,EAAA,IACA/E,EAAA5vC,KAAA20C,GACAhF,EAAA3vC,KAAAu0C,MAXAzyC,EAAA,EAAAA,EAAAuyC,EAAAlzC,OAAAW,IAAAwyC,EAAAxyC,GAeA,OAAA8tC,EAAAzuC,OAAA,CACA,IAAAivC,EAAAR,EAAA9vC,QAAAa,KAAAC,IAAAC,MAAAF,KAAAivC,IACAS,EAAAV,EAAAS,GACA5oC,EAAAyuB,cAAAoa,EAAA7mC,GACA,IAAA8mC,GACA9oC,EAAAqtB,OAAAvnB,EAAA+iC,EAAA5mC,OAAAC,YAAA4D,GAAA9F,EAAA+oC,mBAAAttC,MACAuE,EAAAqtB,OAAAlrB,EAAA0mC,EAAA5mC,OAAAC,YAAAC,GAAAnC,EAAA+oC,mBAAAptC,QAEA7B,GAAAC,OAAA1D,MACAmJ,KAAA,YADA,aACAspC,EADA,UACA9oC,EAAAuuB,gBADA,KAEA,IAAAme,EAAA1sC,EAAAic,KAAAliB,OAAA,iBAAAa,UAAA,gBACAyJ,OAAA,kBAAAvK,GAAAC,OAAA1D,MAAAmJ,KAAA,WAAAQ,EAAAyuB,cAAA,KACAzuB,EAAAic,KAAAliB,OAAA,iBAAAa,UAAA,gBAAAH,QAAA,kBACAiyC,EAAAjyC,QAAA,kBACAuF,EAAAgrB,eACAhrB,EAAAomB,qBACA7uB,eAAAD,EACAG,QAAAuI,EAAAyuB,eACAr3B,KAAA,UAEA4I,EAAA4mB,sBACAxvB,KAAA,aACAyK,MAAA7B,EAAAyuB,iBAhIA0U,EACA9oC,GAAA,uBAAA2F,EAAAwsC,oBAAA1yC,GAAAC,OAAA1D,MAAA8sC,KACA9oC,GAAA,sBAAA2F,EAAAysC,sBAAA3yC,GAAAC,OAAA1D,MAAA8sC,EAAA,eACA9oC,GAAA,mBAAAqpC,EAAA5pC,GAAAC,OAAA1D,SACAktC,EACAlpC,GAAA,uBACA,IAAAspC,EAAA7pC,GAAAC,OAAA1D,MAAAmJ,KAAA,SACAktC,EAAA1sC,EAAAic,KAAAliB,OAAA,iBAAAa,UAAA,gBACAyJ,OAAA,kBAAAvK,GAAAC,OAAA1D,MAAAmJ,KAAA,WAAAmkC,IACA3jC,EAAAwsC,oBAAAE,EAAAvJ,KAEA9oC,GAAA,sBACA,IAAAspC,EAAA7pC,GAAAC,OAAA1D,MAAAmJ,KAAA,SACAktC,EAAA1sC,EAAAic,KAAAliB,OAAA,iBAAAa,UAAA,gBACAyJ,OAAA,kBAAAvK,GAAAC,OAAA1D,MAAAmJ,KAAA,WAAAmkC,IACA3jC,EAAAysC,sBAAAC,EAAAvJ,EAAA,eAEA9oC,GAAA,mBACA,IAAAspC,EAAA7pC,GAAAC,OAAA1D,MAAAmJ,KAAA,SAGAkkC,EAFA1jC,EAAAic,KAAAliB,OAAA,iBAAAa,UAAA,gBACAyJ,OAAA,kBAAAvK,GAAAC,OAAA1D,MAAAmJ,KAAA,WAAAmkC,QAiHA6I,oBAAA,SAAAE,EAAAvJ,GACA,IAAA9sC,KAAAq4B,qBAAA,CACA,IAAAiV,EAAA+I,EAAAltC,KAAA,SACA2jC,EACA9+B,OAAA,WACA,OAAAvK,GAAAC,OAAA1D,MAAAmJ,KAAA,WAAAmkC,IAEAlpC,QAAA,oBACAiyC,EAAAjyC,QAAA,kBACAiyC,EAAAjyC,QAAA,oBAEApE,KAAA+vB,qBACA7uB,eAAAD,EACAG,QAAA6J,OAAAqiC,IACAvsC,KAAA,gBAGAq1C,sBAAA,SAAAC,EAAAvJ,EAAArnB,GACA,IAAAzlB,KAAAq4B,qBAAA,CACA,IAAAiV,EAAA+I,EAAAltC,KAAA,SACA,cAAAsc,EACA,IAAA3C,SAAAwzB,uBAAA,cAAAhzC,OAcAwpC,EACA9+B,OAAA,WACA,OAAAvK,GAAAC,OAAA1D,MAAAmJ,KAAA,WAAAmkC,IAEAlpC,QAAA,oBAfA2yC,IAEA,iBAAAtxB,GACAsxB,IAEA/2C,KAAA+vB,qBACA7uB,UAAA,KACAH,KAAA,aAWA,SAAAg2C,IACAjK,EACA9+B,OAAA,WACA,OAAAvK,GAAAC,OAAA1D,MAAAmJ,KAAA,WAAAmkC,IAEAlpC,QAAA,sBAGAmpC,eAAA,SAAA8I,GACA,IAAAE,EAAAv2C,KAAAs0B,aAAA+hB,GACAW,OAAA,GACAA,EAAAh3C,KAAA4lB,KAAAliB,OAAA,iBACAwF,OAAA,KACAC,KAAA,sBACAA,KAAA,YAHA,aAGAotC,EAHA,UAGAv2C,KAAAk4B,gBAHA,KAIA7zB,MAAA,cACA6E,OAAA,QACAC,KAAA,IAAAnJ,KAAAi4B,YACA,IAAA3R,EAAA0wB,EAAAvrC,OAAAyE,wBACA+mC,EAAA1kB,kBAAA9uB,GAAAC,OAAA,WAAAyF,KAAA,cACAwpB,EAAAskB,EAAAtkB,OACAC,EAAAqkB,EAAArkB,OACA,UAAA5yB,KAAA4lB,KAAAliB,OAAA,iBAAAyF,KAAA,cACA,IAAA+tC,EAAA3kB,kBAAAvyB,KAAA4lB,KAAAliB,OAAA,iBAAAyF,KAAA,cACAwpB,GAAAukB,EAAAvkB,OACAC,GAAAskB,EAAAtkB,OAEAokB,EACA7tC,KAAA,YADA,cAEAotC,EAAA,KAAAjwB,EAAAlhB,MAAA,EAAAutB,EACA4jB,EAAA,GAAAjwB,EAAAhhB,OAAAstB,GAHA,UAIA5yB,KAAAk4B,gBAJA,KAKA7zB,MAAA,aACArE,KAAA0yC,oBACAttC,MAAA,EAAAkhB,EAAAlhB,MAAA,EAAAutB,EACArtB,OAAAghB,EAAAhhB,OAAAstB,IAGAoe,4BAAA,SAAAN,EAAA9C,GAEA,IADA,IAAAuJ,KACAlzC,EAAA,EAAAA,EAAA2pC,EAAAtqC,OAAA,EAAAW,IACAkzC,EAAAh1C,KAAA6gB,QAAA4qB,EAAA3pC,GAAA2pC,EAAA3pC,EAAA,MACAkzC,EAAAh1C,KAAA6gB,QAAA4qB,EAAA3pC,EAAA,GAAA2pC,EAAA3pC,MAGAjE,KAAAksC,MAAAkL,uBAAAp3C,KAAA4lB,KAAAliB,OAAA,iBAAAgtC,GAEA1wC,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,YAAA8yC,QACAr3C,KAAA4lB,KAAAliB,OAAA,iBAAAA,OAAA,eAAA2zC,QACAr3C,KAAAksC,MAAAoL,uBAAAt3C,KAAA4lB,KAAAliB,OAAA,kBACA1D,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,cAKAH,QAAA,sBACApE,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,aACAyJ,OAAA,WACA,IAAAilC,EAAAxvC,GAAAC,OAAA1D,MAAAmJ,KAAA,MACA,WAAAguC,EAAAl1C,QAAAgxC,KAEA7uC,QAAA,sBACA,IAAAmzC,EAAAv3C,KAAA4lB,KAAAliB,OAAA,iBAAAA,OAAA,YACA6zC,EAAAhzC,UAAA,iBACAyJ,OAAA,sBAAA4/B,EAAA3rC,QAAAgJ,OAAAxH,GAAAC,OAAA1D,MAAAmJ,KAAA,aACA3E,KAAA,WACAf,GAAAC,OAAA1D,MAAAuE,UAAA,UAAAC,KAAA,SAAA4F,EAAAC,GACA,IAAAA,EACA5G,GAAAC,OAAA1D,MAAAqE,MAAA,sBACA,IAAAgG,GACA5G,GAAAC,OAAA1D,MAAAqE,MAAA,wBAIAkzC,EAAAhzC,UAAA,mBACAyJ,OAAA,sBAAA4/B,EAAA3rC,QAAAgJ,OAAAxH,GAAAC,OAAA1D,MAAAmJ,KAAA,aACA3E,KAAA,WACAf,GAAAC,OAAA1D,MAAA0D,OAAA,UAAAW,MAAA,yBAGA4sC,yBAAA,SAAAvD,GACA1tC,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,gBACAC,KAAA,WACA,IAAA6xC,EAAA5yC,GAAAC,OAAA1D,MACA0tC,EAAAzrC,QAAAgJ,OAAAorC,EAAAltC,KAAA,eACAktC,EAAAjyC,QAAA,qBAIA2wB,qBAAA,WACA/0B,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,gBAAAH,QAAA,mBAEA0wB,cAAA,WACA90B,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,cAAAH,QAAA,sBACApE,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,aAAAH,QAAA,sBACApE,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,wBAAA+E,UAEAsjC,iCAAA,WACA,IAAAjjC,EAAA3J,KACA,UAAAA,KAAAs4B,oBAAA,CACA,IAAAkf,GAAA,2CACAx3C,KAAAs4B,uBACA,QAAAr0B,EAAA,EAAAA,EAAAuzC,EAAAl0C,OAAAW,IACAjE,KAAAs4B,oBAAAkf,EAAAvzC,OAEAjE,KAAA4lB,KAAAliB,OAAA,iBACAa,UAAA,mBAAAC,KAAA,WACA,QAAAizC,EAAA,EAAAA,EAAAD,EAAAl0C,OAAAm0C,IACA9tC,EAAA2uB,oBAAAkf,EAAAC,IAAAh0C,GAAAC,OAAA1D,MAAAmJ,KAAA,UAAA1F,GAAAC,OAAA1D,MAAAgE,GAAA,GAAAwzC,EAAAC,MAIAz3C,KAAA4lB,KAAAliB,OAAA,iBACAa,UAAA,mBACAP,GAAA,kBACAA,GAAA,iBACAA,GAAA,cACAA,GAAA,kBAEAixB,wBAAA,WACAj1B,KAAAk0B,aAAA,IACAvqB,EAAA3J,KACAw3C,GAAA,2CACAx3C,KAAA4lB,KAAAliB,OAAA,iBACAa,UAAA,mBACAC,KAAA,WAEA,IADA,IAAAkzC,EAAAj0C,GAAAC,OAAA1D,MAAAmJ,KAAA,SACAlF,EAAA,EAAAA,EAAAuzC,EAAAl0C,OAAAW,IACAR,GAAAC,OAAA1D,MAAAgE,GAAA,GAAAwzC,EAAAvzC,GAAA0F,EAAA2uB,oBAAA,GAAAkf,EAAAvzC,IAAAyzC,OAIA1iB,iBAAA,WACAh1B,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,mBAAA8yC,QACAr3C,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,iBAAA8yC,QACAr3C,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,YAAA8yC,SAEAxK,gBAAA,WACA7sC,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,gBAAA8yC,QACAr3C,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,iBAAA8yC,QACAr3C,KAAA4lB,KAAAliB,OAAA,iBAAAa,UAAA,YAAA8yC,SAEA/yC,WAAA,SAAAmN,EAAA7O,GACA5C,KAAA20B,eACA30B,KAAA4lB,KAAAliB,OAAA,iBAAAA,OAAA,eACAyF,KAAA,YADA,cAEAsI,EAAAhC,EAAAzP,KAAA0yC,mBAAAttC,MACAqM,EAAA3F,EAAA9L,KAAA0yC,mBAAAptC,QAHA,UAIAtF,KAAAk4B,gBAJA,KAKAl4B,KAAA+vB,qBACA7uB,eAAAD,EACAG,QAAA6J,OAAArI,IACA7B,KAAA,eAGA4zB,aAAA,WACAlxB,GAAAC,OAAA,YAAAA,OAAA,eAAAa,UAAA,cAAAC,KAAA,WACA,IAAAN,EAAAT,GAAAC,OAAA1D,MACAkE,EAAAE,QAAA,qBACAF,EAAAE,QAAA,sBACAF,EAAAE,QAAA,4BACAF,EAAAR,OAAA,gBAAAW,MAAA,iBAIAwwB,iBAAA,WACA,IAAA0iB,EAAAv3C,KAAA4lB,KAAAliB,OAAA,iBAAAA,OAAA,YACA6zC,EAAAhzC,UAAA,iBACAC,KAAA,WACAf,GAAAC,OAAA1D,MAAAuE,UAAA,UAAAC,KAAA,SAAA4F,EAAAC,GACA,IAAAA,EACA5G,GAAAC,OAAA1D,MAAAqE,MAAA,oBACA,IAAAgG,GACA5G,GAAAC,OAAA1D,MAAAqE,MAAA,sBAIAkzC,EAAAhzC,UAAA,mBACAC,KAAA,WACAf,GAAAC,OAAA1D,MAAA0D,OAAA,UAAAW,MAAA,0BAOA,IAAA+jC,KAEA,SAAApD,EAAA2S,EAAAC,GACA,OAAAD,EAAAloC,EAAAmoC,EAAA,IAAAD,EAAA7rC,EAAA8rC,EAAA,KAgEA,SAAAzd,EAAA0d,EAAAr+B,GACAnL,EAAAmL,GAAAtQ,OAAAmF,EAAAwpC,6CCz1FAC,EAAAC,QAAA,khJCYAlkB,EAAAnL,EAAA,QACAsvB,GACA55C,KAAA,UACAC,KAFA,WAGA,OACA45C,wBACAC,QACAC,IAAA,GACAC,KAAA,IAEAC,WACAF,IAAA,GACAC,KAAA,IAEAE,cACAH,IAAA,GACAC,KAAA,KAGAG,SAAA,aACAC,WAAA,EACA/yB,KAAA,SACAgzB,qBAAA,2CACAC,mBAAA,EACAC,iBAAA,EACAC,mBAAA,IAGAr5C,QA3BA,WA2BA,IAAAuB,EAAAd,KACAA,KAAA4kB,UAAA,WACA9jB,EAAA+3C,eAGAr5C,SAAY0lB,OACZxlB,OAAAylB,EAAA,EAAAzlB,EAEA,YACA,aACA,iBACA,yBACA,0BAGAE,OAWAC,UAAA,SAAAC,EAAAC,GACA0D,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,cAAAW,MAAA,wBACArE,KAAAC,eACAD,KAAAE,IAAAJ,EAAAI,IACAF,KAAAG,UAAA24C,IAAA94C,KAAAE,IAAAG,UAAAC,UACAR,EAAAquB,QACAnuB,KAAA64C,YAEA,MAAA94C,EAAAG,KAEAF,KAAAqJ,QAEArJ,KAAAU,OACAV,KAAA+4C,aAAA/4C,KAAAu4B,IAAA70B,OAAA,kCAGA6hB,WAAA,SAAAzlB,GAIA,OAHAE,KAAAylB,KAAA3lB,EAAA2lB,KACAhiB,GAAAc,UAAAvE,KAAA4lB,KAAAliB,OAAA,YAAA+H,OAAAe,UACAnI,MAAA,uBACAvE,EAAA2lB,MACA,aACA,IAAAM,EAAA/lB,KAAA4lB,KAAAliB,OAAA,YAAAA,OAAA,cACAqiB,EAAAxhB,UAAA,KAAA+E,SACAtJ,KAAA+4C,aAAAhzB,EAAA,KAAA/lB,KAAAu4C,UACAxyB,EAAA1hB,MAAA,wBACA,MACA,iBACA0hB,EAAA/lB,KAAAu4B,IAAA70B,OAAA,oBACAA,OAAA,mBAAAa,UAAA,KAAA+E,SACAyc,EAAA1hB,MAAA,wBACA,MACA,oBACA0hB,EAAA/lB,KAAAu4B,IAAA70B,OAAA,uBACAA,OAAA,eAAAa,UAAA,KAAA+E,SACAyc,EAAAriB,OAAA,mBAAAa,UAAA,KAAA+E,SACAyc,EAAAriB,OAAA,oBAAAa,UAAA,KAAA+E,SACAtJ,KAAAg5C,iBAAA,GACAjzB,EAAA1hB,MAAA,0BAIA4pB,eAAA,SAAAnuB,GACA,oBAAAE,KAAAylB,MACA,cAAA3lB,EAAAiB,KAAA,CAEA,IAAAglB,EAAA/lB,KAAAu4B,IAAA70B,OAAA,sBACAqiB,EAAAriB,OAAA,eAAAa,UAAA,KAAA+E,SACAyc,EAAAriB,OAAA,mBAAAa,UAAA,KAAA+E,SACAyc,EAAAriB,OAAA,oBAAAa,UAAA,KAAA+E,SACAtJ,KAAAi5C,SAAAlzB,EAAAriB,OAAA,eAAA1D,KAAAu4C,SAAAz4C,EAAA0L,MAAA,aACAxL,KAAAk5C,YAAAp5C,EAAA0L,WACA,mBAAA1L,EAAAiB,KAAA,CACA,IAAAo4C,EAAAn5C,KAAAu4B,IAAA70B,OAAA,sBACA1D,KAAAi5C,SAAAE,EAAAz1C,OAAA,mBAAA1D,KAAAu4C,SAAAv4C,KAAAk5C,YAAA,aACAl5C,KAAAi5C,SAAAE,EAAAz1C,OAAA,oBAAA1D,KAAAu4C,SAAAz4C,EAAA0L,MAAA,kBACA,kBAAA1L,EAAAiB,KAAA,CACA,IAAAq4C,EAAAp5C,KAAAu4B,IAAA70B,OAAA,sBAAAA,OAAA,mBACA1D,KAAAq5C,eAAAD,EAAAp5C,KAAAu4C,SAAAz4C,EAAA0L,aAEA,iBAAAxL,KAAAylB,KAAA,CACA,IAAA6zB,EAAAt5C,KAAAu4B,IAAA70B,OAAA,mBAAAA,OAAA,mBACA,WAAA5D,EAAAiB,MAEAf,KAAAg5C,iBAAAh5C,KAAA04C,oBACAY,EAAA/0C,UAAA,KAAA+E,SACAtJ,KAAAi5C,SAAAK,EAAAt5C,KAAAu4C,SAAAz4C,EAAA0L,MAAA,cACA,eAAA1L,EAAAiB,KACAf,KAAAq5C,eAAAC,EAAAt5C,KAAAu4C,SAAAz4C,EAAA0L,OACA,UAAA1L,EAAAiB,MACAu4C,EAAA/0C,UAAA,KAAA+E,WAIA4kB,uBAAA,SAAApuB,GACAE,KAAAu4B,IAAA70B,OAAA,cAAAa,UAAA,KAAA+E,SACAtJ,KAAA+4C,aAAA/4C,KAAAu4B,IAAA70B,OAAA,cAAA5D,EAAAs8B,YAAAp8B,KAAAu4C,WAEAnqB,qBAAA,SAAAtuB,GAAA,IAAA4J,EAAA1J,KACA,iBAAAF,EAAAioC,OAAA,CACA,IAAA7L,EAAAp8B,EAAAo8B,MACAA,EAAAqd,SAAA,OACArd,IAAAhxB,QAAA,UAQA,IAAAsuC,EAAAV,IAAA94C,KAAAu4B,IAAA70B,OAAA,cAAA+H,OAAAe,UAAA+R,UAAA,SAAAk7B,GAAA,OAAAA,EAAAC,WAAAxd,MAAAyd,YAAAzd,IACA,GAAAsd,EAAA,EAAAx5C,KAAA44C,mBAAA,CACA,IACAv1C,EADArD,KAAAu4B,IAAA70B,OAAA,cAAAa,UAAA,YAAAI,QAAA,GAAArB,OACAtD,KAAA44C,mBAEAr1C,GADAi2C,EAAAn2C,EAAA,EAAAA,EAAAm2C,IACAx5C,KAAA45C,WAAA55C,KAAA65C,cACAp2C,GAAAC,OAAA,wBACAE,aACAC,SAAA,MACAC,MAAA,kBAAAC,EAAAR,IACAS,GAAA,iBACA0F,EAAA6uB,IAAA70B,OAAA,cAAAa,UAAA,YACAyJ,OAAA,WACA,OAAAvK,GAAAC,OAAA1D,MAAAmJ,KAAA,WAAA6Z,OAAAkZ,KAEA73B,MAAA,qBAGArE,KAAAu4B,IAAA70B,OAAA,cAAAa,UAAA,YACAyJ,OAAA,WACA,OAAAvK,GAAAC,OAAA1D,MAAAmJ,KAAA,WAAA6Z,OAAAkZ,KAEA73B,MAAA,mBAGArE,KAAAu4B,IAAA70B,OAAA,cAAAa,UAAA,YAAAF,MAAA,aACAZ,GAAAC,OAAA,wBACAE,aACAC,SAAA,MACAC,MAAA,kBAAAC,EAAA,IAGA,SAAAA,EAAAiB,GACA,kBACA,IAAAf,EAAAR,GAAAwB,kBAAAjF,KAAAgF,aACA,gBAAAE,GAAAlF,KAAAgF,UAAAf,EAAAiB,QAKAC,QAAW+f,OACXxlB,OAAAylB,EAAA,EAAAzlB,EACA,yBAEAm5C,UAAA,WACA,IAAAiB,EAAAr2C,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,cAEAuhB,EADA60B,EAAAruC,OAAAyE,wBACA9K,MAEA20C,EAAAr0C,WAAAjC,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,cAAAA,OAAA,cAAAW,MAAA,WACAy1C,EACAz1C,MAAA,QAAA4gB,EAAA,MAEA5gB,MAAA,aACAA,MAAA,SAAA01C,EAAA,MAiBA,IAAAz0C,EAAAtF,KAAA2D,IAAA4B,aAAAw0C,EACAt2C,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,wBACAW,MAAA,uBACAA,MAAA,MAAA01C,EAFA,MAGA11C,MAAA,cACAA,MAAA,SAAAiB,EAJA,MAKAjB,MAAA,QAAArE,KAAA2D,IAAA0B,YALA,OAOApF,aAAA,WACAD,KAAAg6C,gBAAAv2C,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,cAAA+H,OAAAyE,wBAAA5K,OACAtF,KAAAoF,MAAApF,KAAA2D,IAAA0B,YAEArF,KAAAsF,OAAAtF,KAAA2D,IAAA4B,aAAAvF,KAAAg6C,gBAEAh6C,KAAA65C,aAAA,EAAAn0C,WAAAsB,KAAA,SAEAhH,KAAA4lB,KAAAniB,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,wBACA1D,KAAAi6C,0BAAA,OAAAj6C,KAAAoF,MACApF,KAAAk6C,QAAA,MAAAl6C,KAAAoF,MACA,cAAAlD,KAAAsD,KACAxF,KAAAk6C,QAAA,KAAAl6C,KAAAoF,MACA,UAAAlD,KAAAsD,OACAxF,KAAAk6C,QAAA,KAAAl6C,KAAAoF,OAEA,cAAAlD,KAAAsD,OACAxF,KAAAi4C,uBAAAC,OAAAC,IAAA,IACAn4C,KAAAi4C,uBAAAC,OAAAE,KAAA,KAEAp4C,KAAAm6C,WAAA,IAAAn6C,KAAAoF,MACApF,KAAAo6C,WACAC,oBACAC,KAAA,IAAAt6C,KAAAm6C,WACA11B,EAAA,IAAAzkB,KAAAm6C,WACAz1B,EAAA,GAAA1kB,KAAAm6C,YAEAI,mBACAD,KAAA,IAAAt6C,KAAAm6C,WACA11B,EAAA,IAAAzkB,KAAAm6C,WACAz1B,EAAA,GAAA1kB,KAAAm6C,YAEAK,oBACAF,KAAA,IAAAt6C,KAAAm6C,WACA11B,EAAA,IAAAzkB,KAAAm6C,WACAz1B,EAAA,KAAA1kB,KAAAm6C,aAGAn6C,KAAAy6C,qBACAJ,oBACAC,KAAA,GAAAt6C,KAAAm6C,WACA11B,EAAA,EACAC,EAAA,GAAA1kB,KAAAm6C,YAEAI,mBACAD,KAAA,GAAAt6C,KAAAm6C,WACA11B,EAAA,EACAC,EAAA,GAAA1kB,KAAAm6C,YAEAK,oBACAF,KAAA,GAAAt6C,KAAAm6C,WACA11B,EAAA,EACAC,EAAA,IAIA1kB,KAAA06C,UACAxC,OAAAz0C,GAAA6D,cAAAI,OAAA,OACA2wC,UAAA50C,GAAA6D,cACAC,OAAA9D,GAAA+X,OAAAtZ,KAAAm5B,YAAAsf,SACAjzC,OAAA,OACA4wC,aAAA70C,GAAA6D,cAAAI,OAAA,OAAAkzC,OAAA,IAEA,IAAA7N,EAAA+L,IAAA,IAAA+B,EAAA3uC,EAAAhK,KAAAoK,aAAAwQ,OAAA5a,KAAA6V,kBACA/X,KAAA06C,SAAA,aAAAnzC,OAAA9D,GAAA+X,OAAAtZ,KAAAm5B,YAAArtB,OAAA,SAAA/D,EAAAhG,GAAA,WAAA8oC,EAAA9qC,QAAAgC,KAAA02C,SAEA36C,KAAA86C,YAAA,SAAA7wC,GACA,IAAA/E,EAAA,GAAA+E,EAAA,GACA,UAAAnH,KAAA0V,KAAAtT,GAAA,IAKAlF,KAAA+6C,eAGA,IAFA,IAAAC,EAAA94C,KAAA+4C,UAAA,GAAA33C,OACA43C,EAAAp4C,KAAAq4C,KAAAr4C,KAAAsQ,KAAA4nC,IACA/2C,EAAA,EAAAA,EAAAi3C,EAAAj3C,IACA,QAAAiO,EAAA,EAAAA,EAAAgpC,EAAAhpC,IACAlS,KAAA+6C,YAAA54C,MACA,EAAA+P,EAAAgpC,EACA,GAAAA,EAAAj3C,EAAA,GAAAi3C,IAIAl7C,KAAA+6C,YAAAzoB,OAAA0oB,IAsCAt6C,KAAA,eAAAiK,EAAA3K,KACAA,KAAAo7C,iBAAA,EAAAp7C,KAAAg6C,gBACA,gBAAA93C,KAAAsD,OACAxF,KAAAo7C,iBAAA,IAAAp7C,KAAAg6C,iBAEAh6C,KAAAu4B,IAAAv4B,KAAA4lB,KACA1c,OAAA,OACAC,KAAA,QAAAnJ,KAAAoF,OACA+D,KAAA,SAAAnJ,KAAAsF,QACA4D,OAAA,KACAC,KAAA,gBACAnJ,KAAAu4B,IACArvB,OAAA,KACAC,KAAA,kBAKA,IAAAkyC,EAAAr7C,KAAAu4B,IACArvB,OAAA,KACAC,KAAA,0BACA9E,MAAA,uBACAi3C,EAAAt7C,KAAAu4B,IACArvB,OAAA,KACAC,KAAA,uBACA9E,MAAA,uBACArE,KAAAg5C,iBAAA,GACAh5C,KAAAu7C,uBAAAF,GACAA,EACA92C,UAAA,qBACAlG,MAAA,QACA2L,QACAd,OAAA,KACAC,KAAA,cAAAc,EAAAhG,GACA,WAAAA,EACA,aACA,IAAAA,EACA,iBACA,IAAAA,EACA,uBADA,IAIAkF,KAAA,qBAAAc,EAAAhG,GAAA,mBAAA0G,EAAAywC,iBAAA,QAAAzwC,EAAAivC,WAAA31C,EAAA0G,EAAAkvC,cAAA51C,EAAA,WACAq3C,EACApyC,OAAA,KACAC,KAAA,uBACAA,KAAA,YAHA,aAGAnJ,KAAAo7C,iBAAA,EAHA,KAGAp7C,KAAA65C,aAAA,EAHA,MAKA2B,eAAA,WACA,IAAA7xC,EAAA3J,KAcA,GAXA,YAAAA,KAAAu4C,UACAv4C,KAAAu4C,SAAA,aAGAv4C,KAAAw4C,WAAA,GACA,eAAAx4C,KAAAu4C,WACAv4C,KAAAu4C,SAAA,UAGAv4C,KAAAw4C,WAAA,GAEA,WAAAx4C,KAAAylB,KACAzlB,KAAAu4B,IAAA70B,OAAA,cAAAa,UAAA,YACAC,KAAA,SAAA4F,EAAAC,GACA,IAAAmB,EAAAP,OAAAxH,GAAAC,OAAA1D,MAAAmJ,KAAA,UACAsyC,OAAA,EACA,YAAA9xC,EAAA4uC,SACAkD,EAAA9xC,EAAAoxC,YACA,eAAApxC,EAAA4uC,WACAkD,EAAAv5C,KAAA+4C,UAAAzvC,IAEA/H,GAAAC,OAAA1D,MAAAuE,UAAA,eACAlG,KAAAo9C,GACAliC,KAAA,UACA3V,aACAC,SAAA,KACAsF,KAAA,cAAAc,GAAA,OAAAN,EAAA+xC,eAAAjsC,EAAAxF,EAAA,MACAd,KAAA,cAAAc,GAAA,OAAAN,EAAA+xC,eAAA5vC,EAAA7B,EAAA,aAEA,oBAAAjK,KAAAylB,KAAA,CACA,IAAAk2B,EAAAl4C,GAAAC,OAAA,WAAAA,OAAA,iBACAi4C,EAAAp3C,UAAA,cAAAH,QAAA,sBACAw3C,aAAAr3C,UAAA,aAAAH,QAAA,sBACAu3C,EAAAp3C,UAAA,eAAA+E,SACA,IAAAwjC,EAAA6O,EAAAp3C,UAAA,gBACAuoC,EAAA1oC,QAAA,uBACAA,QAAA,kBACA+E,KAAA,oBACAA,KAAA,aACAnF,GAAA,kBACAA,GAAA,iBACAA,GAAA,cACAhE,KAAA20B,eACA30B,KAAA60B,mBACA,IAAAkY,EAAA7qC,KAAAoK,aAAAwQ,OAAA5a,KAAA6V,gBACAi1B,EAAAF,EAAA9+B,OAAA,WACA,WAAA++B,EAAA9qC,QAAAgJ,OAAAxH,GAAAC,OAAA1D,MAAAmJ,KAAA,aAEA8jC,EAAAH,EAAA9+B,OAAA,WACA,WAAA++B,EAAA9qC,QAAAgJ,OAAAxH,GAAAC,OAAA1D,MAAAmJ,KAAA,aAEA6jC,EAAA5oC,QAAA,uBACA4oC,EAAA5oC,QAAA,kBACA6oC,EAAA9jC,KAAA,cACA,IAAA4c,EAAA/lB,KAAAu4B,IAAA70B,OAAA,sBACAqiB,EAAAriB,OAAA,eAAAa,UAAA,KAAA+E,SACAyc,EAAAriB,OAAA,mBAAAa,UAAA,KAAA+E,SACAyc,EAAAriB,OAAA,oBAAAa,UAAA,KAAA+E,SACAtJ,KAAA+vB,qBACA7uB,eAAAD,EACAG,OAAA2rC,EACAhsC,KAAA,0BAEA,iBAAAf,KAAAylB,KAAA,CACA,IAAAo2B,EAAAp4C,GAAAC,OAAA,WAAAA,OAAA,iBACAm4C,EAAAt3C,UAAA,cAAAH,QAAA,sBACAw3C,aAAAr3C,UAAA,aAAAH,QAAA,sBACAy3C,EAAAt3C,UAAA,eAAA+E,SACAuyC,EAAAt3C,UAAA,gBACAH,QAAA,uBACAA,QAAA,oBACAA,QAAA,kBACA+E,KAAA,aACAnJ,KAAA20B,eACA30B,KAAAu4B,IAAA70B,OAAA,mBAAAA,OAAA,mBAAAa,UAAA,KAAA+E,WAGA7I,OAAA,WACAT,KAAAqJ,QACArJ,KAAA+4C,aAAA/4C,KAAAu4B,IAAA70B,OAAA,kCAGA2F,MAAA,WACArJ,KAAAu4C,SAAA,aACAv4C,KAAAylB,KAAA,SAGAzlB,KAAAw4C,WAAA,EACA/0C,GAAAC,OAAA1D,KAAA2D,KAAAD,OAAA,wBAAAa,UAAA,KAAA+E,UAEAyvC,aAAA,SAAAhzB,EAAAqW,EAAAmc,GAAA,IAAA3tC,EAAA5K,KACA2J,EAAA3J,KACAG,EAAAH,KAAAG,UACA27C,OAAA,EACA1wC,KACA2wC,KACAC,KACAC,KACA,UAAA7f,EAAA,CACA0f,EAAA55C,KAAAoK,aAAAhJ,OAEA8H,EAAAiB,EADA2vC,EAAA95C,KAAAoK,cAEA,QAAArI,EAAA,EAAAA,EAAAmH,EAAA9H,OAAAW,IACA83C,EAAA55C,MAAAiJ,EAAAnH,KACAg4C,EAAA95C,KAAA65C,EAAA5wC,EAAAnH,KAEAjE,KAAAg5C,iBAAA8C,OACA,CACA,IAAAI,EAAAh6C,KAAAsF,QAAAwH,YAAAotB,GAEA,QADA0f,EAAAI,EAAA1vC,SAAAlJ,QAEAw4C,EAAA,EACAC,EAAA55C,KAAAi6B,GACA6f,EAAA95C,KAAA+5C,EAAA79C,KAAA89C,eAAA,IAEAn8C,KAAAg5C,iBAAAh5C,KAAA24C,sBACA,CAUA,QAAAl0C,EAAA,EAAAA,EAAAq3C,EAAAr3C,IAAA,CACA,IAAA+G,EAAA0wC,EAAA1vC,SAAA/H,GAAApG,KAAA89C,eAAA,GACAH,EAAA75C,KAAAqJ,GAEAJ,EAAAiB,EAAA2vC,GACA,QAAAj3C,EAAA,EAAAA,EAAAqG,EAAA9H,OAAAyB,IACAg3C,EAAA55C,KAAAi6B,EAAAtf,OAAA1R,EAAArG,KACAk3C,EAAA95C,KAAA65C,EAAA5wC,EAAArG,KAEA/E,KAAAg5C,iBAAA8C,IAKA,IADA,IAAAM,KACA1vC,EAAA,EAAAA,EAAAqvC,EAAAz4C,OAAAoJ,IAAA,CACA,IAAAwvB,EAAA6f,EAAArvC,GACA2vC,EAAAn6C,KAAAsF,QAAAwH,YAAAktB,GAAA79B,KAAAg9B,YACA+gB,EAAAj6C,KAAAa,MAAAo5C,EAAAE,IAAAD,IAEA,IAAAE,EAAA1oB,EAAAjxB,IAAA,EAAAw5C,GAsBA,SAAA/vC,EAAAjL,GAEA,IADA,IAAAiK,KADAC,EAAA,SAEAC,GACA,IAAAC,EAAApK,EAAAmK,GACAE,EAAAtL,EAAAuL,KAAA,SAAAD,GAAA,OAAAA,EAAAE,KAAAH,IACAH,EAAAlJ,KAAAsJ,EAAAG,OAAAC,YAAAC,IAHAP,EAAA,EAAAA,EAAAnK,EAAAkC,OAAAiI,IAAAD,EAAAC,GAKA,OAAAF,EAIAnL,IAAA,SAAAJ,EAAAkM,GAAA,OAAAA,MAAAlM,SACAmM,KAAA,SAAAC,EAAAC,GAAA,OAAAD,EAAApM,IAAAqM,EAAArM,IAAA,EAAAoM,EAAApM,KAAAqM,EAAArM,IAAA,OACAI,IAAA,SAAAkM,GAAA,OAAAA,EAAAJ,MAlCAhM,KAAA06C,SAAA16C,KAAAylB,MAAAle,OAAA9D,GAAA+X,OAAA+gC,IAQAx2B,EAAAxhB,UAAA,YACAlG,KAAA49C,GACAjyC,QACAd,OAAA,KACAC,KAAA,QAJA,WAKAA,KAAA,iBAAAc,GAAA,OAAAA,IACAd,KAAA,iBAAAc,EAAAhG,GAAA,OAAA83C,EAAA93C,KACAkF,KAAA,qBAAAc,EAAAhG,GAAA,mBAAA2G,EAAAwwC,iBAAA,QAAAxwC,EAAAgvC,WAAA31C,EAAA2G,EAAAivC,cAAA51C,EAAA,WACAO,KAAA,SAAAyF,EAAAhG,GACA0F,EAAAsvC,SAAAx1C,GAAAC,OAAA1D,MAAAu4C,EAAAtuC,EAAA,MAAA8xC,EAAA93C,OAoBA+0C,iBAAA,SAAAwD,GACA,IAAAC,EAAAD,EAAAx8C,KAAA44C,mBAAA54C,KAAA44C,mBAAA4D,EAEAx8C,KAAA08C,UAAA18C,KAAAoF,MAAApF,KAAAo7C,iBACAp7C,KAAA45C,WAAA55C,KAAAsF,OAAAm3C,EAAAz8C,KAAA65C,aAEA75C,KAAA28C,gBAAAH,GAEAx8C,KAAA48C,SAAA95C,KAAAC,IAAA/C,KAAA45C,WAAA55C,KAAA08C,WACA18C,KAAA68C,gBACA1pC,EAAA,IAAAnT,KAAA48C,SAAA,EACA3rC,GAAAjR,KAAA08C,UAAA,EACAxrC,GAAAlR,KAAA45C,WAAA,GAEA55C,KAAA88C,sBACArtC,EAAAzP,KAAA08C,UAAA,EAAA18C,KAAA68C,eAAA1pC,EACArH,EAAA9L,KAAA45C,WAAA,EAAA55C,KAAA68C,eAAA1pC,GAIAnT,KAAA+8C,WAAA,IAAA/8C,KAAAm6C,WACAn6C,KAAA07C,gBACAjsC,EAAAhM,GAAA6D,cACAC,QAAA,MACAG,OACA1H,KAAA88C,qBAAArtC,EAAAzP,KAAA+8C,YAAA,EAAAj6C,KAAAsQ,KAAA,MAAApT,KAAA68C,eAAA1pC,EACAnT,KAAA88C,qBAAArtC,EAAA,EAAAzP,KAAA68C,eAAA1pC,EAAAnT,KAAA+8C,YAAA,EAAAj6C,KAAAsQ,KAAA,MAAApT,KAAA68C,eAAA1pC,IAEArH,EAAArI,GAAA6D,cACAC,QAAA,MACAG,OACA1H,KAAA88C,qBAAAhxC,EAAA9L,KAAA+8C,YAAA,EAAAj6C,KAAAsQ,KAAA,MAAApT,KAAA68C,eAAA1pC,EACAnT,KAAA88C,qBAAAhxC,EAAA,EAAA9L,KAAA68C,eAAA1pC,EAAAnT,KAAA+8C,WAAA/8C,KAAA+8C,YAAA,EAAAj6C,KAAAsQ,KAAA,MAAApT,KAAA68C,eAAA1pC,KA8BAnT,KAAAg9C,mBACA,QAAA/4C,EAAA,EAAAA,EAAA/B,KAAAiE,KAAA7C,OAAAW,IACAjE,KAAAg9C,gBAAA76C,MACAnC,KAAA08C,UAAA,EAAA18C,KAAA68C,eAAA1pC,EAAArQ,KAAA+O,IAAA,EAAA/O,KAAA0N,GAAAtO,KAAAiE,KAAA7C,OAAAW,GACAjE,KAAA45C,WAAA,EAAA55C,KAAA68C,eAAA1pC,EAAArQ,KAAA8O,IAAA,EAAA9O,KAAA0N,GAAAtO,KAAAiE,KAAA7C,OAAAW,MAIA04C,gBAAA,SAAAH,GACA,IAAAl3C,EAAAk3C,EAAAx8C,KAAA44C,oBAAA54C,KAAA45C,WAAA55C,KAAA65C,cAAA2C,EAAAx8C,KAAAsF,OACAtF,KAAA4lB,KAAAliB,OAAA,OACAyF,KAAA,SAAA7D,IAEA2zC,SAAA,SAAAlzB,EAAAwyB,EAAA/sC,EAAAzK,EAAAm7B,GAAA,IAAA3uB,EAAAvN,KACA2J,EAAA3J,KACAy7C,OAAA,EACA,YAAAlD,EACAkD,EAAAz7C,KAAA+6C,YACA,eAAAxC,IACAkD,EAAAv5C,KAAA+4C,UAAAzvC,IAGA,IAAA1C,EAAA,WACA,IAAA5G,KAAA4I,OAAAU,GAAA,OACA,IAAAtJ,KAAA4I,OAAAU,GAAA,OACA,IAAAtJ,KAAA4I,OAAAU,GAAA,KAHA,IAKA,cAAAtJ,KAAAsD,MAAA,KAAAgG,IACA1C,EAAA,oBAEA,IAAAuyB,OAAA,EACA8J,OAAA,EACA8X,OAAA,EACA,WAAAl8C,EAAA,CACA,IAAAm8C,EAAAh7C,KAAAsF,QAAAwH,YAAAktB,GAAA79B,KACAg9B,EAAA6hB,EAAA7hB,YACA8J,EAAA+X,EAAAz1C,UACAw1C,EAAAj9C,KAAAm9C,mBAAAhY,EAAA+X,EAAAE,cACA,YAAAr8C,EAAA,CACAs6B,EAAAn5B,KAAAm5B,YAAA7vB,GAGAyxC,KACA,QAAAh5C,EAAA,EAAAA,EAAA/B,KAAAlB,KAAAwK,GAAAlI,OAAAW,IACA,MAAA/B,KAAAlB,KAAAwK,GAAAvH,GACAg5C,EAAA96C,MAAA,GAEA86C,EAAA96C,KAAA,GAIA,IAAAk7C,EAAAxpB,EAAAjxB,IAAA,EAAAy4B,GAGAtV,EAAA7c,OAAA,UACAC,KAAA,0BACAA,KAAA,KAAAnJ,KAAA68C,eAAA5rC,IACA9H,KAAA,KAAAnJ,KAAA68C,eAAA3rC,IACA/H,KAAA,IAAAnJ,KAAA68C,eAAA1pC,GACA9O,MAAA,eAAArE,KAAAi6C,2BACA51C,MAAA,SAAAyE,GACAzE,MAAA,gBACA0hB,EAAAxhB,UAAA,eACAlG,KAAA2B,KAAAg9C,iBACAhzC,QACAd,OAAA,KACAC,KAAA,sBACAA,KAAA,qBAAAc,GAAA,mBAAAA,EAAA,MACAzF,KA0IA,SAAA4F,EAAAC,IACA,SAAAkM,EAAA3D,EAAA9J,EAAAw0C,GAGA/mC,EAAArN,OAAA,UACAC,KAAA,8BACAA,KAAA,QACAA,KAAA,QAEAA,KAAA,IAAAQ,EAAA4zC,aAAA,qBAAAD,IACAj5C,MAAA,eACAA,MAAA,iBAEAA,MAAA,eAAAsF,EAAA6zC,uBAAA,qBAAAF,IACA/mC,EAAArN,OAAA,UACAC,KAAA,6BACAA,KAAA,QACAA,KAAA,QAEAA,KAAA,IAAAQ,EAAA4zC,aAAA,oBAAAD,IACAj5C,MAAA,eACAA,MAAA,+BAAAi5C,EAAAx0C,EAAA,UAEAzE,MAAA,eAAAsF,EAAA6zC,uBAAA,oBAAAF,IACA/mC,EAAArN,OAAA,UACAC,KAAA,8BACAA,KAAA,QACAA,KAAA,QAEAA,KAAA,IAAAQ,EAAA4zC,aAAA,qBAAAD,IACAj5C,MAAA,6BAAAi5C,EAAA,QAAAx0C,IAEAzE,MAAA,+BAAAi5C,EAAA,OAAAx0C,IAEAzE,MAAA,eAAAsF,EAAA6zC,uBAAA,qBAAAF,IAGAG,CAAAh6C,GAAAC,OAAA1D,MAAA2J,EAAAwwC,WAAArxC,EAAAm0C,EAAA5yC,MA9KA0b,EAAA7c,OAAA,KACAC,KAAA,uBACA5E,UAAA,eACAlG,KAAAo9C,GACAzxC,QACAd,OAAA,UACAC,KAAA,sBACAA,KAAA,cAAAc,GAAA,OAAAsD,EAAAmuC,eAAAjsC,EAAAxF,EAAA,MACAd,KAAA,cAAAc,GAAA,OAAAsD,EAAAmuC,eAAA5vC,EAAA7B,EAAA,MACAd,KAAA,IAAAnJ,KAAAk6C,SACA/wC,KAAA,eAAAc,EAAAhG,GAEA,MADA,IAAAsJ,EAAAutC,YAAA,GAAAvtC,EAAAmtC,SAAAntC,EAAAkY,MAAA43B,EAAAp5C,KAAA,MAGAI,MAAA,OAAAyE,GAEAzE,MAAA,wBAAA4F,EAAAhG,GAEA,MADA,IAAAsJ,EAAAutC,YAAA,GAAAvtC,EAAAmtC,SAAAntC,EAAAkY,MAAA43B,EAAAp5C,KAAA,MAIA,cAAA/B,KAAAsD,MACAugB,EAAAriB,OAAA,gBACAa,UAAA,eACA4E,KAAA,iBAAAc,EAAAhG,GAAA,OAAA/B,KAAAsxB,MAAAvvB,KASA,SAAAy5C,GAQA,IAPA,IAAAC,EAAA53B,EAAA7c,OAAA,KACAC,KAAA,YADA,aACAQ,EAAAkzC,eAAA5rC,GADA,KACAtH,EAAAkzC,eAAA3rC,GADA,KAEA/K,EAAAjE,KAAAiE,KACAy3C,EAAA17C,KAAAiE,KAAA7C,OACAu6C,KACAC,EAAAp4C,WAAAsB,KAAA,WACAmM,EAAAxJ,EAAAkzC,eAAA1pC,EACAjE,EAAA,EAAAA,EAAA0uC,EAAA1uC,IAAA,CAEA,IAAA8H,EAAA8mC,EAAA3qC,EACA,IAAAjE,EACA8H,EAAA,IAAA8mC,EAAA3qC,EACAyqC,EAAA,MAAA1uC,IAAA0uC,EAAA,EACA5mC,EAAA,IAAA8mC,EAAA3qC,EACAyqC,EAAA,MAAA1uC,IAAApM,KAAAq4C,KAAAyC,EAAA,MAAA1uC,IAAApM,KAAAq4C,KAAAyC,EAAA,KACA5mC,EAAA,IAAA8mC,EAAA3qC,GAEA0qC,EAAA17C,MACA6U,EAAAlU,KAAA+O,IAAA,EAAA/O,KAAA0N,GAAAotC,EAAA1uC,IACA8H,EAAAlU,KAAA8O,IAAA,EAAA9O,KAAA0N,GAAAotC,EAAA1uC,KAGAyuC,EAAAp5C,UAAA,gBACAlG,KAAAw/C,GACA7zC,QACAd,OAAA,QACAC,KAAA,uBACAA,KAAA,cAAAc,EAAAhG,GAAA,oBAAAA,IACAkF,KAAA,aAAAc,GAAA,OAAAA,EAAA,KACAd,KAAA,aAAAc,GAAA,OAAAA,EAAA,KACA5F,MAAA,8BACAA,MAAA,uBACAA,MAAA,uBAAA4F,EAAAhG,GACA,WAAAA,OAAA25C,EAAA,EACA,SACA35C,EAAA25C,EAAA,EACA,QAEA,QAGA1zC,KAAA,SAAAD,EAAAhG,GAAA,OAAAkC,EAAAlC,KACAI,MAAA,mBAAA4F,EAAAhG,GACA,mBAAAy5C,GACA,OAAAT,EAAAh5C,GACA,cAEA,gBAAAy5C,IACA,IAAAT,EAAAh5C,GACA,WAMA,IAAA85C,GACAC,+BAAA,IACAC,uBAAA,IAEAC,EAAA1uB,IAAAuuB,GACAJ,EAAAp5C,UAAA,gBAAAC,KAAA,SAAA4F,EAAAC,GACA6zC,EAAAj8C,QAAAkE,EAAAkE,KAAA,GACA5G,GAAAC,OAAA1D,MAAAqE,MAAA,YAAA05C,EAAA53C,EAAAkE,IAAA,SAIA,cAAAnI,KAAAsD,MACAm4C,EAAAp5C,UAAA,gBAAAF,MAAA,uBAIA,IACA85C,GACAH,gCAAA,kCACAI,qBAAA,wBAEAC,EAAA7uB,IAAA2uB,GACAR,EAAAp5C,UAAA,gBAAAC,KAAA,SAAA4F,EAAAC,GACA,GAAAg0C,EAAAp8C,QAAAkE,EAAAkE,KAAA,GAIA,IAHA,IAAAi0C,EAAAH,EAAAh4C,EAAAkE,IACAk0C,EATA,KASAD,EAAAh7C,OAAA,GACAk7C,KACAnvC,EAAA,EAAAA,EAAAivC,EAAAh7C,OAAA+L,IACAmvC,EAAAr8C,MAAAo8C,EAAA,EAZA,IAYAlvC,GAEA,IAAAnF,EAAAzG,GAAAC,OAAA1D,MACAkK,OAAA,MACAhB,OAAA,SACAC,KAAA,IAAAiB,EAAA,IACAjB,KAAA,IAAAiB,EAAA,IACAjB,KAAA,KAAAq1C,EAAA,GAJA,OAKAt0C,KAAAo0C,EAAA,IACA,QAAAxc,EAAA,EAAAA,EAAAwc,EAAAh7C,OAAAw+B,IACA53B,EAAAhB,OAAA,SACAC,KAAA,IAAAiB,EAAA,IACAjB,KAAA,IAAAiB,EAAA,IACAjB,KAAA,KAAAq1C,EAAA1c,GAHA,OAIA53B,KAAAo0C,EAAAxc,OApGA2c,CADA,QAAA19C,EAAA,2BAmJAo8C,mBAAA,SAAAhY,EAAAuZ,GACA,IAAA/0C,EAAA3J,KACAs9C,EAAA,IAAA7vC,MAAA03B,EAAA7hC,QAAAoK,KAAA,GACAixC,EAoBA,SAAAD,GACA,IAAAE,EAAAj1C,EAAAsuC,uBAAAtuC,EAAA8b,MAAA0yB,IAAAuG,EACAG,EAAAl1C,EAAAsuC,uBAAAtuC,EAAA8b,MAAA2yB,KAAAsG,EACA,OACAvG,IAAAyG,EAAA,IAAAA,EACAxG,KAAAyG,EAAAH,EAAA,EAAAA,EAAA,EAAAG,GAzBAC,CAAAJ,GACA,iBAAAx8C,KAAAsD,KACA,QAAAvB,EAAA,EAAAA,EAAAkhC,EAAA7hC,OAAAW,IACAkhC,EAAAlhC,IAAA06C,EAAAvG,KACAkF,EAAAr5C,GAAA,EACAkhC,EAAAlhC,IAAA06C,EAAAxG,MACAmF,EAAAr5C,IAAA,QAIA,QAAAm+B,EAAA,EAAAA,EAAA+C,EAAA7hC,OAAA8+B,IACA+C,EAAA/C,GAAAuc,EAAAvG,KACAkF,EAAAlb,GAAA,EACA+C,EAAA/C,GAAAuc,EAAAxG,MACAmF,EAAAlb,IAAA,GAIA,OAAAkb,GAWAC,aAAA,SAAAwB,EAAA9B,GACA,OAAAj9C,KAAAo6C,UAAA2E,GAAA/7B,OAAAi6B,KAEAO,uBAAA,SAAAuB,EAAA9B,GACA,OAAAj9C,KAAAy6C,oBAAAsE,GAAA/7B,OAAAi6B,KAEA5D,eAAA,SAAAtzB,EAAAwyB,EAAA/sC,GAAA,IAAAy/B,EAAAjrC,KACAy7C,OAAA,EACA,YAAAlD,EACAkD,EAAAz7C,KAAA+6C,YACA,eAAAxC,IACAkD,EAAAv5C,KAAA+4C,UAAAzvC,IAEA,IAAA1C,EAAA,WACA,IAAA5G,KAAA4I,OAAAU,GAAA,OACA,IAAAtJ,KAAA4I,OAAAU,GAAA,OACA,IAAAtJ,KAAA4I,OAAAU,GAAA,KAHA,IAKA,cAAAtJ,KAAAsD,MAAA,KAAAgG,IACA1C,EAAA,oBAUA,IARA,IAAAuyB,EAAAn5B,KAAAm5B,YAAA7vB,GACA6xC,EAAAxpB,EAAAjxB,IAAA,EAAAy4B,GAIA4hB,KAGAh5C,EAAA,EAAAA,EAAA/B,KAAAlB,KAAAwK,GAAAlI,OAAAW,IACA,MAAA/B,KAAAlB,KAAAwK,GAAAvH,GACAg5C,EAAA96C,MAAA,GAEA86C,EAAA96C,KAAA,GAGAnC,KAAAm6C,WAEAp0B,EAAAriB,OAAA,mBACAE,aACAC,SAAA,KACAQ,MAAA,SAAAyE,GACAid,EAAAxhB,UAAA,eACAlG,KAAAo9C,GACAliC,KAAA,UACA3V,aACAC,SAAA,KACAsF,KAAA,cAAAc,GAAA,OAAAghC,EAAAyQ,eAAAjsC,EAAAxF,EAAA,MACAd,KAAA,cAAAc,GAAA,OAAAghC,EAAAyQ,eAAA5vC,EAAA7B,EAAA,MACA5F,MAAA,OAAAyE,GAEAzE,MAAA,wBAAA4F,EAAAhG,GAEA,MADA,IAAAgnC,EAAA6P,YAAA,GAAA7P,EAAAyP,SAAAzP,EAAAxlB,MAAA43B,EAAAp5C,KAAA,MAGA8hB,EAAAxhB,UAAA,uBACAX,aACAC,SAAA,KAEAsF,KAAA,aAAAc,EAAAhG,GAAA,OAAAgnC,EAAAsS,aAAA,qBAAAN,EAAAh5C,MAEAI,MAAA,wBAAA4F,EAAAhG,GAAA,OAAAgnC,EAAAuS,uBAAA,qBAAAP,EAAAh5C,MACA8hB,EAAAxhB,UAAA,sBACAX,aACAC,SAAA,KAEAsF,KAAA,aAAAc,EAAAhG,GAAA,OAAAgnC,EAAAsS,aAAA,oBAAAN,EAAAh5C,MACAI,MAAA,kBAAA4F,EAAAhG,GAAA,WAAAg5C,EAAAh5C,GAAA6E,EAAA,UAEAzE,MAAA,wBAAA4F,EAAAhG,GAAA,OAAAgnC,EAAAuS,uBAAA,oBAAAP,EAAAh5C,MACA8hB,EAAAxhB,UAAA,uBACAX,aACAC,SAAA,KAEAsF,KAAA,aAAAc,EAAAhG,GAAA,OAAAgnC,EAAAsS,aAAA,qBAAAN,EAAAh5C,MACAI,MAAA,gBAAA4F,EAAAhG,GAAA,WAAAg5C,EAAAh5C,GAAA,QAAA6E,IACAzE,MAAA,kBAAA4F,EAAAhG,GAAA,WAAAg5C,EAAAh5C,GAAA,OAAA6E,IAEAzE,MAAA,wBAAA4F,EAAAhG,GAAA,OAAAgnC,EAAAuS,uBAAA,qBAAAP,EAAAh5C,MACA8hB,EAAAxhB,UAAA,gBACAX,aACAC,SAAA,KACAQ,MAAA,mBAAA4F,EAAAhG,GACA,WAAAg5C,EAAAh5C,GACA,EAEA,KAIAs3C,uBAAA,SAAAx1B,GAAA,IAAAi5B,EAAAh/C,KACAi/C,EAAAj/C,KAAAy4C,oBAAAn1C,OACAmM,EAAA,MAAAzP,KAAAoF,MACA0G,EAAA9L,KAAAsF,OAAA25C,EAAA,KACAl5B,EAAAxhB,UAAA,eACAlG,KAAA2B,KAAAy4C,qBACAzuC,QACAd,OAAA,QACAC,KAAA,sBACAA,KAAA,IAAAsG,GACAtG,KAAA,aAAAc,EAAAhG,GAAA,OAAA+6C,EAAA15C,OAAA25C,EAAAh7C,EAAA6H,IACA5B,KAAA,SAAAD,GAAA,OAAAA,KAEA0qB,aAAA,WACAlxB,GAAAC,OAAA,YAAAA,OAAA,eAAAa,UAAA,cAAAC,KAAA,WACA,IAAAN,EAAAT,GAAAC,OAAA1D,MACAkE,EAAAE,QAAA,qBACAF,EAAAE,QAAA,sBACAF,EAAAE,QAAA,4BACAF,EAAAR,OAAA,gBAAAW,MAAA,iBAIAwwB,iBAAA,WACA,IAAA0iB,EAAA9zC,GAAAC,OAAA,WAAAA,OAAA,iBAAAA,OAAA,YACA6zC,EAAAhzC,UAAA,iBACAC,KAAA,WACAf,GAAAC,OAAA1D,MAAAuE,UAAA,UAAAC,KAAA,SAAA4F,EAAAC,GACA,IAAAA,EACA5G,GAAAC,OAAA1D,MAAAqE,MAAA,oBACA,IAAAgG,GACA5G,GAAAC,OAAA1D,MAAAqE,MAAA,sBAIAkzC,EAAAhzC,UAAA,mBACAC,KAAA,WACAf,GAAAC,OAAA1D,MAAA0D,OAAA,UAAAW,MAAA,0BChiCe66C,GADEl4B,OAFjB,WAA0B,IAAAC,EAAAjnB,KAAaknB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBjT,OAAOgK,GAAA,aAAgBiJ,EAAA,OAAYjT,OAAOgK,GAAA,yBAA4B8I,EAAAM,GAAA,KAAAH,EAAA,OAAwBjT,OAAOgK,GAAA,eAAkBiJ,EAAA,aAAkBjT,OAAOgrC,eAAA,OAAAC,iBAAA,OAAAC,cAAA,YAAAC,gBAAA,cAAqGt7C,IAAK8jB,OAAAb,EAAAu0B,gBAA4BzzB,OAAQhmB,MAAAklB,EAAA,UAAArE,SAAA,SAAAoF,GAA+Cf,EAAAuxB,UAAAxwB,GAAkBC,WAAA,gBAAyB,MAEjdO,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEqvB,EACAkH,GATF,EAVA,SAAAt2B,GACEF,EAAQ,SAaV,KAEA,MAUevqB,EAAA,EAAAsqB,EAAiB,8KCwBhCjG,EAAAkG,EAAA,QACA62B,EAAA72B,EAAA,QACAvqB,EAAA,GACAC,KAAA,OACAqtB,YACA+zB,YAAAC,EAAA,EACAC,QAAAC,EAAA,EACAC,OAAAC,EAAA,EACA7H,QAAA8H,EAAA,GAEAzhD,KARA,WASA,OACA0hD,eAAA,EACAC,YAAA,cACAC,UAAA,mCACAC,gBAAA,EAEAC,UAAA,IACAC,aAAA,IAGA7gD,QAnBA,WAmBA,IAAAuB,EAAAd,KACAA,KAAA4kB,UAAA,WAEAnhB,GAAAC,OAAA5C,EAAA6C,KACAD,OAAA,gBACAA,OAAA,6BACAW,MAAA,iBACAA,MAAA,cACAA,MAAA,qBACAA,MAAA,kBACAL,GAAA,uBACAP,GAAAC,OAAA1D,MAAAqE,MAAA,eAEAL,GAAA,sBACAP,GAAAC,OAAA1D,MAAAqE,MAAA,gBAmCAvD,EAAAu/C,SAAAv/C,EAAAk/C,aAUA/yB,OAAAqzB,SARA,WACA78C,GAAAC,OAAA,iBAAA2zC,QAAAhzC,MAAA,mBACAw0B,WAAA,WACA/3B,EAAA+vB,eACA/vB,EAAAy/C,uBACA,QAMAp7C,QAAWq7C,OACX9gD,OAAA+gD,EAAA,EAAA/gD,EACA,kBAEA4rB,WAAA,SAAA9lB,GAAA,IAAAkE,EAAA1J,KACAyD,GAAAC,OAAA,iBAAA2zC,QAAAhzC,MAAA,mBACAw0B,WAAA,WACAnvB,EAAA22C,SAAA76C,IACA,KAEA66C,SAAA,SAAA76C,GAAA,IAAAmF,EAAA3K,KACAw9B,EAAAnvB,EAAAC,WACA7K,GAAAi9C,KAAA,uBAAAl7C,EAAA,gBAAAwnB,KAAA,SAAA3uB,GACA6D,KAAA7D,EACA6D,KAAAsD,OACA,kBAAAA,IACAtD,KAAAsF,QAAAnJ,KAAAsiD,eAAA,cAEAz+C,KAAAoK,gBACApK,KAAA6V,kBACA,QAAA9T,EAAA,EAAAA,EAAA/B,KAAAsF,QAAAgF,SAAAlJ,OAAAW,IAAA,CACA,IAAA28C,EAAA1+C,KAAAsF,QAAAgF,SAAAvI,GACA/B,KAAAoK,aAAAnK,KAAAy+C,EAAAviD,KAAA89C,eAAA,IACA,QAAAjqC,EAAA,EAAAA,EAAA0uC,EAAAp0C,SAAAlJ,OAAA4O,IAAA,CACA,IACA2uC,EADAD,EAAAp0C,SAAA0F,GACA7T,KAAA89C,eAAA,IACA,IAAAj6C,KAAAoK,aAAArK,QAAA4+C,IACA3+C,KAAA6V,eAAA5V,KAAA0+C,IAoBA3+C,KAAA4+C,kBAAAr9C,GAAA+X,OAAAtZ,KAAAm5B,YAAAsf,QAEAz4C,KAAAsF,QAAAwH,YAAA,SAAAu8B,GACA,SAAAA,EACA,YAGA,IADA,IAAAwV,EAAA/gD,KACAyE,EAAA,EAAAA,EAAA8mC,EAAAjoC,OAAAmB,IACA,GAAAs8C,EAAAv0C,SAAAlJ,QAAA,GAAA4K,SAAAq9B,EAAA9mC,MAGAs8C,IAAAv0C,SAAA++B,EAAA9mC,KAGA,OAAAs8C,GAKAp2C,EAAAu1C,gBACAh+C,KAAA4I,UACUk2C,EAAA,EAAVt9B,QACAjU,EAAAhM,GAAA+X,OAAAtZ,KAAA++C,SAAA,SAAAh3C,GAAA,OAAAA,EAAA,KACA6B,EAAArI,GAAA+X,OAAAtZ,KAAA++C,SAAA,SAAAh3C,GAAA,OAAAA,EAAA,MAEU+2C,EAAA,EAAVn9B,YAAArB,EAAA,WACA,QAAAzd,EAAA,EAAAA,EAAA7C,KAAA++C,SAAA39C,OAAAyB,IAAA,CACA,IAAA+D,EAAAk4C,EAAA,EAAAh9B,SAAA9hB,KAAA++C,SAAAl8C,GAAA,GAAA7C,KAAA++C,SAAAl8C,GAAA,IACA7C,KAAA4I,OAAA3I,KAAA2G,EAAA5I,IAAA,SAAA+J,GAAA,OAAAA,EAAA,OAEAuzB,EAAA9uB,aAGA8uB,EAAA9uB,YAIAL,EAAAO,KAAA4uB,GAAA37B,KAAA,WACA8I,EAAAu2C,OAAA5zC,MAAAwgB,WAAAtoB,EACAmF,EAAA41C,sBACAlzB,QAAAC,IAAA,UAAAprB,SAIAq+C,oBAAA,WACA98C,GAAAC,OAAA,gBAAAa,UAAA,KAAA+E,SACA,IAAA8qC,EAAA1uC,WAAAjC,GAAAC,OAAA,sBAAAW,MAAA,UACA0E,EAAArD,WAAAjC,GAAAC,OAAA,sBAAAW,MAAA,gBACA2Q,EAAAlS,KAAAC,IAAAqxC,EAAArrC,GAAA,IAAA/B,KAAA,UACAm6C,EAAAnsC,EAAA,EAAAhV,KAAAmgD,UACAiB,EAAA,GAAAD,EACAE,EAAA,GAAAF,EACAjH,EAAAllC,EAAA,EAAAhV,KAAAogD,aACA38C,GAAAC,OAAA,gBACAyF,KAAA,QAAAirC,GACAjrC,KAAA,SAAAJ,GACA,IAAAwvB,EAAA90B,GAAAC,OAAA,gBAAAwF,OAAA,MAOA,SAAA8c,EAAAC,GAaA,IAZA,IAAA9f,EAAAjE,KAAAiE,KACA4f,EAAAwS,EAAArvB,OAAA,KACAC,KAAA,YADA,aACAirC,EAAA,EADA,KACArrC,EAAA,EADA,KAGAu4C,EAAA,EAAAx+C,KAAA0N,GAAArK,EAAA7C,OAEAi+C,EAAA99C,GAAAwU,MACAC,YAAA+N,GACA9N,YAAA6N,GACA5N,WAJA,IAIAkpC,GACAjpC,SALA,GAKAipC,GAEAr9C,EAAA,EAAAA,EAAAkC,EAAA7C,OAAAW,IAAA,CACA,IAAA8S,EAAA,IAAA5Q,EAAA7C,OAAAW,EACA8hB,EAAA7c,OAAA,KACAC,KAAA,yBACAA,KAAA,sBAAA4N,EAAA,KACA5N,KAAA,KAHA,gBAGAlF,GACAiF,OAAA,QACAC,KAAA,IAAAo4C,KACAp4C,KAAA,mBA1BAq4C,CAAAJ,EAAAC,GA8BA,SAAAluC,GAMA,IALA,IAAA4S,EAAAwS,EAAArvB,OAAA,KACAC,KAAA,YADA,aACAirC,EAAA,EADA,KACArrC,EAAA,EADA,KAEA60C,EAAA17C,KAAAiE,KAAA7C,OACAm+C,EAAA,IAAAtuC,EACA0qC,KACA55C,EAAA,EAAAA,EAAA25C,EAAA35C,IACA45C,EAAA17C,MACAgR,EAAArQ,KAAA+O,IAAA,EAAA/O,KAAA0N,GAAAotC,EAAA35C,IACAkP,EAAArQ,KAAA8O,IAAA,EAAA9O,KAAA0N,GAAAotC,EAAA35C,KAIA8hB,EAAA7c,OAAA,UACAC,KAAA,iCACAA,KAAA,QACAA,KAAA,QACAA,KAAA,IAAAgK,GACA9O,MAAA,mBAAA8O,GACA9O,MAAA,oBACAA,MAAA,eACA0hB,EAAAxhB,UAAA,sBACAlG,KAAAw/C,GACA7zC,QACAd,OAAA,KACAC,KAAA,6BACAA,KAAA,cAAAc,EAAAhG,GAAA,0BAAAA,IACAkF,KAAA,qBAAAc,GAAA,mBAAAA,EAAA,MACAzF,KAAA,WACA,IAAAk9C,EAAAj+C,GAAAC,OAAA1D,MACA0hD,EAAAx4C,OAAA,UACAC,KAAA,QACAA,KAAA,QACAA,KAAA,IAAAs4C,GACAt4C,KAAA,oBA/DAw4C,CAAAzH,GAqEA,SAAA/mC,GAOA,IANA,IAAA4S,EAAAwS,EAAArvB,OAAA,KACAC,KAAA,YADA,aACAirC,EAAA,EADA,KACArrC,EAAA,EADA,KAEA5C,EAAAjE,KAAAiE,KACAy3C,EAAA17C,KAAAiE,KAAA7C,OACAu6C,KACAC,EAAAp4C,WAAAsB,KAAA,YACA/C,EAAA,EAAAA,EAAA25C,EAAA35C,IAAA,CAEA,IAAA+S,EAAA8mC,EAAA3qC,EACA,IAAAlP,EACA+S,EAAA,KAAA8mC,EAAA3qC,EACAyqC,EAAA,MAAA35C,IAAA25C,EAAA,EACA5mC,EAAA,KAAA8mC,EAAA3qC,EACAyqC,EAAA,MAAA35C,IAAAnB,KAAAq4C,KAAAyC,EAAA,MAAA35C,IAAAnB,KAAAq4C,KAAAyC,EAAA,KACA5mC,EAAA,KAAA8mC,EAAA3qC,GAEA0qC,EAAA17C,MACA6U,EAAAlU,KAAA+O,IAAA,EAAA/O,KAAA0N,GAAAotC,EAAA35C,IACA+S,EAAAlU,KAAA8O,IAAA,EAAA9O,KAAA0N,GAAAotC,EAAA35C,KAGA8hB,EAAAxhB,UAAA,gBACAlG,KAAAw/C,GACA7zC,QACAd,OAAA,QACAC,KAAA,uBACAA,KAAA,cAAAc,EAAAhG,GAAA,oBAAAA,IACAkF,KAAA,aAAAc,GAAA,OAAAA,EAAA,KACAd,KAAA,aAAAc,GAAA,OAAAA,EAAA,KACA5F,MAAA,8BACAA,MAAA,uBAAA4F,EAAAhG,GACA,WAAAA,OAAA25C,EAAA,EACA,SACA35C,EAAA25C,EAAA,EACA,QAEA,QAGAv5C,MAAA,uBACA6F,KAAA,SAAAD,EAAAhG,GAAA,OAAAkC,EAAAlC,KAGA,IACAk6C,GACAH,gCAAA,kCACAI,qBAAA,wBAEAC,EAAA5J,IAAA0J,GACAp4B,EAAAxhB,UAAA,gBAAAC,KAAA,SAAA4F,EAAAC,GACA,GAAAg0C,EAAAp8C,QAAAkE,EAAAkE,KAAA,GAIA,IAHA,IAAAi0C,EAAAH,EAAAh4C,EAAAkE,IACAk0C,EATA,KASAD,EAAAh7C,OAAA,GACAk7C,KACA9xC,EAAA,EAAAA,EAAA4xC,EAAAh7C,OAAAoJ,IACA8xC,EAAAr8C,MAAAo8C,EAAA,EAZA,IAYA7xC,GAEA,IAAAxC,EAAAzG,GAAAC,OAAA1D,MACAkK,OAAA,MACAhB,OAAA,SACAC,KAAA,IAAAiB,EAAA,IACAjB,KAAA,IAAAiB,EAAA,IACAjB,KAAA,KAAAq1C,EAAA,GAJA,OAKAt0C,KAAAo0C,EAAA,IACA,QAAA/yC,EAAA,EAAAA,EAAA+yC,EAAAh7C,OAAAiI,IACArB,EAAAhB,OAAA,SACAC,KAAA,IAAAiB,EAAA,IACAjB,KAAA,IAAAiB,EAAA,IACAjB,KAAA,KAAAq1C,EAAAjzC,GAHA,OAIArB,KAAAo0C,EAAA/yC,OA1IAkzC,CAAAvE,GAgJA,WACA,IAAAn0B,EAAAwS,EAAArvB,OAAA,KACAC,KAAA,YADA,gBACAJ,EADA,KAEA64C,EAAAl8C,WAAAsB,KAAA,SACA66C,EAAAD,EACAE,EAAA,GAAAD,EACAE,EAAA,GAAAF,EACAP,EAAAx+C,KAAA0N,GAAA,EAEA+wC,EAAA99C,GAAAwU,MACAC,YAAA6pC,GACA5pC,YAAA2pC,GACA1pC,WAJA,IAIAkpC,GACAjpC,SALA,GAKAipC,GACAG,EAAAG,EAAA,KACAI,EAAA5N,EAAA,EACA6N,EAAAD,EAAAJ,EAAA,EAEAn+C,GAAAC,OAAA,gBAAAyF,KAAA,SAAAJ,EAAA,EAAA64C,GACA,IAAAM,EAAAx8C,WAAAjC,GAAAC,OAAA,gBAAAW,MAAA,WACA89C,EAAAz8C,WAAAjC,GAAAC,OAAA,sBAAAW,MAAA,QACAZ,GAAAC,OAAA,sBAAAW,MAAA,SAAA69C,EAAA,MACA,IAAAE,EAAA18C,WAAAjC,GAAAC,OAAA,oBAAAW,MAAA,WACAZ,GAAAC,OAAA,qBACAW,MAAA,MAAA89C,EAAAD,EAAA,MACA79C,MAAA,SAAA+9C,EAAAF,EAAA,MAEA,IAAAG,EAAAjO,EAAA,GACAkO,EAAAlO,EAAA,EACAmO,EAAAx8B,EAAA7c,OAAA,KACAs5C,EAAAD,EAAAr5C,OAAA,KACAC,KAAA,YADA,aACAk5C,EADA,QAEAI,EAAAF,EAAAr5C,OAAA,KACAC,KAAA,YADA,aACAm5C,EADA,QAEAE,EAAAt5C,OAAA,KACAC,KAAA,YADA,aACA64C,EAAA,EADA,KACAJ,EADA,eAGA14C,OAAA,QACAC,KAAA,IAAAo4C,KACAp4C,KAAA,kBACAq5C,EAAAt5C,OAAA,QACAC,KAAA,IAAA84C,GACA94C,KAAA,IAAAy4C,EAAA,GACAv9C,MAAA,8BACAA,MAAA,uBACA6F,KAAA,YACAu4C,EAAAv5C,OAAA,UACAC,KAAA,KAAAs4C,GACAt4C,KAAA,KAAAy4C,EAAA,GACAz4C,KAAA,OAAAs4C,GACAt4C,KAAA,gBACAA,KAAA,oBACAA,KAAA,mBAAAs4C,GACAgB,EAAAv5C,OAAA,UACAC,KAAA,KAAAs4C,GACAt4C,KAAA,KAAAy4C,EAAA,GACAz4C,KAAA,SAAAs4C,GACAt4C,KAAA,kBACAs5C,EAAAv5C,OAAA,QACAC,KAAA,MAAAs4C,GACAt4C,KAAA,IAAAy4C,EAAA,GACAv9C,MAAA,8BACAA,MAAA,uBACA6F,KAAA,qBAEA,IAAAw4C,EAAA38B,EAAA7c,OAAA,KACAC,KAAA,YADA,gBACAy4C,EADA,KAEAe,EAAAD,EAAAx5C,OAAA,KACAC,KAAA,YADA,aACAk5C,EADA,QAEAO,EAAAF,EAAAx5C,OAAA,KACAC,KAAA,YADA,aACAm5C,EADA,QAEAK,EAAAz5C,OAAA,KACAC,KAAA,YADA,aACA64C,EAAA,EADA,KACAJ,EADA,eAGA14C,OAAA,QACAC,KAAA,IAAAo4C,KACAp4C,KAAA,eACAA,KAAA,eAAA04C,EAAA,IACA14C,KAAA,oBACAw5C,EAAAz5C,OAAA,QACAC,KAAA,IAAA84C,GACA94C,KAAA,IAAAy4C,EAAA,GACAv9C,MAAA,8BACAA,MAAA,uBACA6F,KAAA,YACA04C,EAAA15C,OAAA,UACAC,KAAA,KAAAs4C,GACAt4C,KAAA,KAAAy4C,EAAA,GACAz4C,KAAA,QAAAs4C,GACAt4C,KAAA,gBACAA,KAAA,oBACAA,KAAA,mBAAAs4C,GACAmB,EAAA15C,OAAA,QACAC,KAAA,MAAAs4C,GACAt4C,KAAA,IAAAy4C,EAAA,GACAv9C,MAAA,8BACAA,MAAA,uBACA6F,KAAA,qBAEA,IAAA24C,EAAA98B,EAAA7c,OAAA,KACAC,KAAA,YADA,gBACA,EAAAy4C,EADA,KAEAkB,EAAAD,EAAA35C,OAAA,KACAC,KAAA,YADA,aACAk5C,EADA,QAEAU,EAAAF,EAAA35C,OAAA,KACAC,KAAA,YADA,aACAm5C,EADA,QAEAQ,EAAA55C,OAAA,SACAC,KAAA,OAAAo2C,GACAp2C,KAAA,OACAA,KAAA,OACAA,KAAA,YAAAy4C,GACAz4C,KAAA,QAAA64C,GACAc,EAAA55C,OAAA,QACAC,KAAA,IAAA84C,GACA94C,KAAA,IAAAy4C,EAAA,GACAv9C,MAAA,8BACAA,MAAA,uBACA6F,KAAA,aACA64C,EAAA75C,OAAA,UACAC,KAAA,KAAAs4C,GACAt4C,KAAA,KAAAy4C,EAAA,GACAz4C,KAAA,QAAAs4C,GACAt4C,KAAA,kBACA45C,EAAA75C,OAAA,QACAC,KAAA,MAAAs4C,GACAt4C,KAAA,IAAAy4C,EAAA,GACAv9C,MAAA,8BACAA,MAAA,uBACA6F,KAAA,UA9QA84C,4EC9OeC,GADEj8B,OAFjB,WAA0BhnB,KAAamnB,eAAbnnB,KAAuCqnB,MAAAD,GAAwB,OAA/DpnB,KAA+DkjD,GAAA,IAExE16B,iBADjB,WAAoC,IAAatB,EAAblnB,KAAamnB,eAA0BC,EAAvCpnB,KAAuCqnB,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBjT,OAAOgK,GAAA,kBAAqBiJ,EAAA,OAAYE,YAAA,eAAxHtnB,KAAiJunB,GAAA,KAAAH,EAAA,OAAwBE,YAAA,iBAA2BF,EAAA,QAAAA,EAAA,KAAqBE,YAAA,wBAAAnT,OAA2CgvC,cAAA,mBCExS,IAcA16B,EAdyBC,EAAQ,OAcjCC,ECAAvqB,KAAA,cACAC,KAFA,WAGA,UAIAkB,QAPA,aAQAC,YAGAI,UDREqjD,GATF,EAVA,SAAAr6B,GACEF,EAAQ,SAaV,kBAEA,MAUevqB,EAAA,EAAAsqB,EAAiB,2DEvBjB26B,GADEp8B,OAFjB,WAA0B,IAAaE,EAAblnB,KAAamnB,eAA0BC,EAAvCpnB,KAAuCqnB,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBjT,OAAOgK,GAAA,YAAeiJ,EAAA,OAAYjT,OAAOgK,GAAA,SAAzHne,KAAqIunB,GAAA,KAAAH,EAAA,iBAE9IoB,oBCCjB,IASA+C,EAZA,SAAA3C,GACEF,EAAQ,SAgBVD,EAdyBC,EAAQ,OAcjCC,CACEi3B,EAAA,EACAwD,GATF,EAWA73B,EAPA,KAEA,MAUeptB,EAAA,EAAAsqB,EAAiB,mUC1BhC,SAAS46B,EAAUj4B,EAAMk4B,EAAOp3C,EAAGyJ,GACjC,KAAIyV,EAAOk4B,GAAX,CAKA,IAJA,IAGIC,EAHAt/C,EAAImnB,EACJlZ,EAAIoxC,EACJE,EAAYt3C,EAAEjI,GAEXA,GAAKiO,GAAG,CAEb,KAAOhG,EAAEgG,GAAGyD,IAAQ6tC,EAAU7tC,IAAQ1R,EAAIiO,GAAGA,IAE7C,KAAOhG,EAAEjI,GAAG0R,IAAQ6tC,EAAU7tC,IAAQ1R,EAAIiO,GAAGjO,IACzCA,EAAIiO,IACNqxC,EAAOr3C,EAAEjI,GACTiI,EAAEjI,GAAKiI,EAAEgG,GACThG,EAAEgG,GAAKqxC,GAIXr3C,EAAEkf,GAAQlf,EAAEjI,GACZiI,EAAEjI,GAAKu/C,EACPH,EAAUj4B,EAAMnnB,EAAI,EAAGiI,EAAGyJ,GAC1B0tC,EAAUp/C,EAAI,EAAGq/C,EAAOp3C,EAAGyJ,IAG7B,IACM+pB,EADF+jB,GACE/jB,EAAM,IAAImb,EAAA3uC,EACP,SAASuD,GAId,OAHAA,EAAE2qB,OAAS3qB,EACXA,EAAEi0C,KAAO,EACJhkB,EAAI7f,IAAIpQ,IAAIiwB,EAAI3hB,IAAItO,GAClBiwB,IAWX,SAASikB,EAAKl0C,GAEZ,OADIA,EAAE2qB,QAAU3qB,IAAGA,EAAE2qB,OAASupB,EAAKl0C,EAAE2qB,SAC9B3qB,EAAE2qB,OAGX,SAASwpB,EAAMv5B,EAAG2pB,GAChB,IAAI6P,EAAQF,EAAKt5B,GACby5B,EAAQH,EAAK3P,GAEb6P,GAASC,IAGTD,EAAMH,KAAOI,EAAMJ,KAAMG,EAAMzpB,OAAS0pB,EAEnCD,EAAMH,KAAOI,EAAMJ,KAAMI,EAAM1pB,OAASypB,GAG/CC,EAAM1pB,OAASypB,EACfA,EAAMH,KAAOG,EAAMH,KAAO,IAI9B,SAASK,EAAQC,GACf,IAAIC,KADc3iD,GAAA,EAAAC,GAAA,EAAAC,OAAAP,EAAA,IAElB,QAAAQ,EAAAC,EAAAwiD,IAAcF,EAAEG,KAAhB7iD,GAAAG,EAAAC,EAAAE,QAAAC,MAAAP,GAAA,EAAmB,KAAVmO,EAAUhO,EAAAM,MACjB0hD,EAAQh0C,IAHQ,MAAArN,GAAAb,GAAA,EAAAC,EAAAY,EAAA,aAAAd,GAAAI,EAAAW,QAAAX,EAAAW,SAAA,WAAAd,EAAA,MAAAC,GAAA,IAAAe,GAAA,EAAAC,GAAA,EAAAC,OAAAxB,EAAA,IAMlB,QAAAyB,EAAAC,EAAAuhD,IAAcF,EAAEI,KAAhB7hD,GAAAG,EAAAC,EAAAf,QAAAC,MAAAU,GAAA,EAAmB,CAAAG,EAAAX,MACjBshD,EAAU,EAAGW,EAAEI,EAAE9gD,OAAS,EAAG0gD,EAAEI,EAAG,MAPlB,MAAAhiD,GAAAI,GAAA,EAAAC,EAAAL,EAAA,aAAAG,GAAAI,EAAAN,QAAAM,EAAAN,SAAA,WAAAG,EAAA,MAAAC,GAAA,IAAAmN,GAAA,EAAAC,GAAA,EAAAC,OAAA7O,EAAA,IASlB,QAAA8O,EAAAC,EAAAk0C,IAAcF,EAAEI,KAAhBx0C,GAAAG,EAAAC,EAAApO,QAAAC,MAAA+N,GAAA,EAAmB,KAAVib,EAAU9a,EAAAhO,MACbsoB,EAAI25B,EAAEG,EAAEH,EAAEK,MAAM52B,IAAI5C,EAAER,IACtB2pB,EAAIgQ,EAAEG,EAAEH,EAAEK,MAAM52B,IAAI5C,EAAEmpB,IACtB2P,EAAKt5B,IAAMs5B,EAAK3P,KAClBiQ,EAAE9hD,KAAK0oB,GACP+4B,EAAMv5B,EAAG2pB,KAdK,MAAA5xC,GAAAyN,GAAA,EAAAC,EAAA1N,EAAA,aAAAwN,GAAAI,EAAA3N,QAAA2N,EAAA3N,SAAA,WAAAwN,EAAA,MAAAC,GAiBlB,OAAOm0C,EAGT,SAASK,IACP,KAAMtkD,gBAAgBskD,GAAS,OAAO,IAAIA,EAC1CtkD,KAAKukD,MAAQ,KACbvkD,KAAKme,GAAK,KACVne,KAAK3B,KAAO,KAYd,SAASwqB,IACP,KAAM7oB,gBAAgB6oB,GAAQ,OAAO,IAAIA,EACzC7oB,KAAKmkD,KACLnkD,KAAKokD,KACLpkD,KAAKqkD,MAAQ,IAAIG,EAAAt4C,EAEnB2c,EAAMjM,WACJ6nC,YAAa57B,EAGb67B,WAAY,SAASC,GAAS,IAAA/zC,GAAA,EAAAC,GAAA,EAAAC,OAAA7P,EAAA,IAE5B,QAAA8P,EAAAC,EAAAkzC,IAAcS,KAAd/zC,GAAAG,EAAAC,EAAApP,QAAAC,MAAA+O,GAAA,EAAuB,KAAdojC,EAAcjjC,EAAAhP,MACjB6nB,EAAS06B,IACb16B,EAAOzL,GAAK61B,EAAE71B,GACdne,KAAKmkD,EAAEhiD,KAAKynB,IALc,MAAAxnB,GAAAyO,GAAA,EAAAC,EAAA1O,EAAA,aAAAwO,GAAAI,EAAA3O,QAAA2O,EAAA3O,SAAA,WAAAwO,EAAA,MAAAC,GAQ5B,IAAK,IAAI7M,KAAKjE,KAAKmkD,EACjBnkD,KAAKqkD,MAAM3kB,IAAI1/B,KAAKmkD,EAAElgD,GAAGka,GAAIla,IAIjC2gD,SAAW,WAET,SAASC,EAAWrmB,EAAOsmB,EAAKP,EAAOF,GACrC,GAAI7lB,GAASsmB,EAAK,OAAO,KACzB,IAAIC,EAnCV,SAASC,IACP,KAAMhlD,gBAAgBglD,GAAO,OAAO,IAAIA,EACxChlD,KAAKw+B,MAAQ,KACbx+B,KAAKilD,QAAU,KACfjlD,KAAKo0C,EAAI,KA+BU4Q,GAIf,OAHAD,EAASvmB,MAAQ6lB,EAAM52B,IAAI82B,EAAM/lB,GAAOrgB,IACxC4mC,EAAS3Q,EAAImQ,EAAM/lB,GAAO4V,EAC1B2Q,EAASE,QAAUJ,IAAarmB,EAAOsmB,EAAKP,EAAOF,GAC5CU,EAET,OAAO,SAASR,GACd,IAAK,IAAIW,KAASX,EAAO,CACvB,IAAI/lB,EAAQx+B,KAAKqkD,MAAM52B,IAAIy3B,GACdllD,KAAKmkD,EAAE3lB,GACb+lB,MAAQM,EACb,EACAN,EAAMW,GAAO5hD,OACbihD,EAAMW,GACNllD,KAAKqkD,SAlBF,GAuBXc,YAAa,SAASZ,GACpBvkD,KAAKokD,EAAIG,gCC7IPrY,aACJ,SAAAA,EAAa/rC,EAAWuiC,EAAYrkC,GAAM+mD,IAAAplD,KAAAksC,GAGxC,QAAajrC,IAAT5C,EAAoB,CACtB2B,KAAKqlD,iBAAkB,EAEvBrlD,KAAKslD,GAAK,EAEVtlD,KAAKulD,GAAK,GACVvlD,KAAKG,UAAYA,EACjBH,KAAK0iC,WAAaA,EAClB1iC,KAAKwlD,OACL,IAAK,IAAIvhD,EAAI,EAAGA,EAAI/B,KAAKu7B,gBAAgBn6B,OAAQW,IAAK,CACR,IAAA4rB,EAA5C,GAAIpiB,MAAMkwB,QAAQz7B,KAAKu7B,gBAAgBx5B,IACrCjE,KAAKwlD,IAAIrjD,MAAK0tB,MAAG/S,OAAH9Z,MAAA6sB,EAAAysB,IAAap6C,KAAKu7B,gBAAgBx5B,MAGpDjE,KAAKw2B,QAAUt0B,KAAKk0B,WACpBp2B,KAAK+sC,QACL,IAAK,IAAI9oC,EAAI,EAAGA,EAAI/B,KAAKsF,QAAQgF,SAASlJ,OAAQW,IAAK,CACrD,IAAI28C,EAAS1+C,KAAKsF,QAAQgF,SAASvI,GACnCjE,KAAK+sC,KAAK5qC,SACVnC,KAAK+sC,KAAK9oC,GAAG9B,KAAKy+C,EAAOviD,KAAK89C,eAAe,IAC7C,IAAK,IAAIjqC,EAAI,EAAGA,EAAI0uC,EAAOp0C,SAASlJ,OAAQ4O,IAAK,CAC/C,IACIuzC,EADU7E,EAAOp0C,SAAS0F,GACZ7T,KAAK89C,eAAe,GACtCn8C,KAAK+sC,KAAK9oC,GAAG9B,KAAKsjD,IAItBzlD,KAAK0lD,cAAchjB,EAAY,OAC/B1iC,KAAKU,KAAKgiC,GACV1iC,KAAK2lD,eAEL,IAAK,IAAMhwC,KAAOtX,EAChB,GAAY,kBAARsX,EAAyB,CAC3B3V,KAAK2V,GAAO,IAAI6uC,EAAAt4C,EADW,IAAA5K,GAAA,EAAAC,GAAA,EAAAC,OAAAP,EAAA,IAE3B,QAAAQ,EAAAC,EAAAwiD,IAAmB7lD,EAAKsX,MAAxBrU,GAAAG,EAAAC,EAAAE,QAAAC,MAAAP,GAAA,EAA8B,KAAnB4C,EAAmBzC,EAAAM,MAC5B/B,KAAK2V,GAAK+pB,IAAIx7B,EAAK,GAAIA,EAAK,KAHH,MAAA9B,GAAAb,GAAA,EAAAC,EAAAY,EAAA,aAAAd,GAAAI,EAAAW,QAAAX,EAAAW,SAAA,WAAAd,EAAA,MAAAC,SAM3BxB,KAAK2V,GAAOtX,EAAKsX,qDAMV+sB,GAA2B,IAAA5hC,EAAAd,KAAf4lD,EAAenuC,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,GAAAA,UAAA,GAAH,EACjCsO,EAAItiB,GAAGC,OAAO,WAAWA,OAAO,iBACpC1D,KAAK6lD,UAEL,IAAK,IAAI5hD,EAAI,EAAGA,EAAI/B,KAAKoK,aAAahJ,OAAQW,IAAK,CACjD,IAEIwmB,EAAOq7B,EAFE//B,EAAEriB,OAAF,WAAoBO,GAAK5F,OAAO,GAAGuN,OACnCma,EAAEriB,OAAF,WAAoBO,GAAK5F,OAAO,GAAGs4B,MAAM,GAAG+S,OACZhH,EAAYkjB,GACzD5lD,KAAK6lD,OAAO1jD,KAAK4jD,IAAUt7B,KAAKhnB,GAAG+L,MAAH/L,CAAUgnB,KAG5C,IAXwC,IAAAnf,EAAA,SAW/BrH,GAMP,IALA,IAAI+hD,EAAO9jD,KAAKsF,QAAQo6B,OAAO39B,GAI3B2mC,EAmBN,SAA4B2Z,EAAOvtB,EAAQ4uB,GAEzC,IADA,IAAIhb,KACK3mC,EAAI,EAAGA,EAAIsgD,EAAMjhD,OAAQW,IAChC2mC,EAAMzoC,MACJ6iC,EAAOhO,GAASutB,EAAMtgD,GAAGklB,MAAMtd,YAAY4D,EAAG80C,EAAMtgD,GAAGklB,MAAMtd,YAAYC,IACzEk5B,EAAOhO,GAASutB,EAAMtgD,GAAGmlB,IAAIvd,YAAY4D,EAAG80C,EAAMtgD,GAAGmlB,IAAIvd,YAAYC,MAGzE,OAAO8+B,EA3BKqb,CAHAnN,IAAW/yB,EAAExhB,UAAU,gBAAgByJ,OAAO,WACxD,OAAOvK,GAAGC,OAAO1D,MAAMmJ,KAAK,WAAa6Z,OAAOgjC,KAC/C3nD,OAAO,GAAGkmD,MAAMn9B,GAAG9mB,UACeoiC,GAC5Bz+B,EAAI,EAAGA,EAAI2mC,EAAMtnC,OAAQW,IAChCnD,EAAK+kD,OAAO1jD,KAAK4jD,IAAUv2C,KAAKo7B,EAAM3mC,GAAG02C,UAPpC12C,EAAI,EAAGA,EAAI/B,KAAKsF,QAAQo6B,OAAOt+B,OAAQW,IAAKqH,EAA5CrH,GAWT,SAAS6hD,EAAmBl6C,EAAQ89B,EAAQ1S,EAAQ4uB,GAIlD,IAHA,IAAIn7B,KACAy7B,EAAalvB,EAAOvnB,EAAE/H,QAAQ,GAAKsvB,EAAOvnB,EAAE/H,QAAQ,GACpDy+C,EAAanvB,EAAOlrB,EAAEpE,QAAQ,GAAKsvB,EAAOlrB,EAAEpE,QAAQ,GAC/CzD,EAAI,EAAGA,EAAIylC,EAAOpmC,OAAQW,IAAK,KAAAmiD,EACjBphB,EAAOhO,GAAS0S,EAAOzlC,GAAG4H,YAAY4D,EAAGi6B,EAAOzlC,GAAG4H,YAAYC,IAD9Cu6C,EAAAC,IAAAF,EAAA,GACjCG,EADiCF,EAAA,GAC1BG,EAD0BH,EAAA,GAElC52C,EAAI82C,EAAQ36C,EAAO,GAAM26C,EAAQL,EAAaN,EAAcW,EAAQL,EAAaN,EACjF95C,EAAI06C,EAAQ56C,EAAO,GAAM46C,EAAQL,EAAaP,EAAcY,EAAQL,EAAaP,EACrFn7B,EAAKtoB,MAAMsN,EAAG3D,IAEhB,OAAO2e,gCAeLiY,GACJ1iC,KAAKymD,WAAa,8mBAClBzmD,KAAK0mD,gBAAkB,KACvB1mD,KAAK2mD,cAAcjkB,GACnB1iC,KAAK4mD,oBACL5mD,KAAK6mD,eAAenkB,GAEpB1iC,KAAK8mD,aAAapkB,GAClB1iC,KAAK+mD,iBACL/mD,KAAKgnD,mBACLhnD,KAAKinD,qDAIL,IAAMC,EAAO,IAAIC,MAAMh6B,IAAentB,QAASe,KAAM,6BACrDqmD,iBAAOF,EAAP,oDAGaxkB,GAAY,IAAAh5B,EAAA1J,KACzBA,KAAKqnD,aACLrnD,KAAKiuC,aACLjuC,KAAK+tC,WACL/tC,KAAKmuC,mBAEL,IAAK,IAAIlqC,EAAI,EAAGA,EAAIjE,KAAKwlD,IAAIliD,OAAQW,IAAK,CAGxC,IAFA,IAAIqjD,EAAStnD,KAAKwlD,IAAIvhD,GAClB2vC,KAFoCjmC,EAAA,SAG/BuE,GAKP,IAJA,IAAItP,EAAM0kD,EAAOp1C,GACbzG,EAAO/B,EAAKvJ,UAAUuL,KAAK,SAAAD,GAAA,OAAQA,EAAKE,KAAO/I,IAC/C4zC,EAAoBsC,IAAWrtC,EAAK6qB,UAAUh2B,UAC9C6zC,KAPkCsC,EAAA,SAQ7BvgB,GACP,IAAIwgB,EAAehtC,EAAKvJ,UAAUuL,KAAK,SAAAD,GAAA,OAAQ0hB,IAAeo6B,IAAc97C,EAAKkrC,aAAexpB,IAAeqpB,EAAkBtgB,WAC5Gj1B,IAAjBy1C,IACFvC,EAAcuC,EAAa/qC,IAAMjC,EAAK8sB,QAAQ5zB,GAAK8zC,EAAa/qC,MAH3DuqB,EAAI,EAAGA,EAAIsgB,EAAkBlzC,OAAQ4yB,IAAKugB,EAA1CvgB,GAMT0d,EAAMhxC,GAAOuxC,GAXNjiC,EAAI,EAAGA,EAAIo1C,EAAOhkD,OAAQ4O,IAAKvE,EAA/BuE,GAaTlS,KAAKqnD,UAAUllD,KAAK,IAAI0mB,IAAM+qB,IAC9B,IAAIxG,KACJ,IAASl7B,EAAI,EAAGA,EAAIlS,KAAK+sC,KAAK9oC,GAAGX,OAAQ4O,IACvC,IAAK,IAAIgkB,EAAIhkB,EAAI,EAAGgkB,EAAIl2B,KAAK+sC,KAAK9oC,GAAGX,OAAQ4yB,IAC3CkX,GAAOptC,KAAK+sC,KAAK9oC,GAAGiO,GAAIlS,KAAK+sC,KAAK9oC,GAAGiyB,KAAOl2B,KAAKqnD,UAAUpjD,GAAGsmB,iBAAiBvqB,KAAK+sC,KAAK9oC,GAAGiO,GAAIlS,KAAK+sC,KAAK9oC,GAAGiyB,IAAIh2B,IAAI+K,QAKzH,IAFA,IAAIu8C,KACAjD,KACKryC,EAAI,EAAGA,EAAIlS,KAAK+sC,KAAK9oC,GAAGX,OAAQ4O,IAAK,CAC5Cs1C,EAASrlD,MAAMgc,GAAIne,KAAK+sC,KAAK9oC,GAAGiO,KAChC,IAAK,IAAIgkB,EAAIhkB,EAAI,EAAGgkB,EAAIl2B,KAAK+sC,KAAK9oC,GAAGX,OAAQ4yB,IAC3CquB,EAAMpiD,MACJkoB,EAAGrqB,KAAK+sC,KAAK9oC,GAAGiO,GAChB8hC,EAAGh0C,KAAK+sC,KAAK9oC,GAAGiyB,GAChBke,EAAGhH,GAAOptC,KAAK+sC,KAAK9oC,GAAGiO,GAAIlS,KAAK+sC,KAAK9oC,GAAGiyB,KAAK5yB,SAInD,IAAIqwC,EAAW8T,IACf9T,EAAS+Q,WAAW8C,GACpB7T,EAASwR,YAAYZ,GACrBvkD,KAAK+tC,QAAQ9pC,GAAK8/C,EAAQpQ,GAC1B3zC,KAAKiuC,UAAUhqC,MACfjE,KAAKmuC,gBAAgBhsC,SACrB,IAzCwC,IAAA+vC,EAAA,SAyC/BhgC,GACPxI,EAAKykC,gBAAgBlqC,GAAG9B,SACxB,IAAIulD,EAAYta,GAAO1jC,EAAKqkC,QAAQ9pC,GAAGiO,GAAGmY,EAAG3gB,EAAKqkC,QAAQ9pC,GAAGiO,GAAG8hC,IAChEtqC,EAAKukC,UAAUhqC,IAAIyF,EAAKqkC,QAAQ9pC,GAAGiO,GAAGmY,EAAG3gB,EAAKqkC,QAAQ9pC,GAAGiO,GAAG8hC,IAAM0T,EAClE,IA7CsC,IAAAC,EAAA,SA6C7BzxB,GACP,IAAIzqB,EAAO/B,EAAKvJ,UAAUuL,KAAK,SAAAD,GAAA,OAAQA,EAAKE,KAAO+7C,EAAUxxB,KAE7DxsB,EAAKykC,gBAAgBlqC,GAAGiO,GAAG/P,MACzBsN,EAAGizB,EAAWjzB,EAAEhE,EAAKG,OAAOC,YAAY4D,GACxC3D,EAAG42B,EAAW52B,EAAEL,EAAKG,OAAOC,YAAYC,MALnCoqB,EAAI,EAAGA,EAAIwxB,EAAUpkD,OAAQ4yB,IAAKyxB,EAAlCzxB,IAJFhkB,EAAI,EAAGA,EAAIlS,KAAK+tC,QAAQ9pC,GAAGX,OAAQ4O,IAAKggC,EAAxChgC,gDAiBX,IAAMvI,EAAO3J,KACPG,EAAYH,KAAKG,UAGjBynD,GAFM5nD,KAAKwlD,IA0BjB,WAGE,IAFA,IAAIoC,KAEK3jD,EAAI,EAAGA,EAAI9D,EAAUmD,OAAQW,IACpC2jD,EAAkBzlD,KAAKolD,IAAcpnD,EAAU8D,GAAG0yC,WAGpD,OAAOiR,EA/BiBC,IAEpBC,EA2CN,SAA4BC,EAAeH,GAGzC,IAFA,IAAIE,KAEK7jD,EAAI8jD,EAAc,GAAG,GAAI9jD,EAAI8jD,EAAc,GAAG,GAAI9jD,IACzD,IAAK,IAAIiO,EAAI61C,EAAc,GAAG,GAAI71C,EAAI61C,EAAc,GAAG,GAAI71C,IACpDvI,EAAKq+C,sBAAsBJ,GAAoB3jD,EAAGiO,KACrD41C,EAAe3lD,MAAM8B,EAAGiO,IAK9B,OAAO41C,EAtDcG,CAgCvB,SAA2BL,GACzB,IAAMM,EAASzkD,GAAG+X,OAAOosC,EAAmB,SAAA39C,GAAA,OAAKA,EAAE,KAC7Ck+C,EAAS1kD,GAAG+X,OAAOosC,EAAmB,SAAA39C,GAAA,OAAKA,EAAE,KAEnD,OAGEi+C,EAAQC,GAxCUC,CAAiBR,GACiBA,GACxD5nD,KAAK8nD,eAAiBA,EACtB,IAAMO,EAAsBroD,KAAKsoD,gBACjCtoD,KAAKqoD,oBAAsBzjD,KAAKC,MAAMsoB,IAAek7B,IAErD,IAAIE,EAA2BvoD,KAAKwoD,wBACpCxoD,KAAKuoD,yBAA2B3jD,KAAKC,MAAMsoB,IAAeo7B,IAC1DA,EAA2BA,EAAyB5N,OACpD,IAAM8N,EAAYX,EAAehrC,OAAOyrC,GAEpC3U,KAjBerxC,GAAA,EAAAC,GAAA,EAAAC,OAAAxB,EAAA,IAkBnB,QAAAyB,EAAAC,EAAAuhD,IAAqBuE,KAArBlmD,GAAAG,EAAAC,EAAAf,QAAAC,MAAAU,GAAA,EAAgC,KAAvBo0C,EAAuBj0C,EAAAX,MAC1BoyC,KACEqC,EAAoBkS,EAA8B/R,EAAUmR,GAFpCa,GAAA,EAAAC,GAAA,EAAAC,OAAA5nD,EAAA,IAG9B,QAAA6nD,EAAAC,EAAA7E,IAA6B1N,KAA7BmS,GAAAG,EAAAC,EAAAnnD,QAAAC,MAAA8mD,GAAA,EAAgD,KAAvCK,EAAuCF,EAAA/mD,MAC9CoyC,EAAcnxB,OAAOgmC,IAAqBhpD,KAAKipD,uBAAuBtS,EAAUqS,IAJpD,MAAA5mD,GAAAwmD,GAAA,EAAAC,EAAAzmD,EAAA,aAAAumD,GAAAI,EAAA1mD,QAAA0mD,EAAA1mD,SAAA,WAAAumD,EAAA,MAAAC,GAM9BjV,EAAM5wB,OAAO2zB,IAAaxC,GAxBT,MAAA/xC,GAAAI,GAAA,EAAAC,EAAAL,EAAA,aAAAG,GAAAI,EAAAN,QAAAM,EAAAN,SAAA,WAAAG,EAAA,MAAAC,GAyFnB,SAASimD,EAA+B/R,EAAUmR,GAChD,IAAMtR,EAYR,SAA+B0S,GAC7B,IAAIC,GAAWllD,EAAGilD,EAAI,GAAIh3C,EAAGg3C,EAAI,IAC7B5yB,KACA8yB,SAAIC,SAAIC,SAAIC,SACZJ,EAAOj3C,EAAI,GAAM,GACnBk3C,EAAK,EACLC,EAAMF,EAAOllD,GAAK,EAAK,EAAI,EAC3BqlD,EAAMH,EAAOllD,GAAK,GAAM,EAAI,EAC5BslD,GAAM,IAENH,GAAoB,IAAdD,EAAOllD,EAAY,EAAI,EAC7BolD,EAAMF,EAAOllD,EAAI,EAAK,EAAI,EAC1BqlD,EAAMH,EAAOllD,EAAI,GAAM,EAAI,EAC3BslD,EAAmB,IAAbJ,EAAOllD,GAAY,GAAK,GAShC,OANAqyB,EAAUn0B,MAAMgnD,EAAOllD,EAAImlD,EAAID,EAAOj3C,IACtCokB,EAAUn0B,MAAMgnD,EAAOllD,EAAIolD,EAAIF,EAAOj3C,EAAI,IAC1CokB,EAAUn0B,MAAMgnD,EAAOllD,EAAIqlD,EAAIH,EAAOj3C,EAAI,IAC1CokB,EAAUn0B,MAAMgnD,EAAOllD,EAAIslD,EAAIJ,EAAOj3C,IACtCokB,EAAUn0B,MAAMgnD,EAAOllD,EAAIqlD,EAAIH,EAAOj3C,EAAI,IAC1CokB,EAAUn0B,MAAMgnD,EAAOllD,EAAIolD,EAAIF,EAAOj3C,EAAI,IACnCokB,EAlCmBkzB,CAAqB7S,GAC3C8S,KAF4DC,GAAA,EAAAC,GAAA,EAAAC,OAAA3oD,EAAA,IAIhE,QAAA4oD,EAAAC,EAAA5F,IAA6B1N,KAA7BkT,GAAAG,EAAAC,EAAAloD,QAAAC,MAAA6nD,GAAA,EAAgD,KAAvCV,EAAuCa,EAAA9nD,MAC1C4H,EAAKq+C,sBAAsBF,EAAgBkB,IAC7CS,EAAmBtnD,KAAK6mD,IANoC,MAAA5mD,GAAAunD,GAAA,EAAAC,EAAAxnD,EAAA,aAAAsnD,GAAAI,EAAAznD,QAAAynD,EAAAznD,SAAA,WAAAsnD,EAAA,MAAAC,GAUhE,OAAOH,EAxETzpD,KAAK+pD,cAAgB,IAAIlhC,IAAM+qB,0CAqGjBlR,GAAY,IAAA/3B,EAAA3K,KACpB2J,EAAO3J,KACbA,KAAKgqD,cACLhqD,KAAKqvC,SAAW,KAChBrvC,KAAKsvC,cACLtvC,KAAKuvC,oBAILvvC,KAAK4vC,UACL5vC,KAAKiqD,iBACLjqD,KAAKkqD,aACLlqD,KAAKmqD,gBACLnqD,KAAKoqD,6BACLpqD,KAAKqqD,YACLrqD,KAAKsqD,eACLtqD,KAAK8yC,cACL9yC,KAAKuqD,kBAkFL,IAhFA,IAAInd,KACAod,KA8EAC,KACKxmD,EAAI,EAAGA,EAAIjE,KAAKwlD,IAAIliD,OAAQW,IAAK,CAGxC,IAFA,IAAIqjD,EAAStnD,KAAKwlD,IAAIvhD,GAClB2vC,KAFoC8W,EAAA,SAG/Bx4C,GAMP,IALA,IAAItP,EAAM0kD,EAAOp1C,GACbzG,EAAOd,EAAKxK,UAAUuL,KAAK,SAAAD,GAAA,OAAQA,EAAKE,KAAO/I,IAC/C+nD,EAAUpD,IAAc97C,EAAKkrC,UAC7BH,EAAoBsC,IAAWrtC,EAAK6qB,UAAUh2B,UAC9C6zC,KARkCyW,EAAA,SAS7B10B,GACP,IAAIwgB,EAAe/rC,EAAKxK,UAAUuL,KAAK,SAAAD,GAAA,OAAQ0hB,IAAeo6B,IAAc97C,EAAKkrC,aAAexpB,IAAeqpB,EAAkBtgB,WAC5Gj1B,IAAjBy1C,IACFvC,EAAcuC,EAAa/qC,IAAMhB,EAAKs+C,uBAAuB0B,EAASnU,EAAkBtgB,MAHnFA,EAAI,EAAGA,EAAIsgB,EAAkBlzC,OAAQ4yB,IAAK00B,EAA1C10B,GAMT0d,EAAMhxC,GAAOuxC,GAZNjiC,EAAI,EAAGA,EAAIo1C,EAAOhkD,OAAQ4O,IAAKw4C,EAA/Bx4C,GAcTu4C,EAAOtoD,KAAK,IAAI0mB,IAAM+qB,IAuCxB,IAHA,IAAMiX,EAAiB7qD,KAAK8qD,kBACtBC,EAAa/qD,KAAKgrD,sBAAsBH,GACxCI,EAAyBjrD,KAAKkrD,wBAAwBH,GACnD9mD,EAAI,EAAGA,EAAIwmD,EAAOnnD,OAAQW,IACjC,KAAIknD,EAASC,GAAUX,EAAOxmD,GAAG/D,KACjC,IAASgS,EAAIjO,EAAI,EAAGiO,EAAIu4C,EAAOnnD,OAAQ4O,IAAK,CAC1C,IACIm5C,EAAUC,GAAUH,EADXC,GAAUX,EAAOv4C,GAAGhS,MADSqrD,GAAA,EAAAC,GAAA,EAAAC,OAAAxqD,EAAA,IAG1C,QAAAyqD,EAAAC,EAAAzH,IAA0B2G,GAAgB5mD,EAAGiO,OAA7Cq5C,GAAAG,EAAAC,EAAA/pD,QAAAC,MAAA0pD,GAAA,EAAkD,KAAvCK,EAAuCF,EAAA3pD,MAC1C8pD,EAAmBZ,EAAuBW,EAAY,IACtDE,EAAmBb,EAAuBW,EAAY,IAFZG,GAAA,EAAAC,GAAA,EAAAC,OAAAhrD,EAAA,IAGhD,QAAAirD,EAAAC,EAAAjI,IAA8B2H,KAA9BE,GAAAG,EAAAC,EAAAvqD,QAAAC,MAAAkqD,GAAA,EAAgD,KAArCK,EAAqCF,EAAAnqD,MACxCsqD,EAAqBC,GAAUF,GADSG,GAAA,EAAAC,GAAA,EAAAC,OAAAxrD,EAAA,IAE9C,QAAAyrD,EAAAC,EAAAzI,IAA8B4H,KAA9BS,GAAAG,EAAAC,EAAA/qD,QAAAC,MAAA0qD,GAAA,EAAgD,KAArCK,EAAqCF,EAAA3qD,MACxC8qD,EAAqBP,GAAUM,GAC/B51C,EAAOhX,KAAK8sD,0BAA0BT,EAAoBQ,GAChExB,EAAQe,GAAiBQ,GAAmB51C,EAC5Cq0C,EAAQuB,GAAiBR,GAAmBp1C,GANA,MAAA5U,GAAAoqD,GAAA,EAAAC,EAAArqD,EAAA,aAAAmqD,GAAAI,EAAAtqD,QAAAsqD,EAAAtqD,SAAA,WAAAmqD,EAAA,MAAAC,KAHA,MAAArqD,GAAA4pD,GAAA,EAAAC,EAAA7pD,EAAA,aAAA2pD,GAAAI,EAAA9pD,QAAA8pD,EAAA9pD,SAAA,WAAA2pD,EAAA,MAAAC,KAHR,MAAA7pD,GAAAopD,GAAA,EAAAC,EAAArpD,EAAA,aAAAmpD,GAAAI,EAAAtpD,QAAAspD,EAAAtpD,SAAA,WAAAmpD,EAAA,MAAAC,GAgB1CzrD,KAAKgqD,YAAY/lD,EAAGiO,IAAM,IAAI2W,IAAMwiC,GACpC,IAAM0B,EAAY/sD,KAAKgtD,4BAA4B/oD,EAAGiO,GACtDk7B,GAAOnpC,EAAGiO,IAAM66C,EAAU3f,MAC1Bod,GAAWvmD,EAAGiO,IAAM66C,EAAU/1C,MASlC,IAFA,IAAIwwC,KACAjD,KACKtgD,GAAI,EAAGA,GAAIjE,KAAKqnD,UAAU/jD,OAAQW,KAAK,CAC9CujD,EAASrlD,MAAOgc,GAAIla,KACpB,IAAK,IAAIiO,GAAIjO,GAAI,EAAGiO,GAAIlS,KAAKqnD,UAAU/jD,OAAQ4O,KAC7CqyC,EAAMpiD,MACJkoB,EAAGpmB,GACH+vC,EAAG9hC,GAEHkiC,EAAGoW,GAAWvmD,GAAGiO,OAIvB,IAAIyhC,GAAW8T,IACf9T,GAAS+Q,WAAW8C,GACpB7T,GAASwR,YAAYZ,GACrBvkD,KAAKqvC,SAAW0U,EAAQpQ,IACxB,IAAK,IAAI1vC,GAAI,EAAGA,GAAIjE,KAAKqvC,SAAS/rC,OAAQW,KAAK,KAAA2uC,GAAAqa,GACzCtY,IAAa30C,KAAKqvC,SAASprC,IAAGomB,EAAGrqB,KAAKqvC,SAASprC,IAAG+vC,GACtDh0C,KAAKsvC,WAAWqF,IAAavH,EAAMuH,IACnC30C,KAAKuvC,iBAAiBoF,OACtB,IAJ6C,IAAAuY,GAAA,SAIpCh7C,GACP,IAAIi7C,EAAWxiD,EAAK2kC,WAAWqF,IAAWziC,GACtCzG,EAAOd,EAAKxK,UAAUuL,KAAK,SAAAD,GAAA,OAAQA,EAAKE,KAAOwhD,IAC/CC,EAAa1qB,EAAWjzB,EAAEhE,EAAKG,OAAOC,YAAY4D,GAClD49C,EAAa3qB,EAAW52B,EAAEL,EAAKG,OAAOC,YAAYC,GACtDnB,EAAK4kC,iBAAiBoF,IAAWxyC,MAAOsN,EAAG29C,EAAYthD,EAAGuhD,KALnDn7C,GAAI,EAAGA,GAAIlS,KAAKsvC,WAAWqF,IAAWrxC,OAAQ4O,KAAKg7C,GAAnDh7C,IAoBTlS,KAAKoqD,0BAA0BjoD,KAAK6gB,OAAO2xB,KAC3C30C,KAAKoqD,0BAA0BjoD,KAAK6gB,OAAO2xB,KAC3C,IAAM2Y,GAActtD,KAAKutD,aAAavtD,KAAKsvC,WAAWqF,MACtD/B,GAAA5yC,KAAK4vC,QAAOztC,KAAZa,MAAA4vC,GAAA0J,IAAoBgR,KACpB,IAAME,GAAiBxtD,KAAKytD,gBAAgBH,KAC5CL,GAAAjtD,KAAKkqD,WAAU/nD,KAAfa,MAAAiqD,GAAA3Q,IAAuBkR,KAOzB,IAAK,IAAIvpD,GAAI,EAAGA,GAAIjE,KAAKkqD,UAAU5mD,OAAQW,KACzCjE,KAAKmqD,aAAahoD,KAAKurD,GAAU1tD,KAAKkqD,UAAUjmD,IAAIy+B,IAGtD,IAAK,IAAIz+B,GAAI,EAAGA,GAAIurB,IAAYxvB,KAAKsvC,YAAYhsC,OAAQW,KAAK,CAa5D,IAZA,IAAIyjD,GAAYH,IAAcvnD,KAAKsvC,YAAYrrC,IAC3CsiB,MACAonC,MACAC,MASK17C,GAAI,EAAGA,GAAIw1C,GAAUpkD,OAAQ4O,KAAK,CACzC,IAAM27C,GAAU7tD,KAAK8tD,YAAY9tD,KAAK4vC,OAAQ8X,GAAUx1C,KACxD,GAAI27C,GAAQvqD,OAAS,EAAG,CACtB,IAAMqS,GAAMqN,OAAOwM,IAAYxvB,KAAKsvC,YAAYrrC,KAD1B8pD,IAAA,EAAAC,IAAA,EAAAC,QAAAhtD,EAAA,IAEtB,QAAAitD,GAAAC,GAAAjK,IAAkB2J,MAAlBE,IAAAG,GAAAC,GAAAvsD,QAAAC,MAAAksD,IAAA,EAA2B,KAAhB1jD,GAAgB6jD,GAAAnsD,MACrB/B,KAAKoqD,0BAA0B//C,MAASsL,KAC1C4Q,GAAWpkB,KAAKnC,KAAK4vC,OAAOvlC,KAC5BsjD,GAAcxrD,KAAKnC,KAAKkqD,UAAU7/C,KAClCujD,GAAiBzrD,KAAKnC,KAAKmqD,aAAa9/C,OANtB,MAAAjI,GAAA4rD,IAAA,EAAAC,GAAA7rD,EAAA,aAAA2rD,IAAAI,GAAA9rD,QAAA8rD,GAAA9rD,SAAA,WAAA2rD,GAAA,MAAAC,MAY1B,IAAK,IAAI/7C,GAAI,EAAGA,GAAIqU,GAAWjjB,OAAS,EAAG4O,KAAK,CACzBjH,OAAOjL,KAAKouD,WAAW7nC,GAAWrU,IAAIhQ,KAAKu7B,iBAAiB,MAC5DxyB,OAAOjL,KAAKouD,WAAW7nC,GAAWrU,GAAI,GAAIhQ,KAAKu7B,iBAAiB,MAGnFlX,GAAW+L,OAAOpgB,GAAG,GACrBA,MAIJ,IAAK,IAAIA,GAAI,EAAGA,GAAIqU,GAAWjjB,OAAQ4O,KAAK,CAC1C,IAAM7H,GAAMrK,KAAK4vC,OAAO3tC,QAAQskB,GAAWrU,KAC3Cy7C,GAAcxrD,KAAKnC,KAAKkqD,UAAU7/C,KAClCujD,GAAiBzrD,KAAKnC,KAAKmqD,aAAa9/C,KAG1C,IACIggD,UAgBAE,IADJF,GAAWgE,GAhBiBC,GAAyB/nC,IAgBOmc,IAC9BnY,iBAAiBvH,OAAO4qC,GAAiB,IAAK5qC,OAAO4qC,GAAiB,KAAK1tD,IAAI,SAAA+J,GAAA,OAAKA,EAAE4D,MAAM,KAAK3N,IAAI+K,UAEnIs/C,GAAe39C,QAAQ2hD,GAA+BhoC,GAAW,GAAIvD,OAAO2qC,GAAc,IAAKjrB,IAC/F6nB,GAAepoD,KAAKosD,GAA+BhoC,GAAW,GAAIvD,OAAO2qC,GAAc,IAAKjrB,IAC5F6nB,GAAiBiE,GAAejE,IAEhCvqD,KAAK8yC,WAAW3wC,KAAKokB,IACrBvmB,KAAKqqD,SAASloD,KAAKkoD,IACnBrqD,KAAKuqD,eAAepoD,KAAKooD,IAG3B,SAASa,GAAWh/C,GAClB,IAAIW,KACJ,IAAK,IAAI4I,KAAOvJ,EAEd,IAAK,IAAIqiD,KADT1hD,EAAI4I,MACavJ,EAAIuJ,GACnB5I,EAAI4I,GAAK84C,GAAQriD,EAAIuJ,GAAK84C,GAG9B,OAAO1hD,EAGT,SAASu+C,GAAWoD,EAAMC,GACxB,IAAI5hD,KACJ,IAAK,IAAI4I,KAAO+4C,EACd3hD,EAAI4I,GAAO+4C,EAAK/4C,GAElB,IAAK,IAAIA,KAAOg5C,EACd5hD,EAAI4I,GAAOg5C,EAAKh5C,GAElB,OAAO5I,EAqDT,SAASu/C,GAAW9gD,GAClB,IAAIC,EAAO9B,EAAKxJ,UAAUuL,KAAK,SAAAD,GAAA,OAAQA,EAAKE,KAAOH,IACnD,OAAQC,EAAKkrC,SAAS1yC,EAAGwH,EAAKkrC,SAASzkC,GA8BzC,SAASw7C,GAAW/W,EAAUjU,GAC5B,IACIksB,GAAY1gD,SAASyoC,EAAS,IAAKzoC,SAASyoC,EAAS,KAazD,OAAO3R,EAAOtC,GAVVksB,EAAS,GAAK,GAAM,EAClB,EAAaA,EAAS,GAEN,IAAhBA,EAAS,GACP,EARK,GAUJ,EAAI,EAAI9rD,KAAK+rD,IAAID,EAAS,KAAgBA,EAAS,GAV/C,EAaL9rD,KAAKsQ,KAAK,GAAcw7C,EAAS,KAI3C,SAASN,GAA0B1e,GAQjC,IAPA,IAAIkf,EAASC,GAA0Bnf,EAAO,IAC1Cof,EAASD,GAA0Bnf,EAAO,IAC1Cqf,EAAOnsD,KAAKC,IAAI+rD,EAAOr/C,EAAE,GAAIu/C,EAAOv/C,EAAE,IAAM,EAC5Cy/C,EAAOpsD,KAAKI,IAAI4rD,EAAOr/C,EAAE,GAAIu/C,EAAOv/C,EAAE,IAAM,EAC5C0/C,EAAOrsD,KAAKC,IAAI+rD,EAAOhjD,EAAE,GAAIkjD,EAAOljD,EAAE,IAAM,EAC5CsjD,EAAOtsD,KAAKI,IAAI4rD,EAAOhjD,EAAE,GAAIkjD,EAAOljD,EAAE,IAAM,EAC5CiB,KAPqCsiD,EAAA,SAQhC5/C,GACP,IATuC,IAAA6/C,EAAA,SAS9BxjD,QAC6E7K,IAAhF0I,EAAKxJ,UAAUuL,KAAK,SAAAD,GAAA,OAAQA,EAAKkrC,SAAS1yC,IAAMwL,GAAKhE,EAAKkrC,SAASzkC,IAAMpG,KAC3EiB,EAAI5K,KAAQsN,EAAZ,IAAiB3D,IAFZA,EAAIqjD,EAAMrjD,EAAIsjD,EAAO,EAAGtjD,IAAKwjD,EAA7BxjD,IADF2D,EAAIw/C,EAAMx/C,EAAIy/C,EAAO,EAAGz/C,IAAK4/C,EAA7B5/C,GAQT,OAAO1C,EAGT,SAASshD,GAA2BkB,EAAS7sB,GAS3C,IARA,IAAIkR,KAEA4b,IACD,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAC3C,EAAG,IAAK,EAAG,IACX,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAC5BtvD,IAAI8iB,QAEG/e,EAAI,EAAGA,EAAIsrD,EAAQjsD,OAAQW,IAAK,CACvC,IAAIwrD,EAASF,EAAQtrD,GACjByrD,EAAeC,GAAuBF,EAAO5hD,MAAM,KAAK3N,IAAI+K,SAGhE2kD,GAAyBhc,EAAO4b,EADLK,GAAwBH,EAAcH,EAD/CO,GAA4BL,EAAO5hD,MAAM,KAAK3N,IAAI+K,QAASy3B,KAI7E,IAAK,IAAIxwB,EAAI,EAAGA,EAAIw9C,EAAapsD,OAAQ4O,IAAK,CAC5C,IAAI69C,EAAcL,EAAax9C,GAC/B,GAAIq9C,EAAQttD,QAAQ8tD,IAAgB,EAGlCC,GAAgBpc,EAFG8Z,GAAU+B,EAAO5hD,MAAM,KAAK3N,IAAI+K,QAASy3B,GACpCgrB,GAAUqC,EAAYliD,MAAM,KAAK3N,IAAI+K,QAASy3B,KAM5E,OAAO,IAAI7Z,IAAM+qB,GAsEnB,SAAS+b,GAAwBzG,GAC/B,IAAIC,GAAWllD,EAAGilD,EAAI,GAAIh3C,EAAGg3C,EAAI,IAC7B5yB,KACA8yB,SAAIC,SAAIC,SAAIC,SAmBhB,OAlBIJ,EAAOj3C,EAAI,GAAM,GACnBk3C,EAAK,EACLC,EAAMF,EAAOllD,GAAK,EAAK,EAAI,EAC3BqlD,EAAMH,EAAOllD,GAAK,GAAM,EAAI,EAC5BslD,GAAM,IAENH,GAAoB,IAAdD,EAAOllD,EAAY,EAAI,EAC7BolD,EAAMF,EAAOllD,EAAI,EAAK,EAAI,EAC1BqlD,EAAMH,EAAOllD,EAAI,GAAM,EAAI,EAC3BslD,EAAmB,IAAbJ,EAAOllD,GAAY,GAAK,GAGhCqyB,EAAUn0B,MAAMgnD,EAAOllD,EAAImlD,EAAID,EAAOj3C,IACtCokB,EAAUn0B,MAAMgnD,EAAOllD,EAAIolD,EAAIF,EAAOj3C,EAAI,IAC1CokB,EAAUn0B,MAAMgnD,EAAOllD,EAAIqlD,EAAIH,EAAOj3C,EAAI,IAC1CokB,EAAUn0B,MAAMgnD,EAAOllD,EAAIslD,EAAIJ,EAAOj3C,IACtCokB,EAAUn0B,MAAMgnD,EAAOllD,EAAIqlD,EAAIH,EAAOj3C,EAAI,IAC1CokB,EAAUn0B,MAAMgnD,EAAOllD,EAAIolD,EAAIF,EAAOj3C,EAAI,IACnCokB,EAAUp2B,IAAI8iB,QAGvB,SAAS8sC,GAA6B5G,EAAKxmB,GACzC,IAAIjyB,KACAwzB,EAAeypB,GAAUxE,EAAKxmB,GAE9ButB,GADoBvC,IAAWxE,EAAI,GAAK,EAAGA,EAAI,IAAKxmB,GACf,GAAKuB,EAAa,IAAM,EAAInhC,KAAK8O,IAAI9O,KAAK0N,GAAK,GACxFC,EAAO,GAAKwzB,EACZ,IAAK,IAAIhgC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAIwN,GAEFwyB,EAAa,GAAKgsB,EAAkBntD,KAAK8O,KAAK9O,KAAK0N,GAAK,EAAI1N,KAAK0N,GAAK,EAAIvM,GAC1EggC,EAAa,GAAKgsB,EAAkBntD,KAAK+O,KAAK/O,KAAK0N,GAAK,EAAI1N,KAAK0N,GAAK,EAAIvM,IAE5EwM,EAAOtO,KAAKsP,GAEd,OAAOhB,EAGT,SAASo/C,GAAyBH,EAAcH,EAASW,GAGvD,IAFA,IAAIC,EAAuB,IAAI3L,EAAAt4C,EAEtBjI,EAAI,EAAGA,EAAIisD,EAAY5sD,OAAQW,IACtCksD,EAAqBzwB,IAAIz7B,EAAGisD,EAAYjsD,IAE1C,IAAK,IAAIA,EAAI,EAAGA,EAAIyrD,EAAapsD,OAAQW,KACG,IAAtCsrD,EAAQttD,QAAQytD,EAAazrD,MACrB,IAANA,GACFksD,EAAqBviC,OAAO,GAC5BuiC,EAAqBviC,OAAQ3pB,EAAI,KAEjCksD,EAAqBviC,OAAQ3pB,EAAI,GACjCksD,EAAqBviC,OAAQ3pB,EAAI,KAIvC,OAAOksD,EAGT,SAASP,GAA0Bhc,EAAO4b,EAAuBW,GAE/D,IADA,IAAIC,EAAgBtX,IAAWqX,EAAqBpnC,QAC3C9kB,EAAI,EAAGA,EAAImsD,EAAc9sD,OAAQW,IACxC,IAAK,IAAIiO,EAAI,EAAGA,EAAIk+C,EAAc9sD,OAAQ4O,IAAK,CAC7C,IAAI2jC,EAAS7yB,QAAQotC,EAAcnsD,GAAImsD,EAAcl+C,KACrD,GAAIs9C,EAAsBvtD,QAAQ4zC,IAAW,EAAG,CAC9C,IAAIwa,EAASF,EAAqB1iC,IAAI2iC,EAAcnsD,IAChDqsD,EAASH,EAAqB1iC,IAAI2iC,EAAcl+C,IACpD89C,GAAgBpc,EAAOyc,EAAQC,GAC/BN,GAAgBpc,EAAO0c,EAAQD,KAMvC,SAASL,GAAiBpc,EAAO2c,EAAQC,GACvC,IAAIC,EAAYztC,OAAOutC,GACnBG,EAAY1tC,OAAOwtC,GAIvB,GAHK5c,EAAM5qB,eAAeynC,KACxB7c,EAAM6c,QAEH7c,EAAM6c,GAAWznC,eAAe0nC,GAAY,CAC/C,IAAI15C,EAKR,SAAuBu5C,EAAQC,GAC7B,OAAO1tD,KAAKsQ,KAAKtQ,KAAKmvC,IAAKse,EAAO,GAAKC,EAAO,GAAK,GAAK1tD,KAAKmvC,IAAKse,EAAO,GAAKC,EAAO,GAAK,IAN7EG,CAAaJ,EAAQC,GAChC5c,EAAM6c,GAAWC,GAAa15C,GAkBlC,SAASu3C,GAA+B3e,EAAQghB,EAAUluB,GACxD,IAAImuB,EAAalnD,EAAKxJ,UAAUuL,KAAK,SAAAD,GAAA,OAAQA,EAAKE,KAAOikC,IAErDkhB,EAAmBpD,IADFmD,EAAWla,SAAS1yC,EAAG4sD,EAAWla,SAASzkC,GAChBwwB,GAE5CquB,EAAkBrD,GADHkD,EAAS/iD,MAAM,KAAK3N,IAAI+K,QACGy3B,GAC9C,OACEouB,EAAiB,IAAMC,EAAgB,GAAKD,EAAiB,IAAM,EACnEA,EAAiB,IAAMC,EAAgB,GAAKD,EAAiB,IAAM,GAIvE,SAAS/B,GAA2BnsD,GAKlC,IAJA,IAAIs5B,EAAQjxB,OAAOtB,EAAKykD,WAAWxrD,EAAKV,KAAKu7B,iBAAiB,IAC1DuzB,EAAa9uD,KAAKu7B,gBAAgBvB,GAAOye,OACzCsW,KACAC,KAJmCC,EAAA,SAK9BltD,GACP,IAAIwH,EAAO9B,EAAKxJ,UAAUuL,KAAK,SAAAD,GAAA,OAAQA,EAAKE,KAAOqlD,EAAW/sD,KAC9DgtD,EAAK9uD,KAAKsJ,EAAKkrC,SAAS1yC,GACxBitD,EAAK/uD,KAAKsJ,EAAKkrC,SAASzkC,IAHjBjO,EAAI,EAAGA,EAAI+sD,EAAW1tD,OAAQW,IAAKktD,EAAnCltD,GAKT,OACEwL,EAAGhM,GAAG+X,OAAOy1C,GACbnlD,EAAGrI,GAAG+X,OAAO01C,IAIjB,SAAS1C,GAAgB/9C,GAEvB,IADA,IAAI2gD,KACKntD,EAAI,EAAGA,EAAIwM,EAAOnN,OAAS,EAAGW,IAAK,CAC1C,IAAIotD,EAAS5gD,EAAOxM,GAChBqtD,EAAa7gD,EAAOxM,EAAI,GAC5BmtD,EAAiBjvD,OACdkvD,EAAO,GAAIA,EAAO,KAClBC,EAAW,GAAIA,EAAW,MAG7B,IADA,IAAIC,EAAsBH,EAAiB9tD,OAClC4O,EAAIjO,EAAI,EAAGiO,EAAIzB,EAAOnN,OAAS,EAAG4O,IAAK,CAC9CjO,EAAIiO,EAAI,EACItN,KAAKC,MAAMsoB,IAAeikC,EAAiBG,EAAsB,KAChE9gD,EAAOyB,GADpB,IAEIs/C,EAAS/gD,EAAOyB,EAAI,GAYpBu/C,IAAeJ,EAAO,GAAIA,EAAO,KAAMG,EAAO,GAAIA,EAAO,KAC7D,GAAK7nD,EAAK+nD,eAAeD,GAGvB,MAEF,GAJEL,EAAiBG,EAAsB,GAAG,IAAMC,EAAO,GAAIA,EAAO,IAIhEt/C,IAAMzB,EAAOnN,OAAS,EACxB,OAAOquD,GAAYP,IAIzB,OAAOO,GAAYP,GAgBrB,SAASO,GAAaC,GACpB,IAAIC,KACJA,EAAW1vD,KAAXa,MAAA6uD,EAAAvV,IAAmBsV,EAAc,KACjC,IAAK,IAAI3tD,EAAI,EAAGA,EAAI2tD,EAActuD,OAAQW,IACxC4tD,EAAW1vD,KAAKyvD,EAAc3tD,GAAG,IAEnC,OAAO4tD,wCAIGzkB,GACZ,IAAK,IAAInpC,EAAI,EAAGA,EAAImpC,EAAM9pC,OAAS,EAAGW,IAAK,CAGzC,GAFegH,OAAOjL,KAAKouD,WAAWhhB,EAAMnpC,GAAI/B,KAAKu7B,iBAAiB,MACvDxyB,OAAOjL,KAAKouD,WAAWhhB,EAAMnpC,EAAI,GAAI/B,KAAKu7B,iBAAiB,IAExE,OAAQ2P,EAAMnpC,GAAImpC,EAAMnpC,EAAI,yCAKrB8H,EAAKjM,GAChB,IAAI+tD,KACA5pD,SAEJ,IAAIA,EAAI,EAAGA,EAAI8H,EAAIzI,OAAQW,IACrB8H,EAAI9H,KAAOnE,GACb+tD,EAAQ1rD,KAAK8B,GAIjB,OAAO4pD,4CA4DP,IAJiB,IAAAjjD,EAAA5K,KACb8xD,KAEE/kB,EAAO/sC,KAAK+sC,KACT9oC,EAAI,EAAGA,EAAI8oC,EAAKzpC,OAAQW,IAC/B,IADoC,IAAA8tD,EAAA,SAC3B7/C,GAEP,IADA,IAAI8/C,KACK5nD,EAAI,EAAGA,EAAI2iC,EAAK9oC,GAAGX,OAAQ8G,IAElC,IADA,IAAM6nD,EAAOllB,EAAK9oC,GAAGmG,GACZ8nD,EAAI,EAAGA,EAAInlB,EAAK76B,GAAG5O,OAAQ4uD,IAAK,CACvC,IAAMC,EAAOplB,EAAK76B,GAAGggD,GACrBF,GAAUC,EAAME,IAASvnD,EAAKwnD,wBAAwBH,EAAME,GAGhE,IAAME,EAAoB7iC,IAAYwiC,GAAU/lD,KAAK,SAAUC,EAAGC,GAAK,OAAO6lD,EAAS9lD,GAAK8lD,EAAS7lD,KACrG2lD,GAAM7tD,EAAGiO,IAAMmgD,EAAkB3nD,MAAM,EAAGE,EAAK06C,IAAIplD,IAAI,SAAAgE,GAAA,OAAQA,EAAK2J,MAAM,KAAK3N,IAAI+K,WAV5EiH,EAAIjO,EAAI,EAAGiO,EAAI66B,EAAKzpC,OAAQ4O,IAAK6/C,EAAjC7/C,GAcX,OAAO4/C,kDAGgBQ,EAAMC,GAC7B,IAAMC,EAAUxyD,KAAKyyD,kBAAkBH,GACjCI,EAAU1yD,KAAKyyD,kBAAkBF,GAEvC,OAAOzvD,KAAKsQ,KAAKtQ,KAAKmvC,IAAIugB,EAAQ,GAAKE,EAAQ,GAAI,GAAK5vD,KAAKmvC,IAAIugB,EAAQ,GAAKE,EAAQ,GAAI,8CAGzE9vD,GACjB,IAAM6I,EAAOzL,KAAKG,UAAUuL,KAAK,SAAAD,GAAA,OAAQA,EAAKE,KAAO/I,IACrD,OACE5C,KAAK0iC,WAAWjzB,EAAEhE,EAAKG,OAAOC,YAAY4D,GAC1CzP,KAAK0iC,WAAW52B,EAAEL,EAAKG,OAAOC,YAAYC,kDAIvBgmD,GACrB,IAAI/kB,KADuB4lB,GAAA,EAAAC,GAAA,EAAAC,OAAA5xD,EAAA,IAG3B,QAAA6xD,EAAAC,EAAA7O,IAAsBqD,IAAcuK,MAApCa,GAAAG,EAAAC,EAAAnxD,QAAAC,MAAA8wD,GAAA,EAA2C,KAAhCK,EAAgCF,EAAA/wD,MAAAkxD,GAAA,EAAAC,GAAA,EAAAC,OAAAlyD,EAAA,IACzC,QAAAmyD,EAAAC,EAAAnP,IAAsB8O,KAAtBC,GAAAG,EAAAC,EAAAzxD,QAAAC,MAAAoxD,GAAA,EAA+B,KAApBK,EAAoBF,EAAArxD,MAC7BgrC,EAAK5qC,KAALa,MAAA+pC,EAAAuP,IAAagX,KAF0B,MAAAlxD,GAAA8wD,GAAA,EAAAC,EAAA/wD,EAAA,aAAA6wD,GAAAI,EAAAhxD,QAAAgxD,EAAAhxD,SAAA,WAAA6wD,EAAA,MAAAC,KAHhB,MAAA/wD,GAAAwwD,GAAA,EAAAC,EAAAzwD,EAAA,aAAAuwD,GAAAI,EAAA1wD,QAAA0wD,EAAA1wD,SAAA,WAAAuwD,EAAA,MAAAC,GAS3B,OAAO/Z,IAAW,IAAI+B,EAAA3uC,EAAI6gC,oDAGHA,GAAM,IAAAx/B,EAAAvN,KACzBirD,KADyBsI,EAAA,SAGlB9N,GACT,IAAM+N,EAAQvoD,OAAOsC,EAAK6gD,WAAW3I,EAAKvjD,KAAKu7B,iBAAiB,IAC1Dg2B,EAAsBlmD,EAAK86C,oBAAoBmL,GACjDxB,KANuB0B,GAAA,EAAAC,GAAA,EAAAC,OAAA3yD,EAAA,IAO3B,QAAA4yD,EAAAC,EAAA5P,IAAkBuP,KAAlBC,GAAAG,EAAAC,EAAAlyD,QAAAC,MAAA6xD,GAAA,EAAuC,KAA5B9wD,EAA4BixD,EAAA9xD,MACrCiwD,EAASpvD,GAAO2K,EAAK6kD,wBAAwB3M,EAAK7iD,IARzB,MAAAR,GAAAuxD,GAAA,EAAAC,EAAAxxD,EAAA,aAAAsxD,GAAAI,EAAAzxD,QAAAyxD,EAAAzxD,SAAA,WAAAsxD,EAAA,MAAAC,GAU3B,IAAMG,EAAiBvkC,IAAYwiC,GAAU/lD,KAAK,SAAUC,EAAGC,GAAK,OAAO6lD,EAAS9lD,GAAK8lD,EAAS7lD,KAClG8+C,EAAuBxF,GAAOsO,EAAerpD,MAAM,EAAG6C,EAAKg4C,IAAIrlD,IAAI+K,SAXxC+oD,GAAA,EAAAC,GAAA,EAAAC,OAAAjzD,EAAA,IAG7B,QAAAkzD,EAAAC,EAAAlQ,IAAkBnX,KAAlBinB,GAAAG,EAAAC,EAAAxyD,QAAAC,MAAAmyD,GAAA,EAAwB,CAAAT,EAAAY,EAAApyD,QAHK,MAAAK,GAAA6xD,GAAA,EAAAC,EAAA9xD,EAAA,aAAA4xD,GAAAI,EAAA/xD,QAAA+xD,EAAA/xD,SAAA,WAAA4xD,EAAA,MAAAC,GAc7B,OAAOjJ,0CAGQ,IAAAhgB,EAAAjrC,KACXq0D,KADWC,GAAA,EAAAC,GAAA,EAAAC,OAAAvzD,EAAA,IAGf,QAAAwzD,EAAAC,EAAAxQ,IAAqBlkD,KAAKwlD,OAA1B8O,GAAAG,EAAAC,EAAA9yD,QAAAC,MAAAyyD,GAAA,EAA+B,KAApBhN,EAAoBmN,EAAA1yD,MACzB4yD,KADyBC,EAAA,SAEpBhyD,GACP,IAAI6I,EAAOw/B,EAAK9qC,UAAUuL,KAAK,SAAAD,GAAA,OAAQA,EAAKE,KAAO/I,IAC/C4zC,EAAoBsC,IAAWrtC,EAAK6qB,UAAUh2B,UAJvBu0D,EAAA,SAKlB7L,GAEP,QAAqB/nD,IADFgqC,EAAK9qC,UAAUuL,KAAK,SAAAD,GAAA,OAAQ0hB,IAAeo6B,IAAc97C,EAAKkrC,aAAexpB,IAAe67B,KAG7G,OADA2L,EAAgBxyD,KAAKS,GACrB,YATuBkyD,GAAA,EAAAC,GAAA,EAAAC,OAAA/zD,EAAA,IAK3B,QAAAg0D,EAAAC,EAAAhR,IAA6B1N,KAA7Bse,GAAAG,EAAAC,EAAAtzD,QAAAC,MAAAizD,GAAA,EAAgDD,EAAAI,EAAAlzD,OALrB,MAAAK,GAAA2yD,GAAA,EAAAC,EAAA5yD,EAAA,aAAA0yD,GAAAI,EAAA7yD,QAAA6yD,EAAA7yD,SAAA,WAAA0yD,EAAA,MAAAC,KAAAG,GAAA,EAAAC,GAAA,EAAAC,OAAAp0D,EAAA,IAE7B,QAAAq0D,EAAAC,EAAArR,IAAgBoD,KAAhB6N,GAAAG,EAAAC,EAAA3zD,QAAAC,MAAAszD,GAAA,EAAwB,CAAAP,EAAAU,EAAAvzD,QAFK,MAAAK,GAAAgzD,GAAA,EAAAC,EAAAjzD,EAAA,aAAA+yD,GAAAI,EAAAlzD,QAAAkzD,EAAAlzD,SAAA,WAAA+yD,EAAA,MAAAC,GAa7BV,EAAkBA,EAAgBz0D,IAAhBitB,EAAAjhB,GAAoCoe,UAAUtc,OAAO,SAAU6c,EAAG5mB,EAAGiI,GACrF,OAAgC,IAAzBA,EAAEjK,QAAQ4oB,EAAG5mB,EAAI,KACvBqmB,UAAUpqB,IAAI0E,KAAKC,OACtBwvD,EAAalyD,KAAKwyD,IAnBL,MAAAvyD,GAAAmyD,GAAA,EAAAC,EAAApyD,EAAA,aAAAkyD,GAAAI,EAAAryD,QAAAqyD,EAAAryD,SAAA,WAAAkyD,EAAA,MAAAC,GAsBf,OAAOH,kDAIP,IAAImB,KADmBC,GAAA,EAAAC,GAAA,EAAAC,OAAA10D,EAAA,IAGvB,QAAA20D,EAAAC,EAAA3R,IAAkClkD,KAAKqoD,uBAAvCoN,GAAAG,EAAAC,EAAAj0D,QAAAC,MAAA4zD,GAAA,EAA4D,KAAjDhC,EAAiDmC,EAAA7zD,MACtD+zD,KADsDC,GAAA,EAAAC,GAAA,EAAAC,OAAAh1D,EAAA,IAE1D,QAAAi1D,EAAAC,EAAAjS,IAAkBuP,KAAlBsC,GAAAG,EAAAC,EAAAv0D,QAAAC,MAAAk0D,GAAA,EAAuC,KAA5BnzD,EAA4BszD,EAAAn0D,MACrC+zD,EAAoB3zD,KAAKnC,KAAKo2D,QAAQxzD,KAHkB,MAAAR,GAAA4zD,GAAA,EAAAC,EAAA7zD,EAAA,aAAA2zD,GAAAI,EAAA9zD,QAAA8zD,EAAA9zD,SAAA,WAAA2zD,EAAA,MAAAC,GAK1DT,EAAarzD,KAAK2zD,IARG,MAAA1zD,GAAAszD,GAAA,EAAAC,EAAAvzD,EAAA,aAAAqzD,GAAAI,EAAAxzD,QAAAwzD,EAAAxzD,SAAA,WAAAqzD,EAAA,MAAAC,GAWvB,OAAOH,kCAGAhqD,GACP,IAAMC,EAAOzL,KAAKG,UAAUuL,KAAK,SAAAD,GAAA,OAAQA,EAAKE,KAAOH,IACrD,OAAQC,EAAKkrC,SAAS1yC,EAAGwH,EAAKkrC,SAASzkC,2CAIxBo7C,GACf,IAAMte,EAAUse,EAAY,GACtBza,EAAUya,EAAY,GAEtB+I,EAAa9O,IAAcvnD,KAAKG,UAAUuL,KAAK,SAAAD,GAAA,OAAQA,EAAKE,KAAOqjC,IAAS2H,UAC5E2f,EAAa/O,IAAcvnD,KAAKG,UAAUuL,KAAK,SAAAD,GAAA,OAAQA,EAAKE,KAAOknC,IAAS8D,UAE9E/C,EAAQ5zC,KAAKu2D,WAAWv2D,KAAK+pD,cAAc7pD,KAE/C,IAAK,IAAIyV,KAAOi+B,EAAM5wB,OAAOszC,IAC3B1iB,EAAMj+B,GAAKqN,OAAOszC,IAAe1iB,EAAM5wB,OAAOszC,IAAa3gD,GAI7D,IAAMy3B,GADNwG,EAAQ,IAAI/qB,IAAM+qB,IACErpB,iBAAiBvH,OAAOqzC,GAAarzC,OAAOszC,IAGhE,OAFmBlpB,EAAM,GAAGv/B,MAAM,KAAK3N,IAAI+K,QAASmiC,EAAMA,EAAM9pC,OAAS,GAAGuK,MAAM,KAAK3N,IAAI+K,wCAKrFo+C,EAAImN,EAAIlN,EAAImN,GAClB,IAAI1/C,EAAQjU,KAAKuwB,MAAMojC,EAAKD,EAAIlN,EAAKD,GAKrC,OAJAtyC,GAAS,IAAMjU,KAAK0N,IACR,IACVuG,GAAS,KAEJA,wDAGsBtL,GAC7B,IAAM+qC,EAAoBsC,IAAWrtC,EAAK6qB,UAAUh2B,UAChDo2D,KAF+BC,GAAA,EAAAC,GAAA,EAAAC,OAAA51D,EAAA,IAInC,QAAA61D,EAAAC,EAAA7S,IAA6B1N,KAA7BmgB,GAAAG,EAAAC,EAAAn1D,QAAAC,MAAA80D,GAAA,EAAgD,KAAvC3N,EAAuC8N,EAAA/0D,MAC1C/B,KAAKgoD,sBAAsBhoD,KAAK8nD,eAAgBkB,IAClD0N,EAAuBv0D,KAAK6mD,IANG,MAAA5mD,GAAAw0D,GAAA,EAAAC,EAAAz0D,EAAA,aAAAu0D,GAAAI,EAAA10D,QAAA00D,EAAA10D,SAAA,WAAAu0D,EAAA,MAAAC,GAUnC,OAAOH,qCAGGjzB,EAAeC,EAAUC,GAEnC,QADoB1iC,GAAhB0iC,IAA2BA,EAAe,IAC1Cl2B,MAAMkwB,QAAQ+F,IAChB,IAAK,IAAIz/B,EAAI,EAAGA,EAAIy/B,EAASpgC,OAAQW,IACnC,GAAIwJ,MAAMkwB,QAAQ+F,EAASz/B,IAAK,CAC9B,IAAI2/B,EAAW5jC,KAAKouD,WAAW3qB,EAAeC,EAASz/B,GAAI0/B,EAAe1/B,EAAI,KAC9E,GAAI2/B,EAAU,OAAOA,OAChB,GAAIF,EAASz/B,IAAMw/B,EACxB,OAAOE,EAAe1/B,OAGrB,GAAIy/B,GAAYD,EACrB,OAAOE,EAAe1/B,EAExB,OAAO,gDAGc8H,EAAKirD,GAC1B,IAAK,IAAI/yD,EAAI,EAAGA,EAAI8H,EAAIzI,OAAQW,IAAK,CAEnC,IADA,IAAIgzD,GAAU,EACL/kD,EAAI,EAAGA,EAAInG,EAAI9H,GAAGX,OAAQ4O,IAAK,CACtC,GAAInG,EAAI9H,GAAGiO,KAAO8kD,EAAO9kD,GAElB,CACL+kD,GAAU,EACV,MAHAA,GAAU,EAMd,GAAIA,EACF,OAAO,EAGX,OAAO,iDAGeC,EAAMC,GAK5B,OAAID,EAAK,KAAOC,EAAK,GACZ,EAEA,oDAQgBD,EAAMC,GAC/B,IAAIvjB,EAAQ5zC,KAAKu2D,WAAWv2D,KAAK+pD,cAAc7pD,KAE/C,IAAK,IAAIyV,KAAOi+B,EAAM5wB,OAAOm0C,IAC3BvjB,EAAMj+B,GAAKqN,OAAOm0C,IAASvjB,EAAM5wB,OAAOm0C,IAAOxhD,GAIjD,IAAMy3B,GADNwG,EAAQ,IAAI/qB,IAAM+qB,IACErpB,iBAAiBvH,OAAOk0C,GAAOl0C,OAAOm0C,IAEtDngD,EAAOsS,IAKX,OAJc,OAAV8jB,IACFp2B,EAAOhX,KAAKo3D,oBAAoBxjB,EAAOxG,IAGlCp2B,8CAGY48B,EAAOxG,GAG1B,IAFA,IAAIp2B,EAAO,EAEF/S,EAAI,EAAGA,EAAImpC,EAAM9pC,OAAS,EAAGW,IACpC+S,GAAQ48B,EAAM1zC,IAAIktC,EAAMnpC,IAAImpC,EAAMnpC,EAAI,IAGxC,OAAO+S,qCAGG5K,GACV,IAAIW,KACJ,IAAK,IAAI4I,KAAOvJ,EAEd,IAAK,IAAIqiD,KADT1hD,EAAI4I,MACavJ,EAAIuJ,GACnB5I,EAAI4I,GAAK84C,GAAQriD,EAAIuJ,GAAK84C,GAG9B,OAAO1hD,sDAGoBsqD,EAAUC,GAUrC,IATA,IAAM1jB,EAAQ5zC,KAAKgqD,YAAYqN,EAAUC,IAGnCC,EAFOv3D,KAEM+sC,KAAKsqB,GAClBG,EAHOx3D,KAGM+sC,KAAKuqB,GACpBG,SACAC,EAAU,MACVC,EAAW,MAEN1zD,EAAI,EAAGA,EAAIszD,EAAMj0D,OAAQW,IAEhC,IADA,IAAMguD,EAAOsF,EAAMtzD,GACViO,EAAI,EAAGA,EAAIslD,EAAMl0D,OAAQ4O,IAAK,CACrC,IAAMigD,EAAOqF,EAAMtlD,GACbk7B,EAAQwG,EAAMrpB,iBAAiB0nC,EAAME,IAC3CwF,EAAW33D,KAAKo3D,oBAAoBxjB,EAAOxG,IAC5BsqB,IACbA,EAAUC,EACVF,EAAW7yD,KAAKC,MAAMsoB,IAAeigB,IAAQltC,IAAI+K,SAKvD,OAASmiC,MAAOqqB,EAAUzgD,KAAM0gD,wCAGpBh1B,GAEZ,IAFwB,IAAAsc,EAAAh/C,KAClB2J,EAAO3J,KACJiE,EAAI,EAAGA,EAAIjE,KAAKiuC,UAAU3qC,OAAQW,IACzC,IAAK,IAAIiO,EAAI,EAAGA,EAAIlS,KAAK4vC,OAAOtsC,OAAQ4O,IAClCjH,OAAOjL,KAAKouD,WAAWpuD,KAAK4vC,OAAO19B,GAAIhQ,KAAKu7B,iBAAiB,MAAQx5B,GAAG,WAE1E,IAAI2zD,EAAaC,EAAc5zD,EAAG+6C,EAAKpP,OAAO19B,IAE1Cw1C,SAEFA,EADEkQ,IAAe5Y,EAAKpP,OAAO19B,IAChB0lD,EAAYA,GAEb5Y,EAAKqI,UAAUpjD,GAAGsmB,iBAAiBqtC,EAAY5Y,EAAKpP,OAAO19B,IAAIhS,IAAI+K,QAEjF,IAAI6sD,KAEJ9Y,EAAK/Q,UAAUhqC,IAAI2zD,EAAY5Y,EAAKpP,OAAO19B,KAAOw1C,EAClD,IAb0E,IAAAqQ,EAAA,SAajE7hC,GACP,IAAIzqB,EAAOuzC,EAAK7+C,UAAUuL,KAAK,SAAAD,GAAA,OAAQA,EAAKE,KAAO+7C,EAAUxxB,KACzDk3B,EAAa1qB,EAAWjzB,EAAEhE,EAAKG,OAAOC,YAAY4D,GAClD49C,EAAa3qB,EAAW52B,EAAEL,EAAKG,OAAOC,YAAYC,GACtDgsD,EAAW31D,MACTsN,EAAG29C,EACHthD,EAAGuhD,IAEDn3B,IAAMwxB,EAAUpkD,OAAS,GAC3Bw0D,EAAW31D,MACTsN,EAAG29C,GAAcpO,EAAKmL,aAAaj4C,GAAG,GAAKk7C,GAAc,EACzDthD,EAAGuhD,GAAcrO,EAAKmL,aAAaj4C,GAAG,GAAKm7C,GAAc,KAXtDn3B,EAAI,EAAGA,EAAIwxB,EAAUpkD,OAAQ4yB,IAAK6hC,EAAlC7hC,GAeT8oB,EAAK7Q,gBAAgBlqC,GAAG9B,KAAK21D,GA5B6C,GAiChF,SAASD,EAAeG,EAASC,GAM/B,IALA,IAAIlrB,EAAOpjC,EAAKojC,KAAKirB,GACjBE,EAAU5L,EAAU2L,GACpBP,EAAU,MACVC,EAAW,MACXC,SACK3zD,EAAI,EAAGA,EAAI8oC,EAAKzpC,OAAQW,IAAK,CACpC,IAAIwhD,EAAM1Y,EAAK9oC,IAEf0zD,EAAWQ,EADE7L,EAAU7G,GACUyS,IAClBR,IACbA,EAAUC,EACVC,EAAanS,GAGjB,OAAOmS,EAGT,SAAStL,EAAW9gD,GAClB,IAAIC,EAAO9B,EAAKxJ,UAAUuL,KAAK,SAAAD,GAAA,OAAQA,EAAKE,KAAOH,IACnD,OAAQC,EAAKkrC,SAAS1yC,EAAGwH,EAAKkrC,SAASzkC,GAGzC,SAASimD,EAAejB,EAAMC,GAE5B,IADA,IAAIngD,EAAO,EACF/S,EAAI,EAAGA,EAAIizD,EAAK5zD,OAAQW,IAC/B+S,GAAQlU,KAAK+rD,IAAIqI,EAAKjzD,GAAKkzD,EAAKlzD,IAElC,OAAO+S,4CAOT,IAAMrN,EAAO3J,KACbA,KAAKo4D,qBACLp4D,KAAKq4D,2BACL,IAAK,IAAIp0D,EAAI,EAAGA,EAAIjE,KAAKiuC,UAAU3qC,OAAQW,IAAK,CAC9CjE,KAAKo4D,kBAAkBn0D,MACvBjE,KAAKq4D,wBAAwBp0D,MAE7B,IADA,IAAIq0D,EAAS/Q,IAAcvnD,KAAKiuC,UAAUhqC,IACjCiO,EAAI,EAAGA,EAAIomD,EAAOh1D,OAAQ4O,IAAK,CACtC,IAAIk7B,EAAQkrB,EAAOpmD,GACfzB,EAASzQ,KAAKmuC,gBAAgBlqC,GAAGiO,GACrClS,KAAKo4D,kBAAkBn0D,GAAKjE,KAAKo4D,kBAAkBn0D,GAAG6Y,OAAOy7C,EAAWnrB,IACxEptC,KAAKq4D,wBAAwBp0D,GAAKjE,KAAKq4D,wBAAwBp0D,GAAG6Y,OAAO07C,EAAiBprB,EAAO38B,IAEnGgoD,EAAqBz4D,KAAKo4D,kBAAkBn0D,GAAIjE,KAAKq4D,wBAAwBp0D,IAG/E,SAASs0D,EAAYnrB,GAEnB,IADA,IAAIsrB,KACKz0D,EAAI,EAAGA,EAAImpC,EAAM9pC,OAAS,EAAGW,IACpCy0D,EAAcv2D,MAAMirC,EAAMnpC,GAAImpC,EAAMnpC,EAAI,KAE1C,OAAOy0D,EAGT,SAASF,EAAkBprB,EAAO38B,GAEhC,IADA,IAAIkoD,KACK10D,EAAI,EAAGA,EAAImpC,EAAM9pC,OAAS,EAAGW,IAC/B0F,EAAKimC,OAAO3tC,QAAQmrC,EAAMnpC,EAAI,KAAO,QAAyBhD,IAAlBwP,EAAOxM,EAAI,GAC1D00D,EAAoBx2D,MAAMsO,EAAOxM,GAAIwM,EAAOxM,EAAI,GAAIwM,EAAOxM,EAAI,KAE/D00D,EAAoBx2D,MAAMsO,EAAOxM,GAAIwM,EAAOxM,EAAI,KAGpD,OAAO00D,EAGT,SAASF,EAAsBC,EAAeE,GAE5C,IADA,IAAIC,KACI50D,EAAI,EAAGA,EAAIy0D,EAAcp1D,OAAQW,IACvC,IAAI,IAAIiO,EAAIjO,EAAI,EAAGiO,EAAIwmD,EAAcp1D,QAChCo1D,EAAcz0D,GAAG,IAAMy0D,EAAcxmD,GAAG,IAAMwmD,EAAcz0D,GAAG,IAAMy0D,EAAcxmD,GAAG,IAEvFwmD,EAAcpmC,OAAOpgB,EAAG,GACxB2mD,EAAe12D,KAAK+P,IAIpBA,IAIN,IAAK,IAAIjO,EAAI,EAAGA,EAAI40D,EAAev1D,OAAQW,IACzC20D,EAAetmC,OAAOumC,EAAe50D,GAAI,2CAKhCuL,GAEb,IADA,IAAIspD,EAAY/S,IAAUv2C,KAAKA,EAAKmrC,QAC3B12C,EAAI,EAAGA,EAAIjE,KAAK6lD,OAAOviD,OAAQW,IAAK,CAE3C,GADoB80D,IAAarpD,UAAU1P,KAAK6lD,OAAO5hD,GAAI60D,GACzCpvB,OAAOpmC,OAAS,EAChC,OAAO,EAGX,OAAO,6CAMPtD,KAAKg5D,qBACLh5D,KAAKi5D,2BACL,IAAK,IAAIh1D,EAAI,EAAGA,EAAIjE,KAAKo4D,kBAAkB90D,OAAQW,IAAK,CACtDjE,KAAKg5D,kBAAkB/0D,MACvBjE,KAAKi5D,wBAAwBh1D,MAK7B,IAJA,IAAIq0D,EAASt4D,KAAKo4D,kBAAkBn0D,GAChCi1D,EAAiBl5D,KAAKq4D,wBAAwBp0D,GAC9Ck1D,EAAgBv0D,KAAKC,MAAMsoB,IAAemrC,EAAO,KACjDc,EAAsBx0D,KAAKC,MAAMsoB,IAAe+rC,EAAe,KAC1DhnD,EAAI,EAAGA,EAAIomD,EAAOh1D,OAAS,EAAG4O,IAAK,CAC1C,IAAImnD,EAAaH,EAAehnD,EAAI,GACpC,GAAIomD,EAAOpmD,GAAG,KAAOomD,EAAOpmD,EAAI,GAAG,GAAI,CACrCinD,EAAch3D,KAAKm2D,EAAOpmD,EAAI,GAAG,IACjC,IAAK,IAAIgkB,EAAI,EAAGA,EAAImjC,EAAW/1D,OAAQ4yB,IACrCkjC,EAAoBj3D,KAAKk3D,EAAWnjC,SAEjC,GAAIoiC,EAAOpmD,GAAG,KAAOomD,EAAOpmD,EAAI,GAAG,GAAI,CAC5CinD,EAAcvsD,QAAQ0rD,EAAOpmD,EAAI,GAAG,IACpC,IAAK,IAAIgkB,EAAImjC,EAAW/1D,OAAS,EAAG4yB,GAAK,EAAGA,IAC1CkjC,EAAoBxsD,QAAQysD,EAAWnjC,SAGzCl2B,KAAKg5D,kBAAkB/0D,GAAG9B,KAAKg3D,GAC/Bn5D,KAAKi5D,wBAAwBh1D,GAAG9B,KAAKi3D,GACrCD,EAAgBv0D,KAAKC,MAAMsoB,IAAemrC,EAAOpmD,EAAI,KACrDknD,EAAsBx0D,KAAKC,MAAMsoB,IAAeksC,IAMpD,GAHAr5D,KAAKg5D,kBAAkB/0D,GAAG9B,KAAKg3D,GAC/Bn5D,KAAKi5D,wBAAwBh1D,GAAG9B,KAAKi3D,GAEjCp5D,KAAKg5D,kBAAkB/0D,GAAGX,OAAS,EACrC,IAAK,IAAI4O,EAAI,EAAGA,EAAIlS,KAAKg5D,kBAAkB/0D,GAAGX,OAAQ4O,IACpD,IAAK,IAAIgkB,EAAIhkB,EAAI,EAAGgkB,EAAIl2B,KAAKg5D,kBAAkB/0D,GAAGX,QAAU,CAC1D,IAAIg2D,EAAYt5D,KAAKg5D,kBAAkB/0D,GAAGiO,GAAG5O,OACzCi2D,EAAYv5D,KAAKg5D,kBAAkB/0D,GAAGiyB,GAAG5yB,OACzCtD,KAAKg5D,kBAAkB/0D,GAAGiO,GAAG,KAAOlS,KAAKg5D,kBAAkB/0D,GAAGiyB,GAAG,IAEnEsjC,EAAcx5D,KAAKg5D,kBAAkB/0D,GAAIiO,EAAGgkB,GAAG,EAAM,SACrDsjC,EAAcx5D,KAAKi5D,wBAAwBh1D,GAAIiO,EAAGgkB,GAAG,EAAM,UAClDl2B,KAAKg5D,kBAAkB/0D,GAAGiO,GAAG,KAAOlS,KAAKg5D,kBAAkB/0D,GAAGiyB,GAAGqjC,EAAY,IAEtFC,EAAcx5D,KAAKg5D,kBAAkB/0D,GAAIiO,EAAGgkB,GAAG,EAAO,SACtDsjC,EAAcx5D,KAAKi5D,wBAAwBh1D,GAAIiO,EAAGgkB,GAAG,EAAO,UACnDl2B,KAAKg5D,kBAAkB/0D,GAAGiO,GAAGonD,EAAY,KAAOt5D,KAAKg5D,kBAAkB/0D,GAAGiyB,GAAG,IAEtFsjC,EAAcx5D,KAAKg5D,kBAAkB/0D,GAAIiO,EAAGgkB,GAAG,EAAO,OACtDsjC,EAAcx5D,KAAKi5D,wBAAwBh1D,GAAIiO,EAAGgkB,GAAG,EAAO,QACnDl2B,KAAKg5D,kBAAkB/0D,GAAGiO,GAAGonD,EAAY,KAAOt5D,KAAKg5D,kBAAkB/0D,GAAGiyB,GAAGqjC,EAAY,IAElGC,EAAcx5D,KAAKg5D,kBAAkB/0D,GAAIiO,EAAGgkB,GAAG,EAAM,OACrDsjC,EAAcx5D,KAAKi5D,wBAAwBh1D,GAAIiO,EAAGgkB,GAAG,EAAM,QAE3DA,KAOV,SAASsjC,EAAeztD,EAAK0tD,EAAWC,EAAWpvC,EAASqvC,GAC1D,IAAIC,EAAY7tD,EAAIumB,OAAOonC,EAAW,GAAG,GACrCpvC,GACFsvC,EAAUtvC,UAEA,UAARqvC,GACF5tD,EAAI0tD,GAAWnnC,OAAO,EAAG,GACzBvmB,EAAI0tD,GAAaG,EAAU98C,OAAO/Q,EAAI0tD,KACrB,QAARE,IACT5tD,EAAI0tD,GAAWnnC,OAAOvmB,EAAI0tD,GAAWn2D,OAAS,EAAG,GACjDyI,EAAI0tD,GAAa1tD,EAAI0tD,GAAW38C,OAAO88C,gDAM3C55D,KAAK6wC,cAAgB,IAAI2T,EAAAt4C,EACzB,IAAK,IAAIjI,EAAI,EAAGA,EAAIjE,KAAKo4D,kBAAkB90D,OAAQW,IAGjD,IAFA,IAAIq0D,EAASt4D,KAAKo4D,kBAAkBn0D,GAChCi1D,EAAiBl5D,KAAKq4D,wBAAwBp0D,GACzCiO,EAAI,EAAGA,EAAIomD,EAAOh1D,OAAQ4O,IAAK,CACtC,IAAIk7B,EAAQkrB,EAAOpmD,GACfzB,EAASyoD,EAAehnD,GAC5BlS,KAAK6wC,cAAcnR,IAAI0N,EAAM,GAAI38B,EAAO,IACpCzQ,KAAK4vC,OAAO3tC,QAAQmrC,EAAM,KAAO,EACnCptC,KAAK6wC,cAAcnR,IAAI0N,EAAM,IAAK38B,EAAO,GAAIA,EAAO,KAEpDzQ,KAAK6wC,cAAcnR,IAAI0N,EAAM,GAAI38B,EAAO,kCAM1CmF,GACJ5V,KAAK6mB,cAAcjR,GAEnB5V,KAAK8mB,aAAalR,yCAGLA,GACb,IAAMjM,EAAO3J,KACPwP,EAAO/L,GAAG+L,OACbC,EAAE,SAAAxF,GAAA,OAAKA,EAAEwF,IACT3D,EAAE,SAAA7B,GAAA,OAAKA,EAAE6B,IACZ8J,EAAIrR,UAAU,iBAGXlG,KAAK2B,KAAKg5D,mBACVhvD,QACAd,OAAO,KACPC,KAAK,QAAS,gBACdA,KAAK,KAAM,SAACc,EAAGhG,GAAJ,qBAAyBA,IACpCO,KAEH,SAAoB4F,EAAGC,GACb5G,GAAGC,OAAO1D,MAChBuE,UAAU,cAGTlG,KAAKsL,EAAKsvD,wBAAwB5uD,IAClCL,QACAd,OAAO,QACPC,KAAK,QAAS,aAGdA,KAAK,KAAM,SAACc,EAAGhG,GAAJ,kBAAsBoG,EAAtB,IAA6BpG,IACxCkF,KAAK,IAAKqG,wCAILoG,GACV,IAAMjM,EAAO3J,KACb4V,EACG1M,OAAO,KACPC,KAAK,QAAS,aACd5E,UAAU,WAEVlG,KAAK2B,KAAKmqD,cACVngD,QACAd,OAAO,KACPC,KAAK,QAAS,UAEdA,KAAK,YAAa,SAAAc,GAAA,mBAAkBA,EAAlB,UAA6BN,EAAK+8C,gBAAlC,MAClBriD,MAAM,UAAW,GACjB6E,OAAO,QACPC,KAAK,IAAKnJ,KAAKymD,YAElB,IAAIngC,EAAQ1Q,EAAIlS,OAAO,WAAW+H,OAAOyE,wBAEzC0F,EAAIlS,OAAO,cAAca,UAAU,WAChC4E,KAAK,YAAa,WACjB,OAIJ,SAA6Bod,EAAYD,GACvC,IAAIE,EAAgB7c,EAAK2qB,aAAa/N,GAClC0wB,EAAkB1kB,kBAAkB9uB,GAAGC,OAAO,WAAWyF,KAAK,cAElE,oBADoBqd,EAAc,GAAKF,EAAMlhB,MAAQ,EAAI6xC,EAAgBtkB,OAAQnM,EAAc,GAAKF,EAAMhhB,OAAS,EAAI2xC,EAAgBrkB,QACvI,UAA0CjpB,EAAK+8C,gBAA/C,IARSjgC,CAAmBhjB,GAAGC,OAAO1D,MAAOsmB,KAE5CjiB,MAAM,UAAW,wCAURuR,GAAK,IAAAikD,EAAA75D,KAGXwP,EAAO/L,GAAG+L,OACbC,EAAE,SAAAxF,GAAA,OAAKA,EAAE,KACT6B,EAAE,SAAA7B,GAAA,OAAKA,EAAE,KACT6vD,MAAMr2D,GAAGs2D,gBAAgBC,MAAM,IAClCpkD,EAAI1M,OAAO,KACRC,KAAK,QAAS,eACd5E,UAAU,aACVlG,KAAK2B,KAAKuqD,gBACVvgD,QACAd,OAAO,QACPC,KAAK,QAAS,YAEdA,KAAK,KAAM,SAACc,EAAGhG,GAAJ,OAAU41D,EAAK/mB,WAAW7uC,KACrCkF,KAAK,KAAM,SAACc,EAAGhG,GAAJ,iBAAqBA,IAChCkF,KAAK,IAAKqG,kDAyBSoG,EAAKo/B,GAC3B,IAAMxlC,EAAO/L,GAAG+L,OACbC,EAAE,SAAAxF,GAAA,OAAKA,EAAEwF,IACT3D,EAAE,SAAA7B,GAAA,OAAKA,EAAE6B,IACZ8J,EAAIrR,UAAU,wBACXlG,KAAK22C,GACLhrC,QACAd,OAAO,QACPC,KAAK,QAAS,uBACdA,KAAK,IAAKqG,GACVnL,MAAM,aAAc,yDAGDuR,GACtBA,EAAIrR,UAAU,wBACXF,MAAM,aAAc,gDAGX0hB,GACZ,IAAIyM,EAAYzM,EAAE5c,KAAK,aACnB2vB,EAAiBtG,EAAUvwB,QAAQ,KACnC82B,EAAWvG,EAAUvwB,QAAQ,KAC7B+2B,EAAkBxG,EAAUvwB,QAAQ,KACxC,OACEyD,WAAW8sB,EAAUyG,UAAUH,EAAiB,EAAGC,IACnDrzB,WAAW8sB,EAAUyG,UAAUF,EAAW,EAAGC,cAMnD,SAASgM,EAAQ2S,EAAUC,GACzB,OAAQD,EAASloC,EAAEmoC,EAAO,IAAKD,EAAS7rC,EAAE8rC,EAAO,KASpCr7B,IALN,WAAe,QAAAC,EAAA/E,UAAAnU,OAAXmZ,EAAWhP,MAAA+O,GAAAy9C,EAAA,EAAAA,EAAAz9C,EAAAy9C,IAAXx9C,EAAWw9C,GAAAxiD,UAAAwiD,GACpB,WAAAt9C,SAAAC,UAAAC,KAAA7Z,MAAWkpC,GAAX,MAAApvB,OAAoBL,yDClvDTy9C,GADElzC,OAFjB,WAA0BhnB,KAAamnB,eAAbnnB,KAAuCqnB,MAAAD,GAAwB,OAA/DpnB,KAA+DkjD,GAAA,IAExE16B,iBADjB,WAAoC,IAAatB,EAAblnB,KAAamnB,eAA0BC,EAAvCpnB,KAAuCqnB,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBjT,OAAOgK,GAAA,aAAgBiJ,EAAA,OAAYjT,OAAOgK,GAAA,UAA1Hne,KAAuIunB,GAAA,KAAAH,EAAA,OAAwBjT,OAAOgK,GAAA,eCE1M,IASAoN,EAZA,SAAA3C,GACEF,EAAQ,SAgBVD,EAdyBC,EAAQ,OAcjCC,CACE+2B,EAAA,EACAwa,GATF,EAWA3uC,EAPA,KAEA,MAUeptB,EAAA,EAAAsqB,EAAiB,4OC1B1BoL,EAAUpR,EAAQ,QAElB03C,aACJ,SAAAA,EAAa//B,EAAQxuB,EAAQwuD,EAAc9kD,EAAWsxB,EAAc97B,EAAQjH,EAAUusB,GAAwB,IAAAtvB,EAAAd,KAAAiT,IAAAjT,KAAAm6D,GAC5Gn6D,KAAKq6D,UAAY,EACjB,IAAI7+C,GAAU,EAAG1Y,KAAKsQ,KAAKwzB,GAAgB,GACvC0zB,EAAWx3D,KAAKwqB,IAAIxqB,KAAKmvC,IAAIz2B,EAAO,GAAI,IAAM1Y,KAAKwqB,IAAI,GACvDitC,EAAS92D,GAAG+2D,OAIbC,YAAYj/C,GACZxX,GAAG,OAAQ,SAAA6mB,GACV,IAAI6vC,GAAaj3D,GAAGsgC,MAAMvR,UAAU/iB,EAAGhM,GAAGsgC,MAAMvR,UAAU1mB,GACtDua,EAAQ5iB,GAAGsgC,MAAMvR,UAAU0D,EAC/Bp1B,EAAKu5D,UAAYh0C,EACjB5iB,GAAGC,OAAO,iBAAiByF,KAAK,YAAa1F,GAAGsgC,MAAMvR,WACtD1xB,EAAKwiC,OAAOo3B,EAAWr0C,KAE3BrmB,KAAK26D,WAAY,EACjB36D,KAAK4L,OAASA,EACd5L,KAAKupC,SAAW6wB,EAChBp6D,KAAKsV,UAAYA,EACjBtV,KAAKgpC,SAAWpC,EAChB5mC,KAAK8K,OAASA,EACd9K,KAAKo6B,OAASA,EACdp6B,KAAKw6D,MACHh/C,OAAQA,EACR8+C,SAAUA,EACVC,OAAQA,GAEVv6D,KAAK6D,SAAWA,EAChB7D,KAAK6T,UAAY,KACjB7T,KAAK46D,IAAMN,EAAW1zB,EACtB5mC,KAAKshD,IAAiB,GAAXthD,KAAK46D,IAChB56D,KAAK66D,WAAa,SAAAj0B,GAAkB,OAAO9jC,KAAKmvC,IAAInvC,KAAKmvC,IAAI,EAAGrL,EAAe9lC,EAAK85D,KAAM,MAC1F56D,KAAKowB,uBAAyBA,oDAIjB0qC,EAAWC,GAAmC,IAAArxD,EAAA1J,KAAtBg7D,EAAsBvjD,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,IAAAA,UAAA,GAC3DqjD,EAAUvgD,YACP3W,aACAC,SAAS7D,KAAK6D,UACdsF,KAAK,UAAW,SAAUc,EAAGhG,GAC5B,IAAIswB,EAAUwmC,EAAY/6D,MAC1B,OAAIu0B,GACF9wB,GAAGC,OAAO1D,MAAMoE,QAAQ,WAAW,GAC/B42D,EACKzmC,EAEA,IAGT9wB,GAAGC,OAAO1D,MAAMoE,QAAQ,WAAW,GAC5B,KAGVJ,GAAG,MAAO,WAET0F,EAAK0wB,OAAOxU,KAAKrhB,UAAU,iBAAiB8yC,QAC5C3tC,EAAK0wB,OAAOxU,KAAKrhB,UAAU,YAAY8yC,QACsB,IAAzDv0B,SAASwzB,uBAAuB,cAAchzC,QAChDoG,EAAK0wB,OAAOxU,KAAKrhB,UAAU,eAAe8yC,+CAKpCV,GACZ,GAAI32C,KAAK26D,UAAW,CAClB,IAAIhjC,EAAa33B,KAAKo6B,OAAO3C,YAAYE,WAIzC,OAHAgf,EAAS,GAAKA,EAAS,GAAK32C,KAAKqmB,MAAQrmB,KAAK4L,OAAO,GAAK5L,KAAK06D,UAAU,GACzE/jB,EAAS,GAAKA,EAAS,GAAK32C,KAAKqmB,MAAQrmB,KAAK4L,OAAO,GAAK5L,KAAK06D,UAAU,GAChE53D,KAAKsQ,KAAKujC,EAAS,GAAKA,EAAS,GAAKA,EAAS,GAAKA,EAAS,IACzD32C,KAAKsV,UAAYtV,KAAKqmB,OAASrmB,KAAKupC,SAAW5R,EAAa,IAEzE,OAAO,wCAIIsjC,EAAeC,GAAW,IAAAvwD,EAAA3K,KAcnCm7D,EAAMn7D,KAAKo6B,OAAOxU,KAAKrhB,UAAU,mBACjC62D,EAAap7D,KACjBA,KAAKq7D,cAAcF,EAfE,SAAAtnD,GACnB,IAAI0gB,SACJ,GAAK9wB,GAAGC,OAAOmQ,GAAWzP,QAAQ,YAK3B,CACL,IAAIk3D,GAAY3wD,EAAKq+B,SAAW,GAAKr+B,EAAKiwD,IAC1CrmC,EAAU2mC,EAAYI,EAAW3wD,EAAK22C,QAPO,CAC7C,IAAIrnB,EAAYx2B,GAAGC,OAAOmQ,GAAW1K,KAAK,SAAS0E,MAAM,KACrDytD,GAAYrhC,EAAU32B,OAAS,GAAKqH,EAAKiwD,IAC7CrmC,EAAU2mC,GAAaI,EAAW3wD,EAAK22C,KAAO4Z,EAAYI,EAAW3wD,EAAK22C,IAC1E2Z,EAAchhC,EAAU32B,OAAS,GAAGi4D,QAAUhnC,EAKhD,OAAOA,IAKTv0B,KAAKo6B,OAAOxU,KACTrhB,UAAU,wBACVC,KAAK,SAAUimB,GACd,IAAIksB,EAAWlzC,GAAGC,OAAO1D,MAAMmJ,KAAK,OAAO0E,MAAM,KAC7C2tD,EAAcJ,EAAWK,aAAa9kB,EAAS,GAAG9oC,MAAM,OAASutD,EAAWK,aAAa9kB,EAAS,GAAG9oC,MAAM,MAC/GpK,GAAGC,OAAO1D,MAAMmJ,KAAK,UAAWqyD,EAAc,QAAU,kDAI7CN,GAAW,IAAAtwD,EAAA5K,KAWtBotC,EAAQptC,KAAKo6B,OAAOxU,KAAKrhB,UAAU,iBACvCvE,KAAKq7D,cAAcjuB,EAXI,SAAAv5B,GACrB,IAAIynD,EAAW1wD,EAAKo+B,SAAWp+B,EAAKgwD,IACpC,GAAIM,GAAaI,EAAW1wD,EAAK02C,KAAO4Z,EAAYI,EAAW1wD,EAAK02C,IAGlE,SAAU12C,EAAK02C,IAAMx+C,KAAK+rD,IAAIqM,EAAYI,IAAa1wD,EAAK02C,IADtC,GAGtB,OAAO,0CAOE4Z,GAAW,IAAA3tD,EAAAvN,KAWpBylD,EAAMzlD,KAAKo6B,OAAOxU,KAAKrhB,UAAU,YACrCvE,KAAKq7D,cAAc5V,EAXE,SAAA5xC,GACnB,IAAIynD,EAAW/tD,EAAKy7B,SAAWz7B,EAAKqtD,IACpC,GAAIM,GAAaI,EAAW/tD,EAAK+zC,KAAO4Z,EAAYI,EAAW/tD,EAAK+zC,IAGlE,SAAU/zC,EAAK+zC,IAAMx+C,KAAK+rD,IAAIqM,EAAYI,IAAa/tD,EAAK+zC,IADtC,GAGtB,OAAO,4CAOI4Z,GAAW,IAAAjwB,EAAAjrC,KAUtBm7D,EAAMn7D,KAAKo6B,OAAOxU,KAAKrhB,UAAU,WACrCvE,KAAKq7D,cAAcF,EAVI,SAAAtnD,GACrB,IAAIynD,EAAWrwB,EAAKjC,SAAWiC,EAAK2vB,IACpC,GAAIM,GAAaI,EAAWrwB,EAAKqW,KAAO4Z,EAAYI,EAAWrwB,EAAKqW,IAAK,CACvE,IAAIoa,EAAkBzwB,EAAK7Q,OAAOjD,QAAUzxB,WAAWjC,GAAGC,OAAOmQ,GAAW1K,KAAK,cAAgB,EACjG,OAAS8hC,EAAKqW,IAAMx+C,KAAK+rD,IAAIqM,EAAYI,IAAarwB,EAAKqW,IAAMoa,EAEjE,OAAO,IAI+B,0CAG5BT,EAAejkC,GAAQ,IAAAgoB,EAAAh/C,KACjCu0B,EAAU,IAAIonC,EAAAzvD,EACdkvD,EAAap7D,KACjBA,KAAKo6B,OAAOxU,KACTrhB,UAAU,gBACVH,QAAQ,WAAW,GACnBA,QAAQ,aAAa,GACrBmW,YACA3W,aACAC,SAAS7D,KAAK6D,UACdsF,KAAK,UAAW,GACnB,IAAIqpB,EAiDJ,SAAuBopC,GACrB,IAAIC,EAAUD,EACZ/5C,GACEwE,MAAO,EACPq0C,WAAY,EAAG,GACfoB,YAAY,GAEhB,GAAe,MAAXD,GAA8B,IAAXA,EAAe,CACpC,IAAIE,EAAaF,EAAQ55D,QAAQ,SAC/B+5D,EAAaH,EAAQ55D,QAAQ,aAC7Bg6D,SAAavjD,SACbwjD,SAAcC,SAAeC,SAC/BF,EAAer6C,EAASi6C,WAAcC,GAAc,GAAKA,EAAaC,EAClED,EAAa,GACfI,EAAgB,EAEdC,EADEJ,EAAa,EACC,EAEAH,EAAQv4D,QAGtB04D,EAAa,GACfI,EAAgB,EAChBD,EAAgBN,EAAQv4D,QAEpB44D,GACFE,EAAgBL,EAChBI,EAAgBN,EAAQv4D,OAAS84D,IAEjCD,EAAgBC,EAChBA,EAAgBP,EAAQv4D,OAAS64D,GAInCA,EAAgB,IAClBzjD,EAAUmjD,EAAQnxD,MAAMqxD,EAAYA,EAAaI,GAAejxD,QAAQ,QAAS,IAAIA,QAAQ,IAAK,IAAIA,QAAQ,IAAK,IACnH2W,EAASwE,MAAQ3gB,WAAWgT,IAE1B0jD,EAAgB,IAClBH,EAAcJ,EAAQnxD,MAAMsxD,EAAYD,EAAaK,GAAelxD,QAAQ,YAAa,IAAIA,QAAQ,IAAK,IAAIA,QAAQ,IAAK,IAAI2C,MAAM,KACrIgU,EAAS64C,UAAU,GAAKh1D,WAAWu2D,EAAY,IAC/Cp6C,EAAS64C,UAAU,GAAKh1D,WAAWu2D,EAAY,KAGnD,OAAOp6C,EA7FOw6C,CAAar8D,KAAKo6B,OAAOxU,KAAKliB,OAAO,iBAAiByF,KAAK,cACvE2B,EAAS9K,KAAKo6B,OAAOtvB,OAuBD9K,KAAKo6B,OAAOxU,KACjCrhB,UAAU,gBACVyJ,OAxBY,SAAUsuD,GACvB,IA8TW3kB,EAAUC,EA9TjBjB,EAAWlzC,GAAGC,OAAO1D,MAAMmJ,KAAK,YAAY0E,MAAM,KACtD,GAAIutD,EAAWK,aAAa9kB,IAAwB,MAAX2lB,EAAKn+C,GAAY,CACxDoW,EAAQxW,IAAIu+C,EAAKn+C,IACjB,IAAIo+C,GA2TK5kB,EA3TmB3gB,EA2TT4gB,EA3TiB0kB,EAAKpT,KA4TvCvR,EAASloC,EAAEmoC,EAAO,IAAKD,EAAS7rC,EAAE8rC,EAAO,MA3TvCvxB,EAAQmM,EAAUnM,MAClBm2C,EAAQhqC,EAAUkoC,UAClBloC,EAAUspC,YACZS,EAAe,GACbA,EAAe,GAAKl2C,EAAQm2C,EAAM,GACpCD,EAAe,GACbA,EAAe,GAAKl2C,EAAQm2C,EAAM,KAEpCD,EAAe,IACZA,EAAe,GAAKC,EAAM,IAAMn2C,EACnCk2C,EAAe,IACZA,EAAe,GAAKC,EAAM,IAAMn2C,GAErC40C,EAAc33B,OAAOg5B,EAAKn+C,GAAIrT,EAAOwxD,EAAKn+C,IAAKo+C,GAEjD,OAAOtB,IAKN9xD,KAAK,UAAW,SAChB/E,QAAQ,WAAW,GACnBA,QAAQ,aAAa,GAErBmW,YACA3W,aACAC,SAAS7D,KAAK6D,UACdsF,KAAK,UAAW,WACf,IAAIszD,EAAY/2D,WAAWjC,GAAGC,OAAO1D,MAAMmJ,KAAK,cAC5CuzD,EAAYh3D,WAAWjC,GAAGC,OAAO1D,MAAMmJ,KAAK,cAC5CwzD,EAAYj3D,WAAWjC,GAAGC,OAAO1D,MAAMmJ,KAAK,cAIhD,OAHAszD,EAAY/hD,MAAM+hD,GAAa,EAAMA,IACrCC,EAAYhiD,MAAMgiD,GAAa,EAAMA,IACrCC,EAAYjiD,MAAMiiD,GAAa,EAAMA,KAGzC9jC,WAAW,WACTmmB,EAAK5kB,OAAOxU,KACTrhB,UAAU,0BACV4E,KAAK,UAAW,sDAoDrB,IAAI8xD,EAAgBj7D,KAAKo6B,OAAOvD,aAAatC,QACzCgS,EAAevmC,KAAKo6B,OAAOvD,aAAaF,MACxCyD,EAASp6B,KAAKo6B,OAClB,GAAqB,MAAjB6gC,EAAuB,EACzBA,EAAgBj7D,KAAKo6B,OAAOvD,aAAatC,YAC3BqoC,WAAa,IAAIC,EAAA3wD,EAE/B,IADA,IAAIyqB,EAAQ32B,KAAKo6B,OAAOvD,aAAaF,MAC5B1yB,EAAI,EAAGA,EAAI0yB,EAAMrzB,OAAQW,IAAK,CACrC,IAAI64D,EAAiBnmC,EAAM1yB,GACvB84D,KACJA,EAAiBxB,SAAU,EAC3B,IAAK,IAAIrpD,EAAI,EAAGA,EAAI4qD,EAAex5D,OAAQ4O,IAAK,CAE9C,IADc4qD,EAAe5qD,GAAGmrB,QAG9B,IADA,IAAIjiB,EAAM0hD,EAAe5qD,GAAGkJ,IACnB8a,EAAI,EAAGA,EAAI9a,EAAI9X,OAAQ4yB,IAC9B6mC,EAAiB56D,MACfq8B,OAAQtsB,EAAGgkB,GACXgG,SAAOpf,OAAAkgD,IAAIF,EAAe5qD,GAAGorB,WAAUpH,IAAG3c,KAAK,KAC/Cgb,SAAS,EACTk0B,aACA39C,UACAmyD,OAAQ,KACRvxB,OAAQf,EAAeuyB,EAAUl9D,KAAK8K,OAAQsQ,EAAI8a,IAAK,EAAG,EAAG,KAAK,GAClEinC,WAAY,IAKpBlC,EAAc94D,KAAK46D,GAErB9B,EAAc33B,OAAS,SAAU85B,EAASt0D,EAAO6tC,GAI/C,IAHA,IAAI0mB,EAAW,SAAApzD,GACb,OAAOA,IAAMmzD,GAENn5D,EAAI,EAAGA,EAAIjE,KAAKsD,OAAQW,IAC/B,GAAKjE,KAAKiE,GAAGs3D,QAKb,IAFA,IAAIwB,EAAmB/8D,KAAKiE,GACxB24D,EAAa58D,KAAK48D,WACb1qD,EAAI,EAAGA,EAAI6qD,EAAiBz5D,OAAQ4O,IAAK,CAChD,IAAIorD,EAAcP,EAAiB7qD,GAC/BssB,EAAQ8+B,EAAY9+B,MAGxB,GAFU+H,EAAatiC,GAAGu6B,EAAM,IAAIpjB,IAAIojB,EAAM,IACjCjgB,UAAU8+C,IACb,EAAG,CACXC,EAAY/oC,SAAU,EACtB+oC,EAAY7U,UAAUtmD,KAAKw0C,GAC3B2mB,EAAYxyD,OAAO3I,KAAK2G,GACxB8zD,EAAWl9B,IAAI09B,GAAUn5D,EAAGiO,IAC5B,SAKR+oD,EAAcsC,aAAe,SAAUC,GAYrCpjC,EAAOxU,KAAKrhB,UAAU,gBAAgByJ,OAXrB,WACf,IA2NWyvD,EA3NPj/B,EAAQ/6B,GAAGC,OAAO1D,MAAMmJ,KAAK,SAC7Bu0D,GAAW,EACf,GAAIF,EAAU39C,IAAI2e,GAAQ,CACxBk/B,GAAW,EACX,IAAI50D,EAAQ6hC,EAAe6yB,EAAU/vC,IAAI+Q,IAAQ,GAEjD11B,EAuNH,WADS,KADG20D,EArNU30D,GAsNE,OAAQ,IAAM20D,EAAS,OAAQ,IAAMA,EAAS,KACrD,IArNhB,OAAOC,SAIN,CACLzC,EAAc2B,WAAa,IAAIC,EAAA3wD,EAC/B,IAAK,IAAIjI,EAAI,EAAGA,EAAIg3D,EAAc33D,OAAQW,IAAK,CAC7C,IAAI84D,EAAmB9B,EAAch3D,GACrCg3D,EAAch3D,GAAGs3D,SAAU,EAC3B,IAAK,IAAIrpD,EAAI,EAAGA,EAAI6qD,EAAiBz5D,OAAQ4O,IAAK,CAChD,IAAIyrD,EAAuBZ,EAAiB7qD,GAC5CyrD,EAAqBppC,SAAU,EAC/BopC,EAAqBV,OAAS,KAC9BU,EAAqBjyB,OAAS,KAC9BiyB,EAAqBC,WAAa,IAIxC,OAAO3C,6CAGWA,GAGlB,IAFA,IAAIrvD,EAAS5L,KAAK4L,OACdiyD,EAAgB,IAAM79D,KAAKo6B,OAAO3C,YAAYO,YACzC/zB,EAAI,EAAGA,EAAIg3D,EAAc33D,OAAQW,IAExC,IADA,IAAI84D,EAAmB9B,EAAch3D,GAC5BiO,EAAI,EAAGA,EAAI6qD,EAAiBz5D,OAAQ4O,IAAK,CAChD,IAAIyrD,EAAuBZ,EAAiB7qD,GAC5C,GAAIyrD,EAAqBlV,UAAUnlD,OAAS,EAAG,CAC7C,IACIyT,EAAQ+mD,EAAUlyD,EADC+xD,EAAqBV,OAAStyB,EAAegzB,EAAqBlV,WAAW,IAEpG1xC,EAAQjU,KAAKgjC,MAAM/uB,EAAQjU,KAAK0N,GAAKqtD,GAAiB/6D,KAAK0N,GAAKqtD,EAChEF,EAAqBlV,aACrBkV,EAAqBR,WAAapmD,EAEhC4mD,EAAqB7yD,OAAOxH,OAAS,IACvCq6D,EAAqBjyB,OAASf,EAC5BgzB,EAAqB7yD,QACrB,GAEF6yD,EAAqB7yD,2CAMrB4vD,EAAWr0C,EAAOxiB,GACxB,IAAM8F,EAAO3J,KACTk7D,EAAYp4D,KAAKwqB,IAAIxqB,KAAKmvC,IAAI5rB,EAAO,IAAMvjB,KAAKwqB,IAAI,GACpD2tC,EAAgBj7D,KAAK+9D,oBACzB/9D,KAAKqmB,MAAQA,EACbrmB,KAAK06D,UAAYA,EACjB16D,KAAKg+D,cAAc9C,GACnBl7D,KAAKi+D,gBAAgB/C,GACrBl7D,KAAKk+D,cAAcjD,EAAeC,GAElC,IADA,IAAI71C,SACKphB,EAAI,EAAGA,EAAIg3D,EAAc33D,OAAQW,KACP,IAA7Bg3D,EAAch3D,GAAGs3D,UACnBl2C,EAAYphB,GAGhBjE,KAAKowB,wBACH9K,MAAOD,IAES,IAAdA,EACF5hB,GAAGc,UAAU,gBAAgByJ,OAAO,WAElC,IADA,IAAI4zB,KACK39B,EAAI,EAAGA,EAAI/B,KAAKsF,QAAQgF,SAASlJ,OAAQW,IAChD29B,EAAOz/B,KAAPa,MAAA4+B,EAAAo7B,IAAep4D,KAAKC,MAAMC,IAAe5C,KAAKsF,QAAQgF,SAASvI,GAAG29B,WAEpE,OAAkE,IAA3DA,EAAO3/B,QAAQgJ,OAAOxH,GAAGC,OAAO1D,MAAMmJ,KAAK,aACjD3E,KAAK,WACNf,GAAGC,OAAO1D,MAAM0D,OAAO,SACpBE,aACAC,SAAS8F,EAAK9F,UACdQ,MAAM,SAAU,QAChBA,MAAM,eAAgB,YACtBA,MAAM,iBAAkB,WAG7BZ,GAAGc,UAAU,gBAAgByJ,OAAO,WAElC,IADA,IAAI4zB,KACK39B,EAAI,EAAGA,EAAI/B,KAAKsF,QAAQgF,SAASlJ,OAAQW,IAChD29B,EAAOz/B,KAAPa,MAAA4+B,EAAAo7B,IAAep4D,KAAKC,MAAMC,IAAe5C,KAAKsF,QAAQgF,SAASvI,GAAG29B,WAEpE,OAAkE,IAA3DA,EAAO3/B,QAAQgJ,OAAOxH,GAAGC,OAAO1D,MAAMmJ,KAAK,aACjD3E,KAAK,WACNf,GAAGC,OAAO1D,MAAM0D,OAAO,SACpBE,aACAC,SAAS8F,EAAK9F,UACdQ,MAAM,SAAU,QAChBA,MAAM,eAAgB,OACtBA,MAAM,iBAAkB,WAG/BrE,KAAKm+D,gBAAgBjD,GACrBl7D,KAAKo+D,eAAenD,EAAej7D,KAAKo6B,OAAOpD,QAC/Ch3B,KAAKq+D,mBAAmBpD,GACxBj7D,KAAKo6B,OAAOmJ,mBAAkB,mCAGvB55B,EAAMiC,EAAQsvD,EAAWr3D,GAAU,IAAAg2D,EAAA75D,KACtCq6D,EAAYr6D,KAAK66D,WAAWK,GAE5BsB,IAAU5wD,EAAO,IAAKA,EAAO,IAC7B2uD,EAASv6D,KAAKw6D,KAAKD,OAEnB/nC,EAAY/uB,GAAG66D,aAEhB5D,UAAU8B,EAAM,GAAIA,EAAM,IAC1Bn2C,MAAMg0C,GAET52D,GAAGC,OAAOiG,GAAM/F,aAAaC,SAAS7D,KAAK6D,UAAU+U,KAAK2hD,EAAO/nC,UAAWA,GAE5E,IAAI+rC,EAAWv+D,KAAKq6D,UAChBA,EAAYkE,EACdv+D,KAAKsjC,OAAOk5B,EAAOnC,EAAWr6D,KAAK6D,UAEnCg1B,WAAW,WACTghC,EAAKv2B,OAAOk5B,EAAOnC,EAAWR,EAAKh2D,WAClC7D,KAAK6D,mDAIMgQ,GAShB,OARgB7T,KAAK6T,UAAYA,EAC9B3K,OAAO,KAGPA,OAAO,KACPC,KAAK,QAAS,iBACdyP,KAAK5Y,KAAKw6D,KAAKD,QACfv2D,GAAG,gBAAiB,eAc3B,SAAS2mC,EAAgBR,EAAOC,GAK9B,IAJA,IAAIC,EAAQD,EAAaD,EAAQtW,EAAQyW,UAAUH,GACjDzuB,EAAQmY,EAAQ0W,IAAIF,GACpBG,EAAS,IAAI/8B,MAAMiO,EAAM,IACzB+uB,EAAQ/uB,EAAM,GACPzX,EAAI,EAAGA,EAAIomC,EAAM/mC,OAAQW,IAChCumC,EAAOvmC,GAAK4vB,EAAQ6W,IAAIL,EAAMpmC,IAAMwmC,EAEtC,OAAOD,EAOT,SAAS0yB,EAAW/yB,EAAOq0B,EAAeC,GAExC,IADA,IAAIp0B,EAAQ,IAAI58B,MAAM+wD,EAAcl7D,QAC3BW,EAAI,EAAGA,EAAIomC,EAAM/mC,OAAQW,IAChComC,EAAMpmC,GAAK,IAAIwJ,MAAMgxD,EAAcn7D,QAErC,IAAK,IAAIW,EAAI,EAAGA,EAAIu6D,EAAcl7D,OAAQW,IAExC,IADA,IAAIy6D,EAAMF,EAAcv6D,GACfiO,EAAI,EAAGA,EAAIusD,EAAcn7D,OAAQ4O,IAAK,CAC7C,IAAIysD,EAAMF,EAAcvsD,GACxBm4B,EAAMpmC,GAAGiO,GAAKi4B,EAAMu0B,GAAKC,GAG7B,OAAOt0B,EAGT,SAASyzB,EAAWc,EAASC,GAC3B,IAAIC,EAAOD,EAAM,GAAKD,EAAQ,GAC5BG,EAAOF,EAAM,GAAKD,EAAQ,GAC1BI,EAAOl8D,KAAK0N,GACZyuD,EAA+B,IAAjBC,EAAAhzD,EACdizD,SAWF,OAVIr8D,KAAK+rD,IAAIiQ,GAAQG,EACfn8D,KAAK+rD,IAAIkQ,GAAQE,IACnBE,GAAWJ,EAAO,EAAI,GAAM,GAAMC,EAAO,KAG3CG,EAAUr8D,KAAKwwB,KAAKyrC,EAAOD,GACvBA,EAAO,IACTK,GAAWH,IAGRG,EAjDM5iD,IALN,WAAe,QAAAC,EAAA/E,UAAAnU,OAAXmZ,EAAWhP,MAAA+O,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAXD,EAAWC,GAAAjF,UAAAiF,GACpB,WAAAC,SAAAC,UAAAC,KAAA7Z,MAAWm3D,GAAX,MAAAr9C,OAAyBL,uNChdzB2iD,KACA7iD,EAAc,SAACpH,GACjB,OAAO,WAAe,QAAAqH,EAAA/E,UAAAnU,OAAXmZ,EAAWhP,MAAA+O,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAXD,EAAWC,GAAAjF,UAAAiF,GACpB,WAAAC,SAAAC,UAAAC,KAAA7Z,MAAWmS,GAAX,MAAA2H,OAAwBL,OAItB4iD,aACJ,SAAAA,EAAaC,EAAYzzD,GAAau5C,IAAAplD,KAAAq/D,GACpCr/D,KAAKe,KAAO,QACZf,KAAK2L,GAAK2zD,EACVt/D,KAAKu/D,UAA6B,IAAjBC,EAAAtzD,EACjBlM,KAAK6L,YAAc7L,KAAKy/D,eAAe5zD,sDAGzBA,GACd,IAAI4D,EAAI5D,EAAY,GAChBC,EAAID,EAAY,GAGpB,OAFI/I,KAAK+rD,IAAIp/C,GAAKzP,KAAKu/D,YAAa9vD,EAAI,GACpC3M,KAAK+rD,IAAI/iD,GAAK9L,KAAKu/D,YAAazzD,EAAI,IAC/B2D,EAAGA,EAAG3D,EAAGA,YAGtBszD,EAAYC,MAAQ9iD,EAAY8iD,OAE1Bra,aACJ,SAAAA,EAAasa,EAAYz3B,EAAkBC,EAAgB43B,GAActa,IAAAplD,KAAAglD,GACvEhlD,KAAKe,KAAO,OACZf,KAAK2L,GAAK2zD,EACVt/D,KAAKmpB,MAAQi2C,EAAYC,MAAM,EAAGx3B,GAClC7nC,KAAKopB,IAAMg2C,EAAYC,MAAM,EAAGv3B,GAChC9nC,KAAKsD,OAAStD,KAAK2/D,YACnB3/D,KAAKu/D,UAA6B,IAAjBC,EAAAtzD,EACjBlM,KAAK0/D,aAAe1/D,KAAK4/D,aAAaF,mDAKtC,IAAIv2C,EAAQnpB,KAAKmpB,MACbC,EAAMppB,KAAKopB,IACf,OAAOtmB,KAAKsQ,KAAKtQ,KAAKmvC,IAAI7oB,EAAIvd,YAAY4D,EAAI0Z,EAAMtd,YAAY4D,EAAG,GAAK3M,KAAKmvC,IAAI7oB,EAAIvd,YAAYC,EAAIqd,EAAMtd,YAAYC,EAAG,mCAIpH+zD,GACN,OAAyB,MAArB7/D,KAAK0/D,cAAiD,MAAzBG,EAASH,aACjC1/D,KAAK0/D,eAAiBG,EAASH,aAE/B1/D,KAAK8/D,YAAYD,uCAKfA,EAAUE,GAAgC,IAAnBC,EAAmBvoD,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,IAAAA,UAAA,GACjDwoD,EAAMn9D,KAAKsQ,KAAKtQ,KAAKmvC,IAAIjyC,KAAKmpB,MAAMtd,YAAY4D,EAAIowD,EAAS12C,MAAMtd,YAAY4D,EAAG,GAAK3M,KAAKmvC,IAAIjyC,KAAKmpB,MAAMtd,YAAYC,EAAI+zD,EAAS12C,MAAMtd,YAAYC,EAAG,IACzJo0D,EAAMp9D,KAAKsQ,KAAKtQ,KAAKmvC,IAAIjyC,KAAKopB,IAAIvd,YAAY4D,EAAIowD,EAASz2C,IAAIvd,YAAY4D,EAAG,GAAK3M,KAAKmvC,IAAIjyC,KAAKopB,IAAIvd,YAAYC,EAAI+zD,EAASz2C,IAAIvd,YAAYC,EAAG,IACjJq0D,EAAMr9D,KAAKsQ,KAAKtQ,KAAKmvC,IAAIjyC,KAAKmpB,MAAMtd,YAAY4D,EAAIowD,EAASz2C,IAAIvd,YAAY4D,EAAG,GAAK3M,KAAKmvC,IAAIjyC,KAAKmpB,MAAMtd,YAAYC,EAAI+zD,EAASz2C,IAAIvd,YAAYC,EAAG,IACrJs0D,EAAMt9D,KAAKsQ,KAAKtQ,KAAKmvC,IAAIjyC,KAAKopB,IAAIvd,YAAY4D,EAAIowD,EAAS12C,MAAMtd,YAAY4D,EAAG,GAAK3M,KAAKmvC,IAAIjyC,KAAKopB,IAAIvd,YAAYC,EAAI+zD,EAAS12C,MAAMtd,YAAYC,EAAG,IACzJ,OAAmB,MAAfi0D,EACGC,EAGKC,EAAMjgE,KAAKu/D,WAAaW,EAAMlgE,KAAKu/D,UAFnCU,EAAMjgE,KAAKu/D,WAAaW,EAAMlgE,KAAKu/D,WAAeY,EAAMngE,KAAKu/D,WAAaa,EAAMpgE,KAAKu/D,UAKxFQ,EAAYnnD,KAAK5Y,MAAOigE,EAAKC,IAAOC,EAAKC,sCAKzCP,GAsBT,OAAO7/D,KAAK8/D,YAAYD,EArBN,SAAAhwC,EAAAG,GAAkC,IAAAE,EAAAo2B,IAAAz2B,EAAA,GAAvBowC,EAAuB/vC,EAAA,GAAlBgwC,EAAkBhwC,EAAA,GAAAD,EAAAq2B,IAAAt2B,EAAA,GAAXmwC,EAAWlwC,EAAA,GAANmwC,EAAMnwC,EAAA,GAClD,OAAIgwC,EAAMjgE,KAAKu/D,WAAaW,EAAMlgE,KAAKu/D,WAC7Bv/D,KAAKmpB,MAAOnpB,KAAKopB,KAEvB+2C,EAAMngE,KAAKu/D,WAAaa,EAAMpgE,KAAKu/D,WAC7Bv/D,KAAKmpB,MAAOnpB,KAAKopB,KAEvB62C,EAAMjgE,KAAKu/D,WACLv/D,KAAKopB,IAAKppB,KAAKmpB,MAAO02C,EAASz2C,KAErCg3C,EAAMpgE,KAAKu/D,WACLv/D,KAAKmpB,MAAOnpB,KAAKopB,IAAKy2C,EAASz2C,KAErC82C,EAAMlgE,KAAKu/D,WACLv/D,KAAKmpB,MAAOnpB,KAAKopB,IAAKy2C,EAAS12C,OAErCg3C,EAAMngE,KAAKu/D,YACLv/D,KAAKopB,IAAKppB,KAAKmpB,MAAO02C,EAAS12C,8CAO/Bu2C,GACZ,GAAoB,MAAhBA,EACF,OAAO,KAEP,IAAIppC,EAAY,GAchB,OAbIopC,EAAa,GAAG,GAAKA,EAAa,GAAG,KACvCppC,GAAaopC,EAAa,GAAGnmD,KAAK,KAAMmmD,EAAa,GAAGnmD,KAAK,MAAMA,KAAK,MAEtEmmD,EAAa,GAAG,GAAKA,EAAa,GAAG,KACvCppC,GAAaopC,EAAa,GAAGnmD,KAAK,KAAMmmD,EAAa,GAAGnmD,KAAK,MAAMA,KAAK,MAEtEmmD,EAAa,GAAG,KAAOA,EAAa,GAAG,KAEvCppC,EADEopC,EAAa,GAAG,GAAKA,EAAa,GAAG,IAC1BA,EAAa,GAAGnmD,KAAK,KAAMmmD,EAAa,GAAGnmD,KAAK,MAAMA,KAAK,MAE3DmmD,EAAa,GAAGnmD,KAAK,KAAMmmD,EAAa,GAAGnmD,KAAK,MAAMA,KAAK,MAGrE+c,WAIb8oC,EAAYpa,KAAOzoC,EAAYyoC,GAU/Boa,EAAYiB,KAAO9jD,EAPjB,SAAA8jD,EAAaf,EAAY51B,EAAQG,GAAQub,IAAAplD,KAAAqgE,GACvCrgE,KAAKe,KAAO,OACZf,KAAK2L,GAAK2zD,EACVt/D,KAAK0pC,OAASA,EACd1pC,KAAK6pC,OAASA,IAKlBu1B,EAAYkB,SACVC,gBAAiB,SAAUhc,GAGzB,IADA,IAAIic,KACKv8D,EAAI,EAAGA,EAAIsgD,EAAMjhD,OAAQW,IAChCu8D,EAAQr+D,KAAK8B,GAEf,IAAIw8D,EAAclc,EAAMic,EAAQ,IAChCA,EAAQluC,OAAO,EAAG,GAElB,IAAIqE,KACJA,EAAMx0B,SAIN,IAHA,IAAIu+D,GAAY,EACZC,EAAS,EAENH,EAAQl9D,OAAS,GAAG,CAEzB,IADA,IAAIs9D,GAAa,EACR38D,EAAI,EAAGA,EAAIu8D,EAAQl9D,OAAQW,IAAK,CACvC,IAAI48D,EAAcJ,EAAYK,UAAUvc,EAAMic,EAAQv8D,KACtD,IAAoB,IAAhB48D,GAAwC,MAAfA,EAAqB,CAEjC,IAAAE,EAAf,GADAH,GAAa,EACTF,EAEFA,GAAY,GACZK,EAAApqC,EAAMgqC,IAAQx+D,KAAda,MAAA+9D,EAAAzkB,IAAsBukB,SAGA,MAAlBA,EAAY,IACdxzC,QAAQC,IAAImzC,EAAalc,EAAMic,EAAQv8D,KAEzC0yB,EAAMgqC,GAAQx+D,KAAK0+D,EAAY,IAEjCJ,EAAclc,EAAMic,EAAQv8D,IAC5Bu8D,EAAQluC,OAAOruB,EAAG,GAClB,OAGC28D,IAGHH,EAAclc,EAAMic,EAAQ,IAC5BA,EAAQluC,OAAO,EAAG,GAElBqE,EAAMx0B,SACNu+D,GAAY,EACZC,KAIJ,IADA,IAAIK,KACK/8D,EAAI,EAAGA,EAAI0yB,EAAMrzB,OAAQW,IAChC,GAAwB,IAApB0yB,EAAM1yB,GAAGX,OAAb,CAGA,IAAIy9B,EAAUq+B,EAAYiB,KAAZ,QAAyBW,EAAM19D,OAAUqzB,EAAM1yB,IAAI,GACjE+8D,EAAM7+D,KAAK4+B,GAEb,OAAOigC,IAII5B,QC3LT6B,aACJ,SAAAA,EAAa3B,EAAY4B,EAAQC,GAAiB/b,IAAAplD,KAAAihE,GAChDjhE,KAAKsjC,OAAOg8B,EAAY4B,EAAQC,8CAI1B7B,EAAY4B,EAAQC,GACR,MAAd7B,IACFt/D,KAAK2L,GAAK2zD,GAEE,MAAV4B,IACFlhE,KAAKkhE,OAASA,GAEO,MAAnBC,IACFnhE,KAAK22C,UACH1yC,EAAGnB,KAAKgjC,MAAMq7B,EAAgB,IAC9BjvD,EAAGpP,KAAKgjC,MAAMq7B,EAAgB,OAG9BD,GAAUC,KACZnhE,KAAK4L,OAASwzD,EAAYC,MAAM,SAAUr/D,KAAKohE,wBAC/CphE,KAAKs2B,UAAYt2B,KAAK2vD,yBACtB3vD,KAAKukD,MAAQvkD,KAAKqhE,2DAKpB,IAAIlY,EAASnpD,KAAK22C,SAClB,OAAO32C,KAAKshE,yBAAyBthE,KAAKkhE,QAAS/X,EAAOllD,EAAGklD,EAAOj3C,qDAG5CgvD,EAAQvqB,GAChC,IAAIiY,GAAY1gD,SAASyoC,EAAS,IAAKzoC,SAASyoC,EAAS,KAGzD,OAFSiY,EAAS,GAAK,GAAM,EAAM,EAAIsS,EAAStS,EAAS,IAAQ,EAAI,EAAI9rD,KAAK+rD,IAAID,EAAS,KAAOsS,EAAStS,EAAS,GAC5G9rD,KAAKsQ,KAAK,GAAK8tD,EAAStS,EAAS,qDAMzC,IAAIt4B,EAAY,IAAIkuB,EAAAt4C,EAChBi9C,EAASnpD,KAAK22C,SACdyS,SAAIC,SAAIC,SAAIC,SAkBhB,OAjBIJ,EAAOj3C,EAAI,GAAM,GACnBk3C,EAAK,EACLC,EAAMF,EAAOllD,GAAK,EAAK,EAAI,EAC3BqlD,EAAMH,EAAOllD,GAAK,GAAM,EAAI,EAC5BslD,GAAM,IAENH,GAAoB,IAAdD,EAAOllD,EAAY,EAAI,EAC7BolD,EAAMF,EAAOllD,EAAI,EAAK,EAAI,EAC1BqlD,EAAMH,EAAOllD,EAAI,GAAM,EAAI,EAC3BslD,EAAmB,IAAbJ,EAAOllD,GAAY,GAAK,GAEhCqyB,EAAUoJ,IAAI,GAAIypB,EAAOllD,EAAImlD,EAAID,EAAOj3C,IACxCokB,EAAUoJ,IAAI,IAAKypB,EAAOllD,EAAIolD,EAAIF,EAAOj3C,EAAI,IAC7CokB,EAAUoJ,IAAI,KAAMypB,EAAOllD,EAAIqlD,EAAIH,EAAOj3C,EAAI,IAC9CokB,EAAUoJ,IAAI,KAAMypB,EAAOllD,EAAIslD,EAAIJ,EAAOj3C,IAC1CokB,EAAUoJ,IAAI,KAAMypB,EAAOllD,EAAIqlD,EAAIH,EAAOj3C,EAAI,IAC9CokB,EAAUoJ,IAAI,KAAMypB,EAAOllD,EAAIolD,EAAIF,EAAOj3C,EAAI,IACvCokB,qCAOP,IAFA,IAAIkxB,EAAW,IAAIhD,EAAAt4C,EACfq1D,EAA+B,EAAdvhE,KAAKkhE,OAAap+D,KAAKsQ,KAAK,GAAK,EAC7CnP,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAIu9D,EAAoB,GAAK,GAAKv9D,EAC9Bw9D,EAAiBD,EAAoB,IAAM1+D,KAAK0N,GAGhDkxD,GAFI1hE,KAAK4L,OAAOC,YAAY4D,EAAI8xD,EAAiBz+D,KAAK8O,IAAI6vD,GACtDzhE,KAAK4L,OAAOC,YAAYC,EAAIy1D,EAAiBz+D,KAAK+O,IAAI4vD,IAE9Dja,EAAS9nB,IAAI8hC,EAAmBE,GAKlC,IAFA,IAAInd,EAAQ,IAAIC,EAAAt4C,EACZy1D,EAAUvC,EAAYpa,KACjB/gD,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAIu9D,EAAoB,GAAKv9D,EACzB29D,EAAiBJ,EAAoB,GACrCK,EAAeL,EAAoB,GACnCI,EAAiB,IAAKA,GAAkB,KAC5C,IAAIE,EAAkB9hE,KAAKs2B,UAAU7I,IAAI+zC,GACrCO,GAAgB/hE,KAAK22C,SAAS1yC,EAAGjE,KAAK22C,SAASzkC,GAC/C01B,EAAO+5B,EAAQH,EAAmBha,EAAS/5B,IAAIm0C,GAAiBpa,EAAS/5B,IAAIo0C,IAAgBE,EAAcD,IAC/Gvd,EAAM7kB,IAAI8hC,EAAmB55B,GAE/B,OAAO2c,mDAGiB2c,EAAQr1D,GAChC,IAAIqG,EAAIpP,KAAKgjC,MAAMj6B,EAAY,GAAK/I,KAAKsQ,KAAK,IAAM,EAAI8tD,IACpDj9D,EAAI4H,EAAY,IAAM,EAAIq1D,GAU9B,OAREj9D,EADEiO,EAAI,GAAM,EACRpP,KAAKgjC,MAAM7hC,GAEXA,EAAI,EACFnB,KAAKgjC,MAAM7hC,EAAI,IAEfnB,KAAKgjC,MAAM7hC,EAAI,IAGZiO,qCAGF8vD,EAAkBC,GAC3B,IAAIC,EAAOF,EAAiB,GAAKC,EAAW,GACxCE,EAAOH,EAAiB,GAAKC,EAAW,GAI5C,OAHIA,EAAW,GAAK,GAAM,GAAKD,EAAiB,GAAK,GAAM,IACzDG,GAAc,IAERA,EAAMD,4CAGEzZ,GAEhB,GAAyB,IAArBA,EAAUnlD,OACZ,OAAQmlD,EAAU,IAGpB,IAAI2Z,GAAgBn+D,GAAKlB,IAAKumB,IAAUpmB,KAAMomB,KAAYpX,GAAKnP,IAAKumB,IAAUpmB,KAAMomB,MANzDhoB,GAAA,EAAAC,GAAA,EAAAC,OAAAP,EAAA,IAO3B,QAAAQ,EAAAC,EAAAwiD,IAAqBuE,KAArBnnD,GAAAG,EAAAC,EAAAE,QAAAC,MAAAP,GAAA,EAAgC,KAAvBq1C,EAAuBl1C,EAAAM,MAC9BqgE,EAAYn+D,EAAEf,IAAMJ,KAAKI,IAAIyzC,EAAS,GAAIyrB,EAAYn+D,EAAEf,KACxDk/D,EAAYn+D,EAAElB,IAAMD,KAAKC,IAAI4zC,EAAS,GAAIyrB,EAAYn+D,EAAElB,KACxDq/D,EAAYlwD,EAAEhP,IAAMJ,KAAKI,IAAIyzC,EAAS,GAAIyrB,EAAYlwD,EAAEhP,KACxDk/D,EAAYlwD,EAAEnP,IAAMD,KAAKC,IAAI4zC,EAAS,GAAIyrB,EAAYlwD,EAAEnP,MAX/B,MAAAX,GAAAb,GAAA,EAAAC,EAAAY,EAAA,aAAAd,GAAAI,EAAAW,QAAAX,EAAAW,SAAA,WAAAd,EAAA,MAAAC,GAa3B,QACG4gE,EAAYn+D,EAAElB,IAAKq/D,EAAYlwD,EAAEnP,MACjCq/D,EAAYn+D,EAAEf,IAAKk/D,EAAYlwD,EAAEhP,6CAItBm/D,GAAmC,IAAjB/3C,EAAiB7S,UAAAnU,OAAA,QAAArC,IAAAwW,UAAA,IAAAA,UAAA,GAC7C6qD,GAAYp0D,SAASm0D,EAAiB,IAAKn0D,SAASm0D,EAAiB,KACrEE,GAAeD,EAAS,GAAIA,EAAS,IAUzC,OATKh4C,EAKCg4C,EAAS,GAAK,GAAM,GAAKA,EAAS,IAAM,IAC1CC,EAAY,GAAKA,EAAY,GAAK,GALhCD,EAAS,GAAK,GAAM,GAAKA,EAAS,IAAM,IAC1CC,EAAY,GAAKA,EAAY,GAAK,GAO/BA,+BAGHN,GAEJ,IAAID,EAAmBhiE,KAAKwiE,gBAAgBxiE,KAAK22C,SAAS1yC,EAAGjE,KAAK22C,SAASzkC,IACvEgwD,EAAOF,EAAiB,GAAKC,EAAW,GACxCE,EAAOH,EAAiB,GAAKC,EAAW,GACxCA,EAAW,GAAK,GAAM,GAAKD,EAAiB,GAAK,GAAM,IACzDG,GAAc,GAEhB,IAAIE,EAAmBriE,KAAKwiE,gBAAgBL,EAAMD,IAAO,GACzDliE,KAAKsjC,OAAO,KAAM,KAAM++B,YAUb9lD,EALN,WAAe,QAAAC,EAAA/E,UAAAnU,OAAXmZ,EAAWhP,MAAA+O,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAXD,EAAWC,GAAAjF,UAAAiF,GACpB,WAAAC,SAAAC,UAAAC,KAAA7Z,MAAWi+D,GAAX,MAAAnkD,OAAsBL,gDCtKLgmD,aACnB,SAAAA,EAAaC,EAAOC,EAASC,EAAQ5lC,EAAYiG,EAAY4/B,GAAgBzd,IAAAplD,KAAAyiE,GAC3EziE,KAAK2L,GAAK+2D,EACV1iE,KAAK2iE,QAAUA,EACf3iE,KAAKkB,UAAYyhE,EAAQnkC,MACzBx+B,KAAKslB,MAAQ0X,EACbh9B,KAAK8iE,WAA6B,IAAf9iE,KAAKslB,MACxBtlB,KAAK4L,OAASg3D,EACd5iE,KAAKijC,WAAaA,EAClBjjC,KAAK6iE,eAAiBA,EACtB7iE,KAAK+iE,WAAaJ,EAAQ1zD,KAAK3L,OAC/BtD,KAAKyM,kBAAoBk2D,EAAQtkE,KAAKoO,kBACtCzM,KAAKK,UAAY,IAAImkD,EAAAt4C,EACrBlM,KAAKgjE,SACLhjE,KAAKijE,QACLjjE,KAAK2lC,SAAW,IAAI6e,EAAAt4C,EACpBlM,KAAKs2B,UAAY,IAAIukB,EAAA3uC,EACrBlM,KAAKwlD,IAAMtjD,KAAKu7B,gBAAgBz9B,KAAKkB,UAAU,IAC/ClB,KAAKkjE,UAML,SAAqB1d,GAEnB,IADA,IAAIhJ,EAAM,EACDv4C,EAAI,EAAGA,EAAIuhD,EAAIliD,OAAQW,IAC1BwJ,MAAMkwB,QAAQ6nB,EAAIvhD,KACpBu4C,IAGJ,OAAOA,EAbQ2mB,CAAYnjE,KAAKwlD,KAClCxlD,KAAKojE,eAAiB,IAAI5e,EAAAt4C,EAE1BlM,KAAKqjE,SAAU,EACfrjE,KAAKsjE,8DAeDtjE,KAAK8iE,aACP9iE,KAAKm8C,eAAiBn8C,KAAK2iE,QAAQtkE,KAAK89C,eAAe,GACvDn8C,KAAK4L,OAAOD,GAAK3L,KAAKm8C,eACtBn8C,KAAKujE,WAAWvjE,KAAKm8C,eAAgBn8C,KAAK4L,4CAIlC05B,EAAUk+B,GACpBxjE,KAAKK,UAAUq/B,IAAI4F,EAAUk+B,GAC7BxjE,KAAKyjE,cAAcn+B,EAAUk+B,yCAGhBl+B,EAAUk+B,GACvB,IAAIE,EAAeF,EAAS7sB,SAAS1yC,EAAI,IAAMu/D,EAAS7sB,SAASzkC,EACjElS,KAAK2lC,SAASjG,IAAIgkC,EAAcp+B,GAEhCtlC,KAAKojE,eAAex1C,OAAO81C,GAE3B1jE,KAAKs2B,UAAU1I,OAAO81C,GANW,IAAApiE,GAAA,EAAAC,GAAA,EAAAC,OAAAP,EAAA,IAOjC,QAAAQ,EAAAC,EAAAwiD,IAAqBsf,EAASltC,aAA9Bh1B,GAAAG,EAAAC,EAAAE,QAAAC,MAAAP,GAAA,EAAyC,KACnCqiE,EADmCliE,EAAAM,MACZ,GACvB6hE,EAAqBD,EAAY,GAAK,IAAMA,EAAY,GACvD3jE,KAAK2lC,SAAS9lB,IAAI+jD,IACrB5jE,KAAKs2B,UAAUvY,IAAI6lD,IAXU,MAAAxhE,GAAAb,GAAA,EAAAC,EAAAY,EAAA,aAAAd,GAAAI,EAAAW,QAAAX,EAAAW,SAAA,WAAAd,EAAA,MAAAC,sCAgBxBqiE,EAAYC,EAAcC,GAInC,IAHA,IAAMp6D,EAAO3J,KACTgkE,KACAC,GAAc,EACTC,EAAiB,EAAGA,EAAiBlkE,KAAK+iE,WAAYmB,IAAkB,CAC/E,IAAI5+B,EAAWtlC,KAAKyM,kBAAkBy3D,GACtC,GAAI5+B,IAAatlC,KAAKm8C,eAAtB,CAGA,IAAIgoB,EAAe,KACfD,EAAiBlkE,KAAK+iE,WAAa,IACrCoB,EAAenkE,KAAKyM,kBAAkBy3D,EAAiB,MAClClkE,KAAKm8C,iBAEtBgoB,EADED,EAAiBlkE,KAAK+iE,WAAa,EACtB/iE,KAAKyM,kBAAkBy3D,EAAiB,GAExC,MAKrB,IAAIE,EAAkB,IAAIvpB,EAAA3uC,EAEtBw3D,SACJ1jE,KAAKqkE,gBAAgB/+B,EAAU6+B,EAAcL,EAAcC,EAAeK,GACtEpkE,KAAKqjE,QACPK,EAAe1jE,KAAKskE,iBAAiBF,IAErCV,EAAe1jE,KAAKukE,iBAAiBP,EAAmBC,EAAaG,GACrEJ,EAAkB7hE,KAAKyC,KAAKC,MAAMsoB,IAAeu2C,MACjDO,EAAcO,EAAmBl/B,EAAU6+B,MAEzCH,QAQAtpD,MAAMgpD,EAAa,KAAOhpD,MAAMgpD,EAAa,MAC/Cr2C,QAAQwE,MAAM,aAAe7xB,KAAK2L,GAAK,YAAc25B,GAEvD,IAAIk+B,EAAWxjE,KAAK6iE,eAAev9B,EAAUtlC,KAAKijC,WAAYygC,GAC9D1jE,KAAKujE,WAAWj+B,EAAUk+B,IAG5B,SAASgB,EAAoBl/B,EAAU6+B,GACrC,IAAIhmD,EAAKI,EAAU+mB,EAAU37B,EAAK67C,KAC9Bif,EAASlmD,EAAU4lD,EAAcx6D,EAAK67C,KAC1C,MAAkB,iBAAPrnC,GAAqC,iBAAXsmD,GAC5BtmD,EAAGumD,OAAO,EAAG,KAAOD,EAAOC,OAAO,EAAG,GAKhD,SAASnmD,EAAWklB,EAAeC,EAAUC,GAE3C,QADoB1iC,GAAhB0iC,IAA2BA,EAAe,IAC1Cl2B,MAAMkwB,QAAQ+F,IAChB,IAAK,IAAIz/B,EAAI,EAAGA,EAAIy/B,EAASpgC,OAAQW,IACnC,GAAIwJ,MAAMkwB,QAAQ+F,EAASz/B,IAAK,CAC9B,IAAI2/B,EAAWrlB,EAAUklB,EAAeC,EAASz/B,GAAI0/B,EAAe1/B,EAAI,KACxE,GAAI2/B,EAAU,OAAOA,OAChB,GAAIF,EAASz/B,IAAMw/B,EACxB,OAAOE,EAAe1/B,OAGrB,GAAIy/B,GAAYD,EACrB,OAAOE,EAAe1/B,EAExB,OAAO,2CAYMqhC,EAAU6+B,EAAcL,EAAcC,EAAeK,GAAiB,IAAA7hE,GAAA,EAAAC,GAAA,EAAAC,OAAAxB,EAAA,IACrF,QAAAyB,EAAAC,EAAAuhD,IAAqBlkD,KAAKs2B,aAA1B/zB,GAAAG,EAAAC,EAAAf,QAAAC,MAAAU,GAAA,EAAqC,KAA5Bw/B,EAA4Br/B,EAAAX,MAC9B+hE,EAAajkD,IAAIkiB,IAAcgiC,EAAclkD,IAAIkiB,KACpDqiC,EAAgBrmD,IAAIgkB,GACpB/hC,KAAKojE,eAAe1jC,IAAIqC,EAAUuD,KAJ+C,MAAAljC,GAAAI,GAAA,EAAAC,EAAAL,EAAA,aAAAG,GAAAI,EAAAN,QAAAM,EAAAN,SAAA,WAAAG,EAAA,MAAAC,GAQrF,IAAI0b,EAAKI,EAAU+mB,EAAUtlC,KAAKwlD,KAC9Bif,EAASlmD,EAAU4lD,EAAcnkE,KAAKwlD,KACtCmf,GAAQ,EAcZ,SAASpmD,EAAWklB,EAAeC,EAAUC,GAE3C,QADoB1iC,GAAhB0iC,IAA2BA,EAAe,IAC1Cl2B,MAAMkwB,QAAQ+F,IAChB,IAAK,IAAIz/B,EAAI,EAAGA,EAAIy/B,EAASpgC,OAAQW,IACnC,GAAIwJ,MAAMkwB,QAAQ+F,EAASz/B,IAAK,CAC9B,IAAI2/B,EAAWrlB,EAAUklB,EAAeC,EAASz/B,GAAI0/B,EAAe1/B,EAAI,KACxE,GAAI2/B,EAAU,OAAOA,OAChB,GAAIF,EAASz/B,IAAMw/B,EACxB,OAAOE,EAAe1/B,OAGrB,GAAIy/B,GAAYD,EACrB,OAAOE,EAAe1/B,EAExB,OAAO,EA3BS,iBAAPka,GAAqC,iBAAXsmD,IACnCtmD,EAAKA,EAAGumD,OAAO,EAAG,GAClBD,EAASA,EAAOC,OAAO,EAAG,GAExBC,IADE15D,OAAOkT,GAAMne,KAAKkjE,WAAaj4D,OAAOw5D,GAAUzkE,KAAKkjE,YAC/C/kD,IAAOsmD,GAKdE,GACH3kE,KAAKs2B,UAAUjtB,iDAqBD+6D,GAChB,IAAIQ,EAAmBR,EAAgB9jE,SAASsB,OAAOG,MAAM8L,MAAM,KACnE,OAAQK,SAAS02D,EAAiB,IAAK12D,SAAS02D,EAAiB,8CAGjDZ,EAAmBC,EAAaG,GAChD,IAAIS,SACAC,GAAY,EAChB,GAAIb,EAAa,CACf,IAAK,IAAIhgE,EAAI,EAAGA,EAAI+/D,EAAkB1gE,OAAQW,IAAK,CAGjD,IAFA,IAAI8gE,GAAY9gE,EAAG+/D,EAAkB//D,GAAG,GAAIiO,EAAG8xD,EAAkB//D,GAAG,IAChE+gE,EAAoBlsB,IAAW6W,EAAuBoV,GAASzkE,UAC1D2D,EAAI,EAAGA,EAAI+gE,EAAkB1hE,OAAQW,IAAK,CACjD,IAAIghE,EAAsBD,EAAkB/gE,GAAG,GAA3C,IAAiD+gE,EAAkB/gE,GAAG,GAC1E,GAAImgE,EAAgBvkD,IAAIolD,GAAmB,CACzCJ,EAAUI,EAAiBp3D,MAAM,KACjCi3D,GAAY,EACZ,OAGJ,GAAIA,EACF,WAGY7jE,IAAZ4jE,IACFA,EAAUT,EAAgB9jE,SAASsB,OAAOG,MAAM8L,MAAM,WAGxDg3D,EAAUT,EAAgB9jE,SAASsB,OAAOG,MAAM8L,MAAM,KAGxD,SAAS8hD,EAAwBhZ,GAC/B,IAAIrgB,EAAY,IAAIkuB,EAAAt4C,EAChBi9C,EAASxS,EACTyS,SAAIC,SAAIC,SAAIC,SAkBhB,OAjBIJ,EAAOj3C,EAAI,GAAM,GACnBk3C,EAAK,EACLC,EAAMF,EAAOllD,GAAK,EAAK,EAAI,EAC3BqlD,EAAMH,EAAOllD,GAAK,GAAM,EAAI,EAC5BslD,GAAM,IAENH,GAAoB,IAAdD,EAAOllD,EAAY,EAAI,EAC7BolD,EAAMF,EAAOllD,EAAI,EAAK,EAAI,EAC1BqlD,EAAMH,EAAOllD,EAAI,GAAM,EAAI,EAC3BslD,EAAmB,IAAbJ,EAAOllD,GAAY,GAAK,GAEhCqyB,EAAUoJ,IAAI,GAAIypB,EAAOllD,EAAImlD,EAAID,EAAOj3C,IACxCokB,EAAUoJ,IAAI,IAAKypB,EAAOllD,EAAIolD,EAAIF,EAAOj3C,EAAI,IAC7CokB,EAAUoJ,IAAI,KAAMypB,EAAOllD,EAAIqlD,EAAIH,EAAOj3C,EAAI,IAC9CokB,EAAUoJ,IAAI,KAAMypB,EAAOllD,EAAIslD,EAAIJ,EAAOj3C,IAC1CokB,EAAUoJ,IAAI,KAAMypB,EAAOllD,EAAIqlD,EAAIH,EAAOj3C,EAAI,IAC9CokB,EAAUoJ,IAAI,KAAMypB,EAAOllD,EAAIolD,EAAIF,EAAOj3C,EAAI,IACvCokB,EAET,OAAQpoB,SAAS22D,EAAQ,IAAK32D,SAAS22D,EAAQ,2CAiClChB,EAAYC,EAAcoB,EAAUn/B,GACjD,IAAIo/B,EAAa,SAACnuD,GAChB,OAAO,GAAKA,EAAOA,IAFqCpH,GAAA,EAAAC,GAAA,EAAAC,OAAA7O,EAAA,IAK1D,QAAA8O,EAAAC,EAAAk0C,IAAyBlkD,KAAK2lC,YAA9B/1B,GAAAG,EAAAC,EAAApO,QAAAC,MAAA+N,GAAA,EAAwC,KAA/B8zD,EAA+B3zD,EAAAhO,MAClCioC,EAAW65B,EAAWqB,GAAUxB,EAAa,IACjD39B,EAAQrG,IAAIgkC,EAAa,GAAIyB,EAAWn7B,KAPgB,MAAA5nC,GAAAyN,GAAA,EAAAC,EAAA1N,EAAA,aAAAwN,GAAAI,EAAA3N,QAAA2N,EAAA3N,SAAA,WAAAwN,EAAA,MAAAC,GAAA,IAAAc,GAAA,EAAAC,GAAA,EAAAC,OAAA7P,EAAA,IAU1D,QAAA8P,EAAAC,EAAAkzC,IAAyB4f,KAAzBlzD,GAAAG,EAAAC,EAAApP,QAAAC,MAAA+O,GAAA,EAAuC,KAA9B8yD,EAA8B3yD,EAAAhP,MACjCioC,EAAW65B,EAAWqB,GAAUxB,EAAa,IACjD39B,EAAQrG,IAAIgkC,EAAa,GAAIyB,EAAWn7B,KAZgB,MAAA5nC,GAAAyO,GAAA,EAAAC,EAAA1O,EAAA,aAAAwO,GAAAI,EAAA3O,QAAA2O,EAAA3O,SAAA,WAAAwO,EAAA,MAAAC,iCAgBtDmxD,GACJjiE,KAAK2lC,SAASt8B,QACdrJ,KAAKs2B,UAAUjtB,QAFC,IAAA+H,GAAA,EAAAC,GAAA,EAAAC,OAAArQ,EAAA,IAGhB,QAAAsQ,EAAAC,EAAA0yC,IAAiBlkD,KAAKK,aAAtB+Q,GAAAG,EAAAC,EAAA5P,QAAAC,MAAAuP,GAAA,EAAiC,KAAxB40C,EAAwBz0C,EAAAxP,MAC/BikD,EAAK,GAAGof,KAAKnD,GACbjiE,KAAKyjE,cAAczd,EAAK,GAAIA,EAAK,KALnB,MAAA5jD,GAAAiP,GAAA,EAAAC,EAAAlP,EAAA,aAAAgP,GAAAI,EAAAnP,QAAAmP,EAAAnP,SAAA,WAAAgP,EAAA,MAAAC,GAOhB,OAAOtR,KAAK2lC,kBCvSK0/B,aACnB,SAAAA,EAAa79D,EAAS4uB,EAAYp1B,EAAMskE,GAAalgB,IAAAplD,KAAAqlE,GACnDrlE,KAAK2iE,QAAUn7D,EACfxH,KAAKkB,UAAYsG,EAAQg3B,MACzBx+B,KAAK6jE,WAAaztC,EAClBp2B,KAAKijC,WAAa,EAClBjjC,KAAKm8C,eAAiB,KACtBn8C,KAAKy1B,MAAQz0B,EACbhB,KAAK6iE,eAAiB5B,EACtBjhE,KAAKsS,QAAUtS,KAAK6iE,eAAe,OAAQ7iE,KAAKijC,YAAa,EAAG,IAChEjjC,KAAKulE,gBAAkB/9D,EAAQgF,SAASlJ,OACxCtD,KAAKwlE,cAAgBh+D,EAAQo6B,OAAOt+B,OACpCtD,KAAK+iE,WAAav7D,EAAQyH,KAAK3L,OAC/BtD,KAAKylE,eAAiBj+D,EAAQnJ,KAAKsiD,eAAer9C,OAClDtD,KAAKslE,YAAcA,EACnBtlE,KAAKK,UAAY,IAAImkD,EAAAt4C,EACrBlM,KAAK2lC,SAAW,IAAI6e,EAAAt4C,EACpBlM,KAAK0lE,YAAc,IAAIlhB,EAAAt4C,EACvBlM,KAAK2lE,kBAAoB3lE,KAAK2iE,QAAQtkE,KAAKsO,+DAI3C3M,KAAK4lE,gBACL5lE,KAAK6lE,YACL7lE,KAAK8lE,YACL9lE,KAAK+lE,sDAQL,IAJA,IAAIplB,EAAiB3gD,KAAK2iE,QAAQtkE,KAAKsiD,eACnCqlB,EAAaljE,KAAKgjC,MAAMhjC,KAAKsQ,KAAKpT,KAAK+iE,WAAa/iE,KAAKslE,cACzDW,GAAmBljE,KAAMijE,EAAY9iE,IAAK8iE,GAA1CC,GAA6DljE,KAAMijE,EAAY9iE,IAAK8iE,GACpFE,GAAYz2D,GAAK1M,IAAKumB,IAAUpmB,KAAMomB,KAAYxd,GAAK/I,IAAKumB,IAAUpmB,KAAMomB,MACvE68C,EAAW,EAAGA,EAAWnmE,KAAKylE,eAAgBU,IAAY,CACjE,IAAIvD,EAASjiB,EAAewlB,GACxBvD,EAAO,GAAKsD,EAAQz2D,EAAE1M,MAAOmjE,EAAQz2D,EAAE1M,IAAM6/D,EAAO,IACpDA,EAAO,GAAKsD,EAAQz2D,EAAEvM,MAAOgjE,EAAQz2D,EAAEvM,IAAM0/D,EAAO,IACpDA,EAAO,GAAKsD,EAAQp6D,EAAE/I,MAAOmjE,EAAQp6D,EAAE/I,IAAM6/D,EAAO,IACpDA,EAAO,GAAKsD,EAAQp6D,EAAE5I,MAAOgjE,EAAQp6D,EAAE5I,IAAM0/D,EAAO,IAK1D,IAFA,IAAIwD,EAAapmE,KAAK2lE,kBAAkB,GACpCU,EAAiB,IAAIxrB,EAAA3uC,EAChBi6D,EAAW,EAAGA,EAAWnmE,KAAKylE,eAAgBU,IAAY,CAEjE,IAAIG,EAAiB3lB,EAAewlB,GAChCI,KACJA,EAAU,IAAMD,EAAe,GAAKJ,EAAQz2D,EAAE1M,MAAQmjE,EAAQz2D,EAAEvM,IAAMgjE,EAAQz2D,EAAE1M,MAAQkjE,EAAY/iE,IAAM+iE,EAAYljE,KAAOkjE,EAAYljE,IACzIwjE,EAAU,IAAMD,EAAe,GAAKJ,EAAQp6D,EAAE/I,MAAQmjE,EAAQp6D,EAAE5I,IAAMgjE,EAAQp6D,EAAE/I,MAAQkjE,EAAY/iE,IAAM+iE,EAAYljE,KAAOkjE,EAAYljE,IACzIwjE,EAAU,GAAoB,EAAfA,EAAU,GAASvmE,KAAKijC,WACvCsjC,EAAU,GAAoB,EAAfA,EAAU,GAASvmE,KAAKijC,WAEvC,IAAIujC,EAAiBxmE,KAAKsS,QAAQm0D,yBAAyBzmE,KAAKijC,WAAYsjC,GACxEG,EAAaF,EAAejtD,KAAK,KACrC,GAAK8sD,EAAexmD,IAAI6mD,GASjB,CASL,IAPA,IAAIj7D,EAAOzL,KAAK6iE,eAAe,MAAO7iE,KAAKijC,WAAYujC,GACnD1C,EAAe,IAAItf,EAAAt4C,IACpBw6D,EAAYj7D,KAIXk7D,GAAa,GACTA,GAAY,CAClB,IAAIC,EAAkB,IAAIpiB,EAAAt4C,EADR3J,GAAA,EAAAC,GAAA,EAAAC,OAAAxB,EAAA,IAElB,QAAAyB,EAAAC,EAAAuhD,IAAyB4f,KAAzBvhE,GAAAG,EAAAC,EAAAf,QAAAC,MAAAU,GAAA,EAAuC,KAA9BskE,EAA8BnkE,EAAAX,MAAA6N,GAAA,EAAAC,GAAA,EAAAC,OAAA7O,EAAA,IACrC,QAAA8O,EAAAC,EAAAk0C,IAAqB2iB,EAAa,GAAGvwC,aAArC1mB,GAAAG,EAAAC,EAAApO,QAAAC,MAAA+N,GAAA,EAAgD,KAAvCmyB,EAAuChyB,EAAAhO,MAC1C+kE,EAAgB/kC,EAAS,GAAGxoB,KAAK,KACrC,IAAK8sD,EAAexmD,IAAIinD,GAAgB,CAEtCN,EAAiBzkC,EAAS,GAC1B2kC,EAAaI,EACbH,GAAa,EACb,MAEA,IAAKC,EAAgB/mD,IAAIinD,GAAgB,CACvC,IAAIC,EAAU/mE,KAAK6iE,eAAe,MAAO7iE,KAAKijC,WAAYlB,EAAS,IACnE6kC,EAAgBlnC,IAAIonC,EAAeC,KAZJ,MAAA3kE,GAAAyN,GAAA,EAAAC,EAAA1N,EAAA,aAAAwN,GAAAI,EAAA3N,QAAA2N,EAAA3N,SAAA,WAAAwN,EAAA,MAAAC,GAgBrC,GAAI62D,EAAc,OAlBF,MAAAvkE,GAAAI,GAAA,EAAAC,EAAAL,EAAA,aAAAG,GAAAI,EAAAN,QAAAM,EAAAN,SAAA,WAAAG,EAAA,MAAAC,GAoBbkkE,IACH7C,EAAe8C,GAGnBP,EAAetoD,IAAI2oD,GAEnBj7D,EAAOzL,KAAK6iE,eAAe,MAAO7iE,KAAKijC,WAAYujC,GAnC9C,IAAA51D,GAAA,EAAAC,GAAA,EAAAC,OAAA7P,EAAA,IAoCL,QAAA8P,EAAAC,EAAAkzC,IAAqBz4C,EAAK6qB,aAA1B1lB,GAAAG,EAAAC,EAAApP,QAAAC,MAAA+O,GAAA,EAAqC,KAC/Bk2D,EAD+B/1D,EAAAhP,MACN,GAAGwX,KAAK,KACrC8sD,EAAetoD,IAAI+oD,IAtChB,MAAA1kE,GAAAyO,GAAA,EAAAC,EAAA1O,EAAA,aAAAwO,GAAAI,EAAA3O,QAAA2O,EAAA3O,SAAA,WAAAwO,EAAA,MAAAC,QAT8B,CAEnCu1D,EAAetoD,IAAI2oD,GAEnB,IAAIj7D,EAAOzL,KAAK6iE,eAAe,MAAO7iE,KAAKijC,WAAYujC,GAJpBllE,GAAA,EAAAC,GAAA,EAAAC,OAAAP,EAAA,IAKnC,QAAAQ,EAAAC,EAAAwiD,IAAqBz4C,EAAK6qB,aAA1Bh1B,GAAAG,EAAAC,EAAAE,QAAAC,MAAAP,GAAA,EAAqC,KAC/BwlE,EAD+BrlE,EAAAM,MACN,GAAGwX,KAAK,KACrC8sD,EAAetoD,IAAI+oD,IAPc,MAAA1kE,GAAAb,GAAA,EAAAC,EAAAY,EAAA,aAAAd,GAAAI,EAAAW,QAAAX,EAAAW,SAAA,WAAAd,EAAA,MAAAC,IAmDrC,IACIwlE,SACApE,SACJ,GAHcuD,EAAWnmE,KAAKulE,gBAGjB,CAEX,IAAI0B,EAAWd,EACfa,EAAa,SAAWC,EACxBrE,EAAS5iE,KAAK6iE,eAAeoE,EAAUjnE,KAAKijC,WAAYujC,GACxD,IAAIU,EAAiB,IAAIzE,EAAWwE,EAAUjnE,KAAK2iE,QAAQn2D,SAASy6D,GAAWrE,EAAQ,EAAG5iE,KAAKijC,WAAYjjC,KAAK6iE,gBAChH7iE,KAAK0lE,YAAYhmC,IAAIsnC,EAAYE,GAEX,IAAlBd,EAAW,IAAYA,EAAW,KAAOa,IAC3CjnE,KAAKm8C,eAAiB+qB,EAAe/qB,oBAElC,CAEL,IAAIgrB,EAAShB,EAAWnmE,KAAKulE,gBACzBjgC,GAAWtlC,KAAK2iE,QAAQ/gC,OAAOulC,GACnCH,EAAa,QAAU1hC,GACvBs9B,EAAS5iE,KAAK6iE,eAAev9B,GAAUtlC,KAAKijC,WAAYujC,GACxDxmE,KAAK0lE,YAAYhmC,IAAIsnC,EAAYpE,GACjC5iE,KAAKK,UAAUq/B,IAAI4F,GAAUs9B,GAC7B5iE,KAAK2lC,SAASjG,IAAIkjC,EAAOjsB,SAAS1yC,EAAI,IAAM2+D,EAAOjsB,SAASzkC,EAAGozB,KACxC,IAAnB8gC,EAAW,IAAaA,EAAW,KAAO9gC,KAC5CtlC,KAAKm8C,eAAiB7W,0CAS5B,IAAK,IAAI4+B,EAAiB,EAAGA,EAAiBlkE,KAAK2lE,kBAAkBriE,OAAQ4gE,IAAkB,CAC7F,IAAIkD,EAAUpnE,KAAK2lE,kBAAkBzB,GACrC,IAAoB,IAAhBkD,EAAQ,GAAZ,CAGE,IAAIH,EAAWG,EAAQ,GACnBC,EAAernE,KAAK0lE,YAAYj4C,IAAI,SAAWw5C,GAF9CK,EAI+BtnE,KAAKunE,eAAeN,GAJnDO,EAAAlhB,IAAAghB,EAAA,GAIAxD,EAJA0D,EAAA,GAIczD,EAJdyD,EAAA,GAMLH,EAAaxB,UAAU7lE,KAAK6jE,WAAYC,EAAcC,GACtD/jE,KAAKK,UAAY,IAAImkD,EAAAt4C,KAAA4Q,OAAAw/B,IAAQt8C,KAAKK,WAAjBi8C,IAA+B+qB,EAAahnE,aAC7DL,KAAK2lC,SAAW,IAAI6e,EAAAt4C,KAAA4Q,OAAAw/B,IAAQt8C,KAAK2lC,UAAjB2W,IAA8B+qB,EAAa1hC,qDAKjDshC,GAGd,IAFA,IAAIQ,EAAU,IAAIjjB,EAAAt4C,EACdw7D,EAAU,IAAI7sB,EAAA3uC,EACTg4D,EAAiB,EAAGA,EAAiBlkE,KAAK2lE,kBAAkBriE,OAAQ4gE,IAAkB,CAC7F,IAAIkD,EAAUpnE,KAAK2lE,kBAAkBzB,GACrC,IAAoB,IAAhBkD,EAAQ,GAAW,CAErB,IAAIO,EAAa3nE,KAAK0lE,YAAYj4C,IAAI,QAAU25C,EAAQ,IACxDK,EAAQ/nC,IAAIioC,EAAWhxB,SAAS1yC,EAAI,IAAM0jE,EAAWhxB,SAASzkC,EAAGk1D,EAAQ,IAEzE,IAAI9wC,EAAYqxC,EAAWrxC,UALNllB,GAAA,EAAAC,GAAA,EAAAC,OAAArQ,EAAA,IAMrB,QAAAsQ,EAAAC,EAAA0yC,IAAqB5tB,KAArBllB,GAAAG,EAAAC,EAAA5P,QAAAC,MAAAuP,GAAA,EAAgC,KAAvB2wB,EAAuBxwB,EAAAxP,MAC9B2lE,EAAQ3pD,IAAIgkB,EAAS,GAAGxoB,KAAK,OAPV,MAAAnX,GAAAiP,GAAA,EAAAC,EAAAlP,EAAA,aAAAgP,GAAAI,EAAAnP,QAAAmP,EAAAnP,SAAA,WAAAgP,EAAA,MAAAC,SAUrB,GAAI81D,EAAQ,KAAOH,EAAU,CAE3B,IAAIU,EAAa3nE,KAAK0lE,YAAYj4C,IAAI,SAAW25C,EAAQ,IACzDK,EAAU,IAAIjjB,EAAAt4C,KAAA4Q,OAAAw/B,IAAQmrB,GAAZnrB,IAAwBqrB,EAAWhiC,YAE7C,IAAIrP,EAAYqxC,EAAWrxC,UAC3BoxC,EAAU,IAAI7sB,EAAA3uC,KAAA4Q,OAAAw/B,IAAQorB,GAAZprB,IAAwBhmB,MAIxC,OAAQmxC,EAASC,uCAKjB,IACIE,EAAU,EAAI9kE,KAAKsQ,KAAK,GAAK,EAE7By0D,GAAcp4D,GAAK1M,IAAKumB,IAAUpmB,KAAMomB,KAAYxd,GAAK/I,IAAKumB,IAAUpmB,KAAMomB,MALvEogC,GAAA,EAAAC,GAAA,EAAAC,OAAA3oD,EAAA,IAMX,QAAA4oD,EAAAC,EAAA5F,IAAiBlkD,KAAKK,aAAtBqpD,GAAAG,EAAAC,EAAAloD,QAAAC,MAAA6nD,GAAA,EAAiC,KAC3Boe,EAD2Bje,EAAA9nD,MACT,GAAG6J,OAAOC,YAChCg8D,EAAUp4D,EAAEvM,IAAMJ,KAAKI,IAAI4kE,EAAWr4D,EAAGo4D,EAAUp4D,EAAEvM,KACrD2kE,EAAUp4D,EAAE1M,IAAMD,KAAKC,IAAI+kE,EAAWr4D,EAAGo4D,EAAUp4D,EAAE1M,KACrD8kE,EAAU/7D,EAAE5I,IAAMJ,KAAKI,IAAI4kE,EAAWh8D,EAAG+7D,EAAU/7D,EAAE5I,KACrD2kE,EAAU/7D,EAAE/I,IAAMD,KAAKC,IAAI+kE,EAAWh8D,EAAG+7D,EAAU/7D,EAAE/I,MAX5C,MAAAX,GAAAunD,GAAA,EAAAC,EAAAxnD,EAAA,aAAAsnD,GAAAI,EAAAznD,QAAAynD,EAAAznD,SAAA,WAAAsnD,EAAA,MAAAC,GAaXie,EAAUp4D,EAAEvM,IAAM2kE,EAAUp4D,EAAEvM,IAAM,EAAIlD,KAAKijC,WAX/B,EAYd4kC,EAAUp4D,EAAE1M,IAAM8kE,EAAUp4D,EAAE1M,IAAM,EAAI/C,KAAKijC,WAZ/B,EAad4kC,EAAU/7D,EAAE5I,IAAM2kE,EAAU/7D,EAAE5I,IAAM,EAAIlD,KAAKijC,WAAa2kC,EAC1DC,EAAU/7D,EAAE/I,IAAM8kE,EAAU/7D,EAAE/I,IAAM,EAAI/C,KAAKijC,WAAa2kC,EAC1DC,EAAUpjC,aAAeojC,EAAU/7D,EAAE5I,IAAM2kE,EAAU/7D,EAAE/I,MAAQ8kE,EAAUp4D,EAAEvM,IAAM2kE,EAAUp4D,EAAE1M,KAC7F/C,KAAKgjC,YAAc6kC,EAEnB,IAAIzF,GAAgBn+D,GAAKlB,IAAKumB,IAAUpmB,KAAMomB,KAAYpX,GAAKnP,IAAKumB,IAAUpmB,KAAMomB,MApBzEq/B,GAAA,EAAAC,GAAA,EAAAC,OAAA5nD,EAAA,IAqBX,QAAA6nD,EAAAC,EAAA7E,IAAiBlkD,KAAKK,aAAtBsoD,GAAAG,EAAAC,EAAAnnD,QAAAC,MAAA8mD,GAAA,EAAiC,KAC3B+a,EAD2B5a,EAAA/mD,MACP,GAAG40C,SAC3ByrB,EAAYn+D,EAAEf,IAAMJ,KAAKI,IAAIwgE,EAAaz/D,EAAGm+D,EAAYn+D,EAAEf,KAC3Dk/D,EAAYn+D,EAAElB,IAAMD,KAAKC,IAAI2gE,EAAaz/D,EAAGm+D,EAAYn+D,EAAElB,KAC3Dq/D,EAAYlwD,EAAEhP,IAAMJ,KAAKI,IAAIwgE,EAAaxxD,EAAGkwD,EAAYlwD,EAAEhP,KAC3Dk/D,EAAYlwD,EAAEnP,IAAMD,KAAKC,IAAI2gE,EAAaxxD,EAAGkwD,EAAYlwD,EAAEnP,MA1BlD,MAAAX,GAAAwmD,GAAA,EAAAC,EAAAzmD,EAAA,aAAAumD,GAAAI,EAAA1mD,QAAA0mD,EAAA1mD,SAAA,WAAAumD,EAAA,MAAAC,GA4BXuZ,EAAYn+D,EAAEf,IAAMk/D,EAAYn+D,EAAEf,IAAM,EACxCk/D,EAAYn+D,EAAElB,IAAMq/D,EAAYn+D,EAAElB,IAAM,EACxCq/D,EAAYlwD,EAAEhP,IAAMk/D,EAAYlwD,EAAEhP,IAAM,EACxCk/D,EAAYlwD,EAAEnP,IAAMq/D,EAAYlwD,EAAEnP,IAAM,EACxC/C,KAAK+nD,cAAgBqa,wCAKrBpiE,KAAK+nE,eAED7lE,KAAKsD,4CAKT,IAAIwiE,EAAchoE,KAAKioE,yBACvBjoE,KAAKkoE,gBAAgBF,GACrBhoE,KAAK8lE,kDAIL,IAAIkC,EAAchoE,KAAKmoE,wBACvBnoE,KAAKkoE,gBAAgBF,GACrBhoE,KAAK8lE,6DAWL,IAJA,IAAIsC,EAAYpoE,KAAK6iE,eAAe,QAAS7iE,KAAKijC,YAAa,EAAG,IAC9DolC,KACAC,EAAgB,IAAI9jB,EAAAt4C,EACpB87D,EAAc,IAAIxjB,EAAAt4C,EACbg4D,EAAiB,EAAGA,EAAiBlkE,KAAK2lE,kBAAkBriE,OAAQ4gE,IAAkB,CAC7F,IAAIkD,EAAUpnE,KAAK2lE,kBAAkBzB,GACrC,IAAoB,IAAhBkD,EAAQ,GAAW,CACrB,IACIz7D,EAAK,QADMy7D,EAAQ,GAEvBY,EAAYtoC,IAAI/zB,GAAK,EAAG,IACxB,IAAI63D,EAAWxjE,KAAK0lE,YAAYj4C,IAAI9hB,GAGhC+3D,EAAe0E,EAAU5F,gBAAgBgB,EAAS7sB,SAAS1yC,EAAGu/D,EAAS7sB,SAASzkC,IAEhFxK,EAAQ0gE,EAAUhgB,kBAAkBsb,IACxC4E,EAAc5oC,IAAI/zB,EAAIjE,GACtB2gE,gBAAmBA,GAAnB/rB,IAAoC50C,QAC/B,CACL,IACIiE,EAAK,SADMy7D,EAAQ,GAEvBY,EAAYtoC,IAAI/zB,GAAK,EAAG,IACxB,IAAI07D,EAAernE,KAAK0lE,YAAYj4C,IAAI9hB,GACpC88C,KALC8C,GAAA,EAAAC,GAAA,EAAAC,OAAAxqD,EAAA,IAML,QAAAyqD,EAAAC,EAAAzH,IAAiBmjB,EAAahnE,aAA9BkrD,GAAAG,EAAAC,EAAA/pD,QAAAC,MAAA0pD,GAAA,EAAyC,KAAhCvF,EAAgC0F,EAAA3pD,MACnC2hE,EAAe0E,EAAU5F,gBAAgBxc,EAAK,GAAGrP,SAAS1yC,EAAG+hD,EAAK,GAAGrP,SAASzkC,IAClFu2C,EAAUtmD,KAAKuhE,IARZ,MAAAthE,GAAAopD,GAAA,EAAAC,EAAArpD,EAAA,aAAAmpD,GAAAI,EAAAtpD,QAAAspD,EAAAtpD,SAAA,WAAAmpD,EAAA,MAAAC,GAUL,IAAI/jD,EAAQ0gE,EAAUhgB,iBAAiBK,GACvC6f,EAAc5oC,IAAI/zB,EAAIjE,GACtB2gE,gBAAmBA,GAAnB/rB,IAAoC50C,KAGxC2gE,EAAeD,EAAUhgB,iBAAiBigB,GAC1C,IAAI1lC,GACF1+B,EAAGnB,KAAKgjC,OAAOuiC,EAAa,GAAG,GAAKA,EAAa,GAAG,IAAM,GAC1Dn2D,EAAGpP,KAAKgjC,OAAOuiC,EAAa,GAAG,GAAKA,EAAa,GAAG,IAAM,IAE5DroE,KAAK2iC,eAAiBA,EAGtB,IADA,IAAI4lC,EAAY,IAAI/jB,EAAAt4C,EACXmqB,EAAMgyC,EAAa,GAAG,GAAIhyC,GAAOgyC,EAAa,GAAG,GAAIhyC,IAC5DkyC,EAAU7oC,IAAIrJ,GAAK,GAGrB,IADA,IAAImyC,EAAe,IAAIhkB,EAAAt4C,EACdu8D,EAASJ,EAAa,GAAG,GAAII,GAAUJ,EAAa,GAAG,GAAII,IAClED,EAAa9oC,IAAI+oC,GAAQ,GAlDH,IAAA1c,GAAA,EAAAC,GAAA,EAAAC,OAAAhrD,EAAA,IAoDxB,QAAAirD,EAAAC,EAAAjI,IAAoBokB,KAApBvc,GAAAG,EAAAC,EAAAvqD,QAAAC,MAAAkqD,GAAA,EAAmC,CAEjC,GAAsB,KADlBroC,EAD6BwoC,EAAAnqD,MACZ,IACVuB,OACTilE,EAAU7oC,IAAIhc,EAAO,GAAG,GAAK,GAAG,GAChC6kD,EAAU7oC,IAAIhc,EAAO,GAAG,IAAI,GAC5B8kD,EAAa9oC,IAAIhc,EAAO,GAAG,GAAK,GAAG,GACnC8kD,EAAa9oC,IAAIhc,EAAO,GAAG,IAAI,OAC1B,CACL,IAAK,IAAI2S,EAAM3S,EAAO,GAAG,GAAI2S,GAAO3S,EAAO,GAAG,GAAI2S,IAChDkyC,EAAU7oC,IAAIrJ,EAAM,GAAG,GACvBkyC,EAAU7oC,IAAIrJ,GAAK,GAErB,IAAK,IAAIoyC,EAAS/kD,EAAO,GAAG,GAAI+kD,GAAU/kD,EAAO,GAAG,GAAI+kD,IACtDD,EAAa9oC,IAAI+oC,EAAS,GAAG,GAC7BD,EAAa9oC,IAAI+oC,GAAQ,KAlEP,MAAArmE,GAAA4pD,GAAA,EAAAC,EAAA7pD,EAAA,aAAA2pD,GAAAI,EAAA9pD,QAAA8pD,EAAA9pD,SAAA,WAAA2pD,EAAA,MAAAC,GAwExB,IAAIyc,EAAiB,IAAIlkB,EAAAt4C,EACrBy8D,EAAoB,IAAInkB,EAAAt4C,EAzEJqgD,GAAA,EAAAC,GAAA,EAAAC,OAAAxrD,EAAA,IA0ExB,QAAAyrD,EAAAC,EAAAzI,IAAoBokB,KAApB/b,GAAAG,EAAAC,EAAA/qD,QAAAC,MAAA0qD,GAAA,EAAmC,KAI7B7oC,EAJGklD,EAA0Blc,EAAA3qD,MAC7B4J,EAAKi9D,EAAQ,GACbC,SACAC,SAEkB,KADlBplD,EAASklD,EAAQ,IACVtlE,QACTulE,EAAgBnlD,EAAO,GAAG,GAC1BolD,EAAmBplD,EAAO,GAAG,KAGzBA,EAAO,GAAG,GAAKif,EAAezwB,IAChC22D,EAAgBnlD,EAAO,GAAG,IAExBA,EAAO,GAAG,GAAKif,EAAezwB,IAChC22D,EAAgBnlD,EAAO,GAAG,IAIxBA,EAAO,GAAG,GAAKif,EAAe1+B,IAChC6kE,EAAmBplD,EAAO,GAAG,IAE3BA,EAAO,GAAG,GAAKif,EAAezwB,IAChC42D,EAAmBplD,EAAO,GAAG,KAIjC,IAAIqlD,EAASL,EAAej7C,IAAIo7C,OAChCE,gBAAaA,IAAQp9D,IACrB+8D,EAAehpC,IAAImpC,EAAeE,GAClC,IAAIC,EAAYL,EAAkBl7C,IAAIq7C,OACtCE,gBAAgBA,IAAWr9D,IAC3Bg9D,EAAkBjpC,IAAIopC,EAAkBE,IAzGlB,MAAA5mE,GAAAoqD,GAAA,EAAAC,EAAArqD,EAAA,aAAAmqD,GAAAI,EAAAtqD,QAAAsqD,EAAAtqD,SAAA,WAAAmqD,EAAA,MAAAC,GA8GxB,IADA,IAAIwc,EAAa,EACR5yC,EAAMsM,EAAezwB,EAAGmkB,GAAOgyC,EAAa,GAAG,GAAIhyC,IAI1D,GAHIkyC,EAAU96C,IAAI4I,IAChB4yC,IAEEP,EAAe7oD,IAAIwW,GAAM,CAC3B,IAAI6yC,EAAMR,EAAej7C,IAAI4I,GADF03B,GAAA,EAAAC,IAAA,EAAAC,QAAAhtD,EAAA,IAE3B,QAAAitD,GAAAC,GAAAjK,IAAeglB,KAAfnb,GAAAG,GAAAC,GAAAvsD,QAAAC,MAAAksD,GAAA,EAAoB,KAAXpiD,GAAWuiD,GAAAnsD,MACdonE,GAASnB,EAAYv6C,IAAI9hB,IAC7Bw9D,GAAO,GAAKF,EACZjB,EAAYtoC,IAAI/zB,GAAIw9D,KALK,MAAA/mE,GAAA4rD,IAAA,EAAAC,GAAA7rD,EAAA,aAAA2rD,GAAAI,GAAA9rD,QAAA8rD,GAAA9rD,SAAA,WAAA2rD,GAAA,MAAAC,KAS/Bgb,EAAa,EACb,IAAK,IAAI5yC,GAAMsM,EAAezwB,EAAGmkB,IAAOgyC,EAAa,GAAG,GAAIhyC,KAI1D,GAHIkyC,EAAU96C,IAAI4I,KAChB4yC,IAEEP,EAAe7oD,IAAIwW,IAAM,CAC3B,IAAI6yC,GAAMR,EAAej7C,IAAI4I,IADFs8B,IAAA,EAAAC,IAAA,EAAAC,QAAA5xD,EAAA,IAE3B,QAAA6xD,GAAAC,GAAA7O,IAAeglB,MAAfvW,IAAAG,GAAAC,GAAAnxD,QAAAC,MAAA8wD,IAAA,EAAoB,KAAXhnD,GAAWmnD,GAAA/wD,MACdonE,GAASnB,EAAYv6C,IAAI9hB,IAC7Bw9D,GAAO,GAAKF,EACZjB,EAAYtoC,IAAI/zB,GAAIw9D,KALK,MAAA/mE,GAAAwwD,IAAA,EAAAC,GAAAzwD,EAAA,aAAAuwD,IAAAI,GAAA1wD,QAAA0wD,GAAA1wD,SAAA,WAAAuwD,GAAA,MAAAC,KAU/BoW,EAAa,EACb,IAAK,IAAIR,GAAS9lC,EAAe1+B,EAAGwkE,IAAUJ,EAAa,GAAG,GAAII,KAIhE,GAHID,EAAa/6C,IAAIg7C,KACnBQ,IAEEN,EAAkB9oD,IAAI4oD,IAAS,CACjC,IAAIS,GAAMP,EAAkBl7C,IAAIg7C,IADCxV,IAAA,EAAAC,IAAA,EAAAC,QAAAlyD,EAAA,IAEjC,QAAAmyD,GAAAC,GAAAnP,IAAeglB,MAAfjW,IAAAG,GAAAC,GAAAzxD,QAAAC,MAAAoxD,IAAA,EAAoB,KAAXtnD,GAAWynD,GAAArxD,MACdonE,GAASnB,EAAYv6C,IAAI9hB,IAC7Bw9D,GAAO,GAAKF,EACZjB,EAAYtoC,IAAI/zB,GAAIw9D,KALW,MAAA/mE,GAAA8wD,IAAA,EAAAC,GAAA/wD,EAAA,aAAA6wD,IAAAI,GAAAhxD,QAAAgxD,GAAAhxD,SAAA,WAAA6wD,GAAA,MAAAC,KASrC8V,EAAa,EACb,IAAK,IAAIR,GAAS9lC,EAAe1+B,EAAGwkE,IAAUJ,EAAa,GAAG,GAAII,KAIhE,GAHID,EAAa/6C,IAAIg7C,KACnBQ,IAEEN,EAAkB9oD,IAAI4oD,IAAS,CACjC,IAAIS,GAAMP,EAAkBl7C,IAAIg7C,IADCzU,IAAA,EAAAC,IAAA,EAAAC,QAAAjzD,EAAA,IAEjC,QAAAkzD,GAAAC,GAAAlQ,IAAeglB,MAAflV,IAAAG,GAAAC,GAAAxyD,QAAAC,MAAAmyD,IAAA,EAAoB,KAAXroD,GAAWwoD,GAAApyD,MACdonE,GAASnB,EAAYv6C,IAAI9hB,IAC7Bw9D,GAAO,GAAKF,EACZjB,EAAYtoC,IAAI/zB,GAAIw9D,KALW,MAAA/mE,GAAA6xD,IAAA,EAAAC,GAAA9xD,EAAA,aAAA4xD,IAAAI,GAAA/xD,QAAA+xD,GAAA/xD,SAAA,WAAA4xD,GAAA,MAAAC,KASrC,OAAO8T,kDAKP,IAAII,EAAYpoE,KAAK6iE,eAAe,QAAS7iE,KAAKijC,YAAa,EAAG,IAC9DmmC,EAAa,IAAI5kB,EAAAt4C,EACjBm9D,EAAY,IAAI7kB,EAAAt4C,EAChBm8D,KACAL,EAAc,IAAIxjB,EAAAt4C,EANCwnD,GAAA,EAAAC,GAAA,EAAAC,OAAA3yD,EAAA,IAQvB,QAAA4yD,EAAAC,EAAA5P,IAAoBlkD,KAAK2lE,qBAAzBjS,GAAAG,EAAAC,EAAAlyD,QAAAC,MAAA6xD,GAAA,EAA4C,KAAnC0T,EAAmCvT,EAAA9xD,MAC1C,IAAoB,IAAhBqlE,EAAQ,GAAW,CACrB,IACIz7D,EAAK,QADMy7D,EAAQ,GAEvBY,EAAYtoC,IAAI/zB,GAAK,EAAG,IACxB,IAAI63D,EAAWxjE,KAAK0lE,YAAYj4C,IAAI9hB,GAChC+3D,EAAe0E,EAAU5F,gBAAgBgB,EAAS7sB,SAAS1yC,EAAGu/D,EAAS7sB,SAASzkC,IAChFo3D,KAEJF,EAAW1pC,IAAIgkC,EAAanqD,KAAK,KAAM+P,KACvCggD,EAASnnE,KAAKuhE,GAEd,IAAIh8D,EAAQ0gE,EAAUhgB,iBAAiBkhB,GACvCjB,gBAAmBA,GAAnB/rB,IAAoC50C,IAZf,IAAAivD,GAAA,EAAAC,GAAA,EAAAC,OAAA51D,EAAA,IAcrB,QAAA61D,EAAAC,EAAA7S,IAAqBsf,EAASltC,aAA9BqgC,GAAAG,EAAAC,EAAAn1D,QAAAC,MAAA80D,GAAA,EAAyC,KAAhC50B,EAAgC+0B,EAAA/0D,MACnCinD,EAAmBof,EAAU5F,eAAezgC,EAAS,IACzDqnC,EAAW1pC,IAAIspB,EAAiBzvC,KAAK,KAAM+P,KAC3CggD,EAASnnE,KAAK6mD,IAjBK,MAAA5mD,GAAAw0D,GAAA,EAAAC,EAAAz0D,EAAA,aAAAu0D,GAAAI,EAAA10D,QAAA00D,EAAA10D,SAAA,WAAAu0D,EAAA,MAAAC,GAmBrBwS,EAAU3pC,IAAI/zB,EAAI29D,OACb,CACL,IACI39D,EAAK,SADMy7D,EAAQ,GAEvBY,EAAYtoC,IAAI/zB,GAAK,EAAG,IACxB,IAAI07D,EAAernE,KAAK0lE,YAAYj4C,IAAI9hB,GACpC29D,KALCC,GAAA,EAAAC,GAAA,EAAAC,OAAAxoE,EAAA,IAML,QAAAyoE,EAAAC,EAAAzlB,IAAiBmjB,EAAahnE,aAA9BkpE,GAAAG,EAAAC,EAAA/nE,QAAAC,MAAA0nE,GAAA,EAAyC,KAAhCvjB,EAAgC0jB,EAAA3nE,MACnC2hE,EAAe0E,EAAU5F,gBAAgBxc,EAAK,GAAGrP,SAAS1yC,EAAG+hD,EAAK,GAAGrP,SAASzkC,IAElFk3D,EAAW1pC,IAAIgkC,EAAanqD,KAAK,KAAM+P,KACvCggD,EAASnnE,KAAKuhE,IAVX,MAAAthE,GAAAonE,GAAA,EAAAC,EAAArnE,EAAA,aAAAmnE,GAAAI,EAAAtnE,QAAAsnE,EAAAtnE,SAAA,WAAAmnE,EAAA,MAAAC,GAaL,IAAI/hE,EAAQ0gE,EAAUhgB,iBAAiBkhB,GACvCjB,gBAAmBA,GAAnB/rB,IAAoC50C,IAEpC,IAAI4uB,EAAY+wC,EAAa/wC,UAhBxBszC,GAAA,EAAAC,GAAA,EAAAC,OAAA7oE,EAAA,IAiBL,QAAA8oE,EAAAC,EAAA9lB,IAAqB5tB,KAArBszC,GAAAG,EAAAC,EAAApoE,QAAAC,MAAA+nE,GAAA,EAAgC,KAAvB7nC,EAAuBgoC,EAAAhoE,MAC1BinD,EAAmBof,EAAU5F,eAAezgC,EAASl0B,MAAM,MAC/Du7D,EAAW1pC,IAAIspB,EAAiBzvC,KAAK,KAAM+P,KAC3CggD,EAASnnE,KAAK6mD,IApBX,MAAA5mD,GAAAynE,GAAA,EAAAC,EAAA1nE,EAAA,aAAAwnE,GAAAI,EAAA3nE,QAAA2nE,EAAA3nE,SAAA,WAAAwnE,EAAA,MAAAC,GAsBLT,EAAU3pC,IAAI/zB,EAAI29D,KAnDC,MAAAlnE,GAAAuxD,GAAA,EAAAC,EAAAxxD,EAAA,aAAAsxD,GAAAI,EAAAzxD,QAAAyxD,EAAAzxD,SAAA,WAAAsxD,EAAA,MAAAC,GAwDvB,IAAK,IAAIv9B,GAFTgyC,EAAeD,EAAUhgB,iBAAiBigB,IAEd,GAAG,GAAIhyC,GAAOgyC,EAAa,GAAG,GAAIhyC,IAC5D,IAAK,IAAIoyC,EAASJ,EAAa,GAAG,GAAII,GAAUJ,EAAa,GAAG,GAAII,IAAU,CAC5E,IAAI/B,EAAa+B,EAAS,IAAMpyC,EAC3B+yC,EAAWvpD,IAAI6mD,IAClB0C,EAAW1pC,IAAIgnC,EAAY,GAKjC,IAAI/jC,GACF1+B,EAAGnB,KAAKgjC,OAAOuiC,EAAa,GAAG,GAAKA,EAAa,GAAG,IAAM,GAC1Dn2D,EAAGpP,KAAKgjC,OAAOuiC,EAAa,GAAG,GAAKA,EAAa,GAAG,IAAM,IAE5DroE,KAAK2iC,eAAiBA,EAEtB,IAAIsnC,KACAC,EAAiB,IAAI1lB,EAAAt4C,EAxEFooD,GAAA,EAAAC,GAAA,EAAAC,QAAAvzD,EAAA,IAyEvB,QAAAwzD,GAAAC,GAAAxQ,IAAoBlkD,KAAK2lE,qBAAzBrR,GAAAG,GAAAC,GAAA9yD,QAAAC,MAAAyyD,GAAA,EAA4C,KAAnC8S,GAAmC3S,GAAA1yD,MAC1C,IAAoB,IAAhBqlE,GAAQ,GAAW,CACrB,IACIz7D,GAAK,QADMy7D,GAAQ,GAEnB1D,GAAe2F,EAAU57C,IAAI9hB,IAAI,GAEjCq0D,IAAar9B,EAAe1+B,EAAIy/D,GAAa,GAAI/gC,EAAezwB,EAAIwxD,GAAa,IACrFwG,EAAexqC,IAAI/zB,GAAIq0D,QAClB,CACL,IACIr0D,GAAK,SADMy7D,GAAQ,GAEnBC,GAAernE,KAAK0lE,YAAYj4C,IAAI9hB,IACpCq0D,IAAa,EAAG,GAChBh2B,GAAW1gB,IACX6gD,KAAoB,GAAO,GAC3BC,KAAY,GAAO,GAPlBC,IAAA,EAAAC,IAAA,EAAAC,QAAAtpE,EAAA,IAQL,QAAAupE,GAAAC,GAAAvmB,IAAiBmjB,GAAahnE,aAA9BgqE,IAAAG,GAAAC,GAAA7oE,QAAAC,MAAAwoE,IAAA,EAAyC,KAAhCrkB,GAAgCwkB,GAAAzoE,MACnC2hE,GAAe0E,EAAU5F,gBAAgBxc,GAAK,GAAGrP,SAAS1yC,EAAG+hD,GAAK,GAAGrP,SAASzkC,IAC9Ew4D,IAAkB/nC,EAAe1+B,EAAIy/D,GAAa,GAAI/gC,EAAezwB,EAAIwxD,GAAa,IAmB1F,GAlBKyG,GAAiB,IAIfC,GAAS,IAAMpK,GAAU,GAAK0K,GAAe,IAAM,IACtDN,GAAS,IAAK,EACdpK,GAAU,GAAK,IALjBA,GAAU,GAAK0K,GAAe,GAC9BP,GAAiB,IAAK,GAOnBA,GAAiB,IAIfC,GAAS,IAAMpK,GAAU,GAAK0K,GAAe,IAAM,IACtDN,GAAS,IAAK,EACdpK,GAAU,GAAK,IALjBA,GAAU,GAAK0K,GAAe,GAC9BP,GAAiB,IAAK,GAOpBC,GAAS,IAAMA,GAAS,GAC1BpgC,GAAW1gB,QACN,CACL,IAAIqhD,GAAgB7nE,KAAKmvC,IAAIy4B,GAAe,GAAI,GAAK5nE,KAAKmvC,IAAIy4B,GAAe,GAAI,GAC7EC,GAAgB3gC,KAClBA,GAAW2gC,IAERP,GAAS,KACZpK,GAAU,GAAK0K,GAAe,IAE3BN,GAAS,KACZpK,GAAU,GAAK0K,GAAe,MAxC/B,MAAAtoE,GAAAkoE,IAAA,EAAAC,GAAAnoE,EAAA,aAAAioE,IAAAI,GAAApoE,QAAAooE,GAAApoE,SAAA,WAAAioE,GAAA,MAAAC,IA4CLL,EAAexqC,IAAI/zB,GAAIq0D,IACvBiK,EAAW9nE,MAAMwJ,GAAIq+B,OA9HF,MAAA5nC,GAAAmyD,GAAA,EAAAC,GAAApyD,EAAA,aAAAkyD,GAAAI,GAAAryD,QAAAqyD,GAAAryD,SAAA,WAAAkyD,EAAA,MAAAC,IAkIvB,IAAIoW,MACAT,KAAoB,GAAO,GAC3BU,IAAiB,EAAG,GACpBC,GAAexhD,IArII6rC,IAAA,EAAAC,IAAA,EAAAC,QAAAp0D,EAAA,IAsIvB,QAAAq0D,GAAAC,GAAArR,IAAgBmlB,KAAhBlU,IAAAG,GAAAC,GAAA3zD,QAAAC,MAAAszD,IAAA,EAA2B,KAAlB4V,GAAkBzV,GAAAvzD,MACrBolE,GAAS4D,GAAI,GACjB,IAAI5D,GAAO5tB,SAAS,SAApB,CAGAqxB,iBAAgBA,IAAhBtuB,IAA8ByuB,GAAI,KAClC1B,EAAUz7C,OAAOu5C,IACbuD,GAAiBR,EAAez8C,IAAI05C,IAkBxC,GAjBA+C,EAAet8C,OAAOu5C,IACjBgD,GAAiB,GAIhBU,GAAc,GAAKH,GAAe,IAAM,IAC1CG,GAAc,GAAK,IAJrBA,GAAc,GAAKH,GAAe,GAClCP,GAAiB,IAAK,GAMnBA,GAAiB,GAIhBU,GAAc,GAAKH,GAAe,IAAM,IAC1CG,GAAc,GAAK,IAJrBA,GAAc,GAAKH,GAAe,GAClCP,GAAiB,IAAK,GAMG,IAArBU,GAAc,IAAiC,IAArBA,GAAc,GAAW,CACvD,IAAIF,GAAgB7nE,KAAKmvC,IAAIy4B,GAAe,GAAI,GAAK5nE,KAAKmvC,IAAIy4B,GAAe,GAAI,GACjFI,GAAehoE,KAAKC,IAAI+nE,GAAcH,OAjKnB,MAAAvoE,GAAAgzD,IAAA,EAAAC,GAAAjzD,EAAA,aAAA+yD,IAAAI,GAAAlzD,QAAAkzD,GAAAlzD,SAAA,WAAA+yD,GAAA,MAAAC,IAoKvBgU,EAAU3pC,IAAI,SAAUkrC,IACxBV,EAAexqC,IAAI,SAAUmrC,IAC7BZ,EAAW9nE,MAAM,SAAU2oE,KAtKJ,IAAAx/D,GAAA,SAyKXK,EAAIq0D,GACd,IAAMgL,GAAmB,EAAG,GAC5B,GAAIhL,EAAU18D,SAAW0nE,EAAgB1nE,QAAU08D,EAAUiL,MAAM,SAAClpE,EAAOsI,GAAR,OAAgBtI,IAAUipE,EAAgB3gE,KAAO,CAClH6/D,EAAet8C,OAAOjiB,GACtB,IAAK,IAAI1H,EAAI,EAAGA,EAAIgmE,EAAW3mE,OAAQW,IACjCgmE,EAAWhmE,GAAG,KAAO0H,GACvBs+D,EAAW33C,OAAOruB,EAAG,KA/KN6wD,IAAA,EAAAC,IAAA,EAAAC,QAAA/zD,EAAA,IAyKvB,QAAAg0D,GAAAC,GAAAhR,IAA8BgmB,EAAejrC,aAA7C61B,IAAAG,GAAAC,GAAAtzD,QAAAC,MAAAizD,IAAA,EAAwD,KAAAjlC,GAAAolC,GAAAlzD,MAAAiuB,GAAAs2B,IAAAz2B,GAAA,GAAAvkB,GAA5CK,GAA4CqkB,GAAA,GAAxCgwC,GAAwChwC,GAAA,KAzKjC,MAAA5tB,GAAA2yD,IAAA,EAAAC,GAAA5yD,EAAA,aAAA0yD,IAAAI,GAAA7yD,QAAA6yD,GAAA7yD,SAAA,WAAA0yD,GAAA,MAAAC,IAqLvBiV,EAAWh+D,KAAK,SAAUC,EAAGC,GAAK,OAAOD,EAAE,GAAKC,EAAE,KAUlD,IALA,IAAI++D,IAAS,EACTC,MACAC,GAAgB,IAAI5mB,EAAAt4C,KAAA4Q,OAAAw/B,IAAQ8sB,KAC5BiC,GAAe,IAAI7mB,EAAAt4C,GAEfg/D,IAAQ,CACdA,IAAS,EAET,IADA,IAAII,GAAgB,IAAI9mB,EAAAt4C,KAAA4Q,OAAAw/B,IAAQ8uB,MACvBnnE,GAAI,EAAGA,GAAIgmE,EAAW3mE,OAAQW,KAAK,CAClB,MAApBknE,GAAclnE,MAChBknE,GAAclnE,IAAK,GAErBknE,GAAclnE,IAAKknE,GAAclnE,IARlB,EASf,IAAI0H,GAAKs+D,EAAWhmE,IAAG,GACnBsnE,GAAWF,GAAa59C,IAAI9hB,IAC5B6/D,GAAgBnC,EAAU57C,IAAI9hB,IAClC,GAAgB,MAAZ4/D,GAAkB,CACpBA,MADoB,IAAA9V,IAAA,EAAAC,IAAA,EAAAC,QAAA10D,EAAA,IAEpB,QAAA20D,GAAAC,GAAA3R,IAAiBsnB,MAAjB/V,IAAAG,GAAAC,GAAAj0D,QAAAC,MAAA4zD,IAAA,EAAgC,KAAvB1wB,GAAuB6wB,GAAA7zD,MAC9BwpE,GAASppE,MAAM4iC,GAAK,GAAIA,GAAK,MAHX,MAAA3iC,GAAAszD,IAAA,EAAAC,GAAAvzD,EAAA,aAAAqzD,IAAAI,GAAAxzD,QAAAwzD,GAAAxzD,SAAA,WAAAqzD,GAAA,MAAAC,KAMtB,IAAI8V,GAAczrE,KAAK0rE,WAAU,EAAMP,GAAclnE,IAAIimE,EAAez8C,IAAI9hB,IAlB7D,EAkBgFy8D,EAAWkD,GAAeE,GAAeD,IACxIF,GAAa3rC,IAAI/zB,GAAI4/D,IACjBE,KACFN,GAAclnE,IAAKknE,GAAclnE,IArBpB,GAuBfinE,MAAaA,KAAaO,IAEvBP,KACHE,GAAgB,IAAI5mB,EAAAt4C,KAAA4Q,OAAAw/B,IAAQgvB,OAGhClC,EAAa,IAAI5kB,EAAAt4C,KAAA4Q,OAAAw/B,IAAQ8uB,MACzB,IAAK,IAAInnE,GAAI,EAAGA,GAAIgmE,EAAW3mE,OAAQW,KAAK,CAC1C,IAAI0H,GAAKs+D,EAAWhmE,IAAG,GACnBklE,GAASnpE,KAAK0rE,WAAU,EAAOP,GAAclnE,IAAIimE,EAAez8C,IAAI9hB,IAhCvD,GAiCjB,GAAW,WAAPA,GAAiB,KAAAoqD,IAAA,EAAAC,IAAA,EAAAC,QAAAh1D,EAAA,IACnB,QAAAi1D,GAAAC,GAAAjS,IAAoBlkD,KAAK2lE,qBAAzB5P,IAAAG,GAAAC,GAAAv0D,QAAAC,MAAAk0D,IAAA,EAA4C,KAAnCqR,GAAmClR,GAAAn0D,OACtB,IAAhBqlE,GAAQ,IACVY,EAAYtoC,IAAI,QAAU0nC,GAAQ,GAAI+B,KAHvB,MAAA/mE,GAAA4zD,IAAA,EAAAC,GAAA7zD,EAAA,aAAA2zD,IAAAI,GAAA9zD,QAAA8zD,GAAA9zD,SAAA,WAAA2zD,GAAA,MAAAC,UAOnB+R,EAAYtoC,IAAI/zB,GAAIw9D,IAGxB,OAAOnB,0CAGQA,GACfhoE,KAAK2lC,SAASt8B,QADc,IAAAsiE,GAAA,EAAAC,GAAA,EAAAC,OAAA5qE,EAAA,IAE5B,QAAA6qE,EAAAC,EAAA7nB,IAA0B8jB,KAA1B2D,GAAAG,EAAAC,EAAAnqE,QAAAC,MAAA8pE,GAAA,EAAuC,KAA9BK,EAA8BF,EAAA/pE,MACjC2gE,EAAQsJ,EAAc,GACtB7C,EAAS6C,EAAc,GAC3B,GAAItJ,EAAMnpB,SAAS,QAAS,CAC1B,IAAIjU,EAAWp3B,SAASw0D,EAAMx3D,QAAQ,QAAS,KAC3Cs4D,EAAWxjE,KAAK0lE,YAAYj4C,IAAIi1C,GACpCc,EAAS4B,KAAK+D,GACd,IAAIzF,EAAeF,EAAS7sB,SAAS1yC,EAAI,IAAMu/D,EAAS7sB,SAASzkC,EACjElS,KAAK2lC,SAASjG,IAAIgkC,EAAcp+B,OAC3B,CACL,IAAI2mC,EAAcjsE,KAAK0lE,YAAYj4C,IAAIi1C,GAAO0C,KAAK+D,GACnDnpE,KAAK2lC,SAAW,IAAI6e,EAAAt4C,KAAA4Q,OAAAw/B,IAAQt8C,KAAK2lC,UAAjB2W,IAA8B2vB,OAbtB,MAAA7pE,GAAAwpE,GAAA,EAAAC,EAAAzpE,EAAA,aAAAupE,GAAAI,EAAA1pE,QAAA0pE,EAAA1pE,SAAA,WAAAupE,EAAA,MAAAC,sCAkBnBK,EAAQliC,EAAUg2B,EAAWmM,EAAMC,EAAShD,EAAYiD,EAAOd,GAExE,IAAIe,GAAc,EAAG,GACjBpB,GAAS,EACTqB,EAAoBzpE,KAAKsQ,KAAKtQ,KAAKmvC,IAAI+tB,EAAU,GAAI,GAAKl9D,KAAKmvC,IAAI+tB,EAAU,GAAI,IAGrF,GAFAsM,EAAW,GAAKxpE,KAAKgjC,MAAMkE,EAAWuiC,EAAoBvM,EAAU,IACpEsM,EAAW,GAAKxpE,KAAKgjC,MAAMkE,EAAWuiC,EAAoBvM,EAAU,IAC/DkM,EAEE,KAAAM,GAAA,EAAAC,GAAA,EAAAC,OAAAzrE,EAAA,IAEL,QAAA0rE,EAAAC,EAAA1oB,IAAoBqnB,KAApBiB,GAAAG,EAAAC,EAAAhrE,QAAAC,MAAA2qE,GAAA,EAA8B,KAArBK,EAAqBF,EAAA5qE,MAC5BqnE,EAAW1pC,IAAImtC,EAAQtzD,KAAK,KAAM,IAH/B,MAAAnX,GAAAqqE,GAAA,EAAAC,EAAAtqE,EAAA,aAAAoqE,GAAAI,EAAAvqE,QAAAuqE,EAAAvqE,SAAA,WAAAoqE,EAAA,MAAAC,GAKLnB,EAASj5C,OAAO,EAAGi5C,EAASjoE,QALvB,IAAAwpE,GAAA,EAAAC,GAAA,EAAAC,OAAA/rE,EAAA,IAOL,QAAAgsE,EAAAC,EAAAhpB,IAAiBmoB,KAAjBS,GAAAG,EAAAC,EAAAtrE,QAAAC,MAAAirE,GAAA,EAAwB,KAAf/nC,EAAekoC,EAAAlrE,MAClB8qE,EAAUT,EAAQV,UAAU3mC,EAAMunC,GACtC,GAA0C,IAAtClD,EAAW37C,IAAIo/C,EAAQtzD,KAAK,MAAa,CAC3C2xD,GAAS,EACT,QAXC,MAAA9oE,GAAA2qE,GAAA,EAAAC,EAAA5qE,EAAA,aAAA0qE,GAAAI,EAAA7qE,QAAA6qE,EAAA7qE,SAAA,WAAA0qE,EAAA,MAAAC,GAeD9B,IACFoB,EAAW,GAAKxpE,KAAKgjC,OAAOkE,EAAWmiC,GAAQI,EAAoBvM,EAAU,IAC7EsM,EAAW,GAAKxpE,KAAKgjC,OAAOkE,EAAWmiC,GAAQI,EAAoBvM,EAAU,KAjB1E,IAAAmN,GAAA,EAAAC,GAAA,EAAAC,OAAApsE,EAAA,IAmBL,QAAAqsE,EAAAC,EAAArpB,IAAiBmoB,KAAjBc,GAAAG,EAAAC,EAAA3rE,QAAAC,MAAAsrE,GAAA,EAAwB,KAAfpoC,EAAeuoC,EAAAvrE,MAClB8qE,EAAUT,EAAQV,UAAU3mC,EAAMunC,GACtClD,EAAW1pC,IAAImtC,EAAQtzD,KAAK,KAAM+P,KAClCiiD,EAASppE,KAAK0qE,IAtBX,MAAAzqE,GAAAgrE,GAAA,EAAAC,EAAAjrE,EAAA,aAAA+qE,GAAAI,EAAAlrE,QAAAkrE,EAAAlrE,SAAA,WAAA+qE,EAAA,MAAAC,GAwBL,OAAOnC,EAzBP,OAAOoB,6CA6BS51C,GAElB,IADA,IAAI82C,KACKvzC,EAAY,EAAGA,EAAYvD,EAASpzB,OAAQ22B,IAAa,CAEhE,IAAIgpC,GAAYtsC,MAAO,KAAMiU,MAAO,MAChCnE,EAAU/P,EAASuD,GACnBwzC,EAAiB,IAAIjpB,EAAAt4C,EAJuCwhE,GAAA,EAAAC,GAAA,EAAAC,OAAA3sE,EAAA,IAMhE,QAAA4sE,EAAAC,EAAA5pB,IAAqBzd,KAArBinC,GAAAG,EAAAC,EAAAlsE,QAAAC,MAAA6rE,GAAA,EAA8B,KAArBpoC,EAAqBuoC,EAAA9rE,MAExByhE,EAAWxjE,KAAKK,UAAUotB,IAAI6X,GAFNyoC,GAAA,EAAAC,GAAA,EAAAC,OAAAhtE,EAAA,IAI5B,QAAAitE,EAAAC,EAAAjqB,IAA0Bsf,EAASjf,SAAnCwpB,GAAAG,EAAAC,EAAAvsE,QAAAC,MAAAksE,GAAA,EAA0C,KACpCnmC,EADoCsmC,EAAAnsE,MACf,GACrBqsE,EAAexmC,EAAK83B,aACnB+N,EAAe5tD,IAAIuuD,GAGtBX,EAAe7/C,OAAOwgD,GAFtBX,EAAe/tC,IAAI0uC,EAAcxmC,IART,MAAAxlC,GAAA4rE,GAAA,EAAAC,EAAA7rE,EAAA,aAAA2rE,GAAAI,EAAA9rE,QAAA8rE,EAAA9rE,SAAA,WAAA2rE,EAAA,MAAAC,KANkC,MAAA7rE,GAAAurE,GAAA,EAAAC,EAAAxrE,EAAA,aAAAsrE,GAAAI,EAAAzrE,QAAAyrE,EAAAzrE,SAAA,WAAAsrE,EAAA,MAAAC,GAoBhE,IAAIS,KApB4DC,GAAA,EAAAC,GAAA,EAAAC,OAAAvtE,EAAA,IAqBhE,QAAAwtE,EAAAC,EAAAxqB,IAAiBupB,KAAjBa,GAAAG,EAAAC,EAAA9sE,QAAAC,MAAAysE,GAAA,EAAiC,KAAxB1mC,EAAwB6mC,EAAA1sE,MAC/BssE,EAAalsE,KAAKylC,EAAK,KAtBuC,MAAAxlC,GAAAmsE,GAAA,EAAAC,EAAApsE,EAAA,aAAAksE,GAAAI,EAAArsE,QAAAqsE,EAAArsE,SAAA,WAAAksE,EAAA,MAAAC,GAwBhEvL,EAAQr4B,MAAQyjC,EAEhBpL,EAAQtsC,MAAQyoC,EAAYkB,QAAQC,gBAAgB8N,GACpDb,EAAgBvzC,GAAagpC,EAE/B,OAAOuK,WAztBUnI,iDCJrBvtB,EAAAC,QAAiBrvB,EAAAte,EAAuB","file":"static/js/app.cec8ca38348d20948d68.js","sourcesContent":["<template>\n  <div id=\"subList\">\n    <div id=\"list\"></div>\n    <div id=\"hist\"></div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nexport default {\n  name: 'SubList',\n  data() {\n    return {\n      rotateDeg: 25,\n      histHeightRatio: 0.2,\n      histGHeightRatio: 0.7,\n      histGXMarginRatio: 0.03,\n      histFilterDimExpandedRatio: 1.35,\n      histFilterGHeightRatio: 0.3,\n      listItemHeightRatio: 0.01,\n      listXMarginRatio: 0.08,\n      listXMarginNewRatio: 0.01,\n      listTopMarginRatio: 0.02,\n      dimRibbonXMarginRatio: 0.025,\n      dimRibbonXSpacingRatio: 0.012,\n      dimRibbonXNewSpacingRatio: 0.5,\n      dimRibbonHeightRatio: 0.7,\n      hideDims: [],\n      showDims: [],\n      animationDuration: 400,\n    }\n  },\n  mounted() {},\n  computed: {\n    ...mapGetters([\n      // 'loadedData',\n      'updateMap',\n      'updateSubList'\n    ])\n  },\n  watch: {\n    // loadedData: function (val, oldVal) {\n    //   this.updateParams()\n    //   if (oldVal != null) {\n    //     this.redraw()\n    //   } else {\n    //     this.init()\n    //     this.draw()\n    //   }\n    // },\n    updateMap: function (val, oldVal) {\n      this.updateParams()\n      this.map = val.map\n      this.leafNodes = Array.from(this.map.allLeaves.values())\n      this.subOrder = this.getSubOrder()\n      if (oldVal.map != null) {\n        this.redraw()\n      } else {\n        this.init()\n        this.draw()\n      }\n    },\n    updateSubList (newVal) {\n      switch (newVal.type) {\n        case 'mouseover':\n          let subs\n          if (newVal.path2This !== undefined) {\n            subs = this.getSubsByPath(newVal.path2This)\n          } else {\n            subs = newVal.subIds\n          }\n\n          // for (let i = 0; i < subs.length; i++) {\n          //   let item = this.listSvg.select(`#listItemG${subs[i]}`)\n          //   if (!item.classed('listItemHoverDisabled')) {\n          //     item.classed('listItemHovered', true)\n          //     item.select('.subSelected').style('opacity', 1)\n          //   }\n          // }\n\n          let currSubOrder = []\n          for (const order of this.subOrder) {\n            if (this.currSubs.indexOf(Data.subs[order]) > -1) {\n              currSubOrder.push(order)\n            }\n          }\n          let subsIdx = []\n          for (const sub of subs) {\n            subsIdx.push(currSubOrder.indexOf(sub))\n          }\n          const firstItemOrder = Math.min(...subsIdx)\n          const lastItemOrder = Math.max(...subsIdx)\n          const maxItemNumOnScreen = Math.floor(1 / this.listItemHeightRatio)\n          if (firstItemOrder !== 0 && lastItemOrder + 1 > maxItemNumOnScreen) {\n            const existingItemNum = this.currSubs.length\n            const maxScrollNum = existingItemNum - maxItemNumOnScreen\n            const scrollNum = firstItemOrder - maxScrollNum > 0 ? maxScrollNum : firstItemOrder\n            const scrollHeight = scrollNum * this.listItemHeight\n            d3.select(this.$el).select('#list')\n              .transition()\n              .duration(1500)\n              .tween('uniquetweenname', scrollTopTween(scrollHeight))\n              .on('end', () => {\n                for (let i = 0; i < subs.length; i++) {\n                  let item = this.listSvg.select(`#listItemG${subs[i]}`)\n                  if (!item.classed('listItemHoverDisabled')) {\n                    item.classed('listItemHovered', true)\n                    item.select('.subSelected').style('opacity', 1)\n                  }\n                }\n                this.updateView('subSelect')\n              })\n          } else {\n            for (let i = 0; i < subs.length; i++) {\n              let item = this.listSvg.select(`#listItemG${subs[i]}`)\n              if (!item.classed('listItemHoverDisabled')) {\n                item.classed('listItemHovered', true)\n                item.select('.subSelected').style('opacity', 1)\n              }\n            }\n            this.updateView('subSelect')\n          }\n\n          // this.updateView('subSelect')\n          break\n        case 'mouseout':\n          this.listSvg.selectAll('.listItemG').each(function () {\n            let item = d3.select(this)\n            if (!item.classed('listItemClicked')) {\n                item.classed('listItemHovered', false)\n                item.classed('listItemHoverDisabled', false)\n                item.select('.subSelected').style('opacity', 0)\n              }\n          })\n\n          d3.select(this.$el).select('#list')\n            .transition()\n            .duration(1500)\n            .tween('uniquetweenname', scrollTopTween(0))\n          \n          this.updateView('subUnselect')\n          break\n        case 'click':\n          // subs = this.getSubsByPath(newVal.path2This)\n          if (newVal.path2This !== undefined) {\n            subs = this.getSubsByPath(newVal.path2This)\n          } else {\n            subs = newVal.subIds\n          }\n          this.listSvg.selectAll('.listItemG').each(function () {\n            let item = d3.select(this)\n            if (item.classed('listItemClicked')) {\n              item.classed('listItemClicked', false)\n              item.classed('listItemHoverDisabled', true)\n              item.select('.subSelected').style('opacity', 0)\n            }\n          })\n          for (let i = 0; i < subs.length; i++) {\n            let item = this.listSvg.select(`#listItemG${subs[i]}`)\n            if (!item.classed('listItemClicked')) {\n              item.classed('listItemHovered', false)\n              item.classed('listItemClicked', true)\n              item.classed('listItemHoverDisabled', true)\n              if (item.selectAll('.subSelected')._groups[0].length === 0) {\n                item.select('.subSelected').style('opacity', 1)\n              }\n            }\n          }\n          this.updateView('subSelect')\n          break\n        case 'unclick':\n          this.listSvg.selectAll('.listItemG').each(function () {\n            let item = d3.select(this)\n            if (item.classed('listItemClicked')) {\n              item.classed('listItemClicked', false)\n              item.classed('listItemHoverDisabled', true)\n              item.select('.subSelected').style('opacity', 0)\n            }\n          })\n          this.updateView('subUnselect')\n          break\n        case 'changeShownItems':\n          this.currSubs = []\n          let subIds = []\n          if (newVal.subIds === undefined) {\n            if (newVal.path2This !== undefined) {\n              subIds = this.getSubsByPath(newVal.path2This)\n            } else {\n              this.currSubs = JSON.parse(JSON.stringify(Data.subs))\n            }\n          } else {\n            subIds = newVal.subIds\n          }\n          for (let i = 0; i < subIds.length; i++) {\n            this.currSubs.push(Data.subs[subIds[i]])\n          }\n          this.updateView('dimClick')\n          break\n      }\n\n      function scrollTopTween (scrollTop) {\n        return function () {\n          var i = d3.interpolateNumber(this.scrollTop, scrollTop)\n          return function (t) { this.scrollTop = i(t) }\n        }\n      }\n    }\n  },\n  methods: {\n    ...mapActions([\n      'updateUpdateMapByDim',\n      'updateUpdateMapBySub'\n    ]),\n    updateParams: function () {\n      this.width = this.$el.offsetWidth\n      this.height = this.$el.offsetHeight\n\n      if (Data.file === 'Pendigits') {\n        d3.select(this.$el).select('#list')\n          .style('top', 0.185 * this.height + 'px')\n          .style('height', 0.795 * this.height + 'px')\n      }\n\n      this.histWidth = parseFloat(d3.select(this.$el).select('#hist').style('width'))\n      this.histFakeHeight = parseFloat(d3.select(this.$el).select('#hist').style('height'))\n      this.histHeight = ratio2px(this.histHeightRatio, this.height)\n      this.histGHeight = ratio2px(this.histGHeightRatio, this.histHeight)\n      this.histGXMargin = ratio2px(this.histGXMarginRatio, this.width)\n      this.histFilterGY = this.histGHeight\n      this.histFilterGHeight = ratio2px(this.histFilterGHeightRatio, this.histHeight)\n      this.histFilterItemWidth = (this.histWidth - 2 * this.histGXMargin) / Data.dims.length\n      this.histFilterDim1stR = this.histFilterItemWidth / 7\n      this.histFilterDimCY = this.histFilterDim1stR\n      this.histFilterDim1stCX = this.histFilterDim1stR * 2\n      this.histFilterDim2ndCX = this.histFilterDim1stCX + this.histFilterDim1stR * 3\n      this.histFilterDim2ndStrokeWidth = this.histFilterDim1stR / 2.5\n      this.histFilterDim2ndR = this.histFilterDim1stR - this.histFilterDim2ndStrokeWidth / 2\n      this.histFilterDim1stSelectedR = this.histFilterDim1stR * this.histFilterDimExpandedRatio\n      this.histFilterDim2ndSelectedStrokeWidth = this.histFilterDim2ndStrokeWidth * this.histFilterDimExpandedRatio\n      this.histFilterDim2ndSelectedR = this.histFilterDim1stSelectedR - this.histFilterDim2ndSelectedStrokeWidth / 2\n      this.histFilterDimNameX = this.histFilterDim1stR\n      this.histFilterDimNameY = this.histFilterDim1stR * 3\n      // this.histFilterDimNameY = this.histFilterDim1stR * 4.5\n\n      this.histBarTopMargin = toPX('0.8em') * 1.2\n      this.histBarBtmMargin = (this.histFilterDim1stSelectedR - this.histFilterDim1stR) * 2\n      this.histBarMaxHeight = ratio2px(this.histGHeightRatio, this.histHeight) - this.histBarBtmMargin\n      this.histBarX = this.histFilterDim1stCX\n      this.histBarWidth = this.histFilterDim2ndCX - this.histFilterDim1stCX\n      this.histBarY = d3.scaleLinear()\n        .domain([0, d3.max(Data.subtree.data.dimCounts)])\n        .range([this.histBarMaxHeight, this.histBarTopMargin])\n      this.histBarXSpacing = this.histFilterItemWidth\n      this.histBarNumX = this.histBarX + this.histBarWidth / 2\n      this.histBarNumXSpacing = this.histBarXSpacing\n      this.histBarNumYSpacing = this.histBarTopMargin - toPX('0.8em') / 2\n\n      this.listWidth = parseFloat(d3.select(this.$el).select('#list').style('width'))\n      this.listItemHeight = ratio2px(this.listItemHeightRatio, parseFloat(d3.select(this.$el).select('#list').style('height')))\n      this.listHeight = this.listItemHeight * Data.subs.length\n\n      // this.listX = ratio2px(this.listXMarginRatio, this.listWidth)\n      // // this.listY = ratio2px(this.listTopMarginRatio, this.height)\n      // this.listY = 0\n      // this.listItemWidth = this.listWidth - 2 * this.listX\n      // this.dimRibbonX = ratio2px(this.dimRibbonXMarginRatio, this.listItemWidth)\n      // this.dimRibbonXSpacing = ratio2px(this.dimRibbonXSpacingRatio, this.listItemWidth)\n      // this.dimRibbonWidth = (this.listItemWidth - 2 * this.dimRibbonX - (Data.dims.length - 1) * this.dimRibbonXSpacing) / Data.dims.length\n      // this.dimRibbonHeight = ratio2px(this.dimRibbonHeightRatio, this.listItemHeight)\n      // this.dimRibbonY = (this.listItemHeight - this.dimRibbonHeight) / 2\n      // this.highlightRibbonStrokeWidth = (this.listItemHeight - this.dimRibbonHeight) / 2\n      // this.highlightRibbonY = this.highlightRibbonStrokeWidth / 2\n      // this.highlightRibbonX = this.highlightRibbonStrokeWidth / 2\n      // this.highlightRibbonWidth = this.listItemWidth - this.highlightRibbonX * 2\n      // this.highlightRibbonHeight = this.listItemHeight - this.highlightRibbonY * 2\n\n      this.dimRibbonXSpacing = this.histFilterItemWidth - ((this.histFilterDim2ndCX + this.histFilterDim2ndR) - (this.histFilterDim1stCX - this.histFilterDim1stR))\n      this.listX = this.histGXMargin + this.histFilterDim1stCX - this.histFilterDim1stR - ratio2px(this.listXMarginNewRatio, this.listWidth)\n      this.listY = 0\n      this.listItemWidth = this.listWidth - 2 * this.listX\n      this.dimRibbonX = ratio2px(this.listXMarginNewRatio, this.listWidth)\n      this.dimRibbonWidth = this.histFilterDim2ndCX + this.histFilterDim2ndR - (this.histFilterDim1stCX - this.histFilterDim1stR)\n      this.dimRibbonHeight = ratio2px(this.dimRibbonHeightRatio, this.listItemHeight)\n      this.dimRibbonY = (this.listItemHeight - this.dimRibbonHeight) / 2\n      this.highlightRibbonStrokeWidth = (this.listItemHeight - this.dimRibbonHeight) / 2\n      this.highlightRibbonY = this.highlightRibbonStrokeWidth / 2\n      this.highlightRibbonX = this.highlightRibbonStrokeWidth / 2\n      this.highlightRibbonWidth = this.listItemWidth - this.highlightRibbonX * 2\n      this.highlightRibbonHeight = this.listItemHeight - this.highlightRibbonY * 2\n\n      // this.dimRibbonXRawSpacing = this.histFilterItemWidth - ((this.histFilterDim2ndCX + this.histFilterDim2ndR) - (this.histFilterDim1stCX - this.histFilterDim1stR))\n      // this.dimRibbonXSpacing = this.dimRibbonXNewSpacingRatio * this.dimRibbonXRawSpacing\n      // this.dimRibbonXRemainingSpacing = (1 - this.dimRibbonXNewSpacingRatio) * this.dimRibbonXRawSpacing * (Data.dims.length - 1) / Data.dims.length\n      // this.listX = this.histGXMargin + this.histFilterDim1stCX - this.histFilterDim1stR - ratio2px(this.listXMarginNewRatio, this.listWidth) - this.dimRibbonXRemainingSpacing / 2\n      // this.listY = 0\n      // this.listItemWidth = this.listWidth - 2 * this.listX\n      // this.dimRibbonX = ratio2px(this.listXMarginNewRatio, this.listWidth)\n      // this.dimRibbonWidth = this.histFilterDim2ndCX + this.histFilterDim2ndR - (this.histFilterDim1stCX - this.histFilterDim1stR) + this.dimRibbonXRemainingSpacing\n      // this.dimRibbonHeight = ratio2px(this.dimRibbonHeightRatio, this.listItemHeight)\n      // this.dimRibbonY = (this.listItemHeight - this.dimRibbonHeight) / 2\n      // this.highlightRibbonStrokeWidth = (this.listItemHeight - this.dimRibbonHeight) / 2\n      // this.highlightRibbonY = this.highlightRibbonStrokeWidth / 2\n      // this.highlightRibbonX = this.highlightRibbonStrokeWidth / 2\n      // this.highlightRibbonWidth = this.listItemWidth - this.highlightRibbonX * 2\n      // this.highlightRibbonHeight = this.listItemHeight - this.highlightRibbonY * 2\n\n      // this.subOrder = this.getSubOrder()\n      \n      this.color = {\n        h: d3.scaleLinear().domain([0, 1]).range([0, 360]),\n        c: d3.scaleLinear().domain([0, 1]).range([30, 80]),\n        l: d3.scaleLinear().domain([0, 1]).range([150 * 0.3, 150 * 0.6]) // d3 l range[0, 150]\n      }\n    },\n    init: function () {\n      this.currSubs = Data.subs\n      this.listSvg = d3.select(this.$el)\n        .select('#list')\n        .append('svg')\n        .attr('width', this.listWidth)\n        .attr('height', this.listHeight)\n        .append('g')\n        .attr('id', 'subListSvg')\n        .attr('transform', `translate(${this.listX}, ${this.listY})`)\n      this.histSvg = d3.select(this.$el)\n        .select('#hist')\n        .append('svg')\n        .attr('width', this.histWidth)\n        // .attr('height', this.histHeight)\n        .attr('height', this.histFakeHeight)\n        .append('g')\n        .attr('id', 'subHistSvg')\n        .attr('transform', `translate(${this.histGXMargin}, 0)`)\n    },\n    redraw: function () {\n      this.clear()\n      this.init()\n      this.draw()\n    },\n    clear: function () {\n      // this.listSvg.selectAll('*').remove()\n      // this.histSvg.selectAll('*').remove()\n      d3.select(this.$el).select('#list').selectAll('*').remove()\n      d3.select(this.$el).select('#hist').selectAll('*').remove()\n    },\n    draw: function () {\n      this.drawList()\n      this.drawHist()\n      this.targetedModification()\n    },\n    drawHist: function () {\n      const self = this\n\n      this.histG = this.histSvg\n        .append('g')\n        .attr('id', 'histG')\n      this.histG\n        .selectAll('.histBar')\n        .data(Data.subtree.data.dimCounts)\n        .enter()\n        .append('rect')\n        .attr('class', 'histBar')\n        .attr('id', (d, i) => `histBar-${i}`)\n        .attr('x', (d, i) => this.histBarX + this.histBarXSpacing * i)\n        .attr('y', d => this.histBarY(d))\n        .attr('width', this.histBarWidth)\n        .attr('height', d => this.histBarY(0) - this.histBarY(d))\n      this.histG\n        .selectAll('.histDimNum')\n        .data(Data.subtree.data.dimCounts)\n        .enter()\n        .append('text')\n        .attr('class', 'histDimNum')\n        .attr('x', (d, i) => this.histBarNumX + this.histBarNumXSpacing * i)\n        .attr('y', d => this.histBarY(d) - this.histBarNumYSpacing)\n        .text(d => d)\n\n      this.histFilterG = this.histSvg.append('g')\n        .attr('id', 'histFilterG')\n        .attr('transform', `translate(0, ${this.histFilterGY})`)\n      this.histFilterG\n        .selectAll('.histFilterItemG')\n        .data(Data.dims)\n        .enter()\n        .append('g')\n        .attr('class', 'histFilterItemG')\n        .attr('id', (d, i) => `histFilterItem-${i}`)\n        .attr('transform', (d, i) => `translate(${this.histFilterItemWidth * i}, 0)`)\n        .each(function (p, idx) {\n          d3.select(this)\n            .append('circle')\n            .attr('class', 'histFilterDimShow')\n            .attr('cx', self.histFilterDim1stCX)\n            .attr('cy', self.histFilterDimCY)\n            .attr('r', self.histFilterDim1stR)\n            .on('click', function () {\n              const hideCirce = self.histFilterG.select(`#histFilterItem-${idx}`).select('.histFilterDimHide')\n              if (hideCirce.classed('histFilterDimHideClicked')) {\n                unclickDimHide(hideCirce)\n                self.hideDims.remove(idx)\n              }\n              const thisCircle = d3.select(this)\n              if (thisCircle.classed('histFilterDimShowClicked')) {\n                unclickDimShow(thisCircle)\n                self.showDims.remove(idx)\n              } else {\n                clickDimShow(thisCircle)\n                self.showDims.push(idx)\n              }\n              self.updateView('dimClick')\n              self.updateMapByDim()\n            })\n          d3.select(this)\n            .append('circle')\n            .attr('class', 'histFilterDimHide')\n            .attr('cx', self.histFilterDim2ndCX)\n            .attr('cy', self.histFilterDimCY)\n            .attr('r', self.histFilterDim2ndR)\n            .style('stroke', '#bdbdbd')\n            .style('stroke-width', self.histFilterDim2ndStrokeWidth)\n            .on('click', function () {\n              const showCircle = self.histFilterG.select(`#histFilterItem-${idx}`).select('.histFilterDimShow')\n              if (showCircle.classed('histFilterDimShowClicked')) {\n                unclickDimShow(showCircle)\n                self.showDims.remove(idx)\n              }\n              const thisCircle = d3.select(this)\n              if (thisCircle.classed('histFilterDimHideClicked')) {\n                unclickDimHide(thisCircle)\n                self.hideDims.remove(idx)\n              } else {\n                clickDimHide(thisCircle)\n                self.hideDims.push(idx)\n              }\n              self.updateView('dimClick')\n              self.updateMapByDim()\n            })\n          d3.select(this)\n            .append('text')\n            .attr('class', 'histFilterDimName')\n            .attr('x', self.histFilterDimNameX)\n            .attr('y', self.histFilterDimNameY)\n            // .attr('transform', `rotate(${self.rotateDeg})`)\n            .text(() => {\n              if (p.length > 4) {\n                return p.slice(0, 4) + '...'\n              } else {\n                return p\n              }\n            })\n            .on('mouseover', function () {\n              d3.select(this)\n                .text(p)\n            })\n            .on('mouseout', function () {\n              d3.select(this)\n                .text(() => {\n                  if (p.length > 4) {\n                    return p.slice(0, 4) + '...'\n                  } else {\n                    return p\n                  }\n                })\n            })\n        })\n\n      // this.histFilterDimNameFontSizeAdjustment()\n\n      this.histSvg.selectAll('.histFilterDimName').attr('transform', `rotate(${this.rotateDeg})`)\n\n      function clickDimShow (circle) {\n        circle\n          .classed('histFilterDimShowClicked', true)\n          .attr('r', self.histFilterDim1stSelectedR)\n      }\n      function unclickDimShow (circle) {\n        circle\n          .classed('histFilterDimShowClicked', false)\n          .attr('r', self.histFilterDim1stR)\n      }\n      function clickDimHide (circle) {\n        circle\n          .classed('histFilterDimHideClicked', true)\n          .attr('r', self.histFilterDim2ndSelectedR)\n          .style('stroke', '#252525')\n          .style('stroke-width', self.histFilterDim2ndSelectedStrokeWidth)\n      }\n      function unclickDimHide (circle) {\n        circle\n          .classed('histFilterDimHideClicked', false)\n          .attr('r', self.histFilterDim2ndR)\n          .style('stroke', '#bdbdbd')\n          .style('stroke-width', self.histFilterDim2ndStrokeWidth)\n      }\n    },\n    drawList: function () {\n      const self = this\n\n      this.listSvg\n        .selectAll('.listItemG')\n        .data(this.subOrder)\n        .enter()\n        .append('g')\n        .attr('class', 'listItemG')\n        .attr('id', d => `listItemG${d}`)\n        .attr('subId', d => d)\n        .attr('transform', (d, i) => `translate(0, ${this.listItemHeight * i})`)\n        // .attr('transform', (d, i) => `translate(0, ${(this.listItemHeight + 1) * i})`)\n        .each(function (p, idx) {\n          d3.select(this)\n            .append('rect')\n            .attr('class', 'subRibbon')\n            .attr('x', 0)\n            .attr('y', 0)\n            .attr('width', self.listItemWidth)\n            .attr('height', self.listItemHeight)\n            .attr('fill', d => {\n              const channels = Data.colors[d]\n              const color = [\n                ~~(255 * channels[0]),\n                ~~(255 * channels[1]),\n                ~~(255 * channels[2])\n              ]\n              return `rgb(${color})`\n              // return d3.hcl(self.color.h(channels[0]), self.color.c(channels[1]), self.color.l(channels[2]))\n            })\n          d3.select(this)\n            .selectAll('.dimRibbon')\n            .data(Data.dims)\n            .enter()\n            .append('rect')\n            .attr('class', 'dimRibbon')\n            .attr('x', (d, i) => (self.dimRibbonX + (self.dimRibbonWidth + self.dimRibbonXSpacing) * i))\n            .attr('y', self.dimRibbonY)\n            .attr('width', self.dimRibbonWidth)\n            .attr('height', self.dimRibbonHeight)\n            .attr('fill', (d, i) => Data.subs[p][i] === '0' ? 'white': '#252525')\n            // .attr('fill-opacity', (d, i) => Data.subs[p][i] === '0' ? 1: 0.4)\n          d3.select(this)\n            .append('rect')\n            .attr('class', 'subSelected')\n            .attr('x', self.highlightRibbonX)\n            .attr('y', self.highlightRibbonY)\n            .attr('width', self.highlightRibbonWidth)\n            .attr('height', self.highlightRibbonHeight)\n            .style('stroke-width', self.highlightRibbonStrokeWidth)\n            .style('opacity', 0)\n          d3.select(this)\n            .on('mouseover', () => {\n              if (!d3.select(this).classed('listItemHoverDisabled')) {\n                d3.select(this).classed('listItemHovered', true)\n                d3.select(this).select('.subSelected').style('opacity', 1)\n                self.updateView('subSelect')\n                self.updateUpdateMapBySub({\n                  subIds: [p + ''],\n                  type: 'hover'\n                })\n              }\n            })\n            .on('mouseout', () => {\n              if (!d3.select(this).classed('listItemClicked')) {\n                d3.select(this)\n                  .classed('listItemHovered', false)\n                  .classed('listItemHoverDisabled', false)\n                d3.select(this).select('.subSelected').style('opacity', 0)\n                self.updateView('subUnselect')\n                self.updateUpdateMapBySub({\n                  subIds: undefined,\n                  type: 'hover'\n                })\n              }\n            })\n            .on('click', () => {\n              if (d3.select(this).classed('listItemClicked')) {\n                d3.select(this)\n                  .classed('listItemClicked', false)\n                  .classed('listItemHoverDisabled', true)\n                d3.select(this).select('.subSelected').style('opacity', 0)\n                self.updateView('subUnselect')\n                self.updateUpdateMapBySub({\n                  subIds: undefined,\n                  type: 'click'\n                })\n              } else {\n                // click\n                self.listSvg.selectAll('.listItemG')\n                  .classed('listItemClicked', false)\n                  .classed('listItemHoverDisabled', false)\n                self.listSvg.selectAll('.subSelected').style('opacity', 0)\n                d3.select(this)\n                  .classed('listItemHovered', false)\n                  .classed('listItemClicked', true)\n                  .classed('listItemHoverDisabled', true)\n                d3.select(this).select('.subSelected').style('opacity', 1)\n                self.updateView('subSelect')\n                self.updateUpdateMapBySub({\n                  subIds: [p + ''],\n                  type: 'click'\n                })\n              }\n            })\n        })\n      \n      // this.listSvg.selectAll('.dimRibbon')\n      //   .filter(function () {\n      //     return d3.select(this).attr('fill') === 'white'\n      //   })\n      //   .remove()\n      this.listSvg.selectAll('.dimRibbon')\n        .attr('fill-opacity', 0.6)\n    },\n    targetedModification: function () {\n      const file = Data.file\n\n      let fontsize\n\n      switch (file) {\n        case 'Wine':\n          fontsize = 0.9\n          this.rotateDeg = 35\n          this.histFilterDimNameY = this.histFilterDim1stR * 4.5\n          break\n        case 'Pendigits':\n          fontsize = 0.7\n          // this.rotateDeg = 30\n          this.rotateDeg = 0\n          this.histFilterDimNameX = this.histFilterItemWidth / 2\n          this.histFilterDimNameY = this.histFilterDim1stR * 6\n          this.histSvg.selectAll('.histFilterDimName')\n            .attr('x', this.histFilterDimNameX)\n            .style('text-anchor', 'middle')\n          this.histSvg.selectAll('.histDimNum')\n            .style('font-size', '0.7em')\n          break\n        default:\n          fontsize = 0.95\n          this.rotateDeg = 25\n          this.histFilterDimNameY = this.histFilterDim1stR * 3\n      }\n\n      this.histSvg.selectAll('.histFilterDimName')\n        .attr('y', this.histFilterDimNameY)\n        .attr('transform', `rotate(${this.rotateDeg})`)\n        .style('font-size', `${fontsize}em`)\n\n      if (file === 'Pendigits') {\n        this.histSvg.selectAll('.histFilterDimName')\n          .each(function (d) {\n            const num = Number(d3.select(this).text().replace('F', ' '))\n            if (num > 9) {\n              d3.select(this).style('font-size', '0.55em')\n            }\n          })\n      }\n    },\n    getSubOrder: function () {\n      const leafNodes = this.leafNodes\n      let subOrder = []\n      let clusterSubOrder = []\n      const subtree = Data.subtree\n      // for (let i = 0; i < subtree.data.dscTraversalOrder.length; i++) {\n      //   if (subtree.data.dscTraversalOrder[i][1] == 0) {\n      //     // this is a cluster\n      //     clusterSubOrder.push(...subtree.children[subtree.data.dscTraversalOrder[i][0]].data.glbTraversalOrder)\n      //   } else {\n      //     // this is a leaf\n      //     subOrder.push(subtree.data.dscTraversalOrder[i][0])\n      //   }\n      // }\n\n      let sortedIndices = getIndicesBySortingSubIds(Data.nationalCaps)\n      for (let i = 0; i < sortedIndices.length; i++) {\n        clusterSubOrder.push(...subtree.children[sortedIndices[i]].data.glbTraversalOrder)\n      }\n      for (let i = 0; i < subtree.data.dscTraversalOrder.length; i++) {\n        if (subtree.data.dscTraversalOrder[i][1] != 0) {\n          subOrder.push(subtree.data.dscTraversalOrder[i][0])\n        }\n      }\n\n      subOrder.unshift(...clusterSubOrder)\n      return subOrder\n\n      function getIndicesBySortingSubIds (subIds) {\n        let yCoords = []\n        for (let i = 0; i < subIds.length; i++) {\n          let subId = subIds[i]\n          let node = leafNodes.find(node => node.ID === subId)\n          yCoords.push(node.center.coordinates.y)\n        }\n        return getSortedIndices(yCoords)\n      }\n\n      function getSortedIndices (arr) {\n        return arr.map((val, ind) => { return { ind, val } })\n          .sort((a, b) => { return a.val > b.val ? 1 : a.val == b.val ? 0 : -1 })\n          .map(obj => obj.ind)\n      }\n    },\n    updateView: function (type) {\n      const self = this\n      let remainingSubIds\n      if (type === 'dimClick') {\n        remainingSubIds = this.filterSubsByHistFilter(this.currSubs)\n        this.updateHist(remainingSubIds)\n        this.updateList(remainingSubIds)\n      } else if (type === 'subSelect') {\n        remainingSubIds = filterSubsByListItem()\n        this.updateHist(remainingSubIds)\n      } else if (type === 'subUnselect') {\n        remainingSubIds = filterSubsByListItem()\n        if (remainingSubIds.length === 0) {\n          remainingSubIds = this.filterSubsByHistFilter(this.currSubs)\n        }\n        this.updateHist(remainingSubIds)\n      }\n\n      function filterSubsByListItem () {\n        let res = []\n        self.listSvg.selectAll('.listItemG').each(function (p, idx) {\n          if (d3.select(this).classed('listItemHovered') || d3.select(this).classed('listItemClicked')) {\n            res.push(p)\n          }\n        })\n        return res\n      }\n    },\n    filterSubsByHistFilter: function (subs) {\n      const self = this\n      let res = []\n      for (let i = 0; i < subs.length; i++) {\n        const isFilterByHide = isFilter(subs[i], 'hide')\n        const isFilterByShow = isFilter(subs[i], 'show')\n        if (!isFilterByHide && !isFilterByShow) {\n          res.push(Data.subs.indexOf(subs[i]))\n        }\n      }\n      return res\n\n      function isFilter(sub, state) {\n        let idx = 0\n        if (state === 'hide') {\n          while (idx < self.hideDims.length) {\n            const dimIdx = self.hideDims[idx]\n            if (sub[dimIdx] === '1') {\n              return true\n            }\n            idx++\n          }\n        } else {\n          while (idx < self.showDims.length) {\n            const dimIdx = self.showDims[idx]\n            if (sub[dimIdx] === '0') {\n              return true\n            }\n            idx++\n          }\n        }\n        return false\n      }\n    },\n    updateHist: function (remainingSubIds) {\n      let remainingDimCounts = new Array(Data.dims.length).fill(0)\n      for (let i = 0; i < remainingSubIds.length; i++) {\n        const subArr = Data.subs[remainingSubIds[i]].split('').map(Number)\n        remainingDimCounts = remainingDimCounts.map((d, i) => d + subArr[i])\n      }\n      this.histBarY.domain([0, d3.max(remainingDimCounts)])\n      this.histG\n        .selectAll('.histBar')\n        .data(remainingDimCounts)\n        .transition()\n        .duration(this.animationDuration)\n        .attr('y', d => this.histBarY(d))\n        .attr('height', d => this.histBarY(0) - this.histBarY(d))\n      \n      this.histG\n        .selectAll('.histDimNum')\n        .data(remainingDimCounts)\n        .transition()\n        .duration(this.animationDuration)\n        .attr('y', d => this.histBarY(d) - this.histBarNumYSpacing)\n        .text(d => d)\n    },\n    updateList: function (remainingSubIds) {\n      const self = this\n      let prevHiddenListItemIds = []\n      const prevHiddenListItems = this.listSvg.selectAll('.listItemG')\n        .filter(function () {\n          if (d3.select(this).style('visibility') === 'hidden') {\n            const thisId = parseInt(d3.select(this).attr('subId'))\n            prevHiddenListItemIds.push(thisId)\n            return true\n          }\n        })\n      const hiddenListItems = this.listSvg.selectAll('.listItemG')\n        .filter(function () {\n          const thisId = parseInt(d3.select(this).attr('subId'))\n          return remainingSubIds.indexOf(thisId) === -1\n        })\n      const shownListItems = this.listSvg.selectAll('.listItemG')\n        .filter(function () {\n          const thisId = parseInt(d3.select(this).attr('subId'))\n          return remainingSubIds.indexOf(thisId) != -1\n        })\n\n      let HideListItemsDeferred = $.Deferred()\n      let translateShownListItemsDeferred = $.Deferred()\n\n      makeHiddenListItemsInvisible(HideListItemsDeferred)\n      $.when(HideListItemsDeferred).done(() => translateShownListItems(translateShownListItemsDeferred))\n      $.when(translateShownListItemsDeferred).done(makeShownListItemsVisible)\n\n      function makeHiddenListItemsInvisible (deferred) {\n        const neededHiddenListItems = hiddenListItems.filter(function () {\n          const thisId = parseInt(d3.select(this).attr('subId'))\n          return prevHiddenListItemIds.indexOf(thisId) === -1      \n        })\n        if (neededHiddenListItems._groups[0].length === 0) {\n          deferred.resolve()\n          return\n        }\n        neededHiddenListItems\n          .transition()\n          .duration(500)\n          .style('opacity', 0)\n          .on('end', function (d, i) {\n            d3.select(this).style('visibility', 'hidden')\n            if (i === neededHiddenListItems._groups[0].length - 1) {\n              deferred.resolve()\n            }\n          })\n      }\n\n      function translateShownListItems (deferred) {\n        let currHeight = self.listItemHeight * remainingSubIds.length\n        if (currHeight > self.listHeight) {\n          self.listHeight = currHeight\n          d3.select(self.$el).select('#list').select('svg')\n            .attr('height', self.listHeight)\n        }\n        shownListItems\n          .transition()\n          .duration(700)\n          .attr('transform', (d, i) => `translate(0, ${self.listItemHeight * i})`)\n          .on('end', (d, i) => {\n            if (i === shownListItems._groups[0].length - 1) {\n              deferred.resolve()\n            }\n          })\n      }\n\n      function makeShownListItemsVisible () {\n        self.listHeight = self.listItemHeight * remainingSubIds.length\n        d3.select(self.$el).select('#list').select('svg')\n          .attr('height', self.listHeight)\n        shownListItems\n          .style('visibility', 'visible')\n          .transition()\n          .duration(500)\n          .style('opacity', 1)\n      }\n      \n      // if (prevHiddenListItems._groups[0].length > hiddenListItems._groups[0].length) {\n      //   translateShownListItems()\n      // } else {\n      //   makeHiddenListItemsInvisible()\n      // }\n\n      // function makeHiddenListItemsInvisible () {\n      //   let deferArr = new Array(hiddenListItems._groups[0].length).fill($.Deferred())\n      //   hiddenListItems\n      //     .transition()\n      //     .duration(500)\n      //     .style('opacity', 0)\n      //     .on('end', function (d, i) {\n      //       d3.select(this).style('visibility', 'hidden')\n      //       deferArr[i].resolve()\n      //     })\n      //   $.when.apply(null, deferArr).done(translateShownListItems)\n      // }\n\n      // function translateShownListItems () {\n      //   let currHeight = self.listItemHeight * remainingSubIds.length\n      //   if (currHeight > self.listHeight) {\n      //     self.listHeight = currHeight\n      //     d3.select(self.$el).select('#list').select('svg')\n      //       .attr('height', self.listHeight)\n      //   }\n      //   let deferArr = new Array(shownListItems._groups[0].length).fill($.Deferred())\n      //   shownListItems\n      //     .transition()\n      //     .duration(700)\n      //     .attr('transform', (d, i) => `translate(0, ${self.listItemHeight * i})`)\n      //     .on('end', (d, i) => {\n      //       deferArr[i].resolve()\n      //     })\n      //   $.when.apply(null, deferArr).done(makeShownListItemsVisible)\n      // }\n\n      // function makeShownListItemsVisible () {\n      //   self.listHeight = self.listItemHeight * remainingSubIds.length\n      //   d3.select(self.$el).select('#list').select('svg')\n      //     .attr('height', self.listHeight)\n      //   shownListItems\n      //     .style('visibility', 'visible')\n      //     .transition()\n      //     .duration(500)\n      //     .style('opacity', 1)\n      // }\n    },\n    getSubsByPath: function (path2This) {\n      let thisDict = Data.subtree.findByIndex(path2This).dict\n      let subIds = []\n      for (let i = 0; i < thisDict.length; i++) {\n        subIds.push(thisDict[i][0])\n      }\n      let subs = []\n      for (let i = 0; i < subIds.length; i++) {\n        subs.push(Data.subs[subIds[i]])\n      }\n      subIds = this.filterSubsByHistFilter(subs)\n      return subIds\n    },\n    updateMapByDim: function () {\n      let dimStates = new Array(Data.dims.length).fill(-1)\n      dimStates.needed = false\n      for (let i = 0; i < this.showDims.length; i++) {\n        dimStates[this.showDims[i]] = 1\n      }\n      for (let i = 0; i < this.hideDims.length; i++) {\n        dimStates[this.hideDims[i]] = 0\n      }\n      if (this.showDims.length !== 0 || this.hideDims.length !== 0) {\n        dimStates.needed = true\n      }\n      this.updateUpdateMapByDim({\n        dimStates: dimStates\n      })\n    },\n    histFilterDimNameFontSizeAdjustment: function () {\n      const line = d3.line()\n        .x(d => d.x)\n        .y(d => d.y)\n\n      let fontsize\n      let intersect = true\n      while (intersect) {\n        fontsize = parseFloat(this.histSvg.select('.histFilterDimName').style('font-size'))\n        intersect = false\n        let rectCoords = []\n        for (const node of this.histSvg.selectAll('.histFilterDimName')._groups[0]) {\n          const domRect = node.getBoundingClientRect()\n          rectCoords.push([\n            { x: domRect.x, y: domRect.y },\n            { x: domRect.x + domRect.width, y: domRect.y},\n            { x: domRect.x + domRect.width, y: domRect.y + domRect.height },\n            { x: domRect.x, y: domRect.y + domRect.height }\n          ])\n        }\n        const rectRotatedCoords = this._rectRotatedCoords(rectCoords, this.rotateDeg)\n        for (let i = 0; i < rectRotatedCoords.length - 1; i++) {\n          if (this._polygonsIntersect(rectRotatedCoords[i], rectRotatedCoords[i + 1])) {\n            fontsize -= 0.2\n            this.histSvg.selectAll('.histFilterDimName').style('font-size', `${fontsize}px`)\n            intersect = true\n            break\n          }\n        }\n        // if (intersect === false) {\n        //   this.listSvg.selectAll('.boundingBox')\n        //     .data(rectRotatedCoords)\n        //     .enter()\n        //     .append('path')\n        //     .attr('class', 'boundingBox')\n        //     .attr('d', d => line(d))\n        //     .attr('stroke-width', '1px')\n        //     .attr('stroke', 'black')\n        //   break\n        // }\n      }\n    },\n    _deg2rad: function (deg) {\n      return deg * Math.PI / 180\n    },\n    _rectRotatedCoords: function (coords, deg) {\n      let rotatedCoords = []\n      const rad = this._deg2rad(deg)\n\n      for (const rectCoords of coords) {\n        const cx = (rectCoords[0].x + rectCoords[1].x) / 2\n        const cy = (rectCoords[0].y + rectCoords[2].y) / 2\n        let thisRectRotatedCoords = []\n        for (const coord of rectCoords) {\n          const originX = coord.x - cx\n          const originY = coord.y - cy\n          const rotatedX = originX * Math.cos(rad) - originY * Math.sin(rad)\n          const rotatedY = originX * Math.sin(rad) + originY * Math.cos(rad)\n          const x = rotatedX + cx\n          const y = rotatedY + cy\n          thisRectRotatedCoords.push({ x: x, y: y })\n        }\n        rotatedCoords.push(thisRectRotatedCoords)\n      }\n\n      return rotatedCoords\n    },\n    _polygonsIntersect: function (a, b) {\n      var polygons = [a, b];\n      var minA, maxA, projected, i, i1, j, minB, maxB;\n\n      for (i = 0; i < polygons.length; i++) {\n\n        // for each polygon, look at each edge of the polygon, and determine if it separates\n        // the two shapes\n        var polygon = polygons[i];\n        for (i1 = 0; i1 < polygon.length; i1++) {\n\n          // grab 2 vertices to create an edge\n          var i2 = (i1 + 1) % polygon.length;\n          var p1 = polygon[i1];\n          var p2 = polygon[i2];\n\n          // find the line perpendicular to this edge\n          var normal = { x: p2.y - p1.y, y: p1.x - p2.x };\n\n          minA = maxA = undefined;\n          // for each vertex in the first shape, project it onto the line perpendicular to the edge\n          // and keep track of the min and max of these values\n          for (j = 0; j < a.length; j++) {\n              projected = normal.x * a[j].x + normal.y * a[j].y;\n              if (minA === undefined || projected < minA) {\n                  minA = projected;\n              }\n              if (maxA === undefined || projected > maxA) {\n                  maxA = projected;\n              }\n          }\n\n          // for each vertex in the second shape, project it onto the line perpendicular to the edge\n          // and keep track of the min and max of these values\n          minB = maxB = undefined;\n          for (j = 0; j < b.length; j++) {\n              projected = normal.x * b[j].x + normal.y * b[j].y;\n              if (minB === undefined || projected < minB) {\n                  minB = projected;\n              }\n              if (maxB === undefined || projected > maxB) {\n                  maxB = projected;\n              }\n          }\n\n          // if there is no overlap between the projects, the edge we are looking at separates the two\n          // polygons, and we know there is no overlap\n          if (maxA < minB || maxB < minA) {\n              return false;\n          }\n        }\n      }\n      return true;\n    }\n  }\n};\n</script>\n\n<style lang=\"less\">\n@y-margin: 2%;\n@x-margin: 3%;\n@height: 100%;\n@width: 100%;\n@hist-top-margin: 2%;\n// @hist-x-margin: 3%;\n@hist-x-margin: 0%;\n@hist-height: 24%;\n@hist-width: @width - 2 * @hist-x-margin;\n@list-top-margin: 2%;\n// @list-top: @hist-top-margin + @hist-height;\n// @list-top: @hist-height;\n@list-top: 20%;\n@list-height: @height - @list-top - @hist-top-margin;\n@list-width: @width;\n\n#subList {\n  height: @height;\n  width: @width;\n}\n\n#hist {\n  margin-top: @hist-top-margin;\n  // margin: @hist-top-margin @hist-x-margin 0px;\n  height: @hist-height;\n  width: @hist-width;\n}\n\n#list {\n  position: absolute;\n  top: @list-top;\n  left: 0px;\n  margin-top: @list-top-margin;\n  width: @list-width;\n  height: @list-height;\n  overflow-x: auto;\n}\n\n.histBar {\n  fill: #252525;\n}\n\n.histDimNum {\n  text-anchor: middle;\n  dominant-baseline: central;\n  font-size: 0.8em;\n  cursor: default;\n}\n\n.histFilterDimShow {\n  fill: #252525;\n  cursor: pointer;\n}\n\n.histFilterDimHide {\n  fill: white;\n  cursor: pointer;\n}\n\n.histFilterDimName {\n  text-anchor: start;\n  dominant-baseline: middle;\n  font-size: 0.95em;\n  cursor: default;\n}\n\n.subRibbon {\n  cursor: pointer;\n  fill-opacity: 0.4;\n}\n\n.subSelected {\n  stroke: #252525;\n  fill: none;\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/SubList.vue","class SubGlyph {\n  constructor (v_r, v_maxR, v_mapType, v_glyphType, v_colors) {\n    let t_init = {\n      r: v_r * 2 * Math.sqrt(3) / 3,\n      maxR: v_maxR,\n      mapType: v_mapType,\n      glyphType: v_glyphType,\n      strokeThin: 0,\n      strokeThick: 4,\n      fanAngleRatio: 0.3,\n      colors: v_colors,\n      filterer: null,\n      filterSettings: {\n        container: null,\n        overallSelector: '.SubMapGrids',\n        overallKey: 'index',\n        controlAttr: 'opacity',\n        invisibleOpac: 0.2,\n        static: {\n          attrs: ['class'],\n          match: ['pinned'],\n          miss: [null],\n          normal: [false]\n        },\n        overallFilterFunc: null,\n        getFilterFunc: () => {},\n        animation: () => {}\n      }\n    }\n    Object.assign(this, t_init)\n  }\n\n  getRectGlyph (v_options) {\n    class rectGlyph {\n      constructor (v_options) {\n        let t_dimLength = v_options.dimLength,\n          [t_width, t_height] = v_options.size\n        this.size = [t_width, t_height]\n        this.className = v_options.className\n        this.glyphWidth = t_width * 0.8 / (t_dimLength + (t_dimLength + 1) * 0.125)\n        this.glyphHeight = t_height * 0.8\n        this.glyphSize = Math.min(this.glyphWidth, this.glyphHeight)\n        this.margin = v_options.margin\n        this.marginWidth = (t_width - t_dimLength * this.glyphWidth - this.margin[0] * 2) / (t_dimLength + 1)\n        this.marginHeight = (t_height - this.glyphHeight) / 2\n        this.type = v_options.type\n      };\n      show (v_g, v_dims) {\n        let t_glyphSize = this.glyphSize,\n          t_glyphWidth = this.glyphWidth,\n          t_glyphHeight = this.glyphHeight,\n          t_glyphMargin = this.margin,\n          t_glyphMarginHeight = this.marginHeight,\n          t_marginWidth = this.marginWidth,\n          t_type = this.type\n        v_g\n          .selectAll('.' + this.className)\n          .data(v_dims)\n          .enter()\n          .append('g')\n          .attr('class', this.className)\n          .attr('transform', (v_dim, v_i) => {\n            return 'translate(' + [t_glyphMargin[0] + (t_glyphWidth + t_marginWidth) * v_i + t_marginWidth, this.margin[1] + this.marginHeight] + ')'\n          })\n          .each(function (v_dim) {\n            switch (t_type) {\n              case 'rectangle':\n                d3.select(this)\n                  .classed('empty', v_dim == 0)\n                  .append('rect')\n                  .attr('x', 0)\n                  .attr('y', 0)\n                  .attr('width', t_glyphWidth)\n                  .attr('height', t_glyphHeight)\n                break\n              case 'circle':\n                let t_r = t_glyphSize / 2\n                d3.select(this)\n                  .classed('empty', v_dim == 0)\n                  .append('circle')\n                  .attr('cx', t_r)\n                  .attr('cy', t_r)\n                  .attr('r', t_r)\n                break\n            }\n          })\n      };\n    };\n    return new rectGlyph(v_options)\n  }\n\n  showFrames (vv_g, vv_path, vv_col, vv_opa) {\n    vv_g.append('path')\n      .classed('metaGlyph', true)\n      .classed('fill', true)\n      .attr('d', vv_path)\n      .attr('fill', vv_col)\n      .attr('fill-opacity', vv_opa)\n      .classed('cell', true)\n  }\n\n  showBoundaries (vv_g, vv_nghDist, vv_r, vv_empty) {\n    vv_g.selectAll('line')\n      .data(vv_nghDist)\n      .enter()\n      .append('g')\n      .attr('class', 'gridEdge')\n      .attr('transform', v_ngh => {\n        return 'rotate(' + (v_ngh.angle / Math.PI * 180) + ')'\n      })\n      .append('line')\n      .attr('x1', vv_r * Math.sqrt(3) / 2)\n      .attr('x2', vv_r * Math.sqrt(3) / 2)\n      .attr('y1', vv_r * 0.5)\n      .attr('y2', -vv_r * 0.5)\n      .attr('opacity', v_ngh => {\n        if (v_ngh.dist == null) {\n          if (vv_empty) {\n            return 0.2\n          } else {\n            return 1.0\n          }\n        } else {\n          return (v_ngh.dist)\n              // return 1.0;\n        }\n      })\n      .attr('stroke', 'none')\n      .attr('stroke-width', v_ngh => {\n        if (v_ngh.dist == null) {\n          if (vv_empty) {\n            return this.strokeThin + 'px'\n          } else {\n            return '0px' // this.strokeThick;\n          }\n        } else {\n          return v_ngh.dist * 0.9 * this.strokeThick + 'px'\n        }\n      })\n  }\n\n  showStick (vv_g, vv_dims) {\n    let t_div = Math.PI * 2 / vv_dims.length\n    for (let i = 0; i < vv_dims.length; i++) {\n      let tt_ang = t_div * i\n      vv_g.append('line')\n        .attr('class', 'weights')\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', this.maxR * 0.8 * vv_dims[i] * Math.cos(tt_ang))\n        .attr('y2', this.maxR * 0.8 * vv_dims[i] * Math.sin(tt_ang))\n    }\n  }\n\n  showFan (vv_g, vv_dims, vv_id, vv_col, v_capR, v_inR, v_outR, v_pattern = false, v_weights = null, v_ext = null) {\n    let t_div = Math.PI * 2 / vv_dims.length,\n      t_this = this,\n      t_nationalcap = Data.nationalCaps.indexOf(vv_id) !== -1,\n      t_provincialCap = Data.provincialCaps.indexOf(vv_id) !== -1,\n      t_dimArc = d3.arc()\n        .outerRadius(v_outR)\n        .innerRadius(v_inR)\n        .startAngle(-t_div * this.fanAngleRatio)\n        .endAngle(t_div * this.fanAngleRatio),\n      t_capDimArc = d3.arc()\n        .outerRadius(v_outR)\n        .innerRadius(v_capR)\n        .startAngle(-t_div * this.fanAngleRatio)\n        .endAngle(t_div * this.fanAngleRatio)\n    for (let i = 0; i < vv_dims.length; i++) {\n      let tt_ang = 360 / vv_dims.length * i\n      vv_g.append('g')\n        .attr('class', 'dimFan')\n        .classed('metaGlyph', true)\n        .attr('transform', 'rotate(' + tt_ang + ')')\n        .attr('index', vv_id + '_' + i)\n        .attr('ptOpacity', function () {\n          if (!v_pattern) {\n            return 1\n          } else {\n            // test here\n            let score = (v_weights[i] - v_ext.min) / (v_ext.max - v_ext.min)\n            score = score * 20 - 10\n            score = 1 / (Math.exp(-score) + 1)\n            return 0.9 * score\n          }\n        })\n        // opacitydata stability\n        .attr('opacity', () => {\n          if (!v_pattern) {\n            return 1\n          } else {\n            let score = (v_weights[i] - v_ext.min) / (v_ext.max - v_ext.min)\n            // score = score * 20 - 10\n            // score = 1 / (Math.exp(-score) + 1)\n            return score\n          }\n        })\n        .append('path')\n        .classed('fill', (vv_dims[i] != 0))\n        // .attr('d', t_dimArc())\n        .attr('d', () => t_nationalcap ? t_capDimArc() : t_provincialCap ? t_capDimArc() : t_dimArc())\n        .attr('fill', (vv_dims[i] == 0) ? 'none' : vv_col)\n        // fill\n        .attr('stroke', function () {\n          let t_empty = !(d3.select(this).classed('fill'))\n          return v_pattern ? (t_empty ? vv_col : 'none') : 'none'\n        }) // v_weights == null?\"none\":\"#666\")\n        // stroke\n        .attr('stroke-width', function () {\n          let t_empty = !(d3.select(this).classed('fill'))\n          return v_pattern ? (t_empty ? t_this.strokeThin : '0px') : '0px'\n        })\n        // .attr(\"stroke-width\", () => {\n        //     if(v_weights == null){\n        //         return 0;\n        //     }else{\n        //         return 0.5 + 1 * v_weights[i] / v_ext.max;\n        //     }\n        // })\n    }\n    if (t_nationalcap) {\n      // vv_g.append('circle')\n      //   .attr('cx', 0)\n      //   .attr('cy', 0)\n      //   .attr('r', v_capR)\n      //   .style('fill', '#000')\n      vv_g.append('circle')\n        .attr('cx', 0)\n        .attr('cy', 0)\n        .attr('r', v_capR)\n        .style('fill', '#fff')\n        .style('stroke', '#000')\n        .style('stroke-width', v_capR / 3)\n      vv_g.append('circle')\n        .attr('cx', 0)\n        .attr('cy', 0)\n        .attr('r', v_inR)\n        .style('fill', '#000')\n    }\n    if (t_provincialCap) {\n      vv_g.append('circle')\n        .attr('cx', 0)\n        .attr('cy', 0)\n        .attr('r', v_capR)\n        .style('fill', '#fff')\n        .style('stroke', '#000')\n        .style('stroke-width', v_capR / 2)\n    }\n  }\n\n  showBridge (vv_g, vv_nghDist, vv_r, vv_col) {\n    let t_scale = vv_nghDist.diffScale\n    vv_g.selectAll('.subEdge')\n      .data(vv_nghDist)\n      .enter()\n      .append('g')\n      .attr('class', 'subEdge')\n      .attr('transform', v_ngh => { return 'rotate(' + (v_ngh.angle / Math.PI * 180) + ')' })\n      .call(vv_gs => {\n        vv_gs[0].forEach(vvv_g => {\n          let tt_ngh = d3.select(vvv_g).data()[0],\n            tt_isDiff = tt_ngh.diff != null\n          if (!tt_isDiff) {\n            return\n          }\n          let tt_length = tt_isDiff ? t_scale(tt_ngh.diff) : null,\n            tt_spot1 = [vv_r, -tt_length * 0.5],\n            tt_spot2 = [vv_r, tt_length * 0.5],\n            tt_triangle = 'M0 0' + ' L' + tt_spot1.join(' ') + ' L' + tt_spot2.join(' ') + ' Z'\n          d3.select(vvv_g)\n            .attr('opacity', tt_ngh.dist)\n            .append('path')\n            .attr('d', tt_triangle)\n            .attr('fill', vv_col)\n          d3.select(vvv_g)\n            .append('line')\n            .attr('x1', 0)\n            .attr('x2', tt_spot1[0])\n            .attr('y1', 0)\n            .attr('y2', tt_spot1[1])\n            .attr('stroke-width', (tt_ngh.dist) * 3)\n          d3.select(vvv_g)\n            .append('line')\n            .attr('x1', 0)\n            .attr('x2', tt_spot2[0])\n            .attr('y1', 0)\n            .attr('y2', tt_spot2[1])\n            .attr('stroke-width', (tt_ngh.dist) * 3)\n        })\n      })\n  }\n\n  initializeFilter (v_container) {\n    let t_filterer = this.filterer,\n      t_filterSettings = this.filterSettings\n    if (t_filterer == null) {\n      t_filterSettings.container = v_container\n      this.filterer = t_filterer = bvFilter(t_filterSettings)\n    }\n    let t_animateFunc = (v_d3selection, v_fit) => {\n      let t_ftOpc = v_fit ? 1 : t_filterSettings.invisibleOpac\n      v_d3selection\n        .attr('ftOpacity', t_ftOpc)\n        .interrupt()\n        .transition()\n        .attr('opacity', function () {\n          let t_this = d3.select(this),\n            t_zgOpc = parseFloat(t_this.attr('zgOpacity')),\n            t_ptOpc = parseFloat(t_this.attr('ptOpacity'))\n          t_zgOpc = isNaN(t_zgOpc) ? 1.0 : t_zgOpc\n          t_ptOpc = isNaN(t_ptOpc) ? 1.0 : t_ptOpc\n          return t_zgOpc * t_ftOpc * t_ptOpc\n        })\n    }\n    t_filterSettings.getFilterFunc = (dimCover, codeBook) => {\n      let allLimits = dimCover.filter((d) => { return d >= 0 })\n      let allCount = allLimits.length\n      if (allCount === 0) {\n        return (gridCell) => { return true }\n      } else {\n        return (gridCell) => {\n          let gridID = gridCell[0].ID\n          let code = codeBook[gridID]\n          let fitCount = 0\n          let fit = true\n          for (let i = 0; i < dimCover.length; i++) {\n            if (dimCover[i] >= 0 && Number(code[i]) === dimCover[i]) {\n              fitCount++\n            }\n          }\n          if (fitCount < allCount) {\n            fit = false\n          }\n          return fit\n        }\n      }\n    }\n    t_filterer.animation = t_animateFunc\n    t_filterer.init()\n  }\n\n  filterGlyphsByDims (container, dimCover, attr, attrFunc, extraInfo) {\n    let filterer = this.filterer\n    if (filterer == null || !filterer.ready) {\n      this.initializeFilter(container)\n    }\n    let filterResult\n    if (dimCover != null && dimCover.needed) {\n      filterResult = this.filterer.filter('filterDims', 'data', null, this.filterSettings.getFilterFunc(dimCover, extraInfo), true)\n    } else {\n      filterResult = this.filterer.restore('filterDims')\n    }\n    return bvGetFromSelection(filterResult, attr, attrFunc)\n  }\n\n  filterGlyphsByIDs (v_container, v_ids, v_attr, v_attrFunc) {\n    let t_filterer = this.filterer,\n      filterResult\n    if (t_filterer == null || !t_filterer.ready) {\n      this.initializeFilter(v_container)\n      t_filterer = this.filterer\n    }\n    if (v_ids != null) {\n      filterResult = t_filterer.filter('filterIDs', 'index', v_ids)\n    } else {\n      filterResult = t_filterer.restore('filterIDs')\n    }\n    return bvGetFromSelection(filterResult, v_attr, v_attrFunc)\n  }\n\n  pickGlyphsByIDs (container, ids, attr, attrFunc) {\n    let filterer = this.filterer\n    let filterResult\n    if (filterer == null || !filterer.ready) {\n      this.initializeFilter(container)\n      filterer = this.filterer\n    }\n    if (ids != null) {\n      filterResult = filterer.pick('pickIDs', 'index', ids)\n    } else {\n      filterResult = filterer.restore('pickIDs')\n    }\n    return bvGetFromSelection(filterResult, attr, attrFunc)\n  }\n\n  changeGlyph (v_gs, v_pattern, v_weights) {\n    let t_this = this,\n      t_ext = v_weights.extent\n    switch (this.mapType) {\n      case 'cell':\n        switch (this.glyphType) {\n          case 'fill':\n            break\n          case 'stick':\n            break\n          case 'fan':\n            v_gs.selectAll('.dimFan')\n              .attr('ptOpacity', function () {\n                let t_index = d3.select(this).attr('index'),\n                  t_id, t_dim\n                t_index = t_index.split('_')\n                t_id = t_index[0]\n                t_dim = t_index[1]\n                let t_weights = v_weights[t_id]\n                if (!v_pattern) {\n                  return 1\n                } else {\n                  // test here\n                  let score = (t_weights[t_dim] - t_ext.min) / (t_ext.max - t_ext.min)\n                  score = score * 20 - 10\n                  score = 1 / (Math.exp(-score) + 1)\n                  return 0.9 * score\n                  // return 0 + 0.9 * Math.pow(t_weights[t_dim],3) / Math.pow(t_ext.max,3);\n                }\n              })\n              .transition()\n              .attr('opacity', function () {\n                return d3.select(this).attr('ptOpacity')\n              })\n            v_gs.selectAll('.dimFan')\n              .select('path')\n              .transition()\n              .attr('stroke', function () {\n                  // test here\n                  /* let t_empty = !(d3.select(this).classed('fill'))\n                  return v_pattern ? (t_empty ? '#000' : 'none') : 'none' */\n                return '#000'\n              }) // v_weights == null?\"none\":\"#666\")\n              .attr('stroke-width', function () {\n                  // test here\n                let t_empty = !(d3.select(this).classed('fill'))\n                  /* return v_pattern ? (t_empty ? t_this.strokeThin : '0px') : '0px' */\n                return t_empty ? t_this.strokeThin : '0px'\n              })\n            break\n        }\n        break\n    }\n  }\n\n  showGlyph (v_g, v_nghDist, v_id, v_dims, v_col, v_pattern = false, v_weights = null, v_ext = null) {\n    let v_isEmpty = (v_id == null),\n      t_r = this.r\n    if (v_dims && v_dims.length) {\n      this.strokeThin = 4 / v_dims.length\n      this.strokeThick = 12 / v_dims.length\n    } else {\n      this.strokeThin = 0.5\n      this.strokeThick = 4\n    }\n    switch (this.mapType) {\n      case 'cell':\n        switch (this.glyphType) {\n          case 'fill':\n            this.showFrames(v_g, d3.hexbin().hexagon(t_r), v_col, 0.8)\n            // this.showBoundaries(v_g, v_nghDist, t_r, v_isEmpty)\n            break\n          case 'stick':\n            this.showFrames(v_g, d3.hexbin().hexagon(t_r), v_col, 0.8)\n            // this.showBoundaries(v_g, v_nghDist, t_r, v_isEmpty)\n            if (t_r > 0 && v_dims && v_dims.length > 0) {\n              this.showStick(v_g, v_dims)\n            }\n            break\n          case 'fan':\n            this.showFrames(v_g, d3.hexbin().hexagon(t_r), (v_id == null) ? '#000' : v_col, (v_id == null) ? 0.2 : 0.4)\n            // this.showBoundaries(v_g, v_nghDist, t_r, v_isEmpty)\n            if (!v_isEmpty && v_dims && v_dims.length > 0) {\n              this.showFan(v_g, v_dims, v_id, '#000', t_r * 0.2, t_r * 0.1, t_r * 0.8, v_pattern, v_weights, v_ext)\n            }\n            break\n        }\n        break\n      case 'diff':\n        this.showFrames(v_g, d3.hexbin().hexagon(t_r), (v_id == null) ? '#fff' : v_col, 0.2)\n        // this.showBoundaries(v_g, v_nghDist, t_r, v_isEmpty)\n        if (!v_isEmpty) {\n          this.showBridge(v_g, v_nghDist, this.maxR, v_col)\n        }\n        break\n    }\n    return v_g\n  }\n}\n\nlet exportClass = () => {\n  return (...params) => {\n    return new SubGlyph(...params)\n  }\n}\n\nexport default exportClass()\n\n// basicView\n\nclass PDFilter {// one PDFilter only controls one type of attribute, but allows multiple cross filters\n  constructor (v_filterSetting) {\n    this.container = v_filterSetting.container\n    this.overallSelector = v_filterSetting.overallSelector\n    this.overallKey = v_filterSetting.overallKey\n    let t_ovlFiltFunc = v_filterSetting.overallFilterFunc\n    this.overallFilterFunc = (t_ovlFiltFunc == null) ? (v_d) => {\n      return true\n    } : t_ovlFiltFunc\n    this.subSelector = v_filterSetting.subSelector\n    this.controlAttr = v_filterSetting.controlAttr\n    this.static = v_filterSetting.static\n    this.animation = v_filterSetting.animation\n    if (typeof (this.animation) === 'object') {\n      let t_duration = this.animation.duration\n      this.animation.duration = (t_duration == null) ? t_duration : 400\n    }\n    this.filterers = new Array()\n    this.filterID = 0\n    this.ready = false\n  };\n  init () {\n    this.ready = true\n    let t_this = this, t_animation = this.animation,\n      t_ovlFilter = this.overallFilterFunc,\n      t_selection = this.container.selectAll(this.overallSelector).filter(this.overallFilterFunc)\n    if (this.subSelector != null) {\n      t_selection = t_selection.selectAll(this.subSelector)\n    }\n    if (typeof (t_animation) === 'function') {\n      t_animation(t_selection, true)\n    } else {\n      if (typeof (t_animation.match) !== 'function') {\n        t_animation.match = () => { return t_animation.match }\n      }\n      if (typeof (t_animation.miss) !== 'function') {\n        t_animation.miss = () => { return t_animation.miss }\n      }\n      t_selection.attr(t_animation.attr, t_animation.match())\n    }\n    this.filterers.filters = new Array()\n    this.filterers.pickers = new Array()\n    this.filterers.reducers = new Array()// reducers && ((filters && filters) || (pickers || pickers))\n    this.filterers.otherFilters = new Array()\n    this.filterers.otherPickers = new Array()\n    this.filterers.otherReducers = new Array()\n    this.filterers.add = function (v_id, v_attr, v_filterFunc, v_type = 'filter') {\n      let t_animation = t_this.animation, t_filterSign = 'PDfiltered_' + v_id + '_' + t_this.filterID,\n        t_selection = t_this.container.selectAll(t_this.overallSelector)\n          .filter(t_this.overallFilterFunc)\n          .classed(t_filterSign, true)\n      this.push({\n        id: v_id,\n        attr: v_attr,\n        sign: t_filterSign,\n        func: v_filterFunc,\n        type: v_type\n      })\n      switch (v_type) {\n        case 'reduce':\n          this.reducers.push(t_filterSign)\n          break\n        case 'filter':\n          this.filters.push(t_filterSign)\n          break\n        case 'pick':\n          this.pickers.push(t_filterSign)\n          break\n      }\n      t_this.filterID++\n      return t_this.filterID - 1\n    }\n    this.filterers.findID = function (v_id) {\n      return this.findIndex((v_filterer) => { return v_filterer.id == v_id })\n    }\n    this.filterers.fitFilters = function (v_obj, v_sign, v_selfOnly = false) {\n      let t_allFilters = v_selfOnly ? (this.filters) : [...this.filters, ...this.otherFilters], t_fit = true\n      for (let i = 0; i < t_allFilters.length; i++) {\n        let t_sign_i = t_allFilters[i]\n        if (t_sign_i == v_sign) {\n          continue\n        } else {\n          if (!d3.select(v_obj).classed(t_sign_i)) {\n            t_fit = false\n            break\n          }\n        }\n      }\n      if (t_fit) {\n        t_fit = this.fitReducers(v_obj, v_sign)\n      }\n      return t_fit\n    }\n    this.filterers.fitPickers = function (v_obj, v_sign, v_selfOnly = false) {\n      let t_allPickers = v_selfOnly ? (this.pickers) : [...this.pickers, ...this.otherPickers], t_fit = false\n      for (let i = 0; i < t_allPickers.length; i++) {\n        let t_sign_i = t_allPickers[i]\n        if (v_sign != null && v_sign == t_sign_i) {\n          continue\n        }\n        if (d3.select(v_obj).classed(t_sign_i)) {\n          t_fit = true\n          break\n        }\n      }\n      if (t_fit) {\n        let t_newFit = this.fitReducers(v_obj, v_sign)\n        if (t_fit != t_newFit) { t_fit = t_newFit }\n      }\n      return t_fit\n    }\n    this.filterers.fitReducers = function (v_obj, v_sign, v_selfOnly = false) {\n      let t_reducers = v_selfOnly ? (this.reducers) : [...this.reducers, ...this.otherReducers], t_fit = true\n      if (t_reducers.length > 0) {\n        for (let i = 0; i < t_reducers.length; i++) {\n          let t_sign_i = t_reducers[i]\n          if (t_sign_i == v_sign) {\n            continue\n          } else {\n            if (!d3.select(v_obj).classed(t_sign_i)) {\n              t_fit = false\n              break\n            }\n          }\n        }\n      }\n      return t_fit\n    }\n    this.filterers.getPickers = function (v_selection, v_sign) {\n      let t_filterers = this,\n        t_pickSelection = t_this.container\n          .selectAll(t_this.overallSelector)\n          .filter(t_this.overallFilterFunc)\n          .filter(function () {\n            return t_filterers.fitPickers(this, v_sign)\n          }),\n        t_objs = t_pickSelection._groups[0]\n      let t_keys = new Set(), t_keyName = t_this.overallKey\n      v_selection.each(function () {\n        t_keys.add($(this).attr(t_keyName))\n      })\n      for (let i = 0; i < t_objs.length; i++) {\n        let t_key = $(t_objs[i]).attr(t_keyName)\n        if (!t_keys.has(t_key)) {\n          v_selection._groups[0].push(t_objs[i])\n          // v_selection[0].push(t_objs[i])\n        }\n      }\n    }\n    this.filterers.restoreOthers = function (v_sign) {\n      let t_allSigns = this.filters, t_objs = t_this.container.selectAll(t_this.overallSelector)\n                  .filter(t_this.overallFilterFunc).classed(v_sign, true)\n      for (let i = 0; i < t_allSigns.length; i++) {\n        let t_sign = t_allSigns[i]\n        if (t_sign == v_sign) {\n          continue\n        }\n        t_objs = t_objs.filter(function () {\n          return d3.select(this).classed(t_sign)\n        })\n      };\n      return t_objs\n    }\n  };\n  setStatic (v_selection, v_match, v_selLength) {\n    let t_static = this.static,\n      t_filterers = this.filterers,\n      t_allSelection = this.container.selectAll(this.overallSelector).filter(this.overallFilterFunc),\n      // t_isNormal = (t_allSelection[0].length == v_selLength),\n      t_isNormal = (t_allSelection._groups[0].length == v_selLength),\n      t_selection = v_selection\n    if (t_static != null && !t_selection.empty()) {\n      let t_staticAttrs = t_static.attrs, t_matches = t_static.match, t_misses = t_static.miss, t_normals = t_static.normal\n      for (let i = 0; i < t_staticAttrs.length; i++) {\n        let t_attr = t_staticAttrs[i], t_noSpecial = (t_normals == null ? true : t_normals[i])\n        if (t_attr == 'class') {\n          let t_match = t_noSpecial ? v_match : (t_isNormal ? false : v_match)\n          if (t_matches[i] == 'chosen') {\n            if (t_matches[i] != null) {\n              t_selection.classed(t_matches[i], t_match)\n            }\n          }\n          if (t_misses[i] != null) {\n            t_selection.classed(t_misses[i], !t_match)\n          }\n        } else {\n          let t_normalValue = (v_match ? t_matches[i] : t_misses[i]),\n            t_specialValue = (v_match ? t_misses[i] : t_matches[i]),\n            t_value = t_noSpecial ? t_normalValue : (t_isNormal ? t_normalValue : t_specialValue)\n          t_selection.attr(t_attr, t_value)\n        }\n      }\n    }\n  };\n  setAnimation (v_selection, v_match) {\n    let t_animation = this.animation\n    if (typeof (t_animation) === 'function') {\n      t_animation(v_selection, v_match)\n    } else {\n      v_selection\n        .interrupt()\n        .transition()\n        .duration(t_animation.duration)\n        .attr(t_animation.attr, v_match ? t_animation.match() : t_animation.miss())\n    }\n  };\n  filterChange (v_id, v_attr, v_values, v_filterFunc, v_reduce = false) {\n    let t_filterID = this.filterers.findID(v_id)\n    if (t_filterID == -1) {\n      t_filterID = this.filterers.add(v_id, v_attr, v_filterFunc, v_reduce ? 'reduce' : 'filter')\n    }\n    let t_filterers = this.filterers,\n      t_filterer = t_filterers[t_filterID],\n      t_sign = t_filterer.sign,\n      t_oldSign = t_sign + '_old',\n      t_animation = this.animation,\n      t_conditions = new Set(v_values),\n      t_filterFunc = t_filterer.func,\n      t_fAttr = t_filterer.attr,\n      t_oldSelection = this.container.selectAll(this.overallSelector + '.' + t_sign)\n        .filter(this.overallFilterFunc)\n        .classed(t_oldSign, true)\n        .classed(t_sign, false),\n      t_newSelection = this.container.selectAll(this.overallSelector)\n        .filter(this.overallFilterFunc)\n        .filter(function () {\n          let t_attr = d3.select(this).attr(t_fAttr)\n          if (t_filterFunc == null) {\n            return t_conditions.has(t_attr)\n          } else {\n            return t_filterFunc(t_attr)\n          }\n        })\n        .filter(function () {\n          return t_filterers.fitFilters(this, t_sign)\n        })\n        .classed(t_sign, true)\n    t_filterers.getPickers(t_newSelection)\n    let t_falseToTrue = t_newSelection.filter(function () {\n        return !d3.select(this).classed(t_oldSign)\n      }),\n      t_trueToFalse = t_oldSelection.filter(function () {\n        return !d3.select(this).classed(t_sign)\n      })\n    this.container.selectAll('.' + t_oldSign)\n          .classed(t_oldSign, false)\n    this.setStatic(t_falseToTrue, true, t_falseToTrue[0].length)\n    this.setStatic(t_trueToFalse, false, t_trueToFalse[0].length)\n    this.setAnimation(t_falseToTrue, true)\n    this.setAnimation(t_trueToFalse, false)\n    return t_newSelection\n  };\n  pick (v_id, v_attr, v_values, v_filterFunc) {\n    let t_filterID = this.filterers.findID(v_id), t_return\n    if (t_filterID == -1) {\n      t_filterID = this.filterers.add(v_id, v_attr, v_filterFunc, 'pick')\n    }\n    let t_filterers = this.filterers,\n      t_filterer = t_filterers[t_filterID],\n      t_sign = t_filterer.sign,\n      t_conditions = new Set(v_values),\n      t_filterFunc = t_filterer.func,\n      t_fAttr = t_filterer.attr\n    if (v_filterFunc != null) {\n      t_filterer.func = t_filterFunc = v_filterFunc\n    }\n    this.restore(v_id, false)\n    let t_selection = this.container.selectAll(this.overallSelector)\n      .filter(this.overallFilterFunc)\n      .filter(function () {\n        let t_attr\n        if (t_fAttr == 'data') {\n          t_attr = d3.select(this).data()\n        } else {\n          t_attr = d3.select(this).attr(t_fAttr)\n        }\n        if (t_filterFunc == null) {\n          return t_conditions.has(t_attr)\n        } else {\n          return t_filterFunc(t_attr)\n        }\n      })\n      .filter(function () {\n        return t_filterers.fitReducers(this)\n      })\n      .classed(t_sign, true)\n    t_filterers.getPickers(t_selection, t_sign)\n    t_return = t_selection\n    let t_eleNum = t_selection._groups[0].length\n    if (this.subSelector != null) {\n      t_selection = t_selection.selectAll(this.subSelector)\n    }\n    this.setStatic(t_selection, true, t_eleNum)\n    this.setAnimation(t_selection, true)\n    return t_return\n  };\n  filter (v_id, v_attr, v_values, v_filterFunc, v_reduce = false) {\n    let t_filterID = this.filterers.findID(v_id), t_return\n    if (t_filterID == -1) {\n      t_filterID = this.filterers.add(v_id, v_attr, v_filterFunc, v_reduce ? 'reduce' : 'filter')\n    }\n    let t_filterers = this.filterers,\n      t_filterer = t_filterers[t_filterID],\n      t_sign = t_filterer.sign,\n      t_conditions = new Set(v_values),\n      t_filterFunc = t_filterer.func,\n      t_fAttr = t_filterer.attr\n    if (v_filterFunc != null) {\n      t_filterer.func = t_filterFunc = v_filterFunc\n    }\n    this.restore(v_id, false)\n    let t_selection = this.container.selectAll(this.overallSelector)\n      .filter(this.overallFilterFunc)\n      .filter(function () {\n        let t_attr\n        if (t_fAttr == 'data') {\n          t_attr = d3.select(this).data()\n        } else {\n          t_attr = d3.select(this).attr(t_fAttr)\n        }\n        if (t_filterFunc == null) {\n          return t_conditions.has(t_attr)\n        } else {\n          let t_fit = t_filterFunc(t_attr)\n          return t_fit\n        }\n      })\n      .filter(function () {\n        return t_filterers.fitFilters(this, t_sign)\n      })\n      .classed(t_sign, true)\n    t_filterers.getPickers(t_selection)\n    t_return = t_selection\n    let t_eleNum = t_selection._groups[0].length\n    if (this.subSelector != null) {\n      t_selection = t_selection.selectAll(this.subSelector)\n    }\n    this.setStatic(t_selection, true, t_eleNum)\n    this.setAnimation(t_selection, true)\n    return t_return\n  };\n  restore (v_id, v_direct = true) {\n    let t_filterer = this.filterers.find((v_ft) => { return (v_ft.id == v_id) })\n    if (t_filterer == null) {\n      return null\n    }\n    let t_sign = t_filterer.sign,\n      t_isPicker = (t_filterer.type == 'pick'),\n      t_isReducer = (t_filterer.type == 'reduce'),\n      t_filterers = this.filterers, t_selection,\n      t_noPickers = true,\n      t_allSelection = this.container.selectAll(this.overallSelector).filter(this.overallFilterFunc)\n    if (!t_isPicker) {\n      t_selection = t_filterers.restoreOthers(t_sign).classed(t_sign, v_direct)\n    } else {\n      t_selection = t_allSelection.classed(t_sign, false)\n    }\n    if (!t_isPicker && this.filterers.pickers.length > 0) {\n      let t_newSelection = t_selection\n              .filter(function () {\n                return !(t_filterers.fitPickers(this))\n              })\n      if (t_newSelection._groups[0].length != t_selection._groups[0].length) {\n        t_noPickers = false\n        t_selection = t_newSelection\n      }\n    }\n    let t_eleNum = t_selection._groups[0].length,\n      t_match = (v_direct ? t_noPickers : false)\n    if (t_match) {\n      t_selection = t_selection.filter(function () {\n        return t_filterers.fitReducers(this)\n      })\n    }\n    if (this.subSelector != null) {\n      t_selection = t_selection.selectAll(this.subSelector)\n    }\n    this.setStatic(t_selection, t_match, t_eleNum)\n    this.setAnimation(t_selection, t_match)\n    let t_return\n    if (v_direct) {\n      if (!t_isReducer) {\n        t_return = t_allSelection.filter(function () {\n          return t_filterers.fitPickers(this) && t_filterers.fitReducers(this)\n        })\n      } else {\n        t_return = t_allSelection\n      }\n    }\n    return t_return\n  };\n  getOther (v_type) {\n    let t_filterer = this.filterers, t_return\n    switch (v_type) {\n      case 'reduce':\n        t_return = t_filterer.otherReducers\n        break\n      case 'filter':\n        t_return = t_filterer.otherFilters\n        break\n      case 'pick':\n        t_return = t_filterer.otherPickers\n        break\n    }\n    return t_return\n  };\n  get (v_type) {\n    let t_filterer = this.filterers, t_return\n    switch (v_type) {\n      case 'reduce':\n        t_return = t_filterer.reducers\n        break\n      case 'filter':\n        t_return = t_filterer.filters\n        break\n      case 'pick':\n        t_return = t_filterer.pickers\n        break\n    }\n    return t_return\n  };\n  set (v_type, v_values) {\n    let t_filterer = this.filterers, t_array\n    switch (v_type) {\n      case 'reduce':\n        t_array = t_filterer.otherReducers\n        break\n      case 'filter':\n        t_array = t_filterer.otherFilters\n        break\n      case 'pick':\n        t_array = t_filterer.otherPickers\n        break\n    }\n    for (let i = 0; i < v_values.length; i++) {\n      let t_value = v_values[i]\n      if (t_array.indexOf(t_value) < 0) {\n        t_array.push(t_value)\n      }\n    }\n  };\n}\n\nfunction bvFilter (v_filterSetting) {\n  return new PDFilter(v_filterSetting)\n}\n\nfunction bvGetFromSelection (v_selection, v_attr, v_attrFunc) {\n  if (v_selection == null || v_selection.empty()) {\n    return null\n  }\n  let t_values = new Array()\n  if (v_attr == null && v_attrFunc == null) {\n    return v_selection\n  } else {\n    if (v_attr != null) {\n      v_selection.each(function () {\n        t_values.push($(this).attr(v_attr))\n      })\n    } else {\n      if (typeof (v_attrFunc) === 'function') {\n        v_selection.each(function (v_d) {\n          let t_info = v_attrFunc(this, v_d)\n          t_values.push(t_info)\n        })\n      }\n    }\n  }\n  return t_values\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/SubMap/libs/subGlyph.js","const colormap = require('./bremm.png')\n\nvar Color2D = {}\n\nColor2D.dimensions = {\n  width: 512,\n  height: 512\n}\n\nColor2D.colormap = colormap\n\nColor2D.context = null\n\nColor2D.init = function (callback) {\n  let canvas = document.createElement('canvas')\n  canvas.id = 'colormap'\n  canvas.width = String(Color2D.dimensions.width)\n  canvas.height = String(Color2D.dimensions.height)\n  canvas.style = 'display:none'\n  document.body.appendChild(canvas)\n\n  Color2D.context = canvas.getContext('2d')\n\n  let imgObj = new Image()\n  imgObj.onload = function () {\n    Color2D.context.drawImage(imgObj, 0, 0)\n    callback()\n  }\n  imgObj.src = Color2D.colormap\n}\n\nColor2D.ranges = {\n  x: [0, 1],\n  y: [0, 1]\n}\n\nColor2D.getScaledX = function (x) {\n  let val = (x + 1 - (Color2D.ranges.x[0] + 1)) /\n    (Color2D.ranges.x[1] + 1 - (Color2D.ranges.x[0] + 1))\n  return val * (Color2D.dimensions.width - 1)\n}\n\nColor2D.getScaledY = function (y) {\n  let val = (y + 1 - (Color2D.ranges.y[0] + 1)) /\n    (Color2D.ranges.y[1] + 1 - (Color2D.ranges.y[0] + 1))\n  return val * (Color2D.dimensions.height - 1)\n}\n\nColor2D.setColormap = function (colormap, callback) {\n  Color2D.colormap = colormap\n  if (document.getElementById('colormap') !== null) {\n    document.getElementById('colormap').outerHTML = ''\n    delete document.getElementById('colormap')\n  }\n  Color2D.init(callback)\n}\n\nColor2D.getColor = function (x, y) {\n  let color = Color2D.context.getImageData(Color2D.getScaledX(x), Color2D.getScaledY(y), 1, 1)\n  let r = color.data[0]\n  let g = color.data[1]\n  let b = color.data[2]\n  return [r, g, b]\n}\n\nexport default Color2D\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/color/color2D.js","<template>\n  <div id=\"mapPanel\">\n    <el-row>\n      <el-col>\n        <div class=\"mapPanelContent\">\n          Legends\n        </div>\n      </el-col>\n    </el-row>\n    <template v-for=\"legend in legends\">\n      <el-row class=\"mapLegend\" :key=\"legend\">\n        <el-col :span=\"4\">\n          <div class=\"mapLegendIcon\"></div>\n        </el-col>\n        <el-col :span=\"20\">\n          <div class=\"mapLegendContent\" v-html=\"legend\"></div>\n        </el-col>\n      </el-row>\n    </template>\n    <el-row>\n      <el-col>\n        <div class=\"mapPanelContent\">\n          Exploration mode\n        </div>\n      </el-col>\n    </el-row>\n    <div class=\"mapMode\" v-for=\"(mode, idx) in modes\" :key=\"mode\">\n      <el-radio-group v-model=\"currMode\" @change=\"changeMode\">\n        <el-radio :label=\"mode\">{{modeTexts[idx]}}</el-radio>\n      </el-radio-group>\n    </div>\n    <el-row>\n      <el-col>\n        <div class=\"mapPanelContent\">\n          Scale\n        </div>\n      </el-col>\n    </el-row>\n    <div class=\"mapScale\">\n      <div class=\"mapScaleBtnGroup\">\n        <div class=\"mapScaleBtn\" id=\"mapScaleBtnPlus\">\n          <el-button plain icon=\"el-icon-plus\" size=\"mini\" :disabled=\"currScaleLevel===2\" @click=\"changeScale('plus')\"></el-button>\n        </div>\n        <div class=\"mapScaleBtn\" id=\"mapScaleBtnMinus\">\n          <el-button plain icon=\"el-icon-minus\" size=\"mini\" :disabled=\"currScaleLevel===0\"  @click=\"changeScale('minus')\"></el-button>\n        </div>\n      </div>\n      <div class=\"mapScaleText\" v-html=\"scaleLevel[currScaleLevel]\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nexport default {\n  name: 'SubPanel',\n  data() {\n    return {\n      // legends: ['National&nbsp;capital', 'Provincial&nbsp;capital', 'Harbor', 'Land&nbsp;route'],\n      legends: ['National&nbsp;capital', 'Provincial&nbsp;capital', 'Land&nbsp;route', 'Sea&nbsp;route'],\n      currMode: 'browse',\n      modes: ['browse', 'airTravel', 'groundTravel'],\n      modeTexts: ['Browse', 'Travel in the air', 'Travel on the ground'],\n      currScaleLevel: 0,\n      scaleLevel: {\n        0: \"National level\",\n        1: \"Provincial level\",\n        2: \"Urban level\"\n      }\n    }\n  },\n  mounted() {\n    this.$nextTick(function () {\n      // d3.select(this.$el).style('visibility', 'hidden')\n      this.drawLegendIcon()\n\n      let panelWidth = parseFloat(d3.select(this.$el).style('width'))\n\n      let btnGroupHeight = parseFloat(d3.select(this.$el).select('.mapScaleBtnGroup').style('height'))\n      let scaleTextHeight = parseFloat(d3.select(this.$el).select('.mapScaleText').style('height'))\n      d3.select(this.$el).select('.mapScaleText').style('top', (btnGroupHeight - scaleTextHeight) / 2 + 'px')\n      let btnWidth = parseFloat(d3.select(this.$el).select('.mapScaleBtnGroup').select('button').style('width'))\n      d3.select(this.$el).select('.mapScaleText').style('left', btnWidth + panelWidth / 17.5 + 'px')\n      d3.select(this.$el)\n        .select('.mapScaleBtnGroup')\n        .selectAll('button')\n        .on('mouseover', function () {\n          d3.select(this)\n            .classed('mapScaleBtnHovered', true)\n            .classed('mapScaleBtnUnhovered', false)\n        })\n        .on('mouseout', function () {\n          d3.select(this)\n            .classed('mapScaleBtnHovered', false)\n            .classed('mapScaleBtnUnhovered', true)\n        })\n\n      // let panelHeight = parseFloat(d3.select(this.$el).style('height'))\n      // let subMapHeight = parseFloat(d3.select(d3.select(this.$el).node().parentElement).style('height'))\n      // let panelTop = subMapHeight - panelHeight - panelWidth / 30\n      // d3.select(this.$el).style('top', panelTop + 'px')\n\n      // d3.select(this.$el).style('visibility', 'visible')\n    })\n  },\n  computed: {\n    ...mapGetters([\n      'updateMap',\n      'changeLevelByMap'\n    ])\n  },\n  watch: {\n    updateMap: () => {\n      d3.select('#mapPanel').style('visibility', 'visible')\n    },\n    changeLevelByMap: function (newVal) {\n      let currLevel\n      if (newVal.level === undefined) {\n        currLevel = 2\n      } else {\n        currLevel = newVal.level\n      }\n      this.currScaleLevel = currLevel\n    }\n  },\n  methods: {\n    ...mapActions([\n      'updateChangeLevelByPanel',\n      'updateChangeMode'\n    ]),\n    changeMode (newVal) {\n      this.updateChangeMode({\n        mode: newVal\n      })\n    },\n    changeScale (type) {\n      // d3.event.stopPropagation()\n      if (type === 'plus') {\n        this.currScaleLevel += 1\n        this.updateChangeLevelByPanel({\n          level: this.currScaleLevel\n        })\n      } else if (type === 'minus') {\n        this.currScaleLevel -= 1\n        this.updateChangeLevelByPanel({\n          level: this.currScaleLevel\n        })\n      }\n    },\n    drawLegendIcon () {\n      this.d3el = d3.select(this.$el)\n      const self = this\n      let size = Math.min(\n        this.d3el.select('.mapLegend').node().getBoundingClientRect().width,\n        this.d3el.select('.mapLegend').node().getBoundingClientRect().height\n      )\n      this.d3el.selectAll('.mapLegendIcon').each(function (p, idx) {\n        let thisIcon = d3.select(this)\n        let thisIconSvg = thisIcon\n          .append('svg')\n          .attr('width', size)\n          .attr('height', size)\n        switch (self.legends[idx]) {\n          case 'National&nbsp;capital':\n            drawNationalCap(thisIconSvg, size)\n            break\n          case 'Provincial&nbsp;capital':\n            drawProvincialCap(thisIconSvg, size)\n            break\n          case 'Harbor':\n            drawHarbor(thisIconSvg, size)\n            break\n          case 'Land&nbsp;route':\n            drawLandRoute(thisIconSvg, size)\n            break\n          case 'Sea&nbsp;route':\n            drawSeaRoute(thisIconSvg, size)\n            break\n        }\n      })\n      function drawNationalCap (v_svg, size) {\n        let g = v_svg.append('g')\n          .attr('transform', `translate(${size / 2}, ${size / 2})`)\n        let r = size / 2\n        let inR = r * 0.3,\n          outR = r * 0.6,\n          outStrokeWidth = r * 0.2\n        g.append('circle')\n          .attr('cx', 0)\n          .attr('cy', 0)\n          .attr('r', outR)\n          .style('fill', '#fff')\n          .style('stroke', '#000')\n          .style('stroke-width', outStrokeWidth)\n        g.append('circle')\n          .attr('cx', 0)\n          .attr('cy', 0)\n          .attr('r', inR)\n          .style('fill', '#000')\n      }\n      function drawProvincialCap (v_svg, size) {\n        let g = v_svg.append('g')\n          .attr('transform', `translate(${size / 2}, ${size / 2})`)\n        let r = size / 2 * 0.45,\n          outStrokeWidth = size / 2 * 0.2\n        g.append('circle')\n          .attr('cx', 0)\n          .attr('cy', 0)\n          .attr('r', r)\n          .style('fill', '#fff')\n          .style('stroke', '#000')\n          .style('stroke-width', outStrokeWidth)\n      }\n      function drawHarbor (v_svg, size) {\n        let icon = 'M512 0C375.467 0 273.067 106.974 273.067 238.933a238.387 238.387 0 0 0 170.666 227.874V879.07c-63.488-11.264-128-37.547-180.77-86.699C191.078 725.47 136.67 618.974 136.67 443.597a68.267 68.267 0 1 0-136.67 0C0 648.602 69.086 798.31 169.984 892.245 270.882 986.25 398.541 1024 512 1024c113.732 0 241.323-38.23 342.153-132.437s169.71-243.917 169.71-447.966c4.438-95.232-140.834-95.232-136.396 0 0 174.285-54.614 280.917-126.498 348.16-52.839 49.288-117.283 75.776-180.702 87.176V467.081a238.524 238.524 0 0 0 170.666-228.148C750.933 106.973 648.533 0 512 0z m0 136.533a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8z'\n        let scale = 0.012\n        let g = v_svg.append('g')\n          .attr('transform', `translate(${size / 2}, ${size / 2})scale(${scale})`)\n          .style('opacity', 0)\n        g.append('path')\n          .attr('d', icon)\n        let gSize = g.node().getBoundingClientRect()\n        g.attr('transform', function () {\n          return getNewHarborCoords(g, gSize)\n        })\n        .style('opacity', 1)\n        function getNewHarborCoords (thisHarbor, gSize) {\n          let prevTranslate = [size / 2, size / 2]\n          let newTranslate = [prevTranslate[0] - gSize.width / 2, prevTranslate[1] - gSize.height / 2]\n          return `translate(${newTranslate})scale(${scale})`\n        }\n      }\n      function drawLandRoute (v_svg, size) {\n        let lineLength = size * 0.7\n        let startX = (size - lineLength) / 2\n        let line = [[startX, size / 2], [startX + lineLength, size / 2]]\n        let g = v_svg.append('g')\n          .append('path')\n          .attr('d', d3.line()(line))\n          .style('stroke', '#5a5a5a')\n          .style('fill', 'none')\n          .style('stroke-width', size / 9)\n      }\n      function drawSeaRoute (v_svg, size) {\n        let lineLength = size * 1\n        let startX = (size - lineLength) / 2\n        let line = [[startX, size / 2], [startX + lineLength, size / 2]]\n        let g = v_svg.append('g')\n          .append('path')\n          .attr('d', d3.line()(line))\n          .style('stroke', '#5a5a5a')\n          .style('fill', 'none')\n          .style('stroke-width', size / 10)\n          .style('stroke-dasharray', 4)\n      }\n    }\n  }\n}\n\n</script>\n\n<style lang=\"less\">\n// @panel-height: 100%;\n@panel-height: 18rem;\n@panel-width: 10.75rem;\n@projMap-width: 93%;\n\n#mapPanel {\n  text-align: left;\n  position: absolute;\n  padding-left: 0.5rem;\n  bottom: 0;\n  right: 0;\n  width: @panel-width;\n  height: @panel-height;\n  background-color: rgba(102,102,102,0.1);\n  visibility: hidden;\n\n  .mapPanelContent {\n    margin-top: 0.25rem;\n    font-style: italic;\n    font-weight: 600;\n  }\n\n  .mapLegend,\n  .mapMode,\n  .mapScaleText {\n    font-size: 0.9rem;\n  }\n\n  .mapMode {\n    text-align: left;\n    label {\n      margin-bottom: 0px;\n    }\n  }\n\n  .mapScale {\n    position: relative;\n  }\n\n  .mapScaleBtnGroup {\n    line-height: 1;\n    font-weight: 1000;\n  }\n\n  .mapScaleBtn button {\n    padding: 0.25rem;\n  }\n\n  .mapScaleBtn button:focus {\n    outline: none !important;\n  }\n\n  .mapScaleBtnHovered {\n    border-color: #409EFF !important;\n    color: #409EFF !important;\n  }\n\n  .mapScaleBtnUnhovered {\n    border: 1px solid #DCDFE6 !important;\n    color: #606266 !important;\n  }\n\n  .mapScaleText {\n    position: absolute;\n  }\n}\n\n// #projMap {\n//   width: @projMap-width;\n//   border: 1px solid #ccc;\n// }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/SubMap/panel/MapPanel.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"mapPanel\"}},[_c('el-row',[_c('el-col',[_c('div',{staticClass:\"mapPanelContent\"},[_vm._v(\"\\n        Legends\\n      \")])])],1),_vm._v(\" \"),_vm._l((_vm.legends),function(legend){return [_c('el-row',{key:legend,staticClass:\"mapLegend\"},[_c('el-col',{attrs:{\"span\":4}},[_c('div',{staticClass:\"mapLegendIcon\"})]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":20}},[_c('div',{staticClass:\"mapLegendContent\",domProps:{\"innerHTML\":_vm._s(legend)}})])],1)]}),_vm._v(\" \"),_c('el-row',[_c('el-col',[_c('div',{staticClass:\"mapPanelContent\"},[_vm._v(\"\\n        Exploration mode\\n      \")])])],1),_vm._v(\" \"),_vm._l((_vm.modes),function(mode,idx){return _c('div',{key:mode,staticClass:\"mapMode\"},[_c('el-radio-group',{on:{\"change\":_vm.changeMode},model:{value:(_vm.currMode),callback:function ($$v) {_vm.currMode=$$v},expression:\"currMode\"}},[_c('el-radio',{attrs:{\"label\":mode}},[_vm._v(_vm._s(_vm.modeTexts[idx]))])],1)],1)}),_vm._v(\" \"),_c('el-row',[_c('el-col',[_c('div',{staticClass:\"mapPanelContent\"},[_vm._v(\"\\n        Scale\\n      \")])])],1),_vm._v(\" \"),_c('div',{staticClass:\"mapScale\"},[_c('div',{staticClass:\"mapScaleBtnGroup\"},[_c('div',{staticClass:\"mapScaleBtn\",attrs:{\"id\":\"mapScaleBtnPlus\"}},[_c('el-button',{attrs:{\"plain\":\"\",\"icon\":\"el-icon-plus\",\"size\":\"mini\",\"disabled\":_vm.currScaleLevel===2},on:{\"click\":function($event){return _vm.changeScale('plus')}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"mapScaleBtn\",attrs:{\"id\":\"mapScaleBtnMinus\"}},[_c('el-button',{attrs:{\"plain\":\"\",\"icon\":\"el-icon-minus\",\"size\":\"mini\",\"disabled\":_vm.currScaleLevel===0},on:{\"click\":function($event){return _vm.changeScale('minus')}}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"mapScaleText\",domProps:{\"innerHTML\":_vm._s(_vm.scaleLevel[_vm.currScaleLevel])}})])],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7c218adf\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/SubMap/panel/MapPanel.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7c218adf\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MapPanel.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MapPanel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MapPanel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7c218adf\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./MapPanel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/SubMap/panel/MapPanel.vue\n// module id = null\n// module chunks = ","var Graph = (function (undefined) {\n\n\tvar extractKeys = function (obj) {\n\t\tvar keys = [], key;\n\t\tfor (key in obj) {\n\t\t    Object.prototype.hasOwnProperty.call(obj,key) && keys.push(key);\n\t\t}\n\t\treturn keys;\n\t}\n\n\tvar sorter = function (a, b) {\n\t\treturn parseFloat (a) - parseFloat (b);\n\t}\n\n\tvar findPaths = function (map, start, end, infinity) {\n\t\tinfinity = infinity || Infinity;\n\n\t\tvar costs = {},\n\t\t    open = {'0': [start]},\n\t\t    predecessors = {},\n\t\t    keys;\n\n\t\tvar addToOpen = function (cost, vertex) {\n\t\t\tvar key = \"\" + cost;\n\t\t\tif (!open[key]) open[key] = [];\n\t\t\topen[key].push(vertex);\n\t\t}\n\n\t\tcosts[start] = 0;\n\n\t\twhile (open) {\n\t\t\tif(!(keys = extractKeys(open)).length) break;\n\n\t\t\tkeys.sort(sorter);\n\n\t\t\tvar key = keys[0],\n\t\t\t    bucket = open[key],\n\t\t\t    node = bucket.shift(),\n\t\t\t    currentCost = parseFloat(key),\n\t\t\t    adjacentNodes = map[node] || {};\n\n\t\t\tif (!bucket.length) delete open[key];\n\n\t\t\tfor (var vertex in adjacentNodes) {\n\t\t\t    if (Object.prototype.hasOwnProperty.call(adjacentNodes, vertex)) {\n\t\t\t\t\tvar cost = adjacentNodes[vertex],\n\t\t\t\t\t    totalCost = cost + currentCost,\n\t\t\t\t\t    vertexCost = costs[vertex];\n\n\t\t\t\t\tif ((vertexCost === undefined) || (vertexCost > totalCost)) {\n\t\t\t\t\t\tcosts[vertex] = totalCost;\n\t\t\t\t\t\taddToOpen(totalCost, vertex);\n\t\t\t\t\t\tpredecessors[vertex] = node;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (costs[end] === undefined) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn predecessors;\n\t\t}\n\n\t}\n\n\tvar extractShortest = function (predecessors, end) {\n\t\tvar nodes = [],\n\t\t    u = end;\n\n\t\twhile (u !== undefined) {\n\t\t\tnodes.push(u);\n\t\t\tu = predecessors[u];\n\t\t}\n\n\t\tnodes.reverse();\n\t\treturn nodes;\n\t}\n\n\tvar findShortestPath = function (map, nodes) {\n\t\tvar start = nodes.shift(),\n\t\t    end,\n\t\t    predecessors,\n\t\t    path = [],\n\t\t    shortest;\n\n\t\twhile (nodes.length) {\n\t\t\tend = nodes.shift();\n\t\t\tpredecessors = findPaths(map, start, end);\n\n\t\t\tif (predecessors) {\n\t\t\t\tshortest = extractShortest(predecessors, end);\n\t\t\t\tif (nodes.length) {\n\t\t\t\t\tpath.push.apply(path, shortest.slice(0, -1));\n\t\t\t\t} else {\n\t\t\t\t\treturn path.concat(shortest);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tstart = end;\n\t\t}\n\t}\n\n\tvar toArray = function (list, offset) {\n\t\ttry {\n\t\t\treturn Array.prototype.slice.call(list, offset);\n\t\t} catch (e) {\n\t\t\tvar a = [];\n\t\t\tfor (var i = offset || 0, l = list.length; i < l; ++i) {\n\t\t\t\ta.push(list[i]);\n\t\t\t}\n\t\t\treturn a;\n\t\t}\n\t}\n\n\tvar Graph = function (map) {\n\t\tthis.map = map;\n\t}\n\n\tGraph.prototype.findShortestPath = function (start, end) {\n\t\tif (Object.prototype.toString.call(start) === '[object Array]') {\n\t\t\treturn findShortestPath(this.map, start);\n\t\t} else if (arguments.length === 2) {\n\t\t\treturn findShortestPath(this.map, [start, end]);\n\t\t} else {\n\t\t\treturn findShortestPath(this.map, toArray(arguments));\n\t\t}\n\t}\n\n\tGraph.findShortestPath = function (map, start, end) {\n\t\tif (Object.prototype.toString.call(start) === '[object Array]') {\n\t\t\treturn findShortestPath(map, start);\n\t\t} else if (arguments.length === 3) {\n\t\t\treturn findShortestPath(map, [start, end]);\n\t\t} else {\n\t\t\treturn findShortestPath(map, toArray(arguments, 1));\n\t\t}\n\t}\n\n\treturn Graph;\n\n})()\n\nexport default Graph\n\n\n// WEBPACK FOOTER //\n// ./src/components/SubMap/libs/graph.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"main\"}},[_c('div',{attrs:{\"id\":\"toolbar\"}},[_c('b-navbar',{attrs:{\"id\":\"navbar\",\"toggleable\":\"md\",\"type\":\"dark\",\"variant\":\"info\"}},[_c('b-navbar-brand',{attrs:{\"href\":\"#\"}},[_vm._v(\"Subspace Map\")]),_vm._v(\" \"),_c('b-collapse',{attrs:{\"is-nav\":\"\",\"id\":\"nav_collapse\"}},[_c('b-nav-item-dropdown',{attrs:{\"id\":\"my-dropdown\",\"left\":\"\"}},[_c('template',{slot:\"button-content\"},[_vm._v(\"Data\")]),_vm._v(\" \"),_vm._l((_vm.fileList),function(file){return _c('b-dropdown-item',{key:file,on:{\"click\":function($event){return _vm.changeData(file)}}},[_vm._v(_vm._s(file))])})],2)],1)],1)],1),_vm._v(\" \"),_c('section',{attrs:{\"id\":\"subListContainer\"}},[_c('SubList')],1),_vm._v(\" \"),_c('section',{attrs:{\"id\":\"subMapContainer\"}},[_c('SubMap')],1),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"dimGlyphContainer\"}},[_c('svg',{attrs:{\"id\":\"dimGlyphSvg\"}})]),_vm._v(\" \"),_c('section',{attrs:{\"id\":\"subProjContainer\"}},[_c('SubProj')],1),_vm._v(\" \"),_c('LoadingPage')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-32cce774\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Main.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-32cce774\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Main.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Main.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Main.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-32cce774\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Main.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-32cce774\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Main.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <Main></Main>\n  </div>\n</template>\n<script>\nimport Main from '@/components/Main'\nexport default {\n  name: 'App',\n  components: {\n    Main\n  },\n  methods: {},\n  mounted() {}\n}\n\n</script>\n<style>\nbody {\n  margin: 0\n}\n\n#app {\n  /* font-family: 'Avenir', Helvetica, Arial, sans-serif; */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Main')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d34a6726\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d34a6726\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d34a6726\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Main from '@/components/Main'\n\nVue.use(Router)\n\nexport default new Router({\n  mode:'history'\n  // routes: [\n  //   {\n  //     path: '/',\n  //     name: 'Main',\n  //     component: Main\n  //   }\n  // ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// API\nvar root = 'http://127.0.0.1:22068/' \n\n//var root = 'http://www.zhimengzhe.com/Javascriptjiaocheng/390541.html'\n// axios\nvar axios = require('axios')\n// JS\nfunction toType(obj) {\n  return ({}).toString.call(obj).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()\n}\n// \nfunction filterNull(o) {\n  for (var key in o) {\n    if (o[key] === null) {\n      delete o[key]\n    }\n    if (toType(o[key]) === 'string') {\n      o[key] = o[key].trim()\n    } else if (toType(o[key]) === 'object') {\n      o[key] = filterNull(o[key])\n    } else if (toType(o[key]) === 'array') {\n      o[key] = filterNull(o[key])\n    }\n  }\n  return o\n}\n/*\n  \n  \n  \n  alert\n*/\n\nfunction apiAxios(method, url, params, success, failure) {\n  // this.$Loading.start();\n  if (params) {\n    params = filterNull(params)\n  }\n  axios({\n      method: method,\n      url: url,\n      data: method === 'POST' || method === 'PUT' ? params : null,\n      params: method === 'GET' || method === 'DELETE' ? params : null,\n      baseURL: root,\n      withCredentials: false\n    })\n    .then(function(res) {\n      if (res.data) {\n        if (success) {\n          success(res.data)\n        }\n      } else {\n        if (failure) {\n          failure(res.data)\n          } else {\n            window.alert('error: ' + JSON.stringify(res.data))\n          }\n      }\n    })\n    .catch(function(err) {\n      console.log('err: ', err)\n      let res = err.response\n      if (err) {\n        // this.$Loading.error();\n        console.log('api error, HTTP CODE: ' + res)\n      }\n    })\n}\n\n// vue\nexport default {\n  get: function(url, params, success, failure) {\n    return apiAxios('GET', url, params, success, failure)\n  },\n  post: function(url, params, success, failure) {\n    return apiAxios('POST', url, params, success, failure)\n  },\n  put: function(url, params, success, failure) {\n    return apiAxios('PUT', url, params, success, failure)\n  },\n  delete: function(url, params, success, failure) {\n    return apiAxios('DELETE', url, params, success, failure)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/index.js","/*\n* @Author: wakouboy\n* @Date: 2018-08-08 23:30:38\n* @Last Modified by: wakouboy\n* @Last Modified time: 2019-01-16 13:52:12\n*/\n// signal\n// \nconst state = {\n  loadingPage: null,\n  loadedData: null,\n  updateSubList: {},\n  updateMapByDim: {},\n  updateMapBySub: {},\n  changeLevelByPanel: {},\n  changeLevelByMap: {},\n  changeMode: {},\n  drawProjection: {},\n  changeProjInBrowseMode: {},\n  updateMap: {},\n  resize: null,\n  changeSubProjOpacity: {},\n};\n\nexport default state;\n\n\n// WEBPACK FOOTER //\n// ./src/store/state.js","/*\n* @Author: wakouboy\n* @Date:   2018-08-08 23:30:56\n* @Last Modified by:   wakouboy\n* @Last Modified time: 2019-01-16 13:50:48\n*/\n\nconst getters = {\n  loadingPage: function (state) {\n    return state.loadingPage\n  },\n  loadedData: function (state) {\n    return state.loadedData\n  },\n  updateSubList: function (state) {\n    return state.updateSubList\n  },\n  updateMapByDim: function (state) {\n    return state.updateMapByDim\n  },\n  updateMapBySub: function (state) {\n    return state.updateMapBySub\n  },\n  changeLevelByPanel: function (state) {\n    return state.changeLevelByPanel\n  },\n  changeLevelByMap: function (state) {\n    return state.changeLevelByMap\n  },\n  changeMode: function (state) {\n    return state.changeMode\n  },\n  drawProjection: function (state) {\n    return state.drawProjection\n  },\n  changeProjInBrowseMode: function (state) {\n    return state.changeProjInBrowseMode\n  },\n  updateMap: function (state) {\n    return state.updateMap\n  },\n  resize: function (state) {\n    return state.resize\n  },\n  changeSubProjOpacity: function (state) {\n    return state.changeSubProjOpacity\n  },\n}\n// export const loadedData = (state) => {\n//     return state.loadedData;\n// }\n\nexport default getters\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/getters.js","/*\n* @Author: wakouboy\n* @Date:   2018-08-08 23:31:36\n* @Last Modified by:   wakouboy\n* @Last Modified time: 2019-01-16 13:52:36\n*/\n// export const SET_NAME = 'SET_NAME';\nconst types = {\n  UPDATE_LOADING_PAGE: 'UPDATE_LOADING_PAGE',\n  UPDATE_UPDATE_SUB_LIST: 'UPDATE_UPDATE_SUB_LIST',\n  UPDATE_UPDATE_MAP_BY_DIM: 'UPDATE_UPDATE_MAP_BY_DIM',\n  UPDATE_UPDATE_MAP_BY_SUB: 'UPDATE_UPDATE_MAP_BY_SUB',\n  UPDATE_CHANGE_LEVEL_BY_PANEL: 'UPDATE_CHANGE_LEVEL_BY_PANEL',\n  UPDATE_CHANGE_LEVEL_BY_MAP: 'UPDATE_CHANGE_LEVEL_BY_MAP',\n  UPDATE_CHANGE_MODE: 'UPDATE_CHANGE_MODE',\n  UPDATE_DRAW_PROJECTION: 'UPDATE_DRAW_PROJECTION',\n  UPDATE_CHANGE_PROJ_IN_BROWSE_MODE: 'UPDATE_CHANGE_PROJ_IN_BROWSE_MODE',\n  UPDATE_UPDATE_MAP: 'UPDATE_UPDATE_MAP',\n  UPDATE_RESIZE: 'UPDATE_RESIZE',\n  UPDATE_CHANGE_SUB_PROJ_OPACITY: 'UPDATE_CHANGE_SUB_PROJ_OPACITY',\n}\n\nexport default types\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutation-type.js","/*\n* @Author: wakouboy\n* @Date:   2018-08-08 23:31:53\n* @Last Modified by:   wakouboy\n* @Last Modified time: 2019-01-16 13:52:28\n*/\nimport types from './mutation-type.js';\nimport Vue from 'vue'\nexport default {\n  [types.UPDATE_LOADING_PAGE] (state, payload) {\n    // let newObj = {}\n    // Object.keys(payload).forEach(dKey => {\n    //   newObj[dKey] = payload[dKey]\n    // })\n    state.loadingPage = payload\n  },\n  [types.UPDATE_UPDATE_SUB_LIST] (state, payload) {\n    let newObj = {}\n    Object.keys(payload).forEach(dKey => {\n      newObj[dKey] = payload[dKey]\n    })\n    state.updateSubList = newObj\n  },\n  [types.UPDATE_UPDATE_MAP_BY_DIM] (state, payload) {\n    let newObj = {}\n    Object.keys(payload).forEach(dKey => {\n      newObj[dKey] = payload[dKey]\n    })\n    state.updateMapByDim = newObj\n  },\n  [types.UPDATE_UPDATE_MAP_BY_SUB] (state, payload) {\n    let newObj = {}\n    Object.keys(payload).forEach(dKey => {\n      newObj[dKey] = payload[dKey]\n    })\n    state.updateMapBySub = newObj\n  },\n  [types.UPDATE_CHANGE_LEVEL_BY_PANEL] (state, payload) {\n    let newObj = {}\n    Object.keys(payload).forEach(dKey => {\n      newObj[dKey] = payload[dKey]\n    })\n    state.changeLevelByPanel = newObj\n  },\n  [types.UPDATE_CHANGE_LEVEL_BY_MAP] (state, payload) {\n    let newObj = {}\n    Object.keys(payload).forEach(dKey => {\n      newObj[dKey] = payload[dKey]\n    })\n    state.changeLevelByMap = newObj\n  },\n  [types.UPDATE_CHANGE_MODE] (state, payload) {\n    let newObj = {}\n    Object.keys(payload).forEach(dKey => {\n      newObj[dKey] = payload[dKey]\n    })\n    state.changeMode = newObj\n  },\n  [types.UPDATE_DRAW_PROJECTION] (state, payload) {\n    let newObj = {}\n    Object.keys(payload).forEach(dKey => {\n      newObj[dKey] = payload[dKey]\n    })\n    state.drawProjection = newObj\n  },\n  [types.UPDATE_CHANGE_PROJ_IN_BROWSE_MODE] (state, payload) {\n    let newObj = {}\n    Object.keys(payload).forEach(dKey => {\n      newObj[dKey] = payload[dKey]\n    })\n    state.changeProjInBrowseMode = newObj\n  },\n  [types.UPDATE_UPDATE_MAP] (state, payload) {\n    let newObj = {}\n    Object.keys(payload).forEach(dKey => {\n      newObj[dKey] = payload[dKey]\n    })\n    state.updateMap = newObj\n  },\n  [types.UPDATE_RESIZE] (state, payload) {\n    // let newObj = {}\n    // Object.keys(payload).forEach(dKey => {\n    //   newObj[dKey] = payload[dKey]\n    // })\n    state.resize = Math.random()\n  },\n  [types.UPDATE_CHANGE_SUB_PROJ_OPACITY] (state, payload) {\n    let newObj = {}\n    Object.keys(payload).forEach(dKey => {\n      newObj[dKey] = payload[dKey]\n    })\n    state.changeSubProjOpacity = newObj\n  },\n};\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutations.js","/*\n* @Author: wakouboy\n* @Date:   2018-08-08 23:32:06\n* @Last Modified by:   wakouboy\n* @Last Modified time: 2019-01-16 13:52:43\n*/\nimport types from './mutation-type.js';\n\nexport default {\n  updateLoadingPage ({commit}, payload) {\n    commit(types.UPDATE_LOADING_PAGE, payload)\n  },\n  updateUpdateSubList ({commit}, payload) {\n    commit(types.UPDATE_UPDATE_SUB_LIST, payload)\n  },\n  updateUpdateMapByDim ({commit}, payload) {\n    commit(types.UPDATE_UPDATE_MAP_BY_DIM, payload)\n  },\n  updateUpdateMapBySub ({commit}, payload) {\n    commit(types.UPDATE_UPDATE_MAP_BY_SUB, payload)\n  },\n  updateChangeLevelByPanel ({commit}, payload) {\n    commit(types.UPDATE_CHANGE_LEVEL_BY_PANEL, payload)\n  },\n  updateChangeLevelByMap ({commit}, payload) {\n    commit(types.UPDATE_CHANGE_LEVEL_BY_MAP, payload)\n  },\n  updateChangeMode ({commit}, payload) {\n    commit(types.UPDATE_CHANGE_MODE, payload)\n  },\n  updateDrawProjection ({commit}, payload) {\n    commit(types.UPDATE_DRAW_PROJECTION, payload)\n  },\n  updateChangeProjInBrowseMode ({commit}, payload) {\n    commit(types.UPDATE_CHANGE_PROJ_IN_BROWSE_MODE, payload)\n  },\n  updateUpdateMap ({commit}, payload) {\n    commit(types.UPDATE_UPDATE_MAP, payload)\n  },\n  updateResize ({commit}, payload) {\n    commit(types.UPDATE_RESIZE, payload)\n  },\n  updateChangeSubProjOpacity ({commit}, payload) {\n    commit(types.UPDATE_CHANGE_SUB_PROJ_OPACITY, payload)\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions.js","/*\n* @Author: wakouboy\n* @Date:   2018-08-08 23:30:27\n* @Last Modified by:   wakouboy\n* @Last Modified time: 2018-08-08 23:33:11\n*/\nimport vue from 'vue';\nimport vuex from 'vuex';\nimport state from './state.js';\nimport getters from './getters.js';\nimport mutations from './mutations.js';\nimport actions from './actions.js';\nimport createLogger from 'vuex/dist/logger'; // \n\nvue.use(vuex);\n\nconst debug = process.env.NODE_ENV !== 'production'; // truefalse\n\nexport default new vuex.Store({\n    state,\n    getters,\n    mutations,\n    actions,\n    plugins: debug ? [createLogger()] : [] // vuex\n});\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport 'jquery'\n\nVue.config.productionTip = false\nimport api from './api/index.js'\nVue.prototype.$api = api\n\nvar buildCodes = false\nimport $ from 'jquery'\nwindow.$ = $\n\n// buildCodes = true\n\n{\n  window.CommunicateWithServer = function(type, paramsObj, url, callback) {\n    if (buildCodes) {\n      paramsObj = JSON.stringify(paramsObj)\n      $.ajax({\n        type: type,\n        url: url,\n        data: { params: paramsObj },\n        dataType: 'json',\n        success: function(data) {\n          callback(data)\n        },\n        error: function(err) {\n          callback(err)\n        }\n      })\n    } else {\n      let formData = new URLSearchParams()\n      formData.append('params', JSON.stringify(paramsObj))\n      if (type == 'get') {\n        api.get(\n          url,\n          formData,\n          data => {\n            callback(data)\n          },\n          error => {\n            callback(error)\n          }\n        )\n      } else if (type == 'post') {\n        api.post(\n          url,\n          formData,\n          data => {\n            callback(data)\n          },\n          error => {\n            callback(error)\n          }\n        )\n      }\n    }\n  }\n}\n\n// import Vuetify from 'vuetify'\n// import 'vuetify/dist/vuetify.min.css'\n// Vue.use(Vuetify)\n\nimport ElementUI from 'element-ui'\nimport 'element-ui/lib/theme-chalk/index.css'\nVue.use(ElementUI)\n\nimport 'font-awesome.css'\n// import { library } from '@fortawesome/fontawesome-svg-core'\n// import { faUpload, faWindowRestore } from '@fortawesome/free-solid-svg-icons'\n// import { FontAwesomeIcon } from '@fortawesome/vue-fontawesome'\n\n// library.add(faUpload)\n// Vue.component('font-awesome-icon', FontAwesomeIcon)\n\nimport BootstrapVue from 'bootstrap-vue'\nVue.use(BootstrapVue)\nimport 'bootstrap/dist/css/bootstrap.css'\nimport 'bootstrap-vue/dist/bootstrap-vue.css'\n\nVue.config.productionTip = false\nimport * as d3 from 'd3'\nwindow.d3 = d3\nimport * as hexbin from 'd3-hexbin'\nObject.assign(d3, hexbin)\n\nwindow.Data = null\n\nwindow.ratio2percent = function(ratio) {\n  return ratio * 100 + '%'\n}\nwindow.ratio2px = function(ratio, size) {\n  return ratio * size\n}\n\nwindow.toPX = require('to-px')\n\n// Remove item from array by value\nArray.prototype.remove = function() {\n  let what,\n    a = arguments,\n    L = a.length,\n    ax\n  while (L && this.length) {\n    what = a[--L]\n    while ((ax = this.indexOf(what)) !== -1) {\n      this.splice(ax, 1)\n    }\n  }\n  return this\n}\n\nwindow.getTransformation = function (transform) {\n  // Create a dummy g for calculation purposes only. This will never\n  // be appended to the DOM and will be discarded once this function \n  // returns.\n  var g = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\")\n  \n  // Set the transform attribute to the provided string value.\n  g.setAttributeNS(null, \"transform\", transform)\n  \n  // consolidate the SVGTransformList containing all transformations\n  // to a single SVGTransform of type SVG_TRANSFORM_MATRIX and get\n  // its SVGMatrix. \n  var matrix = g.transform.baseVal.consolidate().matrix\n  \n  // Below calculations are taken and adapted from the private function\n  // transform/decompose.js of D3's module d3-interpolate.\n  var {a, b, c, d, e, f} = matrix // ES6, if this doesn't work, use below assignment\n  // var a=matrix.a, b=matrix.b, c=matrix.c, d=matrix.d, e=matrix.e, f=matrix.f; // ES5\n  var scaleX, scaleY, skewX\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * 180 / Math.PI,\n    skewX: Math.atan(skewX) * 180 / Math.PI,\n    scaleX: scaleX,\n    scaleY: scaleY\n  }\n}\n\nwindow.setProjPointsOpacity = function (digit, opacity = 1) {\n  d3.selectAll('.projPoints')\n    .filter(function () {\n      return d3.select(this).attr('digit') === String(digit)\n    })\n    .style('fill-opacity', opacity)\n  d3.selectAll('.projPoints')\n    .filter(function () {\n      return d3.select(this).attr('digit') !== String(digit)\n    })\n    .style('fill-opacity', 0.01)\n}\nwindow.resetProjPointsOpacity = function () {\n  d3.selectAll('.projPoints').each(function () {\n    const opacity = Number(d3.select(this).attr('opc'))\n    d3.select(this)\n      .style('fill-opacity', opacity)\n  })\n}\n\nimport store from './store/index.js'\nnew Vue({\n  el: '#app',\n  store,\n  router,\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","<template>\n  <div id=\"subMap\">\n    <div id=\"map\"></div>\n    <MapPanel></MapPanel>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport MapLayout from './libs/mapLayout'\nimport Visibility from './libs/visibility'\nimport SubGlyph from './libs/subGlyph'\nimport Route from './libs/route'\nimport Graph from './libs/graph'\n\nimport MapPanel from '@/components/SubMap/panel/MapPanel'\n\nconst numeric = require('numeric')\nexport default {\n  name: 'SubMap',\n  components: { MapPanel },\n  data() {\n    return {\n      seaRouteDuration: 2500\n    }\n  },\n  mounted() {},\n  computed: {\n    ...mapGetters([\n      'loadedData',\n      'updateMapByDim',\n      'updateMapBySub',\n      'changeLevelByPanel',\n      'changeMode',\n      'resize'\n    ])\n  },\n  watch: {\n    loadedData: function (val, oldVal) {\n      this.updateParams()\n      if (oldVal != null) {\n        this.redraw()\n      } else {\n        this.init()\n        this.draw()\n      }\n    },\n    resize: function (newVal) {\n      this.updateParams()\n      this.redraw()\n    },\n    updateMapByDim: function (newVal) {\n      this.interactions.filterByDims(newVal.dimStates)\n    },\n    updateMapBySub: function (newVal) {\n      switch (newVal.type) {\n        case 'hover':\n          this.interactions.filterByIDs(newVal.subIds)\n          break\n        case 'click':\n          this.interactions.pinByIDs(newVal.subIds)\n          break\n      }\n    },\n    changeLevelByPanel: function (newVal) {\n      let container = this.d3el.select('.SubMapTiling')\n      let prevTranslate\n      if (container.attr('transform') !== null) {\n        prevTranslate = this.getTranslate(container).map(d => -d)\n      } else {\n        prevTranslate = [0, 0]\n      }\n      this.visible.toLevel(\n        container.node(),\n        prevTranslate,\n        newVal.level,\n        this.transition.long\n      )\n    },\n    changeMode: function (newVal, oldVal) {\n      if (oldVal.mode !== undefined) {\n        this.prevMode = oldVal.mode\n      }\n      switch (newVal.mode) {\n        case 'browse':\n          // mouseout operation\n          this.resetSubList()\n          this.updateUpdateSubList({\n            path2This: null,\n            type: 'unclick'\n          })\n          if (this.prevMode === 'groundTravel') {\n            this.updateUpdateSubList({\n              path2This: undefined,\n              subIds: [...Array(Data.subs.length).keys()],\n              type: 'changeShownItems'\n            })\n            this.resetCapsOpacity()\n            this.unselectRoute()\n            this.resetTravelRouteSubs()\n          }\n          this.d3el.select('.SubMapTiling').selectAll('.travelIcon').remove()\n          let grids = this.d3el.select('.SubMapTiling').selectAll('.SubMapGrids')\n          grids.classed('travelUnselected', false)\n            .classed('gridClicked', false)\n            .classed('gridUnhovered', false)\n            .attr('cursor', 'pointer')\n            .attr('opacity', 1)\n            .on('mouseover', null)\n            .on('mouseout', null)\n            .on('click', null)\n          this.recoverElemOrder()\n          this.bindSubMapClustersEvent()\n          break\n        case 'airTravel':\n          if (this.prevMode === 'groundTravel') {\n            this.resetCapsOpacity()\n            this.resetTravelRouteSubs()\n            this.updateUpdateSubList({\n              path2This: undefined,\n              subIds: [...Array(Data.subs.length).keys()],\n              type: 'changeShownItems'\n            })\n            this.unselectRoute()\n            this.d3el.select('.SubMapTiling').selectAll('.travelIcon').remove()\n            let grids = this.d3el.select('.SubMapTiling').selectAll('.SubMapGrids')\n            grids.classed('travelUnselected', false)\n              .classed('gridClicked', false)\n              .attr('cursor', 'pointer')\n              .attr('opacity', 1)\n              .on('mouseover', null)\n              .on('mouseout', null)\n              .on('click', null)\n          }\n          this.resetSubList()\n          this.airTravelMode()\n          break\n        case 'groundTravel':\n          if (this.prevMode === 'airTravel') {\n            let grids = this.d3el.select('.SubMapTiling').selectAll('.SubMapGrids')\n            grids.classed('gridUnhovered', false)\n              .classed('gridClicked', false)\n              .on('mouseover', null)\n              .on('mouseout', null)\n              .on('click', null)\n            this.d3el.select('.SubMapTiling').selectAll('.travelIcon').remove()\n          }\n          this.resetSubList()\n          this.groundTravelMode()\n          break\n      }\n    }\n  },\n  methods: {\n    ...mapActions([\n      'updateLoadingPage',\n      'updateUpdateMap',\n      'updateUpdateSubList',\n      'updateChangeLevelByMap',\n      'updateDrawProjection',\n      'updateChangeProjInBrowseMode',\n      'updateChangeSubProjOpacity'\n    ]),\n    // showLoadingPage: function () {\n    //   this.updateLoadingPage(true)\n    //   console.log('updateLoadingPage', this.$store.state.loadingPage)\n    // },\n    updateParams: function () {\n      this.width = this.$el.offsetWidth\n      this.height = this.$el.offsetHeight\n\n      this.d3el = d3.select(this.$el).select('#map')\n\n      this.mapWidth = parseFloat(this.d3el.style('width'))\n      this.mapHeight = parseFloat(this.d3el.style('height'))\n\n      this.fCodes = filterCodes(Data.subs)\n      this.fMatrix = filterMatrix(Data.subs, this.fCodes.dataIndeces)\n      this.overallClusters = {\n        clusters: null,\n        level: null,\n        paths: null,\n        aggregate: null\n      },\n      this.currClusters = {\n        clusters: null,\n        level: null,\n        paths: null,\n        aggregate: null\n      }\n      this.dimCounts = null\n      this.showSize = Math.min(this.mapWidth, this.mapHeight)\n      this.canvasSize = 340\n      this.scales = {\n        x: d3.scaleLinear()\n          .domain([0, 1])\n          .range([-this.canvasSize * 0.5, this.canvasSize * 0.5]),\n        y: d3.scaleLinear()\n          .domain([0, 1])\n          .range([-this.canvasSize * 0.5, this.canvasSize * 0.5])\n      }\n      this.transition = {\n        duration: 500,\n        long: 2000,\n        short: 400,\n        interval: 50\n      }\n      this.pattern = true\n      this.interactions = {\n        ready: false,\n        hoveredID: null\n      }\n      this.clsColorReady = false\n      this.ovlDataWeights = null\n      this.sizeTolr = Number.EPSILON * 1000 * (this.showSize / this.canvasSize)\n      this.snapshotPar = {\n        ringR: null,\n        ringRRatio: 0.5,\n        marginRatio: 0.01,\n        sshotR: null,\n        sshotRRatio: 0.05,\n        outR: null,\n        anchorR: 4,\n        angInterval: 2\n      }\n\n      this.color = {\n        h: d3.scaleLinear().domain([0, 1]).range([0, 360]),\n        c: d3.scaleLinear().domain([0, 1]).range([30, 80]),\n        l: d3.scaleLinear().domain([0, 1]).range([150 * 0.3, 150 * 0.6]) // d3 l range[0, 150]\n      }\n\n      this.travelIcon = 'M513.127753 0C298.854626 0 125.180617 171.418502 125.180617 381.180617c0 164.651982 239.0837 484.933921 340.581498 620.264317 11.277533 13.53304 27.066079 22.555066 45.110132 22.555066s36.088106-9.022026 47.365638-22.555066c101.497797-135.330396 340.581498-455.612335 340.581498-620.264317C901.07489 171.418502 725.145374 0 513.127753 0z m0 518.76652c-90.220264 0-164.651982-72.176211-164.651982-162.396476s74.431718-162.396476 164.651982-162.396476 164.651982 72.176211 164.651983 162.396476-74.431718 162.396476-164.651983 162.396476z'\n      this.travelIconScale = Data.file === 'Iris' ? 0.02: 0.008\n\n      this.currTime = 0\n      this.travelIconPos = null\n      this.isTravelIconDragging = false\n\n      this.subMapClustersEvent = null\n      this.prevMode = 'browse'\n\n      function filterCodes (codes) {\n        let dimIndices = new Array(codes[0].length)\n        for (let i = 0; i < dimIndices.length; i++) {\n          dimIndices[i] = i\n        }\n        return {\n          codes: codes,\n          dataIndeces: null,\n          dimIndeces: dimIndices\n        }\n      }\n\n      function filterMatrix (codeBook, indices) {\n        const diffMat = getDiffMat()\n        const distExt = Math.max(...Data.subDistMat.map(row => Math.max(...row)))\n        return {\n          neighbors: Data.subKNN,\n          distMat: Data.subDistMat,\n          diffMat: diffMat,\n          distExt: distExt,\n          colors: Data.colors\n        }\n      }\n\n      function getDiffMat () {\n        let mat = new Array(Data.subs.length)\n        for (let i = 0; i < mat.length; i++) {\n          mat[i] = new Array(Data.subs.length)\n        }\n\n        for (let i = 0; i < mat.length - 1; i++) {\n          for (let j = i + 1; j < mat[i].length; j++) {\n            const subI = Data.subs[i]\n            const subJ = Data.subs[j]\n            let diff = 0\n            for (let k = 0; k < subI.length; k++) {\n              if (subI[k] !== subJ[k]) {\n                diff++\n              }\n            }\n            mat[i][j] = diff\n          }\n        }\n        return mat\n      }\n    },\n    init: function () {\n      this.svg = this.d3el\n        .append('svg')\n        .attr('width', this.mapWidth)\n        .attr('height', this.mapHeight)\n        .append('g')\n        .attr('id', 'mapSvg')\n        .attr('transform', `translate(${this.mapWidth / 2}, ${this.mapHeight / 2})scale(${this.showSize / this.canvasSize})`)\n    },\n    redraw: function () {\n      this.clear()\n      this.init()\n      this.draw()\n    },\n    clear: function () {\n      // this.svg.selectAll('*').remove()\n      d3.select(this.$el).select('#map').selectAll('*').remove()\n    },\n    draw: function () {\n      let df1 = $.Deferred()\n      let df2 = $.Deferred()\n      this.initInteractions()\n      this.clustering(df1)\n      $.when(df1).done(() => {\n        this.showTiling(df2)\n      })\n      $.when(df2).done(() => {\n        // this.updateLoadingPage(false)\n        setTimeout(() => {\n          d3.select('#loading-page').style('display', 'none')\n        }, 1000)\n        // d3.select('#loading-page').style('display', 'none')\n      })\n    },\n    getTranslate: function (g) {\n      let transform = g.attr('transform')\n      let leftBracketPos = transform.indexOf('(')\n      let commaPos = transform.indexOf(',')\n      let rightBracketPos = transform.indexOf(')')\n      return [\n        parseFloat(transform.substring(leftBracketPos + 1, commaPos)),\n        parseFloat(transform.substring(commaPos + 1, rightBracketPos))\n      ]\n    },\n    initInteractions: function() {\n      let thisView = this\n      let d3el = this.d3el\n      let thisCollection = Data\n      let interactions = this.interactions\n      let transDuration = this.transition.duration\n      let filterCodes = this.fCodes\n      let overallContainer = thisView.d3el\n      if (!interactions.ready) {\n        interactions.ready = true\n        interactions.duration = transDuration\n        interactions.container = thisView.d3el\n        interactions.clickTimer = null\n        interactions.checkRelation = function(\n          path2A,\n          path2B,\n          relationType\n        ) {\n          let lengthCondition = false\n          let endOFunction = false\n          let confirmed = true\n          let lengthOParents\n          switch (relationType) {\n            case 'fellows': // same level\n              confirmed = lengthCondition = path2B.length === path2A.length\n              endOFunction = true\n              break\n            case 'brothers': // same level, same parent\n              lengthCondition = path2B.length === path2A.length\n              lengthOParents = path2A.length - 1\n              break\n            case 'descendants': // the whole subtree\n              lengthCondition = path2B.length > path2A.length // check if A is a parent of B\n              lengthOParents = path2A.length\n              break\n          }\n          if (endOFunction) {\n            return confirmed\n          } // 'fellow' examination ended\n          if (!lengthCondition) {\n            return false\n          }\n          for (let i = 0; i < lengthOParents; i++) {\n            if (path2B[i] !== path2A[i]) {\n              confirmed = false\n              break\n            }\n          } // 'brothers' and 'descendants' must have the same parents\n          if (relationType === 'brothers') {\n            confirmed =\n              confirmed && path2B[lengthOParents] !== path2A[lengthOParents]\n          } // 'brothers' must not be the same node\n          return confirmed\n        } // end of interactions.checkRelation\n        interactions.standOut = function(thisContainer, clusterID) {\n          // highlight some cluster\n          d3.select(thisContainer)\n            .selectAll('line')\n            .classed('chosen', true)\n            .interrupt()\n            .transition()\n            .duration(transDuration)\n            .attr('stroke', '#000')\n            .attr('stroke-opacity', 1.0)\n          let d3Selection = overallContainer\n            .selectAll('.SubMapSShot')\n            .filter(function() {\n              return d3.select(this).attr('clsID') === clusterID\n            })\n          bvShowOnTop(d3Selection[0], $(d3Selection[0]).parent()[0])\n        } // end of interactions.standOut\n        interactions.fadeOutAll = function() {\n          overallContainer\n            .selectAll('.SubMapClusters path')\n            .interrupt()\n            .transition()\n            .duration(transDuration)\n            .attr('fill-opacity', 0.0)\n          overallContainer\n            .selectAll('.SubMapClusters line')\n            .classed('chosen', false)\n            .interrupt()\n            .transition()\n            .duration(transDuration)\n            .attr('stroke', '#666')\n            .attr('stroke-opacity', 0.8)\n        } // end of interactions.fadeOutAll\n        interactions.fadeOutOthers = function(className) {\n          // Fade out other clusters and outliers\n          let fadedSelection = overallContainer\n            .selectAll('.SubMapClusters')\n            .filter(function(d, i) {\n              return className !== d3.select(this).attr('class')\n            })\n          fadedSelection\n            .selectAll('path')\n            .interrupt()\n            .transition()\n            .duration(transDuration)\n            .attr('fill-opacity', 0.8)\n          fadedSelection\n            .selectAll('line')\n            .interrupt()\n            .transition()\n            .duration(transDuration)\n            .attr('stroke-opacity', 0)\n        } // end of interactions.fadeOutOthers\n        interactions.saveBrothers = function(path2Cluster) {\n          let checkRelationFunction = this.checkRelation\n          let brotherSelection = overallContainer\n            .selectAll('.SubMapClusters')\n            .filter(function(elemOThis, orderOThis) {\n              let path2This = d3.select(this).attr('clsID')\n              if (path2This != null) {\n                path2This = path2This.split('_')\n              }\n              if (d3.select(this).classed('Outliers')) {\n                let path2Parent = path2Cluster.slice(\n                  0,\n                  path2Cluster.length - 1\n                )\n                return checkRelationFunction(\n                  path2Parent,\n                  path2This,\n                  'descendants'\n                )\n              } else {\n                return checkRelationFunction(\n                  path2Cluster,\n                  path2This,\n                  'brothers'\n                )\n              }\n            })\n          brotherSelection\n            .selectAll('path')\n            .interrupt()\n            .transition()\n            .duration(transDuration)\n            .attr('fill-opacity', 0.1)\n          brotherSelection\n            .selectAll('line')\n            .interrupt()\n            .transition()\n            .duration(transDuration)\n            .attr('stroke', '#666')\n            .attr('stroke-opacity', 1.0)\n        } // end of interactions.saveBrothers\n        interactions.mouseOver = function(thisCluster, isOutlier) {\n          if (!isOutlier) {\n            bvShowOnTop(thisCluster, '.SubMapTiling')\n            let path2This = d3.select(thisCluster).attr('clsID')\n            if (path2This != null && path2This.length > 0) {\n              path2This = path2This.split('_')\n              let idsOThis = this.filterByIDs(\n                thisView.getClsByPath.call(thisView, path2This)\n              )\n              let dataWeightsOThis = thisCollection.subtree.findByIndex(path2This).data.dataWeights\n              let overallDataWeights = (thisView.ovlDataWeights = thisCollection.subtree.data.dataWeights)\n              dataWeightsOThis = numeric.sub(overallDataWeights, dataWeightsOThis)\n              this.informOthers(idsOThis, dataWeightsOThis, false)\n              // thisView.informOthers(\n              //   'SubMapCollectionView__Highlighting',\n              //   path2This\n              // )\n              thisView.updateUpdateSubList({\n                path2This: path2This,\n                type: 'mouseover'\n              })\n            }\n            this.standOut(thisCluster, path2This)\n          }\n        } // end of interactions.mouseOver\n        interactions.mouseOut = function(isOutlier) {\n          if (!isOutlier) {\n            this.fadeOutAll()\n            let ids = this.filterByIDs()\n            this.informOthers(ids, null, false)\n            // thisView.informOthers(\n            //   'SubMapCollectionView__Highlighting',\n            //   null\n            // )\n            thisView.updateUpdateSubList({\n              path2This: null,\n              type: 'mouseout'\n            })\n            this.filterByIDs()\n            this.informOthers()\n          }\n        } // end of interactions.mouseOut\n        interactions.informOthers = function(\n          ids,\n          dataWeights,\n          isTranslate = true,\n          isPin = false\n        ) {\n          let leafNames\n          if (ids != null) {\n            if (isTranslate) {\n              leafNames = thisView.getClsByPath(ids)\n            } else {\n              leafNames = ids\n            }\n          }\n          let message\n          if (isPin) {\n            if (isTranslate === false) {\n              this.projectByIDs(leafNames)\n            } else {\n              this.projectByCluster(ids)\n            }\n            message = 'SubMapCollectionView__Pin'\n          } else {\n            message = 'SubMapCollectionView__Choose'\n          }\n          // thisView.informOthers(message, {\n          //   attr: 'index',\n          //   IDs: leafNames,\n          //   weights: dataWeights,\n          //   inform: false\n          // })\n        } // end of interactions.informOthers\n        interactions.pinning = function(thisContainer, isBlock = true) {\n          let targetSelection = d3.select(thisContainer)\n          let pinned = targetSelection.classed('pinned')\n          let clsID\n          let leafNames\n          d3el.selectAll('.SubMapClusters.pinned').classed('pinned', false)\n          if (!pinned) {\n            if (isBlock) {\n              clsID = targetSelection.attr('clsID').split('_')\n              leafNames = thisView.getClsByPath.call(thisView, clsID)\n              leafNames = thisView.SubGlyph.pickGlyphsByIDs(d3el, leafNames, 'index')\n              targetSelection.classed('pinned', true)\n              // thisView.updateUpdateSubList({\n              //   path2This: clsID,\n              //   type: 'click'\n              // })\n              thisView.updateUpdateSubList({\n                path2This: clsID,\n                subIds: undefined,\n                type: 'changeShownItems'\n              })\n              thisView.updateChangeProjInBrowseMode({\n                parentClsID: clsID\n              })\n            } else {\n              leafNames = [targetSelection.attr('index')]\n              leafNames = thisView.SubGlyph.pickGlyphsByIDs(d3el, leafNames, 'index')\n            }\n          } else {\n            thisView.SubGlyph.pickGlyphsByIDs(d3el, null, 'index')\n            // thisView.updateUpdateSubList({\n            //   path2This: null,\n            //   type: 'unclick'\n            // })\n            // thisView.updateUpdateSubList({\n            //   path2This: undefined,\n            //   subIds: undefined,\n            //   type: 'changeShownItems'\n            // })\n            thisView.resetSubList()\n            thisView.updateUpdateSubList({\n              path2This: null,\n              type: 'unclick'\n            })\n            thisView.updateUpdateSubList({\n              path2This: undefined,\n              subIds: [...Array(Data.subs.length).keys()],\n              type: 'changeShownItems'\n            })\n            thisView.updateChangeProjInBrowseMode({\n              parentClsID: null\n            })\n            // targetSelection.classed(\"pinned\", false);\n          }\n          if (isBlock === true) {\n            this.informOthers(clsID, null, true, true)\n          } else {\n            this.informOthers(leafNames, null, false, true)\n          }\n        }\n        // end of interactions.pinning\n        interactions.filterByDims = function(filterSettings) {\n          let returnedData = {\n            indeces: thisView.SubGlyph.filterGlyphsByDims(\n              d3el,\n              filterSettings,\n              'index',\n              null,\n              filterCodes.codes\n            ),\n            illegal:\n              filterSettings.filter(d => {\n                return d !== 0\n              }).length < 2\n          }\n          // thisCollection.trigger('Transmission', {\n          //   type: 'trans',\n          //   message: 'SubMapCollectionView__Filtering',\n          //   data: returnedData\n          // })\n          let indeces = returnedData.indeces\n          if (indeces.length == filterCodes.codes.length) {\n            interactions.projectByIDs(null)\n          } else {\n            interactions.projectByIDs(returnedData.indeces)\n          }\n        } // end of interactions.filterByDims\n        interactions.filterByIDs = function(leafNames) {\n          return thisView.SubGlyph.filterGlyphsByIDs(d3el, leafNames, 'index')\n        } // end of interactions.filterByIDs\n        interactions.pinByIDs = function(leafNames) {\n          d3el.selectAll('.SubMapClusters.pinned').classed('pinned', false)\n          thisView.SubGlyph.pickGlyphsByIDs(d3el, leafNames)\n          this.projectByIDs(leafNames)\n        } // end of interactions.pinByIDs\n        interactions.projectByIDs = function(leafNames) {\n          // Case 1:   the default projection\n          if (leafNames == null || leafNames.length === 0) {\n            // thisCollection.trigger('Transmission', {\n            //   type: 'trans',\n            //   message: 'SubMapCollectionView__DefaultProjection',\n            //   data: null\n            // })\n          } else {\n            // let codeBook = thisCollection.subIndex\n            let codeBook = thisCollection.subs\n            // Case 2:   an individual subspace, show it\n            if (leafNames.length === 1) {\n              let codesOTarget = codeBook[leafNames[0]]\n              // thisCollection.trigger('Transmission', {\n              //   type: 'trans',\n              //   message: 'SubMapCollectionView__ShowProjection',\n              //   data: this.fixCode(codesOTarget)\n              // })\n            } else {\n              // Case 3:   multiple subspaces, hide it\n              // thisCollection.trigger('Transmission', {\n              //   type: 'trans',\n              //   message: 'SubMapCollectionView__HideProjection',\n              //   data: true\n              // })\n            }\n          }\n        } // interactions.projectByIDs\n        interactions.projectByCluster = function(cid) {\n          // thisCollection.trigger('Transmission', {\n          //   type: 'trans',\n          //   message: 'SubMapCollectionView__ShowCluster',\n          //   data: cid\n          // })\n        } // interactions.projectByCluster\n        interactions.fixCode = function(targetCodes) {\n          let dimCover = thisView.dimCover\n          let dimLength = dimCover.length\n          let code = new Array(dimLength)\n          let count = 0\n          for (let i = 0; i < dimLength; i++) {\n            if (dimCover[i] >= 0) {\n              code[i] = dimCover[i]\n            } else {\n              code[i] = targetCodes[count]\n              count++\n            }\n          }\n          return code\n        } // end of interactions.fixCode\n        // interactions.zoomByDims = function(targetData) {\n        //   let subZoom = zooming => {\n        //     let free = 0\n        //     let fixed = 0\n        //     for (let i = 0; i < thisView.dimCover.length; i++) {\n        //       if (thisView.dimCover[i] < 0) {\n        //         free++\n        //       } else {\n        //         fixed++\n        //       }\n        //     }\n        //     if ((zooming && free < 3) || (!thisView.zoomed && !zooming)) {\n        //     } else {\n        //       if (!zooming || (zooming && free < thisView.freeDim)) {\n        //         thisView.zoomed = zooming\n        //         thisView.freeDim = zooming ? free : thisView.dimCover.length\n        //         thisView.pipeline()\n        //       }\n        //     }\n        //   }\n        //   let dims = targetData.dims\n        //   let zooming = targetData.zoomin\n        //   if (dims != null) {\n        //     thisView.dimCover = dims\n        //     subZoom(zooming)\n        //   }\n        // } // end of interactions.zoomByDims\n      }\n    },\n    getClsByPath: function(path2This, getIndices = true) {\n      let dataIndices = this.fCodes.dataIndeces\n      let levelOThis = path2This.length - 1\n      let pathLevel = this.currClusters.paths[levelOThis]\n      let prevCode = path2This.slice(0, path2This.length - 1).join('_')\n      let IDOThis = path2This[path2This.length - 1]\n      let returnedIDs = pathLevel.filter(path2Cluster => {\n        if (path2Cluster.outlier) {\n          return false\n        }\n        let code = path2Cluster.previous.join('_')\n        return code === prevCode\n      })[0].ids[IDOThis]\n      if (getIndices && dataIndices != null) {\n        let treturnedIDs = new Array(returnedIDs.length)\n        for (let i = 0; i < returnedIDs.length; i++) {\n          treturnedIDs[i] = dataIndices[returnedIDs[i]] + ''\n        }\n        returnedIDs = treturnedIDs\n      } else {\n        for (let i = 0; i < returnedIDs.length; i++) {\n          returnedIDs[i] = returnedIDs[i] + ''\n        }\n      }\n      return returnedIDs\n    },\n    clustering: function (df) {\n      const self = this\n      if (this.overallClusters.clusters == null) {\n        storeCluster()\n        this.overallClusters = this.currClusters\n      } else {\n        this.currClusters = this.overallClusters\n      }\n\n      function storeCluster () {\n        self.currClusters.clusters = Data.subHierClusters\n        self.currClusters.level = getArrDepth(self.currClusters.clusters) - 1\n\n        class clusterInfoObj {\n          constructor(v_prevObj, v_treePath, v_isOutlier = false, v_neighborPatterns, v_dimCounts) {\n            let neighborPatterns = new Map()\n            let prevPatterns = v_prevObj ? v_prevObj.patterns : null\n            let dimCounts = new Array(Data.dims.length).fill(0)\n            let prevDimCounts = v_prevObj ? v_prevObj.dimCounts : null\n            let treePath = []\n            this.dimCounts = v_dimCounts == null ? prevDimCounts || dimCounts : v_dimCounts\n            this.patterns = v_neighborPatterns == null ? prevPatterns || neighborPatterns : v_neighborPatterns\n            this.index = v_treePath == null ? treePath : v_treePath\n            this.outliers = v_isOutlier\n          }\n          combine (v_clusterInfoObj) {\n            this.dimCounts = numeric.add(this.dimCounts, v_clusterInfoObj.dimCounts)\n            this.patterns = combineMaps(this.patterns, v_clusterInfoObj.patterns, combineVals)\n\n            function combineMaps (map1, map2, combineFunc) {\n              let map = new Map()\n              const map1Arr = Array.from(map1.entries())\n              const map2Arr = Array.from(map2.entries())\n              let matchArr1 = new Array(map1Arr.length).fill(false)\n              let matchArr2 = new Array(map2Arr.length).fill(false)\n              for (let i = 0; i < map1Arr.length; i++) {\n                const key1 = map1Arr[i][0]\n                const val1 = map1Arr[i][1]\n                for (let j = 0; j < map2Arr.length; j++) {\n                  const key2 = map2Arr[j][0]\n                  const val2 = map2Arr[j][1]\n                  let newVal\n                  if (key1 == key2) {\n                    newVal = combineFunc(val1, val2)\n                    if (!map.has(key1)) {\n                      map.set(key1, newVal)\n                    } else {\n                      const origVal = map.get(key1)\n                      newVal = combineFunc(origVal, newVal)\n                      map.set(key1, newVal)\n                    }\n                    matchArr1[i] = true\n                    matchArr2[j] = true\n                  }\n                }\n              }\n              for (let i = 0; i < matchArr1.length; i++) {\n                if (!matchArr1[i]) {\n                  const key = map1Arr[i][0]\n                  const val = map1Arr[i][1]\n                  if (!map.has(key)) {\n                    map.set(key, val)\n                  } else {\n                    const origVal = map.get(key)\n                    const newVal = combineFunc(origVal, val)\n                    map.set(key, newVal)\n                  }\n                }\n              }\n              for (let i = 0; i < matchArr2.length; i++) {\n                if (!matchArr2[i]) {\n                  const key = map2Arr[i][0]\n                  const val = map2Arr[i][1]\n                  if (!map.has(key)) {\n                    map.set(key, val)\n                  } else {\n                    const origVal = map.get(key)\n                    const newVal = combineFunc(origVal, val)\n                    map.set(key, newVal)\n                  }\n                }\n              }\n              return map\n            }\n\n            function combineVals (i, j) {\n              return i + j\n            }\n          }\n        }\n        \n        aggregate()\n\n        function aggregate () {\n          // local dim weights of each subspace\n          let overallNeighborDims = new Array(Data.subs.length)\n          for (let i = 0; i < overallNeighborDims.length; i++) {\n            overallNeighborDims[i] = new Array(Data.dims.length).fill(0)\n          }\n          // shared dimensions in each pair of ngh subspaces\n          let maskMap = new Map()\n          maskMap.findPair = function (i, j) {\n            const key = i < j ? i + '_' + j : j + '_' + i\n            return this.get(key)\n          }\n          maskMap.setPair = function (i, j, mask) {\n            let key = i < j ? i + '_' + j : j + '_' + i\n            for (let k = 0; k < mask.length; k++) {\n              if (mask[k] == '1') {\n                overallNeighborDims[i][k]++\n                overallNeighborDims[j][k]++\n              }\n            }\n            return this.set(key, mask)\n          }\n          self.currClusters.aggregate = traverseTree(self.currClusters.clusters, subtreeFunc, leavesFunc)\n          overallNeighborDims.extent = {\n            min: Math.min(...overallNeighborDims.map(row => Math.min(...row))),\n            max: Math.max(...overallNeighborDims.map(row => Math.max(...row)))\n          }\n          self.neighborDims = overallNeighborDims\n          simplifyTree(self.currClusters.aggregate)\n          df.resolve()\n\n          function traverseTree (tree, subtreeFunc, leavesFunc) {\n            let res = traverseTreeLevel(tree, subtreeFunc, leavesFunc, [])\n            let resTree = res.subtree\n            resTree.supernode = subtreeFunc(res.subtree, [])\n            return resTree\n          }\n\n          function traverseTreeLevel (tree, subtreeFunc, leavesFunc, path) {\n            if (tree.length == null) {\n              return null\n            }\n            let newTree = []\n            let supernodes = []\n            let subLeaves = []\n            let leafIndices = []\n            let onlyLeaves = true\n            for (let i = 0; i < tree.length; i++) {\n              let subtree = tree[i]\n              if (subtree.length != null) {\n                let newPath = [...path, i]\n                let subRes = traverseTreeLevel(subtree, subtreeFunc, leavesFunc, newPath)\n                let newSubtree = subRes.subtree\n                newSubtree.supernode = subtreeFunc(newSubtree, newPath)\n                supernodes.push(newSubtree)\n                newTree.push(newSubtree)\n                onlyLeaves = false\n              } else {\n                subLeaves.push(subtree)\n                leafIndices.push(i)\n              }\n            }\n            let leafRes = leavesFunc(subLeaves, onlyLeaves, [...path, leafIndices])\n            subLeaves = leafRes.leafnode\n            subLeaves.supernode = leafRes.supernode\n            supernodes.push(leafRes.supernode)\n            newTree.push(subLeaves)\n            return {\n              subtree: newTree,\n              supernodes: supernodes\n            }\n          }\n\n          function subtreeFunc (subNodes, treePath) {\n            if (subNodes.length == 1) {\n              let clusterInfo = new clusterInfoObj(subNodes[0].supernode, treePath)\n              return clusterInfo\n            }\n            let clusterInfo = new clusterInfoObj(null, treePath)\n            if (subNodes.length == 0) {\n              return clusterInfo\n            }\n            for (let i = 0; i < subNodes.length; i++) {\n              clusterInfo.combine(subNodes[i].supernode)\n            }\n            return clusterInfo\n          }\n\n          function leavesFunc (leaves, onlyLeaves, treePath) {\n            let clusterInfo = new clusterInfoObj(null, treePath, !onlyLeaves)\n            let patternMap = clusterInfo.patterns\n            let dimCounts = clusterInfo.dimCounts\n            for (let i = 0; i < leaves.length; i++) {\n              let idx = leaves[i]\n              let neighbors = Data.subKNN[idx]\n              let subI = Data.subs[idx]\n              // collect dimension patterns (i.e. local dim weights)\n              for (let j = 0; j < neighbors.length; j++) {\n                let neighbor = neighbors[j]\n                let subJ = Data.subs[neighbor]\n                let dimExtent = maskMap.findPair(idx, neighbor)\n                let neighborDims\n                if (dimExtent == null) {\n                  neighborDims = new Array(Data.dims.length).fill(0)\n                  for (let k = 0; k < subI.length; k++) {\n                    if (subI[k] == subJ[k]) {\n                      neighborDims[k] = 1\n                    }\n                  }\n                  neighborDims = neighborDims.join('')\n                  maskMap.setPair(idx, neighbor, neighborDims)\n                } else {\n                  neighborDims = dimExtent\n                }\n                if (!patternMap.has(neighborDims)) {\n                  patternMap.set(neighborDims, 0)\n                }\n                patternMap.set(neighborDims, patternMap.get(neighborDims) + 1)\n              }\n              // collect dimension counts\n              for (let j = 0; j < subI.length; j++) {\n                if (subI[j] == 1) {\n                  dimCounts[j]++\n                }\n              }\n            }\n            return {\n              supernode: clusterInfo,\n              leafnode: leaves\n            }\n          }\n\n          function simplifyTree (tree) {\n            let res = new Array(self.neighborDims[0].length).fill(0)\n            for (let i = 0; i < tree.length; i++) {\n              let childRes = new Array(self.neighborDims[0].length).fill(0)\n              if (typeof tree[i][0] == 'object') {\n                childRes = simplifyTree(tree[i])\n              } else {\n                for (let j = 0; j < tree[i].length; j++) {\n                  childRes = numeric.add(childRes, overallNeighborDims[tree[i][j]])\n                }\n                tree[i].supernode.neighborDims = childRes\n              }\n              res = numeric.add(res, childRes)\n            }\n            tree.supernode.neighborDims = res\n            return res\n          }\n        }\n\n        function getArrDepth (arr) {\n          if (Array.isArray(arr)) {\n            return 1 + Math.max(...arr.map(t => getArrDepth(t)))\n          } else {\n            return 0\n          }\n        }\n      }\n    },\n    showTiling: function (df) {\n      const self = this\n      let map = new MapLayout(Data.subtree, Data.subDistMat, Data.subs, 2)\n      map.getMap()\n      this.map = map\n      this.updateUpdateMap({\n        map: map,\n        resize: true\n      })\n\n      const gridScales = this.scales\n      let centerPosition = [\n        (gridScales.x.range()[1] + gridScales.x.range()[0]) * 0.5,\n        (gridScales.y.range()[1] + gridScales.y.range()[0]) * 0.5\n      ]\n      let viewSize = [\n        gridScales.x.range()[1] - gridScales.x.range()[0],\n        gridScales.y.range()[1] - gridScales.y.range()[0]\n      ]\n      let df4Map = $.Deferred()\n      let df4Route = $.Deferred()\n      let df4Cls = $.Deferred()\n      let coordsRange = map.coordsRange\n      coordsRange = Math.max(coordsRange.x.max - coordsRange.x.min, coordsRange.y.max - coordsRange.y.min)\n      this.glyphSize = (viewSize[0] * map.cellRadius) / coordsRange\n      this.d3el\n        .select('.SubMapTiling')\n        .classed('SubMapTiling', false)\n        .classed('SubOldTiling', true)\n      this.visible = Visibility(\n        this,\n        centerPosition,\n        viewSize[0],\n        this.glyphSize,\n        this.currClusters.level,\n        Data.colors,\n        this.transition.duration,\n        this.updateChangeLevelByMap\n      )\n      // let container = this.visible.prepareContainer(this.d3el)\n      let container = this.visible.prepareContainer(this.svg)\n      container.append('rect')\n        .attr('class', 'SubMapTilingFrame')\n        .attr('x', -this.mapWidth / 2)\n        .attr('y', -this.mapHeight / 2)\n        .attr('width', this.mapWidth)\n        .attr('height', this.mapHeight)\n      this.renderMap(df4Map, container, map)\n      $.when(df4Map).done(() => {\n        this.showClusters(map, gridScales)\n        this.visible.update([0, 0], 1.0)\n        this.clsColorReady = true\n        this.updateClusterInfo()\n        df4Cls.resolve()\n      })\n      $.when(df4Cls).done(() => {\n        this.showRoutes(df4Route, map, gridScales)\n      })\n      $.when(df4Route).done(() => {\n        this.showCaps(map, gridScales)\n        this.addBorderToLeaves()\n        container.selectAll('.SubMapGrids')\n        .on('dblclick', function (d) {\n          if (d3.event.shiftKey) {\n            const index =  Number(d3.select(this).attr('index'))\n            let prevTranslate\n            if (container.attr('transform') !== null) {\n              prevTranslate = self.getTranslate(container).map(d => -d)\n            } else {\n              prevTranslate = [0, 0]\n            }\n            let level\n            let clsID\n            let centerCoords\n            let leafNames\n            let parentClsID\n            // islands\n            if (Data.subtree.leaves.indexOf(index) > -1) return\n            // provincial levelnational level\n            if (!container.select('.SubCls_0').classed('visible') && container.select('.SubCls0_0').classed('visible')) {\n              level = 0\n              clsID = Number(findIndex(index, Data.subHierClusters)[0])\n              centerCoords = self.currClusters.paths[0][0].paths[clsID].center\n              leafNames = null\n              parentClsID = []\n            } else if (!container.select('.SubCls0_0').classed('visible')) { // urban levelprovincial level\n              level = 1\n              const highlightedGridIndex = getHighlightedGridIndex()\n              clsID = findIndex(highlightedGridIndex, Data.subHierClusters).split(',').map(Number)\n              centerCoords = self.currClusters.paths[1][clsID[0]].paths[clsID[1]].center\n              parentClsID = [clsID[0]]\n              leafNames = self.getClsByPath.call(self, parentClsID.map(String))\n              container.selectAll('.SubMapClusters.pinned').classed('pinned', false)\n            }\n            self.visible.toLevel(\n              container.node(),\n              numeric.add(centerCoords.map(d => d * -1), prevTranslate),\n              level,\n              self.transition.long\n            )\n            self.updateChangeLevelByMap({ level: level })\n            self.SubGlyph.pickGlyphsByIDs(self.d3el, leafNames, 'index')\n            self.updateUpdateSubList({\n              path2This: parentClsID,\n              subIds: undefined,\n              type: 'changeShownItems'\n            })\n            self.updateChangeProjInBrowseMode({\n              parentClsID: parentClsID\n            })\n          }\n        })\n      \n      function findIndex (valueToSearch, theArray, currentIndex) {\n        if (currentIndex == undefined) currentIndex = ''\n        if (Array.isArray(theArray)) {\n          for (var i = 0; i < theArray.length; i++) {\n            if (Array.isArray(theArray[i])) {\n              let newIndex = findIndex(valueToSearch, theArray[i], currentIndex + i + ',')\n              if (newIndex) return newIndex\n            } else if (theArray[i] == valueToSearch) {\n              return currentIndex + i\n            }\n          }\n        } else if (theArray == valueToSearch) {\n          return currentIndex + i\n        }\n        return false\n      }\n        df.resolve()\n      })\n\n      function getHighlightedGridIndex () {\n        const highlightedGrids = container.selectAll('.SubMapGrids').filter(function() {\n          return d3.select(this).style('opacity') > 0.2\n        })\n        return Number(d3.select(highlightedGrids._groups[0][0]).attr('index'))\n      }\n\n      df.resolve()\n    },\n    renderMap: function (df, container, map) {\n      let dfOThis = $.Deferred()\n      // this.hideOldMap(dfOThis, map)\n      dfOThis.resolve(0)\n      $.when(dfOThis).done(transDuration => {\n        this.renderNewMap(container, map, transDuration)\n        df.resolve()\n      })\n    },\n    hideOldMap: function (df, map) {\n      let glyphSize = this.glyphSize\n      let gridScales = this.scales\n      let glyphColors = Data.colors\n      let longDuration = this.transition.long\n      let animationTime = this.visible.toLevel([0, 0], 0, longDuration)\n      let dfOThis = $.Deferred()\n      setTimeout(() => {\n        dfOThis.resolve()\n      }, animationTime)\n      $.when(dfOThis).done(() => {\n        let midDuration = 0\n        let endDuration = 0\n        df.resolve(midDuration)\n        // setTimeout(() => {\n        //   df.resolve(midDuration) // midDuration: 'transDuration' for renderNewMap\n        // }, endDuration * 0.8)\n      })\n    },\n    renderNewMap: function (container, map, transDuration) {\n      let self = this\n      let filterCodes = this.fCodes\n      let gridScales = this.scales\n      let glyphSize = this.glyphSize\n      let glyphColors = Data.colors\n      let leafNodes = Array.from(map.allLeaves.values())\n      let coordsRange = map.coordsRange\n      let aspectRatio = coordsRange.aspectRatio\n      if (aspectRatio > 1) {\n        let centerX = (coordsRange.x.min + coordsRange.x.max) / 2\n        let divX = (coordsRange.x.max - coordsRange.x.min) / 2\n        gridScales.x.domain([\n          centerX - divX * aspectRatio,\n          centerX + divX * aspectRatio\n        ])\n        gridScales.y.domain([coordsRange.y.min, coordsRange.y.max])\n      } else {\n        let centerY = (coordsRange.y.min + coordsRange.y.max) / 2\n        let divY = (coordsRange.y.max - coordsRange.y.min) / 2\n        gridScales.x.domain([coordsRange.x.min, coordsRange.x.max])\n        gridScales.y.domain([\n          centerY - divY / aspectRatio,\n          centerY + divY / aspectRatio\n        ])\n      }\n      this.SubGlyph = SubGlyph(\n        glyphSize,\n        glyphSize,\n        'cell',\n        'fan',\n        glyphColors\n      )\n      // Step 1:   render containers for the cells\n      console.log('leafNodes: ', leafNodes)\n      let thisContainer = container\n        .selectAll('.SubMapGrids')\n        .data(leafNodes)\n        .enter()\n        .append('g')\n        .attr('class', 'SubMapGrids')\n        .attr('index', cell => {\n          if (filterCodes.dataIndeces == null) {\n            return cell.ID\n          } else {\n            return filterCodes.dataIndeces[cell.ID]\n          }\n        })\n        .attr('gSize', glyphSize)\n        .classed('empty', cell => {\n          return cell.ID == null\n        })\n        .attr('position', cell => {\n          let centerCoords = cell.center.coordinates\n          return bScale(gridScales, [\n            centerCoords.x,\n            centerCoords.y\n          ]).join('_')\n        })\n        .attr('transform', cell => {\n          let centerCoords = cell.center.coordinates\n          return (\n            'translate(' +\n            bScale(gridScales, [centerCoords.x, centerCoords.y]) +\n            ')'\n          )\n        })\n      // '.SubMapTiling':   the top-level g container\n      this.d3el\n        .selectAll('.SubMapTiling')\n        .attr('opacity', 0)\n        .transition()\n        .duration(transDuration)\n        .attr('opacity', 1)\n      // Step 2:   prepare the cell parameters - colors and neighbors\n      let filterMatrix = this.fMatrix\n      let nghDistScale = d3.scaleLinear()\n        .domain([filterMatrix.distExt.min, filterMatrix.distExt.max])\n        .range([0, 0.8])\n      let dimWeights = this.neighborDims\n      let pattern = this.pattern\n      // cellFunction:   render function for each cell\n      let cellFunction = function (containerCell) {\n        let cell = d3.select(containerCell).data()[0]\n        let leafName = cell.ID // leafName\n        // Step 2-1:   get the color of the cell\n        let colorOCell = glyphColors[leafName] // color of this cell\n        colorOCell = [\n          ~~(255 * colorOCell[0]),\n          ~~(255 * colorOCell[1]),\n          ~~(255 * colorOCell[2])\n        ]\n        colorOCell = 'rgb(' + colorOCell + ')'\n        // colorOCell = [\n        //   self.color.h(colorOCell[0]),\n        //   self.color.c(colorOCell[1]),\n        //   self.color.l(colorOCell[2])\n        // ]\n        // colorOCell = d3.hcl(...colorOCell)\n        // Step 2-2:   prepare the neighbors\n        let neighbors = new Array(6)\n        let angleUnit = 60\n        for (let i = 0; i < 6; i++) {\n          neighbors[i] = {\n            angle: ((angleUnit * i) / 180) * Math.PI,\n            diff: null,\n            dist: null\n          }\n        }\n        // diffScale:   transform the code differences (by unit) into size\n        // in mapType 'diff':   needed by subglyph.js for constructing 'bridges'\n        neighbors.diffScale = d3.scaleLinear()\n          .domain([1, filterCodes.codes[0].Length])\n          .range([0, (glyphSize * Math.sqrt(3) * 2) / 3])\n\n        // Step 2-2:  still preparing the neighbors\n        for (let neighbor of cell.neighbors) {\n          let nghIntPos = neighbor[1]\n          let nghIndex = nghIntPos.join('_')\n          if (map.occupied.has(nghIndex)) {\n            // the neighbor cell is also a leaf\n            let nghLeafName = map.occupied.get(nghIndex)\n            let nghID = Math.round(neighbor[0] / angleUnit)\n            neighbors[nghID].dist = nghDistScale(\n              filterMatrix.distMat[leafName][nghLeafName]\n            )\n            neighbors[nghID].diff =\n              filterMatrix.diffMat[leafName][nghLeafName]\n          }\n        }\n        // end of Step 2-2\n        // Step 2-3:   prepare the dimension weights\n        let weights = dimWeights[leafName]\n        let parameters = [\n          d3.select(containerCell),\n          neighbors,\n          leafName,\n          filterCodes.codes[leafName],\n          colorOCell,\n          pattern,\n          weights,\n          dimWeights.extent\n        ]\n        if (leafName == null) {\n          emptyCellParameters.add(parameters)\n        } else {\n          cellParameters.add(parameters)\n        }\n      } // end of cellFunction\n      let emptyCellParameters = new Set()\n      let cellParameters = new Set()\n      thisContainer._groups.forEach(function(container) {\n        container.forEach(cellFunction) // end of containerRow.forEach\n      }) // end of thisContainer.forEach\n      // Step 3:   render the cells\n      let interactions = this.interactions\n      cellParameters.forEach(cellParameter => {\n        let cellContainer = this.SubGlyph.showGlyph(...cellParameter)\n        cellContainer.on('click', function(cell) {\n          if (cell.id == null) {\n            return\n          }\n          interactions.pinning(this, false)\n        })\n      }) // render non-empty cells\n    },\n    showClusters: function (map, scales) {\n      let clusterPaths = []\n      let levels = this.currClusters.level\n      if (this.overallClusters.paths != null) {\n        clusterPaths = this.currClusters.paths\n      } else {\n        let cluster = this.currClusters.clusters\n        for (let i = 0; i < levels; i++) {\n          clusterPaths.push([])\n        }\n        this.getContourTree(map, cluster, clusterPaths, 0, [], null)\n        this.currClusters.paths = clusterPaths\n      }\n      for (let i = clusterPaths.length; i > 0; i--) {\n        let clusterLevel = clusterPaths[i - 1]\n        for (let j = 0; j < clusterLevel.length; j++) {\n          let pathData = clusterLevel[j]\n          this.renderPaths(\n            pathData.paths,\n            'SubCls' + pathData.previous.join('_'),\n            pathData.previous,\n            pathData.outlier,\n            scales\n          )\n        }\n      }\n      this.updateClusterInfo()\n    },\n    getContourTree: function (map, clusterIndices, contourTree, currentLevel, previousPath, idOThis) {\n      let cluster = []\n      let outlier = []\n      let returnedCluster = []\n      for (let i = 0; i < clusterIndices.length; i++) {\n        if (clusterIndices[i].length != null) {\n          let simpleCluster\n          let previousID = previousPath.slice(0)\n          previousID.push(i)\n          simpleCluster = this.getContourTree(\n            map,\n            clusterIndices[i],\n            contourTree,\n            currentLevel + 1,\n            previousID,\n            i\n          )\n          cluster.push(simpleCluster)\n          returnedCluster.push(...simpleCluster)\n        } else {\n          returnedCluster.push(clusterIndices[i])\n          outlier.push(clusterIndices[i])\n        }\n      }\n      if (cluster.length > 0) {\n        let paths = map.getClusterContours(cluster)\n        contourTree[currentLevel].push({\n          previous: previousPath,\n          selfID: idOThis + '',\n          paths: paths,\n          ids: cluster,\n          outlier: false\n        })\n      }\n      return returnedCluster\n    },\n    renderPaths: function (clusterIndicesPaths, classNames, previousPath, isOutlier, scales) {\n      let interactions = this.interactions\n      let clusterLevel = previousPath.length\n      let self = this\n      let cluster = this.d3el\n        .select('.SubMapTiling')\n        .selectAll('.' + classNames)\n        .data(clusterIndicesPaths)\n        .enter()\n        .append('g')\n        .attr('class', (d, index) => {\n          return (\n            'SubMapClusters ' +\n            classNames +\n            '_' +\n            index +\n            (isOutlier ? ' Outliers' : '')\n          )\n        })\n        .attr('clsID', (d, index) => {\n          return [...previousPath, index].join('_')\n        })\n        .attr('fill-opacity', 0.0)\n        .on('mouseover', function(d, index) {\n          let clusterID = d3.select(this).attr('clsID')\n          if (interactions.hoveredID !== clusterID) {\n            interactions.hoveredID = clusterID\n            interactions.mouseOver(this, isOutlier)\n            self.updateChangeSubProjOpacity({\n              action: 'mouseover',\n              clsID: clusterID,\n              opacity: 0.2\n            })\n          }\n        })\n        .on('mouseout', (d, index) => {\n          interactions.hoveredID = null\n          interactions.mouseOut(isOutlier)\n          self.updateChangeSubProjOpacity({\n            action: 'mouseout',\n            clsID: null,\n            opacity: 1\n          })\n        })\n        .on('click', function(d, index) {\n          bDelay('clickPinning', 300, () => {\n            interactions.pinning(this)\n          })\n        })\n        // .on('dblclick', (d, index) => {\n        //   bClearDelay('clickPinning')\n        //   if (!isOutlier) {\n        //     this.visible.toLevel(\n        //       d.center,\n        //       d.clsLevel + 1,\n        //       this.transition.long\n        //     )\n        //   }\n        // })\n        .on('dblclick', function (d, index) {\n          bClearDelay('clickPinning')\n          if (isOutlier) return\n          const container = self.d3el.select('.SubMapTiling')\n          let prevTranslate\n          if (container.attr('transform') !== null) {\n            prevTranslate = self.getTranslate(container).map(d => -d)\n          } else {\n            prevTranslate = [0, 0]\n          }\n          let clsID = d3.select(this).attr('clsID').split('_')\n          if (d3.event.shiftKey) {\n            // \n            // .SubMapClusters\n            d3.event.preventDefault()\n            d3.event.stopPropagation()\n            clsID = clsID.slice(0, clsID.length - 1)\n            const centerCoords = self.currClusters.paths[0][0].paths[Number(clsID[0])].center\n            self.visible.toLevel(\n              this.parentNode,\n              numeric.add(centerCoords.map(d => d * -1), prevTranslate),\n              d.clsLevel - 1,\n              self.transition.long\n            )\n            self.updateChangeLevelByMap({\n              level: d.clsLevel - 1\n            })\n            self.SubGlyph.pickGlyphsByIDs(self.d3el, null, 'index')\n            clsID = []\n          } else {\n            self.updateChangeLevelByMap({\n              level: d.clsLevel + 1\n            })\n            self.visible.toLevel(\n              this.parentNode,\n              // d.center,\n              numeric.add(prevTranslate, d.center),\n              d.clsLevel + 1,\n              self.transition.long\n            )\n          }\n          self.updateUpdateSubList({\n            path2This: clsID,\n            subIds: undefined,\n            type: 'changeShownItems'\n          })\n          self.updateChangeProjInBrowseMode({\n            parentClsID: clsID\n          })\n        })\n      let renderFunction = function(edge, index) {\n        let startCoordinates = [\n          edge.start.coordinates.x,\n          edge.start.coordinates.y\n        ]\n        let endCoordinates = [\n          edge.end.coordinates.x,\n          edge.end.coordinates.y\n        ]\n        let start = bScale(scales, startCoordinates)\n        let end = bScale(scales, endCoordinates)\n        let line = [start, end].join('_')\n        d3.select(this)\n          .attr('pos', line)\n          .selectAll('line')\n          .data([edge])\n          .enter()\n          .append('line')\n          .attr('x1', start[0])\n          .attr('y1', start[1])\n          .attr('x2', end[0])\n          .attr('y2', end[1])\n          .attr('stroke', '#666')\n      }\n      cluster.call(clsContainers => {\n        clsContainers._groups[0].forEach(clsContainer => {\n          let clusterPaths = d3.select(clsContainer).data()[0]\n          let paths = []\n          let rangePath = []\n          let rangePts\n          let diameter = 0\n          // draw block paths\n          for (let i = 0; i < clusterPaths.paths.length; i++) {\n            let clusterPath = clusterPaths.paths[i]\n            let pathPoints = clusterPath.points\n            let startPoint = bScale(scales, [\n              pathPoints[0].coordinates.x,\n              pathPoints[0].coordinates.y\n            ])\n            let path = 'M' + startPoint\n            for (let j = 1; j < pathPoints.length; j++) {\n              let point = bScale(scales, [\n                pathPoints[j].coordinates.x,\n                pathPoints[j].coordinates.y\n              ])\n              path += ' L' + point\n              rangePath.push(point)\n            }\n            if (clusterPath.closed) {\n              path += 'L' + startPoint\n            }\n            paths.push(path)\n          }\n          for (let i = 0; i < rangePath.length - 1; i++) {\n            for (let j = i + 1; j < rangePath.length; j++) {\n              let distance = bGetDistance(rangePath[i], rangePath[j])\n              if (distance > diameter) {\n                diameter = distance\n                rangePts = [i, j]\n              }\n            }\n          }\n          for (let i = 0; i < rangePts.length; i++) {\n            rangePts[i] = rangePath[rangePts[i]]\n          }\n          clusterPaths.center = bGetMeanVector(rangePts, false)\n          clusterPaths.diameter = diameter\n          clusterPaths.clsLevel = clusterLevel\n          d3.select(clsContainer)\n            .selectAll('path')\n            .data(paths)\n            .enter()\n            .append('path')\n            .attr('d', p => {\n              return p\n            })\n          // draw edge lines\n          if (!d3.select(clsContainer).classed('Outliers')) {\n            d3.select(clsContainer)\n              .append('g')\n              .attr('class', 'SubClsPaths')\n              .selectAll('.SubClsPath')\n              .data(clusterPaths.lines)\n              .enter()\n              .append('g')\n              .attr('class', 'SubClsPath')\n              .each(renderFunction)\n          }\n        })\n      })\n    },\n    updateClusterInfo: function (v_init = true) {\n      if (!this.clsColorReady) {\n        return\n      }\n      if (v_init) {\n        let t_initClsProjections = () => {\n          let t_centers = new Array(),\n            t_aggr = this.currClusters.aggregate,\n            t_tree = Data.subtree,\n            t_findCol = v_clsIDs => {\n              let t_visibleList = this.currClusters.visible[\n                  v_clsIDs.length - 1\n                ],\n                t_clsID = v_clsIDs.join('_'),\n                t_visibleItem = t_visibleList.filter(v_visibleItem => {\n                  return v_visibleItem.clsID == t_clsID\n                })[0]\n              return t_visibleItem.avgCol\n            },\n            t_findWeight = v_clsIDs => {\n              let t_children = t_aggr\n              for (let i = 0; i < v_clsIDs.length; i++) {\n                t_children = t_children[v_clsIDs[i]]\n              }\n              // test here\n              /* let t_weights = t_children.supernode.nghDims */\n              let t_weights = t_children.supernode.dimensions\n              /* t_weights = numeric.div(t_weights, Math.max(...t_weights)) */\n              return t_weights\n            }\n          let t_collection = Data\n          this.d3el.selectAll('.SubMapClusters').each(function(t_d) {\n            let t_this = d3.select(this),\n              t_outliers = t_this.classed('Outliers')\n            if (t_outliers) {\n              return\n            }\n            let t_clsID = t_this.attr('clsID').split('_'),\n              t_subTree = t_collection.subtree.findByIndex(t_clsID),\n              t_weights = t_subTree.data.dataWeights,\n              t_ovlWeights =\n                this.ovlDataWeights == undefined\n                  ? t_collection.subtree.data.dataWeights\n                  : this.ovlDataWeights\n            t_weights = numeric.sub(t_weights, t_ovlWeights)\n            let t_cid = t_clsID.length - 1,\n              t_info = {\n                center: t_d.center,\n                clsID: t_clsID,\n                color: t_findCol(t_clsID),\n                count: t_tree.findByIndex(t_clsID).dict.length,\n                weights: t_findWeight(t_clsID),\n                data: t_weights\n              }\n            if (t_centers[t_cid] == undefined) {\n              t_centers[t_cid] = []\n            }\n            t_centers[t_cid].push(t_info)\n          })\n          // this.informOthers('SubMapCollectionView__InitClusters', t_centers)\n        }\n        t_initClsProjections()\n      } else {\n        let t_updateClsProjections = () => {\n          let t_centers = new Array(),\n            t_aggr = this.currClusters.aggregate,\n            t_tree = Data.subtree,\n            t_findVisible = v_clsIDs => {\n              let t_visibleList = this.currClusters.visible[\n                v_clsIDs.length - 1\n              ]\n              let t_clsID = v_clsIDs.join('_')\n              let t_visibleItem = t_visibleList.filter(v_visibleItem => {\n                return v_visibleItem.clsID == t_clsID\n              })[0]\n              return t_visibleItem.visible\n            }\n          this.d3el.selectAll('.SubMapClusters').each(function(t_d) {\n            let t_this = d3.select(this),\n              t_outliers = t_this.classed('Outliers')\n            if (t_outliers) {\n              return\n            }\n            let clsID = t_this.attr('clsID').split('_')\n            let cid = clsID.length - 1\n            let info = {\n              clsID: t_this.attr('clsID'),\n              visible: t_findVisible(clsID)\n            }\n            if (t_centers[cid] === undefined) {\n              t_centers[cid] = []\n            }\n            t_centers[cid].push(info)\n          })\n          // this.informOthers(\n          //   'SubMapCollectionView__UpdateClusters',\n          //   t_centers\n          // )\n        }\n        t_updateClsProjections()\n      }\n    },\n    showRoutes: function (df, map, scales) {\n      const self = this\n      const leafNodes = Array.from(map.allLeaves.values())\n      const url = `./../../../static/data/${Data.file}/route.json`\n      $.ajax({\n        url: url,\n        dataType: 'json',\n        error: function () {\n          console.log('route file load fail')\n          routeOperation(undefined)\n        },\n        success: function (data) {\n          console.log('route file load success')\n          routeOperation(data)\n        }\n      })\n\n      function routeOperation (data) {\n        const date1 = new Date()\n        self.Route = Route(leafNodes, scales, data)\n        self.Route.draw(self.d3el.select('.SubMapTiling'))\n        const date2 = new Date()\n        console.log('duration: ', (date2 - date1) / 1000)\n        console.log('Route: ', self.Route)\n        df.resolve()\n      }\n\n      // let leafNodes = Array.from(map.allLeaves.values())\n      // this.Route = Route(leafNodes, scales)\n      // console.log('Route: ', this.Route)\n      // this.Route.draw(this.d3el.select('.SubMapTiling'))\n    },\n    showCaps: function (map, scales) {\n      let showNationalMark = (vv_g, v_inR, v_outR, v_outStrokeWidth) => {\n        vv_g.append('circle')\n          .attr('cx', 0)\n          .attr('cy', 0)\n          .attr('r', v_outR)\n          .style('fill', '#fff')\n          .style('stroke', '#000')\n          .style('stroke-width', v_outStrokeWidth)\n        vv_g.append('circle')\n          .attr('cx', 0)\n          .attr('cy', 0)\n          .attr('r', v_inR)\n          .style('fill', '#000')\n      }\n      let showProvincialMark = (vv_g, vv_r, v_outStrokeWidth) => {\n        vv_g.append('circle')\n          .attr('cx', 0)\n          .attr('cy', 0)\n          .attr('r', vv_r)\n          .style('fill', '#fff')\n          .style('stroke', '#000')\n          .style('stroke-width', v_outStrokeWidth)\n      }\n\n      let leafNodes = Array.from(map.allLeaves.values())\n      let r = this.glyphSize * 2 * Math.sqrt(3) / 3\n      let capG = this.d3el.select('.SubMapTiling').append('g').attr('class', 'mapCaps')\n      let nationalCapsCoords = []\n      let provincialCapsCoords = []\n      for (let i = 0; i < Data.nationalCaps.length; i++) {\n        let node = leafNodes.find(node => node.ID === Data.nationalCaps[i])\n        nationalCapsCoords.push(bScale(scales, Object.values(node.center.coordinates)))\n      }\n      for (let i = 0; i < Data.provincialCaps.length; i++) {\n        let node = leafNodes.find(node => node.ID === Data.provincialCaps[i])\n        provincialCapsCoords.push(bScale(scales, Object.values(node.center.coordinates)))\n      }\n      capG.selectAll('.nationalCaps')\n        .data(nationalCapsCoords)\n        .enter()\n        .append('g')\n        .attr('class', 'nationalCaps')\n        .classed('caps', true)\n        .attr('index', (d, i) => Data.nationalCaps[i])\n        .attr('transform', d => `translate(${d[0]}, ${d[1]})`)\n        .each(function () {\n          showNationalMark(d3.select(this), r * 0.3, r * 0.6, r * 0.2)\n        })\n      capG.selectAll('.provincialCaps')\n        .data(provincialCapsCoords)\n        .enter()\n        .append('g')\n        .attr('class', 'provincialCaps')\n        .classed('caps', true)\n        .attr('index', (d, i) => Data.provincialCaps[i])\n        .attr('transform', d => `translate(${d[0]}, ${d[1]})`)\n        .each(function () {\n          showProvincialMark(d3.select(this), r * 0.45, r * 0.2)\n        })\n    },\n    addBorderToLeaves: function () {\n      d3.selectAll('.SubMapGrids').filter(function () {\n        return Data.subtree.leaves.indexOf(Number(d3.select(this).attr('index'))) !== -1\n      }).each(function () {\n        d3.select(this).select('.cell')\n          .style('stroke', '#ccc')\n          .style('stroke-width', '0.05rem')\n          .style('stroke-linecap', 'round')\n      })\n    },\n    groundTravelMode: function () {\n      const self = this\n      let leafNodes = Array.from(this.map.allLeaves.values())\n      this.cancelSubMapClustersEventBinding()\n      this.changeElemOrder()\n      let grids = this.d3el.select('.SubMapTiling').selectAll('.SubMapGrids')\n      let caps = Data.nationalCaps.concat(Data.provincialCaps)\n      let capGrids = grids.filter(function () {\n        return caps.indexOf(Number(d3.select(this).attr('index'))) !== -1\n      })\n      let nonCapGrids = grids.filter(function () {\n        return caps.indexOf(Number(d3.select(this).attr('index'))) === -1\n      })\n      let capGs = this.d3el.select('.SubMapTiling').select('.mapCaps').selectAll('.caps')\n      nonCapGrids\n        .attr('cursor', 'default')\n        .transition()\n        .duration(this.transition.duration)\n        .attr('opacity', 0.2)\n      this.updateUpdateSubList({\n        path2This: undefined,\n        subIds: caps,\n        type: 'changeShownItems'\n      })\n      let clickCount = 0\n      let route = []\n      capGrids\n        .on('mouseover', function () { self.travelModeHoverGrid(d3.select(this), capGrids) })\n        .on('mouseout', function () { self.travelModeUnhoverGrid(d3.select(this), capGrids, 'groundTravel') })\n        .on('click', clickGrid)\n      capGs\n        .on('mouseover', function () {\n          let thisIndex = d3.select(this).attr('index')\n          let thisGrid = self.d3el.select('.SubMapTiling').selectAll('.SubMapGrids')\n            .filter(function () { return d3.select(this).attr('index') === thisIndex })\n          self.travelModeHoverGrid(thisGrid, capGrids)\n        })\n        .on('mouseout', function () {\n          let thisIndex = d3.select(this).attr('index')\n          let thisGrid = self.d3el.select('.SubMapTiling').selectAll('.SubMapGrids')\n            .filter(function () { return d3.select(this).attr('index') === thisIndex })\n          self.travelModeUnhoverGrid(thisGrid, capGrids, 'groundTravel')\n        })\n        .on('click', clickGrid)\n\n      function clickGrid () {\n        let thisIndex = d3.select(this).attr('index')\n        clickCount++\n        if (clickCount % 2 === 1) {\n          // origin\n          self.d3el.select('.SubMapTiling').selectAll('.travelIcon').remove()\n          self.unselectRoute()\n          self.updateUpdateSubList({\n            path2This: undefined,\n            subIds: caps,\n            type: 'changeShownItems'\n          })\n          self.resetCapsOpacity()\n          self.resetTravelRouteSubs()\n          route = []\n          route.push(Number(thisIndex))\n          capGrids.classed('travelUnselected', false)\n          capGrids.classed('gridClicked', false)\n          capGrids\n            .filter(function () {\n              return d3.select(this).attr('index') === thisIndex\n            })\n            .classed('gridClicked', true)\n          self.drawTravelIcon(d3.select(this))\n          self.updateDrawProjection({\n            type: 'origin',\n            subId: Number(thisIndex)\n          })\n        } else {\n          if (route[0] === Number(thisIndex)) {\n            self.d3el.select('.SubMapTiling').selectAll('.travelIcon').remove()\n            self.travelIconPos = null\n            capGrids.classed('gridClicked', false)\n            capGrids.classed('travelUnselected', false)\n            return\n          }\n          // destination\n          route.push(Number(thisIndex))\n          capGrids\n            .filter(function () {\n              return d3.select(this).attr('index') === thisIndex\n            })\n            .classed('gridClicked', true)\n          capGrids\n            .filter(function () {\n              return route.indexOf(Number(d3.select(this).attr('index'))) === -1\n            })\n            .classed('travelUnselected', true)\n          // construct the route\n          let clsID0 = Number(findIndex(route[0], Data.subHierClusters)[0])\n          let clsID1 = Number(findIndex(route[1], Data.subHierClusters)[0])\n          let travelRouteSubs\n          let travelRouteCoords\n          let travelRouteOD\n          if (clsID0 === clsID1) {\n            // case 1: two nodes belong to the same continent\n            let mstGraph = self.Route.landMST[clsID0]\n            let graph = constructGraph(mstGraph)\n            let travelRoute = graph.findShortestPath(route[0], route[1]).map(Number)\n            travelRouteOD = travelRoute\n            travelRouteSubs = getLandRouteSubs(travelRoute, self.Route.landRoute[clsID0])\n            travelRouteCoords = getRouteCoords('land', travelRoute, self.Route.landRoute[clsID0], self.Route.landRouteCoords[clsID0])\n          } else {\n            // case 2: two nodes do not belong to the same continent\n            let mstGraph0 = self.Route.landMST[clsID0]\n            let mstGraph1 = self.Route.landMST[clsID1]\n            let graph0 = constructGraph(mstGraph0)\n            let graph1 = constructGraph(mstGraph1)\n            let harbor0 = getHarborByClsID(clsID0)\n            let harbor1 = getHarborByClsID(clsID1)\n            let travelRoute0 = graph0.findShortestPath(route[0], harbor0).map(Number)\n            travelRouteOD = JSON.parse(JSON.stringify(travelRoute0))\n            let travelRoute1 = graph1.findShortestPath(harbor1, route[1]).map(Number)\n            let waterRouteInfo = getWaterRouteInfo([clsID0, clsID1])\n            let waterRouteSubs = waterRouteInfo['subs']\n            travelRouteSubs = getLandRouteSubs(travelRoute0, self.Route.landRoute[clsID0])\n            travelRouteSubs.pop()\n            travelRouteSubs.push(...waterRouteSubs)\n            travelRouteOD.pop()\n            travelRouteOD.push(...waterRouteInfo['OD'])\n            travelRouteOD.pop()\n            travelRouteOD.push(...JSON.parse(JSON.stringify(travelRoute1)))\n            travelRouteSubs.pop()\n            travelRouteSubs.push(...getLandRouteSubs(travelRoute1, self.Route.landRoute[clsID1]))\n            \n            travelRouteCoords = getRouteCoords('land', travelRoute0, self.Route.landRoute[clsID0], self.Route.landRouteCoords[clsID0])\n            travelRouteCoords.pop()\n            travelRouteCoords.push(...waterRouteInfo['coords'])\n            travelRouteCoords.pop()\n            travelRouteCoords.push(...getRouteCoords('land', travelRoute1, self.Route.landRoute[clsID1], self.Route.landRouteCoords[clsID1]))\n\n            if (travelRoute1.length === 1) {\n              // harbor\n              travelRouteSubs.push(harbor1)\n              let node = leafNodes.find(node => node.ID === harbor1)\n              let nodeCoords = bScale(self.scales, Object.values(node.center.coordinates))\n              travelRouteCoords.push({\n                x: nodeCoords[0],\n                y: nodeCoords[1]\n              })\n            }\n            /* if (Data.nationalCaps.indexOf(route[0]) !== -1 && Data.nationalCaps.indexOf(route[1]) !== -1) {\n              // case 2.1: nodes are both national capitals\n              let waterRouteInfo = getWaterRouteInfo([clsID0, clsID1])\n              travelRouteSubs = waterRouteInfo['subs']\n              travelRouteCoords = waterRouteInfo['coords']\n              travelRouteOD = waterRouteInfo['OD']\n              // travelRouteSubs = getWaterRouteSubs([clsID0, clsID1])\n              // travelRouteCoords = getWaterRouteCoords([clsID0, clsID1])\n              // travelRouteOD = getWaterRouteOD(travelRouteSubs)\n            } else if (Data.nationalCaps.indexOf(route[0]) === -1 && Data.nationalCaps.indexOf(route[1]) !== -1) {\n              // case 2.2: one of the two nodes is the national capitals\n              let nationalCap0 = Data.nationalCaps[clsID0]\n              let mstGraph = self.Route.landMST[clsID0]\n              let graph = constructGraph(mstGraph)\n              let travelRoute = graph.findShortestPath(route[0], nationalCap0).map(Number)\n              travelRouteSubs = getLandRouteSubs(travelRoute, self.Route.landRoute[clsID0])\n              travelRouteSubs.pop()\n              travelRouteOD = JSON.parse(JSON.stringify(travelRoute))\n\n              let waterRouteInfo = getWaterRouteInfo([clsID0, clsID1])\n              // let waterRouteSubs = getWaterRouteSubs([clsID0, clsID1])\n              let waterRouteSubs = waterRouteInfo['subs']\n              travelRouteSubs.push(...waterRouteSubs)\n              travelRouteOD.pop()\n              // travelRouteOD.push(...getWaterRouteOD(waterRouteSubs))\n              travelRouteOD.push(...waterRouteInfo['OD'])\n              \n              travelRouteCoords = getRouteCoords('land', travelRoute, self.Route.landRoute[clsID0], self.Route.landRouteCoords[clsID0])\n              travelRouteCoords.pop()\n              // travelRouteCoords.push(...getWaterRouteCoords([clsID0, clsID1]))\n              travelRouteCoords.push(...waterRouteInfo['coords'])\n            } else if (Data.nationalCaps.indexOf(route[0]) !== -1 && Data.nationalCaps.indexOf(route[1]) === -1) {\n              let waterRouteInfo = getWaterRouteInfo([clsID0, clsID1])\n              let waterRouteSubs = waterRouteInfo['subs']\n              travelRouteSubs = waterRouteSubs\n              travelRouteOD = waterRouteInfo['OD']\n              travelRouteCoords = waterRouteInfo['coords']\n              let nationalCap1 = Data.nationalCaps[clsID1]\n              let mstGraph = self.Route.landMST[clsID1]\n              let graph = constructGraph(mstGraph)\n              let travelRoute = graph.findShortestPath(nationalCap1, route[1]).map(Number)\n              travelRouteOD.pop()\n              travelRouteOD.push(...travelRoute)\n              travelRouteSubs.pop()\n              travelRouteSubs.push(...getLandRouteSubs(travelRoute, self.Route.landRoute[clsID1]))\n              \n              travelRouteCoords.pop()\n              travelRouteCoords.push(...getRouteCoords('land', travelRoute, self.Route.landRoute[clsID1], self.Route.landRouteCoords[clsID1]))\n            } else {\n              // case 2.3: neither node is the capital\n              let mstGraph0 = self.Route.landMST[clsID0]\n              let mstGraph1 = self.Route.landMST[clsID1]\n              let nationalCap0 = Data.nationalCaps[clsID0]\n              let nationalCap1 = Data.nationalCaps[clsID1]\n              let graph0 = constructGraph(mstGraph0)\n              let graph1 = constructGraph(mstGraph1)\n              let travelRoute0 = graph0.findShortestPath(route[0], nationalCap0).map(Number)\n              travelRouteOD = JSON.parse(JSON.stringify(travelRoute0))\n              let travelRoute1 = graph1.findShortestPath(nationalCap1, route[1]).map(Number)\n\n              let waterRouteInfo = getWaterRouteInfo([clsID0, clsID1])\n              let waterRouteSubs = waterRouteInfo['subs']\n              travelRouteSubs = getLandRouteSubs(travelRoute0, self.Route.landRoute[clsID0])\n              travelRouteSubs.pop()\n              travelRouteSubs.push(...waterRouteSubs)\n              travelRouteOD.pop()\n              travelRouteOD.push(...waterRouteInfo['OD'])\n              travelRouteOD.pop()\n              travelRouteOD.push(...JSON.parse(JSON.stringify(travelRoute1)))\n              travelRouteSubs.pop()\n              travelRouteSubs.push(...getLandRouteSubs(travelRoute1, self.Route.landRoute[clsID1]))\n              \n              travelRouteCoords = getRouteCoords('land', travelRoute0, self.Route.landRoute[clsID0], self.Route.landRouteCoords[clsID0])\n              travelRouteCoords.pop()\n              travelRouteCoords.push(...waterRouteInfo['coords'])\n              travelRouteCoords.pop()\n              travelRouteCoords.push(...getRouteCoords('land', travelRoute1, self.Route.landRoute[clsID1], self.Route.landRouteCoords[clsID1]))\n            } */\n          }\n          let repeatingRouteSubIdPairs = getRepeatingElemIdPairs(travelRouteSubs)\n          let removedRouteSubs = removeRepeatingElems(travelRouteSubs, repeatingRouteSubIdPairs)\n          removeRepeatingElems(travelRouteCoords, repeatingRouteSubIdPairs)\n          let repeatingRouteODIdPairs = getRepeatingElemIdPairs(travelRouteOD)\n          removeRepeatingODs(travelRouteOD, repeatingRouteODIdPairs, removedRouteSubs)\n          console.log('travelRouteSubs: ', travelRouteSubs)\n          let countryDivisionIndices = [0]\n          let highlightLandRouteCoords = [[]]\n          for (let i = 0; i < travelRouteSubs.length - 1; i++) {\n            let sub = travelRouteSubs[i]\n            let nextSub = travelRouteSubs[i + 1]\n            if (self.Route.harbor.indexOf(sub) > -1 && self.Route.harbor.indexOf(nextSub) > -1) {\n              countryDivisionIndices.push((i + 1))\n              highlightLandRouteCoords[highlightLandRouteCoords.length - 1].push(...self.Route.landSubCoords.get(sub))\n              highlightLandRouteCoords.push([])\n            } else if (self.Route.harbor.indexOf(sub) > -1 && self.Route.harbor.indexOf(nextSub) === -1) {\n              let coords = JSON.parse(JSON.stringify(self.Route.landSubCoords.get(sub)))\n              highlightLandRouteCoords[highlightLandRouteCoords.length - 1].push(...coords.reverse())\n            } else {\n              highlightLandRouteCoords[highlightLandRouteCoords.length - 1].push(self.Route.landSubCoords.get(sub))\n            }\n          }\n          countryDivisionIndices.push(travelRouteSubs.length)\n          let lastSub = travelRouteSubs[travelRouteSubs.length - 1]\n          if (self.Route.harbor.indexOf(lastSub) > -1) {\n            highlightLandRouteCoords[highlightLandRouteCoords.length - 1].push(self.Route.landSubCoords.get(lastSub)[0])\n            if (clsID0 !== clsID1) {\n              // harbor\n              highlightLandRouteCoords[highlightLandRouteCoords.length - 1].push(self.Route.landSubCoords.get(lastSub)[1])\n            }\n          } else {\n            highlightLandRouteCoords[highlightLandRouteCoords.length - 1].push(self.Route.landSubCoords.get(lastSub))\n          }\n          console.log('highlightLandRouteCoords', highlightLandRouteCoords)\n          self.fadeIrrelevantRoutesAndCaps(highlightLandRouteCoords, travelRouteOD)\n          self.highlightTravelRouteSubs(travelRouteSubs)\n          self.updateUpdateSubList({\n            path2This: undefined,\n            subIds: Array.from(new Set(caps.concat(travelRouteSubs))),\n            type: 'changeShownItems'\n          })\n          let interval = 800\n          // let duration = travelRouteCoords.length * interval\n          let travelRouteSubsInCountry = getRouteArrInCountry(travelRouteSubs, countryDivisionIndices)\n          let travelRouteCoordsInCountry = getRouteArrInCountry(travelRouteCoords, countryDivisionIndices)\n          let durations = []\n          for (let i = 0; i < travelRouteSubsInCountry.length; i++) {\n            durations.push((travelRouteSubsInCountry[i].length * interval))\n          }\n          self.travelIconPos = Number(thisIndex)\n          self.updateDrawProjection({\n            type: 'destination',\n            subId: Number(thisIndex)\n          })\n          travelInCountry(interval, durations, travelRouteSubs, travelRouteCoords, countryDivisionIndices, travelRouteSubsInCountry, travelRouteCoordsInCountry, 0)\n\n          // let timer = setInterval(function () {\n          //   if (self.currTime >= duration) {\n          //     clearInterval(timer)\n          //     self.currTime = 0\n          //     self.d3el.select('.SubMapTiling').select('.travelIcon')\n          //       .call(d3.drag().on('drag', function () { dragged(d3.select(this), travelRouteSubs) }))\n          //   } else {\n          //     let idx = self.currTime / interval\n          //     if (idx > 0) {\n          //       self.updateDrawProjection({\n          //         type: 'transition',\n          //         subId: travelRouteSubs[idx]\n          //       })\n          //     }\n          //     self.updateView(travelRouteCoords[idx], travelRouteSubs[idx])\n          //     self.currTime += interval\n          //   }\n          // }, interval)\n        }\n\n        function findIndex (valueToSearch, theArray, currentIndex) {\n          if (currentIndex == undefined) currentIndex = ''\n          if (Array.isArray(theArray)) {\n            for (var i = 0; i < theArray.length; i++) {\n              if (Array.isArray(theArray[i])) {\n                let newIndex = findIndex(valueToSearch, theArray[i], currentIndex + i + ',')\n                if (newIndex) return newIndex\n              } else if (theArray[i] == valueToSearch) {\n                return currentIndex + i\n              }\n            }\n          } else if (theArray == valueToSearch) {\n            return currentIndex + i\n          }\n          return false\n        }\n\n        function constructGraph (mstGraph) {\n          let graph = {}\n          let uniqueVertexes = getUniqueVertexes(mstGraph)\n          for (let i = 0; i < uniqueVertexes.length; i++) {\n            let vertex = uniqueVertexes[i]\n            let neighborNodes = {}\n            for (let j = 0; j < mstGraph.length; j++) {\n              if (mstGraph[j].u === vertex) {\n                neighborNodes[mstGraph[j].v] = mstGraph[j].w\n              } else if (mstGraph[j].v === vertex) {\n                neighborNodes[mstGraph[j].u] = mstGraph[j].w\n              }\n            }\n            graph[vertex] = neighborNodes\n          }\n          return new Graph(graph)\n\n          function getUniqueVertexes (mstGraph) {\n            let uniqueU = [...new Set(mstGraph.map(item => item.u))]\n            let uniqueV = [...new Set(mstGraph.map(item => item.v))]\n            return Array.from(new Set(uniqueU.concat(uniqueV)))\n          }\n        }\n\n        function getHarborByClsID (ID) {\n          for (let i = 0; i < self.Route.harbor.length; i++) {\n            if (Number(findIndex(self.Route.harbor[i], Data.subHierClusters)[0]) === ID) {\n              return self.Route.harbor[i]\n            }\n          }\n        }\n\n        function getLandRouteSubs (travelRoute, v_landRoute) {\n          const landRoute = JSON.parse(JSON.stringify(v_landRoute))\n          let subs = []\n          let routeIds = Object.keys(landRoute)\n          for (let i = 0; i < travelRoute.length - 1; i++) {\n            let routePair = [travelRoute[i], travelRoute[i + 1]]\n            // let routeId\n            let pairSubs\n            if (routeIds.indexOf(String(routePair)) > -1) {\n              // routeId = routeIds.indexOf(String(routePair))\n              pairSubs = landRoute[routePair]\n            } else {\n              // routeId = routeIds.indexOf(String(routePair.reverse()))\n              pairSubs = [...landRoute[routePair.reverse()]].reverse()\n            }\n            if (i === travelRoute.length - 2) {\n              subs.push(...pairSubs)\n            } else {\n              pairSubs.pop()\n              subs.push(...pairSubs)\n            }\n          }\n          return subs\n        }\n\n        function getRouteCoords (routeType, travelRoute, v_route, v_routeCoords) {\n          const route = JSON.parse(JSON.stringify(v_route))\n          const routeCoords = JSON.parse(JSON.stringify(v_routeCoords))\n          let coords = []\n          let routeIds = Object.keys(route)\n          for (let i = 0; i < travelRoute.length - 1; i++) {\n            let routePair = [travelRoute[i], travelRoute[i + 1]]\n            let routeId\n            let pairCoords\n            if (routeType === 'land') {\n              if (routeIds.indexOf(String(routePair)) > -1) {\n                routeId = routeIds.indexOf(String(routePair))\n                pairCoords = routeCoords[routeId]\n              } else {\n                routeId = routeIds.indexOf(String(routePair.reverse()))\n                pairCoords = [...routeCoords[routeId]].reverse()\n              }\n            } else if (routeType === 'water') {\n              if (routeIds.indexOf(String(routePair)) > -1) {\n                pairCoords = routeCoords[String(routePair)]\n              } else {\n                pairCoords = [...routeCoords[String(routePair.reverse())]].reverse()\n              }\n            }\n            if (i === travelRoute.length - 2) {\n              coords.push(...pairCoords)\n            } else {\n              pairCoords.pop()\n              coords.push(...pairCoords)\n            }\n          }\n          return coords\n        }\n        \n        function getWaterRouteCoords (clsIds) {\n          let routeIds = Object.keys(self.Route.waterRouteCoords)\n          if (routeIds.indexOf(String(clsIds)) > -1) {\n            return JSON.parse(JSON.stringify(self.Route.waterRouteCoords[clsIds]))\n          } else {\n            return JSON.parse(JSON.stringify(self.Route.waterRouteCoords[[clsIds[1], clsIds[0]]])).reverse()\n          }\n        }\n\n        function getWaterRouteInfo (clsIds) {\n          let info = {}\n\n          let mstGraph = self.Route.waterMST\n          let graph = constructGraph(mstGraph)\n          let travelRoute = graph.findShortestPath(clsIds[0], clsIds[1]).map(Number)\n          let subs = getLandRouteSubs(travelRoute, self.Route.waterRoute)\n          let coords = getRouteCoords('water', travelRoute, self.Route.waterRoute, self.Route.waterRouteCoords)\n          let od = getWaterRouteOD(subs)\n\n          // let repeatingSubPairs = getRepeatingElemIdPairs(subs, 'sub')\n          // removeRepeatingElems(subs, repeatingSubPairs)\n          // removeRepeatingElems(coords, repeatingSubPairs)\n          // let repeatingODPairs = getRepeatingElemIdPairs(od, 'od')\n          // removeRepeatingElems(od, repeatingODPairs)\n\n          info['subs'] = subs\n          info['coords'] = coords\n          info['OD'] = od\n\n          return info\n        }\n\n        function getWaterRouteSubs (clsIds) {\n          let mstGraph = self.Route.waterMST\n          let graph = constructGraph(mstGraph)\n          let travelRoute = graph.findShortestPath(clsIds[0], clsIds[1]).map(Number)\n          return getLandRouteSubs(travelRoute, self.Route.waterRoute)\n          // let routeIds = Object.keys(self.Route.waterRoute)\n          // if (routeIds.indexOf(String(clsIds)) > -1) {\n          //   return JSON.parse(JSON.stringify(self.Route.waterRoute[clsIds]))\n          // } else {\n          //   return JSON.parse(JSON.stringify(self.Route.waterRoute[[clsIds[1], clsIds[0]]])).reverse()\n          // }\n        }\n\n        function getWaterRouteOD (waterRouteSubs) {\n          let waterRouteOD = []\n          for (let i = 0; i < waterRouteSubs.length; i++) {\n            if (caps.indexOf(waterRouteSubs[i]) !== -1 || self.Route.harbor.indexOf(waterRouteSubs[i]) !== -1) {\n              waterRouteOD.push(waterRouteSubs[i])\n            }\n          }\n          return waterRouteOD\n        }\n\n        function getRepeatingElemIdPairs (arr) {\n          let ids = []\n          let accIdNum = 0\n          // id\n          for (let i = 0; i < arr.length; i++) {\n            let elem = arr[i]\n            if (countInArray(arr, elem) > 1) {\n              let id2 = get2ndIdOfElem(arr, elem)\n              ids.push([i + 1 - accIdNum, id2 - accIdNum])\n              accIdNum += id2 - i\n              i = id2\n            }\n          }\n          return ids\n\n          function countInArray (arr, elem) {\n            return arr.filter(item => item === elem).length\n          }\n\n          function get2ndIdOfElem (arr, elem) {\n            let count = 0\n            for (let i = 0; i < arr.length; i++) {\n              if (arr[i] === elem) {\n                count++\n                if (count === 2) {\n                  return i\n                }\n              }\n            }\n            return null\n          }\n        }\n\n        function removeRepeatingElems (arr, repeatingElemIdPairs) {\n          let removedElems = []\n          for (let i = 0; i < repeatingElemIdPairs.length; i++) {\n            let idPair = repeatingElemIdPairs[i]\n            let splicedElems = arr.splice(idPair[0], (idPair[1] - idPair[0] + 1))\n            removedElems = removedElems.concat(splicedElems)\n            removedElems.pop()\n          }\n          return [...new Set(removedElems)]\n        }\n\n        function removeRepeatingODs (arr, repeatingODIdPairs, removedElems) {\n          removeRepeatingElems(arr, repeatingODIdPairs)\n          let arrLen = arr.length\n          let i = 0\n          while (i < arrLen) {\n            if (removedElems.indexOf(arr[i]) > -1) {\n              arr.splice(i, 1)\n              arrLen -= 1\n            } else {\n              i++\n            }\n          }\n        }\n\n        function getRouteArrInCountry (routeArr, countryDivisionIndices) {\n          let routeArrInCountry = []\n          for (let i = 0; i < countryDivisionIndices.length - 1; i++) {\n            routeArrInCountry.push([])\n            if (i > 0) {\n              // setIntervalinterval\n              // \n              // \n              for (let j = countryDivisionIndices[i] + 1; j < countryDivisionIndices[i + 1]; j++) {\n                routeArrInCountry[i].push(routeArr[j])\n              }\n            } else {\n              for (let j = countryDivisionIndices[i]; j < countryDivisionIndices[i + 1]; j++) {\n                routeArrInCountry[i].push(routeArr[j])\n              }\n            }\n          }\n          return routeArrInCountry\n        }\n\n        function travelInCountry (interval, durations, travelRouteSubs, travelRouteCoords, countryDivisionIndices, travelRouteSubsInCountry, travelRouteCoordsInCountry, countryIdx) {\n          let timer = setInterval(function () {\n            if (self.currTime >= durations[countryIdx]) {\n              clearInterval(timer)\n              self.currTime = 0\n              if (countryIdx === durations.length - 1) {\n                self.d3el.select('.SubMapTiling').select('.travelIcon')\n                  .call(d3.drag().on('drag', function () { dragged(d3.select(this), travelRouteSubs) }))\n                return\n              } else {\n                let harbor1 = travelRouteSubs[countryDivisionIndices[countryIdx + 1] - 1]\n                let harbor2 = travelRouteSubs[countryDivisionIndices[countryIdx + 1]]\n                let seaRouteOD = [harbor1, harbor2]\n                let routeReverse = false\n                let seaRoute = self.d3el.select('.SubMapTiling').selectAll('.seaRoute')\n                  .filter(function () {\n                    let thisOD = d3.select(this).attr('od')\n                    return thisOD === String(seaRouteOD)\n                  })\n                if (seaRoute._groups[0].length === 0) {\n                  routeReverse = true\n                  seaRouteOD.reverse()\n                  seaRoute = self.d3el.select('.SubMapTiling').selectAll('.seaRoute')\n                    .filter(function () {\n                      let thisOD = d3.select(this).attr('od')\n                      return thisOD === String(seaRouteOD)\n                    })\n                }\n                self.d3el.select('.SubMapTiling').select('.travelIcon')\n                  .transition()\n                  .duration(self.seaRouteDuration)\n                  .ease(d3.easePoly.exponent(2))\n                  .attrTween(\"transform\", translateAlong(seaRoute.node(), routeReverse))\n                  .on('end', function () {\n                    let harbor2Coords = travelRouteCoords[countryDivisionIndices[countryIdx + 1]]\n                    self.updateDrawProjection({\n                      type: 'transition',\n                      subId: harbor2\n                    })\n                    self.updateView(harbor2Coords, harbor2)\n                    travelInCountry(interval, durations, travelRouteSubs, travelRouteCoords, countryDivisionIndices, travelRouteSubsInCountry, travelRouteCoordsInCountry, countryIdx + 1)\n                  })\n              }\n            } else {\n              let idx = self.currTime / interval\n              self.updateDrawProjection({\n                type: 'transition',\n                subId: travelRouteSubsInCountry[countryIdx][idx]\n              })\n              self.updateView(travelRouteCoordsInCountry[countryIdx][idx], travelRouteSubsInCountry[countryIdx][idx])\n              self.currTime += interval\n            }\n          }, interval)\n        }\n\n        function translateAlong (path, pathReverse) {\n          let pathLen = path.getTotalLength()\n          return function() {\n            return function(t) {\n              let p = pathReverse ? path.getPointAtLength(pathLen - t * pathLen) : path.getPointAtLength(t * pathLen)\n              // return \"translate(\" + p.x + \",\" + p.y + \")\"\n              return `translate(${[\n                p.x - self.travelIconSizeDiff.width,\n                p.y - self.travelIconSizeDiff.height\n              ]})scale(${self.travelIconScale})`\n            }\n          }\n        }\n\n        function dragged (thisIcon, travelRouteSubs) {\n          let node = leafNodes.find(node => node.ID === self.travelIconPos)\n          let nodeCoord = bScale(self.scales, [\n            node.center.coordinates.x,\n            node.center.coordinates.y\n          ])\n          let candidateNodes = []\n          let dists = []\n          let dist2Node = Math.sqrt(Math.pow(d3.event.x - nodeCoord[0], 2) + Math.pow(d3.event.y - nodeCoord[1], 2))\n          for (let i = 0; i < travelRouteSubs.length; i++) {\n            let travelRouteNode = leafNodes.find(node => node.ID === travelRouteSubs[i])\n            let travelRouteNodeCoord = bScale(self.scales, [\n              travelRouteNode.center.coordinates.x,\n              travelRouteNode.center.coordinates.y\n            ])\n            let dist2TravelRouteNode = Math.sqrt(Math.pow(travelRouteNodeCoord[0] - d3.event.x, 2) + Math.pow(travelRouteNodeCoord[1] - d3.event.y, 2))\n            let dist = dist2Node - dist2TravelRouteNode\n            if (dist > 0) {\n              dists.push(dist)\n              candidateNodes.push(travelRouteNode)\n            }\n          }\n          if (dists.length !== 0) {\n            let indexOfMinDist = dists.indexOf(Math.min(...dists))\n            let nextNode = candidateNodes[indexOfMinDist]\n            self.travelIconPos = nextNode.ID\n            let nextCoord = [\n              self.scales.x(nextNode.center.coordinates.x) - self.travelIconSizeDiff.width,\n              self.scales.y(nextNode.center.coordinates.y) - self.travelIconSizeDiff.height\n            ]\n            thisIcon\n              .attr('transform', `translate(${nextCoord})scale(${self.travelIconScale})`)\n            self.resetSubList()\n            self.updateUpdateSubList({\n              path2This: undefined,\n              subIds: [self.travelIconPos],\n              type: 'mouseover'\n            })\n            self.updateDrawProjection({\n              type: 'transition',\n              subId: self.travelIconPos\n            })\n          }\n        }\n      }\n    },\n    airTravelMode: function (params) {\n      const self = this\n      let leafNodes = Array.from(this.map.allLeaves.values())\n      this.cancelSubMapClustersEventBinding()\n      this.changeElemOrder()\n      let grids = this.d3el.select('.SubMapTiling').selectAll('.SubMapGrids')\n      let capGs = this.d3el.select('.SubMapTiling').select('.mapCaps').selectAll('.caps')\n      grids\n        .on('mouseover', function () { self.travelModeHoverGrid(d3.select(this), grids) })\n        .on('mouseout', function () { self.travelModeUnhoverGrid(d3.select(this), grids, 'airTravel') })\n        .on('click', function () { clickGrid(d3.select(this)) })\n      capGs\n        .on('mouseover', function () {\n          let thisIndex = d3.select(this).attr('index')\n          let thisGrid = self.d3el.select('.SubMapTiling').selectAll('.SubMapGrids')\n            .filter(function () { return d3.select(this).attr('index') === thisIndex })\n          self.travelModeHoverGrid(thisGrid, grids)\n        })\n        .on('mouseout', function () {\n          let thisIndex = d3.select(this).attr('index')\n          let thisGrid = self.d3el.select('.SubMapTiling').selectAll('.SubMapGrids')\n            .filter(function () { return d3.select(this).attr('index') === thisIndex })\n          self.travelModeUnhoverGrid(thisGrid, grids, 'airTravel')\n        })\n        .on('click', function () {\n          let thisIndex = d3.select(this).attr('index')\n          let thisGrid = self.d3el.select('.SubMapTiling').selectAll('.SubMapGrids')\n            .filter(function () { return d3.select(this).attr('index') === thisIndex })\n          clickGrid(thisGrid)\n        })\n      \n      function clickGrid (thisGrid) {\n        let thisIndex = thisGrid.attr('index')\n        if (self.travelIconPos === Number(thisIndex)) {\n          // grid\n          self.d3el.select('.SubMapTiling').selectAll('.travelIcon').remove()\n          self.travelIconPos = null\n          self.d3el.select('.SubMapTiling').selectAll('.SubMapGrids').classed('gridClicked', false)\n          self.updateUpdateSubList({\n            path2This: null,\n            type: 'unclick'\n          })\n          self.updateDrawProjection({\n            type: 'clear',\n            subId: null\n          })\n        } else {\n          // grid\n          if (document.getElementsByClassName('travelIcon').length === 0) {\n            // grid\n            self.drawTravelIcon(thisGrid)\n            self.d3el.select('.SubMapTiling').select('.travelIcon')\n              .call(d3.drag()\n                .on('start', () => {\n                  self.isTravelIconDragging = true\n                })\n                .on('drag', dragged))\n                .on('end', () => {\n                  self.isTravelIconDragging = false\n                })\n            self.updateDrawProjection({\n              type: 'origin',\n              subId: Number(thisIndex)\n            })\n          } else {\n            // grid\n            self.resetSubList()\n            let travelIconCoords = self.getTranslate(thisGrid)\n            self.d3el.select('.SubMapTiling').select('.travelIcon')\n              .attr('transform', `translate(${[\n                travelIconCoords[0] - self.travelIconSizeDiff.width,\n                travelIconCoords[1] - self.travelIconSizeDiff.height\n              ]})scale(${self.travelIconScale})`)\n            self.updateDrawProjection({\n              type: 'transition',\n              subId: Number(thisIndex)\n            })\n          }\n          self.d3el.select('.SubMapTiling').selectAll('.SubMapGrids').classed('gridClicked', false)\n          thisGrid.classed('gridClicked', true)\n          self.travelIconPos = Number(thisIndex)\n          self.updateUpdateSubList({\n            path2This: undefined,\n            subIds: [self.travelIconPos],\n            type: 'click'\n          })\n        }\n      }\n      function dragged () {\n        let node = leafNodes.find(node => node.ID === self.travelIconPos)\n        let nodeCoord = bScale(self.scales, [\n          node.center.coordinates.x,\n          node.center.coordinates.y\n        ])\n        let neighborPositions = Array.from(node.neighbors.values())\n        let candidateNodes = []\n        let dists = []\n        let dist2Node = Math.sqrt(Math.pow(d3.event.x - nodeCoord[0], 2) + Math.pow(d3.event.y - nodeCoord[1], 2))\n        for (let i = 0; i < neighborPositions.length; i++) {\n          let neighborNode = leafNodes.find(node => JSON.stringify(Object.values(node.position)) === JSON.stringify(neighborPositions[i]))\n          if (neighborNode !== undefined) {\n            let neighborNodeCoord = bScale(self.scales, [\n              neighborNode.center.coordinates.x,\n              neighborNode.center.coordinates.y\n            ])\n            let dist2NeighborNode = Math.sqrt(Math.pow(neighborNodeCoord[0] - d3.event.x, 2) + Math.pow(neighborNodeCoord[1] - d3.event.y, 2))\n            let dist = dist2Node - dist2NeighborNode\n            if (dist > 0) {\n              dists.push(dist)\n              candidateNodes.push(neighborNode)\n            }\n          }\n        }\n        if (dists.length !== 0) {\n          let indexOfMinDist = dists.indexOf(Math.min(...dists))\n          let nextNode = candidateNodes[indexOfMinDist]\n          self.travelIconPos = nextNode.ID\n          let nextCoord = [\n            self.scales.x(nextNode.center.coordinates.x) - self.travelIconSizeDiff.width,\n            self.scales.y(nextNode.center.coordinates.y) - self.travelIconSizeDiff.height\n          ]\n          d3.select(this)\n            .attr('transform', `translate(${nextCoord})scale(${self.travelIconScale})`)\n          let thisGrid = self.d3el.select('.SubMapTiling').selectAll('.SubMapGrids')\n            .filter(function () { return d3.select(this).attr('index') === self.travelIconPos + '' })\n          self.d3el.select('.SubMapTiling').selectAll('.SubMapGrids').classed('gridClicked', false)\n          thisGrid.classed('gridClicked', true)\n          self.resetSubList()\n          self.updateUpdateSubList({\n            path2This: undefined,\n            subIds: [self.travelIconPos],\n            type: 'click'\n          })\n          self.updateDrawProjection({\n            type: 'transition',\n            subId: self.travelIconPos\n          })\n        }\n      }\n    },\n    travelModeHoverGrid: function (thisGrid, grids) {\n      if (this.isTravelIconDragging) return\n      let thisIndex = thisGrid.attr('index')\n      grids\n        .filter(function () {\n          return d3.select(this).attr('index') !== thisIndex\n        })\n        .classed('gridUnhovered', true)\n      if (thisGrid.classed('gridUnhovered')) {\n        thisGrid.classed('gridUnhovered', false)\n      }\n      this.updateUpdateSubList({\n        path2This: undefined,\n        subIds: [Number(thisIndex)],\n        type: 'mouseover'\n      })\n    },\n    travelModeUnhoverGrid: function (thisGrid, grids, mode) {\n      if (this.isTravelIconDragging) return\n      let thisIndex = thisGrid.attr('index')\n      if (mode === 'airTravel') {\n        if (document.getElementsByClassName('travelIcon').length !== 0) {\n          unhoverThisGrid()\n        } else {\n          unhoverAllGrids()\n        }\n      } else if (mode === 'groundTravel') {\n        unhoverAllGrids()\n      }\n      this.updateUpdateSubList({\n        path2This: null,\n        type: 'mouseout'\n      })\n\n      function unhoverThisGrid () {\n        grids\n          .filter(function () {\n            return d3.select(this).attr('index') === thisIndex\n          })\n          .classed('gridUnhovered', true)\n      }\n\n      function unhoverAllGrids () {\n        grids\n          .filter(function () {\n            return d3.select(this).attr('index') !== thisIndex\n          })\n          .classed('gridUnhovered', false)\n      }\n    },\n    drawTravelIcon: function (thisGrid) {\n      let travelIconCoords = this.getTranslate(thisGrid)\n      let travelIconG\n      travelIconG = this.d3el.select('.SubMapTiling')\n        .append('g')\n        .attr('class', 'travelIcon')\n        .attr('transform', `translate(${travelIconCoords})scale(${this.travelIconScale})`)\n        .style('opacity', 0)\n      travelIconG.append('path')\n        .attr('d', this.travelIcon)\n      let gSize = travelIconG.node().getBoundingClientRect()\n      let mapSvgTransform = getTransformation(d3.select('#mapSvg').attr('transform'))\n      let scaleX = mapSvgTransform.scaleX\n      let scaleY = mapSvgTransform.scaleY\n      if (this.d3el.select('.SubMapTiling').attr('transform') !== null) {\n        let subMapTilingTransform = getTransformation(this.d3el.select('.SubMapTiling').attr('transform'))\n        scaleX *= subMapTilingTransform.scaleX\n        scaleY *= subMapTilingTransform.scaleY\n      }\n      travelIconG\n        .attr('transform', `translate(${[\n          travelIconCoords[0] - gSize.width * 2 / 3 / scaleX,\n          travelIconCoords[1] - gSize.height / scaleY\n        ]})scale(${this.travelIconScale})`)\n        .style('opacity', 1)\n      this.travelIconSizeDiff = {\n        width: gSize.width * 2 / 3 / scaleX,\n        height: gSize.height / scaleY\n      }\n    },\n    fadeIrrelevantRoutesAndCaps: function (highlightLandRouteCoords, travelRouteOD) {\n      let odPairs = []\n      for (let i = 0; i < travelRouteOD.length - 1; i++) {\n        odPairs.push(String([travelRouteOD[i], travelRouteOD[i + 1]]))\n        odPairs.push(String([travelRouteOD[i + 1], travelRouteOD[i]]))\n      }\n      \n      this.Route.drawHighlightLandRoute(this.d3el.select('.SubMapTiling'), highlightLandRouteCoords)\n      // raise cap and travel icon and then show the highlight route\n      this.d3el.select('.SubMapTiling').selectAll('.mapCaps').raise()\n      this.d3el.select('.SubMapTiling').select('.travelIcon').raise()\n      this.Route.showHighlightLandRoute(this.d3el.select('.SubMapTiling'))\n      this.d3el.select('.SubMapTiling').selectAll('.landRoute')\n        // .filter(function () {\n        //   let thisOD = d3.select(this).attr('od')\n        //   return odPairs.indexOf(thisOD) === -1\n        // })\n        .classed('routeUnselected', true)\n      this.d3el.select('.SubMapTiling').selectAll('.seaRoute')\n        .filter(function () {\n          let thisOD = d3.select(this).attr('od')\n          return odPairs.indexOf(thisOD) === -1\n        })\n        .classed('routeUnselected', true)\n      let mapG  = this.d3el.select('.SubMapTiling').select('.mapCaps')\n      mapG.selectAll('.nationalCaps')\n        .filter(function () { return travelRouteOD.indexOf(Number(d3.select(this).attr('index'))) === -1 })\n        .each(function () {\n          d3.select(this).selectAll('circle').each(function (p, idx) {\n            if (idx === 0) {\n              d3.select(this).style('stroke-opacity', 0.25)\n            } else if (idx === 1) {\n              d3.select(this).style('fill-opacity', 0.25)\n            }\n          })\n        })\n      mapG.selectAll('.provincialCaps')\n        .filter(function () { return travelRouteOD.indexOf(Number(d3.select(this).attr('index'))) === -1 })\n        .each(function () {\n          d3.select(this).select('circle').style('stroke-opacity', 0.25)\n        })\n    },\n    highlightTravelRouteSubs: function (travelRouteSubs) {\n      this.d3el.select('.SubMapTiling').selectAll('.SubMapGrids')\n        .each(function () {\n          let thisGrid = d3.select(this)\n          if (travelRouteSubs.indexOf(Number(thisGrid.attr('index'))) > -1) {\n            thisGrid.classed('gridClicked', true)\n          }\n        })\n    },\n    resetTravelRouteSubs: function () {\n      this.d3el.select('.SubMapTiling').selectAll('.SubMapGrids').classed('gridClicked', false)\n    },\n    unselectRoute: function () {\n      this.d3el.select('.SubMapTiling').selectAll('.landRoute').classed('routeUnselected', false)\n      this.d3el.select('.SubMapTiling').selectAll('.seaRoute').classed('routeUnselected', false)\n      this.d3el.select('.SubMapTiling').selectAll('.hightlightLandRoute').remove()\n    },\n    cancelSubMapClustersEventBinding: function () {\n      const self = this\n      if (this.subMapClustersEvent === null) {\n        let events = ['mouseover', 'mouseout', 'click', 'dblclick']\n        this.subMapClustersEvent = {}\n        for (let i = 0; i < events.length; i++) {\n          this.subMapClustersEvent[events[i]] = {}\n        }\n        this.d3el.select('.SubMapTiling')\n          .selectAll('.SubMapClusters').each(function () {\n            for (let i = 0; i < events.length; i++) {\n              self.subMapClustersEvent[events[i]][d3.select(this).attr('clsID')] = d3.select(this).on(`${events[i]}`)\n            }\n          })\n      }\n      this.d3el.select('.SubMapTiling')\n        .selectAll('.SubMapClusters')\n        .on('mouseover', null)\n        .on('mouseout', null)\n        .on('click', null)\n        .on('dblclick', null)\n    },\n    bindSubMapClustersEvent: function () {\n      const interactions = this.interactions\n      const self = this\n      let events = ['mouseover', 'mouseout', 'click', 'dblclick']\n      this.d3el.select('.SubMapTiling')\n        .selectAll('.SubMapClusters')\n        .each(function () {\n          let thisClsID = d3.select(this).attr('clsID')\n          for (let i = 0; i < events.length; i++) {\n            d3.select(this).on(`${events[i]}`, self.subMapClustersEvent[`${events[i]}`][thisClsID])\n          }\n        })\n    },\n    recoverElemOrder: function () {\n      this.d3el.select('.SubMapTiling').selectAll('.SubMapClusters').raise()\n      this.d3el.select('.SubMapTiling').selectAll('.mapLandRoute').raise()\n      this.d3el.select('.SubMapTiling').selectAll('.mapCaps').raise()\n    },\n    changeElemOrder: function () {\n      this.d3el.select('.SubMapTiling').selectAll('.SubMapGrids').raise()\n      this.d3el.select('.SubMapTiling').selectAll('.mapLandRoute').raise()\n      this.d3el.select('.SubMapTiling').selectAll('.mapCaps').raise()\n    },\n    updateView: function (coord, sub) {\n      this.resetSubList()\n      this.d3el.select('.SubMapTiling').select('.travelIcon')\n        .attr('transform', `translate(${[\n          coord.x - this.travelIconSizeDiff.width,\n          coord.y - this.travelIconSizeDiff.height\n        ]})scale(${this.travelIconScale})`)\n      this.updateUpdateSubList({\n        path2This: undefined,\n        subIds: [Number(sub)],\n        type: 'mouseover'\n      })\n    },\n    resetSubList: function () {\n      d3.select('#subList').select('#subListSvg').selectAll('.listItemG').each(function () {\n        let item = d3.select(this)\n        if (!item.classed('listItemClicked')) {\n          item.classed('listItemHovered', false)\n          item.classed('listItemHoverDisabled', false)\n          item.select('.subSelected').style('opacity', 0)\n        }\n      })\n    },\n    resetCapsOpacity: function () {\n      let mapG  = this.d3el.select('.SubMapTiling').select('.mapCaps')\n      mapG.selectAll('.nationalCaps')\n        .each(function () {\n          d3.select(this).selectAll('circle').each(function (p, idx) {\n            if (idx === 0) {\n              d3.select(this).style('stroke-opacity', 1)\n            } else if (idx === 1) {\n              d3.select(this).style('fill-opacity', 1)\n            }\n          })\n        })\n      mapG.selectAll('.provincialCaps')\n        .each(function () {\n          d3.select(this).select('circle').style('stroke-opacity', 1)\n        })\n    }\n  }\n}\n\n// basic\nlet bTimer = {}\n\nfunction bScale (v_scales, v_data) {\n  return [v_scales.x(v_data[0]), v_scales.y(v_data[1])]\n}\n\nfunction bTimerObj (v_name, v_time, v_func) {\n  return {\n    start: new Date(),\n    past: 0,\n    duration: v_time,\n    func: v_func,\n    finished: false,\n    timer: setTimeout(() => {\n      v_func()\n      bTimer[v_name] = null\n    }, v_time)\n  }\n}\n\nfunction bDelay (v_name, v_time, v_func) {\n  let t_timeObj = bTimer[v_name]\n  if (t_timeObj == null) {\n    bTimer[v_name] = bTimerObj(v_name, v_time, v_func)\n  } else {\n    if (t_timeObj.finished) {\n      clearTimeout(t_timeObj.timer)\n      t_timeObj = null\n    }\n    let t_obj = bTimer[v_name]\n    t_obj.past = new Date() - t_obj.start\n    if (t_obj.past >= t_obj.duration) {\n      v_func()\n      t_obj.finished = true\n      clearTimeout(t_obj.timer)\n      bTimer[v_name] = null\n    } else {\n      t_obj.start = new Date()\n      t_obj.func = v_func\n    }\n  }\n}\n\nfunction bClearDelay (v_name) {\n  let t_timeObj = bTimer[v_name]\n  if (t_timeObj != null) {\n    clearTimeout(t_timeObj.timer)\n    t_timeObj = null\n  }\n}\n\nfunction bGetMeanVector (v_arr, v_isColVec) {\n  let t_arr = v_isColVec ? v_arr : numeric.transpose(v_arr),\n    t_dim = numeric.dim(t_arr),\n    t_mean = new Array(t_dim[0]),\n    t_num = t_dim[1]\n  for (let i = 0; i < t_arr.length; i++) {\n    t_mean[i] = numeric.sum(t_arr[i]) / t_num\n  }\n  return t_mean\n}\n\nfunction bGetDistance (v_a, v_b) {\n  return numeric.norm2(numeric.sub(v_a, v_b))\n}\n\n// basicView\nfunction bvShowOnTop (v_target, v_container) {\n  $(v_container).append($(v_target))\n}\n</script>\n\n<style lang=\"less\">\n@height: 100%;\n@width: 100%;\n@map-height: 100%;\n@map-width: 100%;\n@panel-height: 100%;\n@panel-width: 100% - @map-width;\n\n@Pointer: pointer;\n@FillDark: #000;\n@FillDeep: #666;\n@FillMedian: #999;\n@FillLight: #ccc;\n@StrokeThick: 2.5px;\n@StrokeThin: 1.5px;\n\n#subMap {\n  height: @height;\n  width: @width;\n}\n\n#map {\n  height: @map-height;\n  width: @map-width;\n}\n\n// #mapPanelContainer {\n//   position: absolute;\n//   left: @map-width;\n//   top: 0px;\n//   height: @panel-height;\n//   width: @panel-width;\n// }\n\n.SubMapTilingFrame {\n  fill: white;\n  visibility: hidden;\n}\n\n.SubMapModel circle{\n\t//fill: @FillDeep;\n\topacity: 0.3;\n\tstroke: none;\n\tcursor: @Pointer;\n}\n\n.SubMapGrid path.ring{\n\tfill: @FillMedian;\n\tstroke: none;\n\tcursor: @Pointer;\n}\n\n.SubMapGrid path.cell{\n\tfill: @FillLight;\n\tstroke: none;\n\tcursor: @Pointer;\n}\n\n.SubMapGrid circle, .SubMapGrid path.frame{\n\tstroke: @FillDeep;\n\tstroke-width: @StrokeThick;\n\tfill: none;\n\tcursor: @Pointer;\n}\n\n.SubMapGrid path.frame.light{\n\tstroke:@FillLight;\n\tstroke-width: 0.8;\n}\n\n.SubMapGrid line.weights{\n\tstroke: @FillDeep;\n\tstroke-width: @StrokeThin;\n\tfill: none;\n\tcursor: @Pointer;\n}\n\n.SubMapTriangles path{\n\tstroke: @FillDeep;\n\tstroke-width: @StrokeThin;\n\tfill: none;\n}\n\n.SubMapTestCols circle{\n\tstroke: none;\n\tfill: @FillDeep;\n}\n\n.SubMapGrids{\n\tcursor: pointer;\n}\n\n.SubMapGrids.empty{\n\tcursor: move;\n\topacity: 0.0;\n}\n\n.SubMapGrids.empty path{\n\tstroke: none;\n\topacity: 0.2;\n}\n\n.SubMapGrids.gridUnhovered {\n  opacity: 0.2;\n}\n\n.SubMapGrids.travelUnselected {\n  opacity: 0.2;\n}\n\n.SubMapGrids.gridClicked {\n  opacity: 1 !important;\n}\n\n.SubMapGrids.pinned path{\n\tstroke: #000;\n\tstroke-width: 0.6px;\n}\n\n.SubMapGrids line, .SubOldGrids line{\n\tstroke: #000;\n\tstroke-linecap: round;\n\topacity: 0.5;\n}\n\n.empty.SubMapGrids line{\n\tstroke: #555;\n\tstroke-width: 0.5;\n\topacity: 0.1;\n}\n\n.SubMapGrids path.frame, .SubOldGrids path.frame{\n\tfill: none;\n}\n\n.subGlyph{\n\tfill: @FillDeep;\n\tstroke: @FillDeep;\n}\n\n.subGlyph.empty{\n\tfill: none;\n\tstroke: @FillDeep;\n}\n\n.subEdge path{\n\tstroke: none;\n}\n\n.subEdge line{\n\tstroke: @FillDeep;\n}\n\n.SubMapDim path.frame{\n\tstroke:@FillLight;\n\tstroke-width: @StrokeThin;\n\tfill: none;\n}\n\n.SubMapDim path.bar{\n\tstroke:@FillDeep;\n\tstroke-width: @StrokeThin;\n\tfill: @FillMedian;\n}\n\n.SubMapDim.active path.bar{\n\tstroke-width: @StrokeThick;\n}\n\n.SubMapDim{\n\tcursor: pointer;\n\topacity: 0.6;\n}\n\n.SubMapDim.active, .SubMapDim:hover{\n\topacity: 1.0;\n}\n\n.SubMapDim circle{\n\tstroke: @FillLight;\n\tstroke-width: @StrokeThin;\n\tcursor: pointer;\n}\n\n.SubMapDim circle.On{\n\tfill: @FillMedian;\n}\n\n.SubMapDim circle.Off{\n\tfill: #fff;\n}\n\n.SubMapDim circle.active{\n\tstroke: @FillDeep;\n\tstroke-width: @StrokeThick;\n}\n\n.SubMapClusters line{\n\tstroke-width: @StrokeThin;\n\tstroke-linecap: round;\n}\n\n.SubMapClusters.pinned line{\n\tstroke-width: @StrokeThick;\n}\n\n.SubMapClusters line.chosen{\n\tstroke-width: @StrokeThick;\n}\n\n.SubMapClusters.Outliers path{\n\tstroke: none;\n}\n\n.SubMapClusters path{\n\tfill: rgb(255,255,255);\n\tstroke: none;\n\tcursor: pointer;\n\tstroke-linecap: round;\n}\n\n.SubMapClusters.Outliers path{\n\tstroke: none;\n}\n\n.dimFan{\n\tdisplay: none;\n}\n\n.dimFan.visible{\n\tdisplay: block\n}\n\n.SubMapClusters{\n\tdisplay: none;\n}\n\n.SubMapClusters.visible{\n\tdisplay: block;\n}\n\n.SubMapSShotRing{\n\tfill: none;\n\tstroke: @FillMedian;\n\tstroke-width: @StrokeThick;\n}\n\n.SubMapSShot{\n\tstroke: @FillMedian;\n\tstroke-width: @StrokeThin;\n}\n\n.SubMapSShot .SubMapSSAnchor{\n\tstroke: none;\n\tfill: @FillMedian;\n}\n\n.SubMapSShot.chosen .SubMapSSAnchor{\n\tfill: @FillDark;\n}\n\n.SubMapSShot .SubMapSnapshot{\n\tcursor: pointer;\n\tstroke: @FillMedian;\n\tstroke-width: @StrokeThin;\n}\n\n.SubMapSShot.chosen .SubMapSnapshot{\n\tstroke: @FillDark;\n\tstroke-width: @StrokeThick;\n}\n\n.SubMapTiling .landRoute,\n.SubMapTiling .hightlightLandRoute {\n  fill: none;\n  stroke: rgb(90, 90, 90);\n  stroke-width: @StrokeThin;\n}\n\n.SubMapTiling .seaRoute {\n  fill: none;\n  stroke: rgb(90, 90, 90);\n  stroke-width: @StrokeThin * 0.67;\n  stroke-dasharray: 4;\n  stroke-dashoffset: 4;\n}\n\n.SubMapTiling .routeUnselected {\n  stroke-opacity: 0.25;\n}\n\n.SubMapTiling .mapCaps {\n  cursor: pointer;\n}\n\n.SubMapTiling .travelIcon path {\n  fill: rgb(96, 148, 239);\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/SubMap/index.vue","module.exports = \"data:image/png;base64,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\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/stripe.png\n// module id = QJJ7\n// module chunks = 1","<template>\n  <div id=\"subProj\">\n    <div id=\"subProjSvgContainer\"></div>\n    <div id=\"switchBtn\">\n      <!-- <el-button size=\"mini\" @click=\"changeShowType\">Projection</el-button> -->\n      <el-switch v-model=\"switchVal\" active-color=\"#ddd\" inactive-color=\"#ddd\" active-text=\"Stability\" inactive-text=\"Projection\" @change=\"changeShowType\"></el-switch>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nconst numeric = require('numeric')\nexport default {\n  name: 'SubProj',\n  data() {\n    return {\n      dimDominatingThreshold: {\n        browse: {\n          low: 0.1,\n          high: 0.9\n        },\n        airTravel: {\n          low: 0.2,\n          high: 0.8\n        },\n        groundTravel: {\n          low: 0.2,\n          high: 0.8\n        }\n      },\n      showType: 'respective',\n      switchVal: false,\n      mode: 'browse',\n      groundTravelLegends: ['Origin', 'Current position', 'Destination'],\n      airTravelProjParam: 2,\n      btmLevelClsParam: 2,\n      maxProjNumOnScreen: 4,\n    }\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.setLayout()\n    })\n  },\n  computed: {\n    ...mapGetters([\n      // 'loadedData',\n      'updateMap',\n      'changeMode',\n      'drawProjection',\n      'changeProjInBrowseMode',\n      'changeSubProjOpacity'\n    ])\n  },\n  watch: {\n    // loadedData: function (val, oldVal) {\n    //   this.updateParams()\n    //   if (oldVal != null) {\n    //     this.redraw()\n    //   } else {\n    //     this.init()\n    //     this.drawCapsProj(this.svg.select('#capsProjG'), null, 'unified')\n    //     // this.drawCapsProj(this.svg.select('#nationalCapsRespectiveProjG'), 'respective')\n    //   }\n    // },\n    updateMap: function (val, oldVal) {\n      d3.select(this.$el).select('#switchBtn').style('visibility', 'visible')\n      this.updateParams()\n      this.map = val.map\n      this.leafNodes = Array.from(this.map.allLeaves.values())\n      if (val.resize) {\n        this.setLayout()\n      }\n      if (oldVal.map != null) {\n        // this.redraw()\n        this.clear()\n      }\n      this.init()\n      this.drawCapsProj(this.svg.select('#capsProjG'), null, 'respective')\n      // this.drawCapsProj(this.svg.select('#nationalCapsRespectiveProjG'), 'respective')\n    },\n    changeMode: function (val) {\n      this.mode = val.mode\n      d3.selectAll(this.d3el.select('#projSvg').node().children)\n        .style('visibility', 'hidden')\n      switch (val.mode) {\n        case 'browse':\n          let g = this.d3el.select('#projSvg').select('#capsProjG')\n          g.selectAll('*').remove()\n          this.drawCapsProj(g, null, this.showType)\n          g.style('visibility', 'visible')\n          break\n        case 'airTravel':\n          g = this.svg.select('#airTravelProjG')\n          g.select('#transitionProj').selectAll('*').remove()\n          g.style('visibility', 'visible')\n          break\n        case 'groundTravel':\n          g = this.svg.select('#groundTravelProjG')\n          g.select('#originProj').selectAll('*').remove()\n          g.select('#transitionProj').selectAll('*').remove()\n          g.select('#destinationProj').selectAll('*').remove()\n          this.updateProjParams(3)\n          g.style('visibility', 'visible')\n          break\n      }\n    },\n    drawProjection: function (val) {\n      if (this.mode === 'groundTravel') {\n        if (val.type === 'origin') {\n          // this.updateProjParams(3)\n          let g = this.svg.select('#groundTravelProjG')\n          g.select('#originProj').selectAll('*').remove()\n          g.select('#transitionProj').selectAll('*').remove()\n          g.select('#destinationProj').selectAll('*').remove()\n          this.drawProj(g.select('#originProj'), this.showType, val.subId, 'city', null)\n          this.originSubId = val.subId\n        } else if (val.type === 'destination') {\n          let g = this.svg.select('#groundTravelProjG')\n          this.drawProj(g.select('#transitionProj'), this.showType, this.originSubId, 'city', null)\n          this.drawProj(g.select('#destinationProj'), this.showType, val.subId, 'city', null)\n        } else if (val.type === 'transition') {\n          let g = this.svg.select('#groundTravelProjG').select('#transitionProj')\n          this.switchCityProj(g, this.showType, val.subId)\n        }\n      } else if (this.mode === 'airTravel') {\n        let g = this.svg.select('#airTravelProjG').select('#transitionProj')\n        if (val.type === 'origin') {\n          // this.updateProjParams(3)\n          this.updateProjParams(this.airTravelProjParam)\n          g.selectAll('*').remove()\n          this.drawProj(g, this.showType, val.subId, 'city', null)\n        } else if (val.type === 'transition') {\n          this.switchCityProj(g, this.showType, val.subId)\n        } else if (val.type === 'clear') {\n          g.selectAll('*').remove()\n        }\n      }\n    },\n    changeProjInBrowseMode: function (val) {\n      this.svg.select('#capsProjG').selectAll('*').remove()\n      this.drawCapsProj(this.svg.select('#capsProjG'), val.parentClsID, this.showType)\n    },\n    changeSubProjOpacity: function (val) {\n      if (val.action === 'mouseover') {\n        let clsID = val.clsID\n        if (clsID.includes('_')) {\n          clsID = clsID.replace('_', ',')\n        }\n        // this.svg.select('#capsProjG').selectAll('.capProj')\n        //   .filter(function () {\n        //     return d3.select(this).attr('clsID') !== String(clsID)\n        //   })\n        //   .style('opacity', 0.2)\n        \n        const projOrder = Array.from(this.svg.select('#capsProjG').node().children).findIndex(child => child.attributes.clsID.nodeValue === clsID)\n        if (projOrder + 1 > this.maxProjNumOnScreen) {\n          const existingProjNum = this.svg.select('#capsProjG').selectAll('.capProj')._groups[0].length\n          const maxScrollNum = existingProjNum - this.maxProjNumOnScreen\n          const scrollNum = projOrder - maxScrollNum > 0 ? maxScrollNum : projOrder\n          const scrollHeight = scrollNum * (this.projHeight + this.projYPadding)\n          d3.select('#subProjSvgContainer')\n            .transition()\n            .duration(1500)\n            .tween('uniquetweenname', scrollTopTween(scrollHeight))\n            .on('end', () => {\n              this.svg.select('#capsProjG').selectAll('.capProj')\n                .filter(function () {\n                  return d3.select(this).attr('clsID') !== String(clsID)\n                })\n                .style('opacity', 0.2)\n            })\n        } else {\n          this.svg.select('#capsProjG').selectAll('.capProj')\n            .filter(function () {\n              return d3.select(this).attr('clsID') !== String(clsID)\n            })\n            .style('opacity', 0.2)\n        }\n      } else {\n        this.svg.select('#capsProjG').selectAll('.capProj').style('opacity', 1)\n        d3.select('#subProjSvgContainer')\n            .transition()\n            .duration(1500)\n            .tween('uniquetweenname', scrollTopTween(0))\n      }\n\n      function scrollTopTween (scrollTop) {\n        return function () {\n          var i = d3.interpolateNumber(this.scrollTop, scrollTop)\n          return function (t) { this.scrollTop = i(t) }\n        }\n      }\n    }\n  },\n  methods: {\n    ...mapActions([\n      'updateUpdateSubList'\n    ]),\n    setLayout: function () {\n      let btnDiv = d3.select(this.$el).select('#switchBtn')\n      let btnSize = btnDiv.node().getBoundingClientRect()\n      let btnWidth = btnSize.width\n      // let btnHeight = btnSize.height\n      let btnHeight = parseFloat(d3.select(this.$el).select('#switchBtn').select('.el-switch').style('height'))\n      btnDiv\n        .style('width', btnWidth + 'px')\n        // .style('top', btnHeight / 3 + 'px')\n        .style('top', 0 + 'px')\n        .style('height', btnHeight + 'px')\n      // btnDiv.select('button')\n      //   .style('width', btnWidth + 'px')\n      //   .on('mouseover', function () {\n      //     d3.select(this)\n      //       .classed('btnHovered', true)\n      //       .classed('btnUnhovered', false)\n      //   })\n      //   .on('mouseout', function () {\n      //     d3.select(this)\n      //       .classed('btnHovered', false)\n      //       .classed('btnUnhovered', true)\n      //   })\n      // btnDiv.select('button').select('span')\n      //     .node().innerHTML = 'Stability'\n      // // btnDiv.style('visibility', 'visible')\n      \n      let height = this.$el.offsetHeight - btnHeight\n      d3.select(this.$el).select('#subProjSvgContainer')\n        .style('position', 'absolute')\n        .style('top', `${btnHeight}px`)\n        .style('left', '0px')\n        .style('height', `${height}px`)\n        .style('width', `${this.$el.offsetWidth}px`)\n    },\n    updateParams: function () {\n      this.switchBtnHeight = d3.select(this.$el).select('#switchBtn').node().getBoundingClientRect().height\n      this.width = this.$el.offsetWidth\n      // this.width = this.$el.offsetWidth - this.switchBtnHeight\n      this.height = this.$el.offsetHeight - this.switchBtnHeight\n\n      this.projYPadding = 2 * parseFloat(toPX('1rem'))\n\n      this.d3el = d3.select(this.$el).select('#subProjSvgContainer')\n      this.boundaryCircleStrokeWidth = this.width * 0.00675\n      this.circleR = this.width * 0.0075\n      if (Data.file === 'Pendigits') {\n        this.circleR = this.width * 0.003\n      } else if (Data.file === 'Cloud') {\n        this.circleR = this.width * 0.005\n      }\n      if (Data.file === 'Pendigits') {\n        this.dimDominatingThreshold.browse.low = 1 / 6\n        this.dimDominatingThreshold.browse.high = 5 / 6\n      }\n      this.dimCircleR = this.width * 0.03\n      this.dimPointR = {\n        backgroundDimPoint: {\n          '-1': this.dimCircleR * 0.55,\n          '0': this.dimCircleR * 0.45,\n          '1': this.dimCircleR * 0.7\n        },\n        midgroundDimPoint: {\n          '-1': this.dimCircleR * 0.55,\n          '0': this.dimCircleR * 0.45,\n          '1': this.dimCircleR * 0.7\n        },\n        foregroundDimPoint: {\n          '-1': this.dimCircleR * 0.55,\n          '0': this.dimCircleR * 0.45,\n          '1': this.dimCircleR * 0.325\n        },\n      }\n      this.dimPointStrokeWidth = {\n        backgroundDimPoint: {\n          '-1': this.dimCircleR * 0.2,\n          '0': 0,\n          '1': this.dimCircleR * 0.2\n        },\n        midgroundDimPoint: {\n          '-1': this.dimCircleR * 0.2,\n          '0': 0,\n          '1': this.dimCircleR * 0.2\n        },\n        foregroundDimPoint: {\n          '-1': this.dimCircleR * 0.2,\n          '0': 0,\n          '1': 0\n        }\n      }\n\n      this.opcScale = {\n        'browse': d3.scaleLinear().range([0.1, 1]),\n        'airTravel': d3.scaleLinear()\n          .domain(d3.extent(Data.dataWeights.flat()))\n          .range([0.1, 1]),\n        'groundTravel': d3.scaleLinear().range([0.1, 1]).clamp(true)\n      }\n      let caps = Array.from(new Set(Data.nationalCaps.concat(Data.provincialCaps)))\n      this.opcScale['groundTravel'].domain(d3.extent(Data.dataWeights.filter((d, i) => caps.indexOf(i) !== -1).flat()))\n\n      this.opcScaleNew = d => {\n        let t = d * 20 - 10\n        return 1 / (Math.exp(-t) + 1)\n      }\n\n      // this.unifiedProj = Data.dataProjs[Data.subs.indexOf(new Array(Data.dims.length).fill(1).join(''))]\n      \n      this.unifiedProj = []\n      let dataNum = Data.dataProjs[0].length\n      let cellNum = Math.ceil(Math.sqrt(dataNum))\n      for (let i = 0; i < cellNum; i++) {\n        for (let j = 0; j < cellNum; j++) {\n          this.unifiedProj.push([\n            j * 1 / cellNum,\n            (cellNum - i - 1) * 1 / cellNum\n          ])\n        }\n      }\n      this.unifiedProj.splice(dataNum)\n\n      // let evenlyDistributedCircle = sunflower(Data.dataProjs[0].length, 2)\n      // let circleXscale = d3.scaleLinear()\n      //   .domain(d3.extent(evenlyDistributedCircle, d => d[0]))\n      //   .range([-Math.sqrt(2) * 0.125, 1 + Math.sqrt(2) * 0.125])\n      // let circleYscale = d3.scaleLinear()\n      //   .domain(d3.extent(evenlyDistributedCircle, d => d[1]))\n      //   .range([-Math.sqrt(2) * 0.125, 1 + Math.sqrt(2) * 0.125])\n      // this.unifiedProj = evenlyDistributedCircle.map(d => {\n      //   return [circleXscale(d[0]), circleYscale(d[1])]\n      // })\n\n      function sunflower (n, alpha) {\n        let coords = []\n        let b = Math.round(alpha * Math.sqrt(n)) // number of boundary points\n        let phi = (Math.sqrt(5) + 1) / 2 // golden ratio\n        for (let k = 1; k < n + 1; k++) {\n          let r = radius(k, n, b)\n          let theta = 2 * Math.PI * k / Math.pow(phi, 2)\n          coords.push([\n            r * Math.cos(theta),\n            r * Math.sin(theta)\n          ])\n        }\n        return coords\n      }\n\n      function radius (k, n, b) {\n        let r\n        if (k > n - b) {\n          r = 1 // put on the boundary\n        } else {\n          r = Math.sqrt(k - 1 / 2) / Math.sqrt(n - (b + 1) / 2) // apply square root\n        }\n        return r\n      }\n    },\n    init: function () {\n      this.svgProjWidthDiff = this.switchBtnHeight * 2\n      if (Data.file === 'Forestfires') {\n        this.svgProjWidthDiff = this.switchBtnHeight * 3.5\n      }\n      this.svg = this.d3el\n        .append('svg')\n        .attr('width', this.width)\n        .attr('height', this.height)\n        .append('g')\n        .attr('id', 'projSvg')\n      this.svg\n        .append('g')\n        .attr('id', 'capsProjG')\n      // this.svg\n      //   .append('g')\n      //   .attr('id', 'nationalCapsRespectiveProjG')\n      //   .style('visibility', 'hidden')\n      let groundTravelProjG = this.svg\n        .append('g')\n        .attr('id', 'groundTravelProjG')\n        .style('visibility', 'hidden')\n      let airTravelProjG = this.svg\n        .append('g')\n        .attr('id', 'airTravelProjG')\n        .style('visibility', 'hidden')\n      this.updateProjParams(3)\n      this.drawGroundTravelLegend(groundTravelProjG)\n      groundTravelProjG\n        .selectAll('.groundTravelProj')\n        .data([0, 1, 2])\n        .enter()\n        .append('g')\n        .attr('id', (d, i) => {\n          if (i === 0) {\n            return 'originProj'\n          } else if (i === 1) {\n            return 'transitionProj'\n          } else if (i === 2) {\n            return 'destinationProj'\n          }\n        })\n        .attr('transform', (d, i) => `translate(${this.svgProjWidthDiff / 2}, ${this.projHeight * i + this.projYPadding * (i + 1 / 2)})`)\n      airTravelProjG\n        .append('g')\n        .attr('id', 'transitionProj')\n        .attr('transform', `translate(${this.svgProjWidthDiff / 2}, ${this.projYPadding / 2})`)\n    },\n    changeShowType: function () {\n      const self = this\n      // d3.select(this.$el).select('#switchBtn').select('button').select('span')\n      //     .node().innerHTML = `${this.showType.charAt(0).toUpperCase() + this.showType.slice(1)}`\n      if (this.showType === 'unified') {\n        this.showType = 'respective'\n        // d3.select(this.$el).select('#switchBtn').select('button').select('span')\n        //   .node().innerHTML = 'Stability'\n        this.switchVal = false\n      } else if (this.showType === 'respective') {\n        this.showType = 'unified'\n        // d3.select(this.$el).select('#switchBtn').select('button').select('span')\n        //   .node().innerHTML = 'Projection'\n        this.switchVal = true\n      }\n      if (this.mode === 'browse') {\n        this.svg.select(`#capsProjG`).selectAll('.capProj')\n          .each(function (p, idx) {\n            let subId = Number(d3.select(this).attr('subId'))\n            let proj\n            if (self.showType === 'unified') {\n              proj = self.unifiedProj\n            } else if (self.showType === 'respective') {\n              proj = Data.dataProjs[subId]\n            }\n            d3.select(this).selectAll('.projPoints')\n              .data(proj)\n              .join('circle')\n              .transition()\n              .duration(600)\n              .attr('cx', d => self.projPointScale.x(d[0]))\n              .attr('cy', d => self.projPointScale.y(d[1]))\n          })\n      } else if (this.mode === 'groundTravel') {\n        let subMapTiling = d3.select('#subMap').select('.SubMapTiling')\n        subMapTiling.selectAll('.landRoute').classed('routeUnselected', false)\n        SubMapTiling.selectAll('.seaRoute').classed('routeUnselected', false)\n        subMapTiling.selectAll('.travelIcon').remove()\n        let grids = subMapTiling.selectAll('.SubMapGrids')\n        grids.classed('travelUnselected', false)\n          .classed('gridClicked', false)\n          .attr('cursor', 'pointer')\n          .attr('opacity', 1)\n          .on('mouseover', null)\n          .on('mouseout', null)\n          .on('click', null)\n        this.resetSubList()\n        this.resetCapsOpacity()\n        let caps = Data.nationalCaps.concat(Data.provincialCaps)\n        let capGrids = grids.filter(function () {\n          return caps.indexOf(Number(d3.select(this).attr('index'))) !== -1\n        })\n        let nonCapGrids = grids.filter(function () {\n          return caps.indexOf(Number(d3.select(this).attr('index'))) === -1\n        })\n        capGrids.classed('travelUnselected', false)\n        capGrids.classed('gridClicked', false)\n        nonCapGrids.attr('opacity', 0.2)\n        let g = this.svg.select('#groundTravelProjG')\n        g.select('#originProj').selectAll('*').remove()\n        g.select('#transitionProj').selectAll('*').remove()\n        g.select('#destinationProj').selectAll('*').remove()\n        this.updateUpdateSubList({\n          path2This: undefined,\n          subIds: caps,\n          type: 'changeShownItems'\n        })\n      } else if (this.mode === 'airTravel') {\n        let subMapTiling = d3.select('#subMap').select('.SubMapTiling')\n        subMapTiling.selectAll('.landRoute').classed('routeUnselected', false)\n        SubMapTiling.selectAll('.seaRoute').classed('routeUnselected', false)\n        subMapTiling.selectAll('.travelIcon').remove()\n        let grids = subMapTiling.selectAll('.SubMapGrids')\n        grids.classed('travelUnselected', false)\n          .classed('gridUnhovered', false)\n          .classed('gridClicked', false)\n          .attr('opacity', 1)\n        this.resetSubList()\n        this.svg.select('#airTravelProjG').select('#transitionProj').selectAll('*').remove()\n      }\n    },\n    redraw: function () {\n      this.clear()\n      this.drawCapsProj(this.svg.select('#capsProjG'), null, 'respective')\n      // this.drawCapsProj(this.svg.select('#nationalCapsRespectiveProjG'), 'respective')\n    },\n    clear: function () {\n      this.showType = 'respective'\n      this.mode = 'browse'\n      // d3.select(this.$el).select('#switchBtn').select('button').select('span')\n      //     .node().innerHTML = `Stability`\n      this.switchVal = false\n      d3.select(this.$el).select('#subProjSvgContainer').selectAll('*').remove()\n    },\n    drawCapsProj: function (g, parentClsID, showType) {\n      const self = this\n      const leafNodes = this.leafNodes\n      let capNum\n      let sortedIndices = []\n      let clsIDs = []\n      let unsortedSubIds = []\n      let sortedSubIds = []\n      if (parentClsID === null) { // national cap proj\n        capNum = Data.nationalCaps.length\n        unsortedSubIds = Data.nationalCaps\n        sortedIndices = getIndicesBySortingSubIds(unsortedSubIds)\n        for (let i = 0; i < sortedIndices.length; i++) {\n          clsIDs.push([sortedIndices[i]])\n          sortedSubIds.push(unsortedSubIds[sortedIndices[i]])\n        }\n        this.updateProjParams(capNum)\n      } else {\n        const parentSubtree = Data.subtree.findByIndex(parentClsID)\n        capNum = parentSubtree.children.length\n        if (capNum === 0) { // the bottom level cluster\n          capNum = 1\n          clsIDs.push(parentClsID)\n          sortedSubIds.push(parentSubtree.data.centerLeafName[0])\n          // this.updateProjParams(3)\n          this.updateProjParams(this.btmLevelClsParam)\n        } else {\n          // for (let i = 0; i < capNum; i++) {\n          //   let subId = parentSubtree.children[i].data.centerLeafName[0]\n          //   if (Data.nationalCaps.indexOf(subId) > -1) {\n          //     clsIDs.push(parentClsID.concat(i))\n          //     sortedSubIds.push(subId)\n          //   } else {\n          //     unsortedSubIds.push(subId)\n          //   }\n          // }\n          for (let i = 0; i < capNum; i++) {\n            let subId = parentSubtree.children[i].data.centerLeafName[0]\n            unsortedSubIds.push(subId)\n          }\n          sortedIndices = getIndicesBySortingSubIds(unsortedSubIds)\n          for (let i = 0; i < sortedIndices.length; i++) {\n            clsIDs.push(parentClsID.concat(sortedIndices[i]))\n            sortedSubIds.push(unsortedSubIds[sortedIndices[i]])\n          }\n          this.updateProjParams(capNum)\n        }\n      }\n\n      let allDataWeights = []\n      for (let i = 0; i < clsIDs.length; i++) {\n        let clsID = clsIDs[i]\n        const thisDataWeights = Data.subtree.findByIndex(clsID).data.dataWeights\n        allDataWeights.push(...thisDataWeights)\n      }\n      let allDataSimilarities = numeric.sub(1, allDataWeights)\n      this.opcScale[this.mode].domain(d3.extent(allDataSimilarities))\n      \n      // // for forestfires data, groundTravel mode\n      // this.opcScale[this.mode].domain([0, 0.8371428571428572])\n\n      // // for glass data, airTravel mode\n      // this.opcScale[this.mode].domain([0, 1])\n\n      g.selectAll(`.capProj`)\n        .data(sortedSubIds)\n        .enter()\n        .append('g')\n        .attr('class', `capProj`)\n        .attr('subId', d => d)\n        .attr('clsID', (d, i) => clsIDs[i])\n        .attr('transform', (d, i) => `translate(${this.svgProjWidthDiff / 2}, ${this.projHeight * i + this.projYPadding * (i + 1 / 2)})`)\n        .each(function (d, i) {\n          self.drawProj(d3.select(this), showType, d, 'cap', clsIDs[i])\n          // self.drawProj(d3.select(this), d, 'city', i)\n        })\n      \n      function getIndicesBySortingSubIds (subIds) {\n        let yCoords = []\n        for (let i = 0; i < subIds.length; i++) {\n          let subId = subIds[i]\n          let node = leafNodes.find(node => node.ID === subId)\n          yCoords.push(node.center.coordinates.y)\n        }\n        return getSortedIndices(yCoords)\n      }\n\n      function getSortedIndices (arr) {\n        return arr.map((val, ind) => { return { ind, val } })\n          .sort((a, b) => { return a.val > b.val ? 1 : a.val == b.val ? 0 : -1 })\n          .map(obj => obj.ind)\n      }\n    },\n    updateProjParams: function (num) {\n      let projNum = num > this.maxProjNumOnScreen ? this.maxProjNumOnScreen : num\n      // this.svgProjWidthDiff = this.switchBtnHeight * 1.3\n      this.projWidth = this.width - this.svgProjWidthDiff\n      this.projHeight = this.height / projNum - this.projYPadding\n\n      this.updateSvgHeight(num)\n\n      this.projSize = Math.min(this.projHeight, this.projWidth)\n      this.boundaryCircle = {\n        r: this.projSize * 0.95 / 2,\n        cx: this.projWidth / 2,\n        cy: this.projHeight / 2\n      }\n      this.boundaryCircleOffset = {\n        x: this.projWidth / 2 - this.boundaryCircle.r,\n        y: this.projHeight / 2 - this.boundaryCircle.r\n      }\n      // this.projOffset = Math.min(this.boundaryCircleOffset.x, this.boundaryCircleOffset.y) * 0.5\n      // this.projOffset = 0\n      this.projOffset = this.dimCircleR * 0.45\n      this.projPointScale = {\n        x: d3.scaleLinear()\n          .domain([0, 1])\n          .range([\n            this.boundaryCircleOffset.x + this.projOffset + (1 - Math.sqrt(2) / 2) * this.boundaryCircle.r,\n            this.boundaryCircleOffset.x + this.boundaryCircle.r * 2 - this.projOffset - (1 - Math.sqrt(2) / 2) * this.boundaryCircle.r\n          ]),\n        y: d3.scaleLinear()\n          .domain([1, 0])\n          .range([\n            this.boundaryCircleOffset.y + this.projOffset + (1 - Math.sqrt(2) / 2) * this.boundaryCircle.r,\n            this.boundaryCircleOffset.y + this.boundaryCircle.r * 2 - this.projOffset - this.projOffset - (1 - Math.sqrt(2) / 2) * this.boundaryCircle.r\n          ])\n      }\n      \n      // this.projPointOpacityScale = d3.scaleLinear()\n      //   .domain([0.9, 0.1])\n      //   .range([0.1, 0.9])\n      //   .clamp(true)\n\n      // let opacityScale = {\n      //   low: d3.scaleLinear()\n      //     .domain([0, 0.3])\n      //     .range([0, 0.15]),\n      //   middle: d3.scaleLinear()\n      //     .domain([0.3, 0.7])\n      //     .range([0.4, 0.6]),\n      //   high: d3.scaleLinear()\n      //     .domain([0.7, 1])\n      //     .range([0.85, 1]),\n      // }\n      // this.projPointOpacityScale = similarity => {\n      //   if (similarity < 0.3) {\n      //     return opacityScale.low(similarity)\n      //   } else if (similarity < 0.7) {\n      //     return opacityScale.middle(similarity)\n      //   } else {\n      //     return opacityScale.high(similarity)\n      //   }\n      // }\n      \n      this.dimCircleCoords = []\n      for (let i = 0; i < Data.dims.length; i++) {\n        this.dimCircleCoords.push([\n          this.projWidth / 2 + this.boundaryCircle.r * Math.sin(Math.PI * 2 / Data.dims.length * i),\n          this.projHeight / 2 - this.boundaryCircle.r * Math.cos(Math.PI * 2 / Data.dims.length * i)\n        ])\n      }\n    },\n    updateSvgHeight: function (num) {\n      let height = num > this.maxProjNumOnScreen ? (this.projHeight + this.projYPadding) * num : this.height\n      this.d3el.select('svg')\n        .attr('height', height)\n    },\n    drawProj: function (g, showType, subId, type, clsID) {\n      const self = this\n      let proj\n      if (showType === 'unified') {\n        proj = this.unifiedProj\n      } else if (showType === 'respective') {\n        proj = Data.dataProjs[subId]\n      }\n      // let proj = Data.dataProjs[subId]\n      let color = `rgb(${[\n        ~~(255 * Data.colors[subId][0]),\n        ~~(255 * Data.colors[subId][1]),\n        ~~(255 * Data.colors[subId][2])\n      ]})`\n      if (Data.file === 'Pendigits' && subId === 30) {\n        color = 'rgb(5, 250, 120)'\n      }\n      let dataWeights\n      let dimWeights\n      let dimDominatingFlag\n      if (type === 'cap') {\n        const thisSubtreeData = Data.subtree.findByIndex(clsID).data\n        dataWeights = thisSubtreeData.dataWeights\n        dimWeights = thisSubtreeData.dimCounts\n        dimDominatingFlag = this.checkDimDominating(dimWeights, thisSubtreeData.aggrNum)\n      } else if (type === 'city') {\n        dataWeights = Data.dataWeights[subId]\n        // dimWeights = Data.dimWeights[subId]\n        // dimDominatingFlag = this.checkDimDominating(dimWeights, Data.subKNN[0].length)\n        dimDominatingFlag = []\n        for (let i = 0; i < Data.subs[subId].length; i++) {\n          if (Data.subs[subId][i] === '0') {\n            dimDominatingFlag.push(-1)\n          } else {\n            dimDominatingFlag.push(1)\n          }\n        }\n      }\n      let dataSimilarities = numeric.sub(1, dataWeights)\n      // this.opcScale.domain(d3.extent(dataSimilarities))\n\n      g.append('circle')\n        .attr('class', 'boundaryCircle')\n        .attr('cx', this.boundaryCircle.cx)\n        .attr('cy', this.boundaryCircle.cy)\n        .attr('r', this.boundaryCircle.r)\n        .style('stroke-width', this.boundaryCircleStrokeWidth)\n        .style('stroke', color)\n        .style('fill', 'white')\n      g.selectAll('.dimPointsG')\n        .data(this.dimCircleCoords)\n        .enter()\n        .append('g')\n        .attr('class', 'dimPointsG')\n        .attr('transform', d => `translate(${d})`)\n        .each(drawDimPoint)\n      g.append('g')\n        .attr('class', 'projPointsG')\n        .selectAll('.projPoints')\n        .data(proj)\n        .enter()\n        .append('circle')\n        .attr('class', 'projPoints')\n        .attr('cx', d => this.projPointScale.x(d[0]))\n        .attr('cy', d => this.projPointScale.y(d[1]))\n        .attr('r', this.circleR)\n        .attr('opc', (d, i) => {\n          const opc = this.opcScaleNew(0.9 - this.opcScale[this.mode](dataSimilarities[i])) * 0.95 + 0.05\n          return opc\n        })\n        .style('fill', color)\n        // .style('fill-opacity', (d, i) => this.projPointOpacityScale(dataSimilarities[i]))\n        .style('fill-opacity', (d, i) => {\n          const opc = this.opcScaleNew(0.9 - this.opcScale[this.mode](dataSimilarities[i])) * 0.95 + 0.05\n          return opc\n        })\n      \n      if (Data.file === 'Pendigits') {\n        g.select('.projPointsG')\n          .selectAll('.projPoints')\n          .attr('digit', (d, i) => Data.digit[i])\n      }\n      \n      // if (type === 'cap') {\n      //   drawSignificantDimText()\n      // }\n      const dimTextType = type === 'cap' ? 'significant' : 'involved'\n      drawDimText(dimTextType)\n\n      function drawDimText(textType) {\n        let dimTextG = g.append('g')\n          .attr('transform', `translate(${self.boundaryCircle.cx}, ${self.boundaryCircle.cy})`)\n        const dims = Data.dims\n        let dimLen = Data.dims.length\n        let circleCoords = []\n        let padding = parseFloat(toPX('0.6rem'))\n        let r = self.boundaryCircle.r\n        for (let i = 0; i < dimLen; i++) {\n          // let dist = i === 0 || i === dimLen / 2 ? 1.35 * padding + r : padding + r\n          let dist = padding + r\n          if (i === 0) {\n            dist = 1.3 * padding + r\n          } else if (dimLen % 2 === 0 && i === dimLen / 2) {\n            dist = 1.3 * padding + r\n          } else if (dimLen % 2 === 1 && (i === Math.ceil(dimLen / 2) - 1 || i === Math.ceil(dimLen / 2))) {\n            dist = 1.3 * padding + r\n          }\n          circleCoords.push([\n            dist * Math.sin(Math.PI * 2 / dimLen * i),\n            -dist * Math.cos(Math.PI * 2 / dimLen * i)\n          ])\n        }\n        dimTextG.selectAll('.legend_text')\n          .data(circleCoords)\n          .enter()\n          .append('text')\n          .attr('class', 'legend_text')\n          .attr('id', (d, i) => `legend_text${i}`)\n          .attr('x', d => d[0])\n          .attr('y', d => d[1])\n          .style('dominant-baseline', 'middle')\n          .style('font-size', '0.85rem')\n          .style('text-anchor', (d, i) => {\n            if (i === 0 || i === dimLen / 2) {\n              return 'middle'\n            } else if (i < dimLen / 2) {\n              return 'start'\n            } else {\n              return 'end'\n            }\n          })\n          .text((d, i) => dims[i])\n          .style('opacity', (d, i) => {\n            if (textType === 'significant') {\n              if (dimDominatingFlag[i] === 0) {\n                return 0\n              }\n            } else if (textType === 'involved') {\n              if (dimDominatingFlag[i] === -1) {\n                return 0\n              }\n            }\n          })\n        \n        // targeted modification: small font size\n        const smallFontsizeObj = {\n          'OD280/OD315 of diluted wines': 0.75,\n          'Nonflavanoid phenols': 0.8\n        }\n        const smallFontsizeDims = Object.keys(smallFontsizeObj)\n        dimTextG.selectAll('.legend_text').each(function (p, idx) {\n          if (smallFontsizeDims.indexOf(dims[idx]) > -1) {\n            d3.select(this).style('font-size', `${smallFontsizeObj[dims[idx]]}rem`)\n          }\n        })\n\n        if (Data.file === 'Pendigits') {\n          dimTextG.selectAll('.legend_text').style('font-size', '0.75rem')\n        }\n\n        // targeted modification: linebreak\n        const dy = 0.71\n        const linebreakObj = {\n          'OD280/OD315 of diluted wines': ['OD280/OD315', 'of diluted wines'],\n          'Alcalinity of ash': ['Alcalinity of', 'ash']\n        }\n        const linebreakDims = Object.keys(linebreakObj)\n        dimTextG.selectAll('.legend_text').each(function (p, idx) {\n          if (linebreakDims.indexOf(dims[idx]) > -1) {\n            const splitedDims = linebreakObj[dims[idx]]\n            const totalLineHeight = dy * (splitedDims.length - 1)\n            let lineHeight = []\n            for (let i = 0; i < splitedDims.length; i++) {\n              lineHeight.push(-totalLineHeight / 2 + dy * i)\n            }\n            const text = d3.select(this)\n            text.text(null)\n              .append('tspan')\n              .attr('x', p[0])\n              .attr('y', p[1])\n              .attr('dy', `${lineHeight[0]}rem`)\n              .text(splitedDims[0])\n            for (let i = 1; i < splitedDims.length; i++) {\n              text.append('tspan')\n                .attr('x', p[0])\n                .attr('y', p[1])\n                .attr('dy', `${lineHeight[i]}rem`)\n                .text(splitedDims[i])\n            }\n          }\n        })\n      }\n      \n      function drawDimPoint (p, idx) {\n        let drawDim = (vv_g, v_r, color, flag) => {\n          let vv_r = flag === 1 ? v_r * 0.3 : v_r * 0.45\n          let v_outStrokeWidth = v_r * 0.2\n          vv_g.append('circle')\n            .attr('class', 'backgroundDimPoint')\n            .attr('cx', 0)\n            .attr('cy', 0)\n            // .attr('r', () => flag === 1 ? vv_r * 2 : vv_r)\n            .attr('r', self.getDimPointR('backgroundDimPoint', flag))\n            .style('fill', '#fff')\n            .style('stroke', '#fff')\n            // .style('stroke-width', () => flag === 0 ? 0 : v_outStrokeWidth)\n            .style('stroke-width', self.getDimPointStrokeWidth('backgroundDimPoint', flag))\n          vv_g.append('circle')\n            .attr('class', 'midgroundDimPoint')\n            .attr('cx', 0)\n            .attr('cy', 0)\n            // .attr('r', () => flag === 1 ? vv_r * 2 : vv_r)\n            .attr('r', self.getDimPointR('midgroundDimPoint', flag))\n            .style('fill', '#fff')\n            .style('stroke', () => flag === 1 ? color : 'white')\n            // .style('stroke-width', () => flag === 0 ? 0 : v_outStrokeWidth)\n            .style('stroke-width', self.getDimPointStrokeWidth('midgroundDimPoint', flag))\n          vv_g.append('circle')\n            .attr('class', 'foregroundDimPoint')\n            .attr('cx', 0)\n            .attr('cy', 0)\n            // .attr('r', vv_r)\n            .attr('r', self.getDimPointR('foregroundDimPoint', flag))\n            .style('fill', () => flag === -1 ? 'white' : color)\n            // .style('fill-opacity', () => flag === 0 ? 0.6 : 1)\n            .style('stroke', () => flag === 1 ? 'none' : color)\n            // .style('stroke-width', () => flag === -1 ? v_outStrokeWidth : 0)\n            .style('stroke-width', self.getDimPointStrokeWidth('foregroundDimPoint', flag))\n        }\n\n        drawDim(d3.select(this), self.dimCircleR, color, dimDominatingFlag[idx])\n      }\n    },\n    checkDimDominating: function (dimWeights, dimCount) {\n      const self = this\n      let flag = new Array(dimWeights.length).fill(0)\n      let threshold = getThreshold(dimCount)\n      if (Data.file === 'Pendigits') {\n        for (let i = 0; i < dimWeights.length; i++) {\n          if (dimWeights[i] >= threshold.high) {\n            flag[i] = 1\n          } else if (dimWeights[i] <= threshold.low) {\n            flag[i] = -1\n          }\n        }\n      } else {\n        for (let i = 0; i < dimWeights.length; i++) {\n          if (dimWeights[i] > threshold.high) {\n            flag[i] = 1\n          } else if (dimWeights[i] < threshold.low) {\n            flag[i] = -1\n          }\n        }\n      }\n      return flag\n\n      function getThreshold (dimCount) {\n        let lowThreshold = self.dimDominatingThreshold[self.mode].low * dimCount\n        let highThreshold = self.dimDominatingThreshold[self.mode].high * dimCount\n        return {\n          low: lowThreshold < 1 ? 1 : lowThreshold,\n          high: highThreshold > dimCount - 1 ? dimCount - 1 : highThreshold\n        }\n      }\n    },\n    getDimPointR: function (pointType, dimDominatingFlag) {\n      return this.dimPointR[pointType][String(dimDominatingFlag)]\n    },\n    getDimPointStrokeWidth: function (pointType, dimDominatingFlag) {\n      return this.dimPointStrokeWidth[pointType][String(dimDominatingFlag)]\n    },\n    switchCityProj: function (g, showType, subId) {\n      let proj\n      if (showType === 'unified') {\n        proj = this.unifiedProj\n      } else if (showType === 'respective') {\n        proj = Data.dataProjs[subId]\n      }\n      let color = `rgb(${[\n        ~~(255 * Data.colors[subId][0]),\n        ~~(255 * Data.colors[subId][1]),\n        ~~(255 * Data.colors[subId][2])\n      ]})`\n      if (Data.file === 'Pendigits' && subId === 30) {\n        color = 'rgb(5, 250, 120)'\n      }\n      let dataWeights = Data.dataWeights[subId]\n      let dataSimilarities = numeric.sub(1, dataWeights)\n      // this.opcScale.domain(d3.extent(dataSimilarities))\n\n      // let dimWeights = Data.dimWeights[subId]\n      let dimDominatingFlag = []\n      // let dimDominatingFlag = this.checkDimDominating(dimWeights, Data.subKNN[0].length)\n      // let dimDominatingFlag = this.checkDimDominating(dimWeights, Data.dimWeightsExt)\n      for (let i = 0; i < Data.subs[subId].length; i++) {\n        if (Data.subs[subId][i] === '0') {\n          dimDominatingFlag.push(-1)\n        } else {\n          dimDominatingFlag.push(1)\n        }\n      }\n      let r = this.dimCircleR\n      let v_outStrokeWidth = r * 0.2\n      g.select('.boundaryCircle')\n        .transition()\n        .duration(600)\n        .style('stroke', color)\n      g.selectAll('.projPoints')\n        .data(proj)\n        .join('circle')\n        .transition()\n        .duration(600)\n        .attr('cx', d => this.projPointScale.x(d[0]))\n        .attr('cy', d => this.projPointScale.y(d[1]))\n        .style('fill', color)\n        // .style('fill-opacity', (d, i) => this.projPointOpacityScale(1 - dataWeights[i]))\n        .style('fill-opacity', (d, i) => {\n          let opc = this.opcScaleNew(0.9 - this.opcScale[this.mode](dataSimilarities[i])) * 0.95 + 0.05\n          return opc\n        })\n      g.selectAll('.backgroundDimPoint')\n        .transition()\n        .duration(600)\n        // .attr('r', (d, i) => dimDominatingFlag[i] === 1 ? r * 0.6 : r * 0.45)\n        .attr('r', (d, i) => this.getDimPointR('backgroundDimPoint', dimDominatingFlag[i]))\n        // .style('stroke-width', (d, i) => dimDominatingFlag[i] === 0 ? 0 : v_outStrokeWidth)\n        .style('stroke-width', (d, i) => this.getDimPointStrokeWidth('backgroundDimPoint', dimDominatingFlag[i]))\n      g.selectAll('.midgroundDimPoint')\n        .transition()\n        .duration(600)\n        // .attr('r', (d, i) => dimDominatingFlag[i] === 1 ? r * 0.6 : r * 0.45)\n        .attr('r', (d, i) => this.getDimPointR('midgroundDimPoint', dimDominatingFlag[i]))\n        .style('stroke', (d, i) => dimDominatingFlag[i] === 1 ? color : 'white')\n        // .style('stroke-width', (d, i) => dimDominatingFlag[i] === 0 ? 0 : v_outStrokeWidth)\n        .style('stroke-width', (d, i) => this.getDimPointStrokeWidth('midgroundDimPoint', dimDominatingFlag[i]))\n      g.selectAll('.foregroundDimPoint')\n        .transition()\n        .duration(600)\n        // .attr('r', (d, i) => dimDominatingFlag[i] === 1 ? r * 0.3 : r * 0.45)\n        .attr('r', (d, i) => this.getDimPointR('foregroundDimPoint', dimDominatingFlag[i]))\n        .style('fill', (d, i) => dimDominatingFlag[i] === -1 ? 'white' : color)\n        .style('stroke', (d, i) => dimDominatingFlag[i] === 1 ? 'none' : color)\n        // .style('stroke-width', (d, i) => dimDominatingFlag[i] === -1 ? v_outStrokeWidth : 0)\n        .style('stroke-width', (d, i) => this.getDimPointStrokeWidth('foregroundDimPoint', dimDominatingFlag[i]))\n      g.selectAll('.legend_text')\n        .transition()\n        .duration(600)\n        .style('opacity', (d, i) => {\n          if (dimDominatingFlag[i] === -1) {\n            return 0\n          } else {\n            return 1\n          }\n        })\n    },\n    drawGroundTravelLegend: function (g) {\n      let legendNum = this.groundTravelLegends.length\n      let x = this.width * 0.0125\n      let y = this.height / legendNum * 0.008\n      g.selectAll('.projLegend')\n        .data(this.groundTravelLegends)\n        .enter()\n        .append('text')\n        .attr('class', 'projLegend')\n        .attr('x', x)\n        .attr('y', (d, i) => this.height / legendNum * i + y)\n        .text(d => d)\n    },\n    resetSubList: function () {\n      d3.select('#subList').select('#subListSvg').selectAll('.listItemG').each(function () {\n        let item = d3.select(this)\n        if (!item.classed('listItemClicked')) {\n          item.classed('listItemHovered', false)\n          item.classed('listItemHoverDisabled', false)\n          item.select('.subSelected').style('opacity', 0)\n        }\n      })\n    },\n    resetCapsOpacity: function () {\n      let mapG  = d3.select('#subMap').select('.SubMapTiling').select('.mapCaps')\n      mapG.selectAll('.nationalCaps')\n        .each(function () {\n          d3.select(this).selectAll('circle').each(function (p, idx) {\n            if (idx === 0) {\n              d3.select(this).style('stroke-opacity', 1)\n            } else if (idx === 1) {\n              d3.select(this).style('fill-opacity', 1)\n            }\n          })\n        })\n      mapG.selectAll('.provincialCaps')\n        .each(function () {\n          d3.select(this).select('circle').style('stroke-opacity', 1)\n        })\n    }\n  }\n};\n</script>\n\n<style lang=\"less\">\n@height: 100%;\n@width: 100%;\n\n#subProj {\n  height: @height;\n  width: @width;\n\n  #subProjSvgContainer {\n    overflow-x: auto;\n  }\n\n  #switchBtn {\n    // float: right;\n    // width: 5.75rem;\n    width: 100%;\n    position: absolute;\n    top: 0;\n    right: 0;\n    visibility: hidden;\n\n    .el-switch {\n      right: 10px;\n      // right: 0px;\n      position: absolute;\n    }\n\n    .el-switch__label {\n      font-weight: normal;\n      // font-size: 0.85rem;\n      color: #ccc;\n    }\n\n    .el-switch__label * {\n      font-size: 0.85rem;\n    }\n\n    .el-switch__label.is-active {\n      color: #212529;\n    }\n\n    .el-button {\n      padding: 7px 12px;\n      font-size: 0.9rem;\n    }\n\n    .el-button:focus {\n      outline: none;\n    }\n\n    .btnHovered {\n      border-color: #409EFF !important;\n      background-color: #ecf5ff !important;\n      color: #409EFF !important;\n    }\n\n    .btnUnhovered {\n      border: 1px solid #DCDFE6 !important;\n      background-color: #fff !important;\n      color: #606266 !important;\n    }\n  }\n\n  .boundaryCircle {\n    stroke-opacity: 0.6;\n  }\n\n  .dimPointsG circle {\n    opacity: 0.6\n  }\n\n  .dimPointsG .backgroundDimPoint {\n    opacity: 1 !important;\n  }\n\n  .projLegend {\n    font-size: 0.9rem;\n    text-anchor: start;\n    dominant-baseline: hanging;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/SubProj.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"subProj\"}},[_c('div',{attrs:{\"id\":\"subProjSvgContainer\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"switchBtn\"}},[_c('el-switch',{attrs:{\"active-color\":\"#ddd\",\"inactive-color\":\"#ddd\",\"active-text\":\"Stability\",\"inactive-text\":\"Projection\"},on:{\"change\":_vm.changeShowType},model:{value:(_vm.switchVal),callback:function ($$v) {_vm.switchVal=$$v},expression:\"switchVal\"}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5a31db52\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/SubProj.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5a31db52\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SubProj.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SubProj.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SubProj.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5a31db52\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./SubProj.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/SubProj.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"main\">\n    <div id=\"toolbar\">\n      <b-navbar id=\"navbar\" toggleable=\"md\" type=\"dark\" variant=\"info\">\n        <!-- <b-navbar-toggle target=\"nav_collapse\"></b-navbar-toggle> -->\n        <b-navbar-brand href=\"#\">Subspace Map</b-navbar-brand>\n        <b-collapse is-nav id=\"nav_collapse\">\n          <b-nav-item-dropdown id=\"my-dropdown\" left>\n            <template slot=\"button-content\">Data</template>\n            <b-dropdown-item v-for=\"file in fileList\" :key=\"file\" @click=\"changeData(file)\">{{file}}</b-dropdown-item>\n          </b-nav-item-dropdown>\n        </b-collapse>\n        <!-- <b-navbar-nav id=\"popover-nav\">\n          <b-nav-item>\n            <b-button id=\"popover-target-1\">\n              Legends for dimension glyphs\n            </b-button>\n            <b-popover :show.sync=\"popoverActive\" id=\"legend-popover\" target=\"popover-target-1\" triggers=\"click\" placement=\"top\">\n              <div id=\"glyphDiv\">\n                <svg id=\"glyphSvg\"></svg>\n              </div>\n            </b-popover>\n          </b-nav-item>\n        </b-navbar-nav> -->\n      </b-navbar>\n    </div>\n    <section id=\"subListContainer\">\n      <SubList></SubList>\n    </section>\n    <section id=\"subMapContainer\">\n      <SubMap></SubMap>\n    </section>\n    <div id=\"dimGlyphContainer\">\n      <svg id=\"dimGlyphSvg\"></svg>\n    </div>\n    <section id=\"subProjContainer\">\n      <SubProj></SubProj>\n    </section>\n    <LoadingPage></LoadingPage>\n  </div>\n</template>\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport LoadingPage from '@/components/LoadingPage'\nimport SubList from '@/components/SubList'\nimport SubMap from '@/components/SubMap/index'\nimport SubProj from '@/components/SubProj'\nimport Color2D from '@/components/color/color2D.js'\n\n// const colormap = require('./color/ziegler.png')\nconst colormap = require('./color/bremm.png')\nconst stripe = require('./stripe.png')\nexport default {\n  name: \"Main\",\n  components: {\n    LoadingPage,\n    SubList,\n    SubMap,\n    SubProj\n  },\n  data() {\n    return {\n      popoverActive: false,\n      defaultFile: \"Forestfires\",\n      fileList: [\"Forestfires\", \"Glass\", \"Pendigits\",],\n      changeSubColor: false,\n\n      fanRRatio: 0.95,\n      circleRRatio: 1\n    };\n  },\n  mounted() {\n    this.$nextTick(() => {\n      const self = this\n      d3.select(this.$el)\n        .select(\"#my-dropdown\")\n        .select(\".nav-link.dropdown-toggle\")\n        .style(\"color\", \"white\")\n        .style(\"opacity\", 0.7)\n        .style('box-shadow', 'none')\n        .style('outline', 'none')\n        .on(\"mouseover\", function () {\n          d3.select(this).style(\"opacity\", 1)\n        })\n        .on(\"mouseout\", function () {\n          d3.select(this).style(\"opacity\", 0.7)\n        })\n      \n      // let popover = d3.select(this.$el).select('#popover-target-1')\n      // popover\n      //   .on('mouseover', function () {\n      //     d3.select(this)\n      //       .style('background-color', '#5a6268')\n      //       .style('border-color', '#5a6268')\n      //   })\n      //   .on('mouseout', function () {\n      //     if (!this.popoverActive) {\n      //       d3.select(this)\n      //         .style('background-color', '#888888')\n      //         .style('border-color', '#888888')\n      //     }\n      //   })\n      //   .on('click', function () {\n      //     if (this.popoverActive) {\n      //       d3.select(this)\n      //         .style('background-color', '#888888')\n      //         .style('border-color', '#888888')\n      //       d3.select('#legend-popover').style('opacity', 0)\n      //     } else {\n      //       d3.select(this)\n      //         .style('background-color', '#5a6268')\n      //         .style('border-color', '#5a6268')\n      //       setTimeout(() => {\n      //         self.drawGlyphLegends()\n      //         d3.select('#legend-popover').style('opacity', 1)\n      //       }, 150)\n      //     }\n      //     this.popoverActive = !this.popoverActive\n      //   })\n\n      this.loadData(this.defaultFile)\n\n      let resize = () => {\n        d3.select('#loading-page').raise().style('display', 'block')\n        setTimeout(() => {\n          this.updateResize()\n          this.drawDimGlyphLegends()\n        }, 10)\n      }\n\n      window.onresize = resize\n    })\n  },\n  methods: {\n    ...mapActions([\n      'updateResize'\n    ]),\n    changeData: function (file) {\n      d3.select('#loading-page').raise().style('display', 'block')\n      setTimeout(() => {\n        this.loadData(file)\n      }, 10)\n    },\n    loadData: function (file) {\n      let df = $.Deferred()\n      d3.json(`./../../static/data/${file}/result.json`).then(data => {\n        Data = data\n        Data.file = file\n        if (file === 'Pendigits-k25') {\n          Data.subtree.data.initProjection[0] = [0.48, 0.56]\n        }\n        Data.nationalCaps = []\n        Data.provincialCaps = []\n        for (let i = 0; i < Data.subtree.children.length; i++) {\n          let childI = Data.subtree.children[i]\n          Data.nationalCaps.push(childI.data.centerLeafName[0])\n          for (let j = 0; j < childI.children.length; j++) {\n            let childIJ = childI.children[j]\n            let provincialCap = childIJ.data.centerLeafName[0]\n            if (Data.nationalCaps.indexOf(provincialCap) === -1) {\n              Data.provincialCaps.push(provincialCap)\n            }\n          }\n        }\n\n        // let dimWeights = new Array(Data.subs.length)\n        // for (let i = 0; i < dimWeights.length; i++) {\n        //   let subI = Data.subs[i]\n        //   dimWeights[i] = new Array(Data.dims.length).fill(0)\n        //   let thisSubKNN = Data.subKNN[i]\n        //   for (let j = 0; j < thisSubKNN.length; j++) {\n        //     let subJ = Data.subs[thisSubKNN[j]]\n        //     for (let k = 0; k < subI.length; k++) {\n        //       if (subI[k] + subJ[k] === '11') {\n        //         dimWeights[i][k]++\n        //       }\n        //     }\n        //   }\n        // }\n\n        Data.dataWeightsExtent = d3.extent(Data.dataWeights.flat())\n\n        Data.subtree.findByIndex = function (v_clsIDs) {\n          if (v_clsIDs == null) {\n            return null\n          }\n          let t_subTree = this\n          for (let i = 0; i < v_clsIDs.length; i++) {\n            if (t_subTree.children.length == 0 && parseInt(v_clsIDs[i]) == 0) {\n              continue\n            } else {\n              t_subTree = t_subTree.children[v_clsIDs[i]]\n            }\n          }\n          return t_subTree\n        }\n\n        // change the subspace color encoding\n        // using the 2D colormap\n        if (this.changeSubColor) {\n          Data.colors = []\n          Color2D.ranges = {\n            x: d3.extent(Data.subProjs, d => d[0]),\n            y: d3.extent(Data.subProjs, d => d[1])\n          }\n          Color2D.setColormap(colormap, () => {\n            for (let i = 0; i < Data.subProjs.length; i++) {\n              let color = Color2D.getColor(Data.subProjs[i][0], Data.subProjs[i][1])\n              Data.colors.push(color.map(d => d / 255))\n            }\n            df.resolve()\n          })\n        } else {\n          df.resolve()\n        }\n      })\n\n      $.when(df).done(() => {\n        this.$store.state.loadedData = file\n        this.drawDimGlyphLegends()\n        console.log('Data:\\n', Data)\n      })\n    },\n\n    drawDimGlyphLegends: function () {\n      d3.select('#dimGlyphSvg').selectAll('*').remove()\n      let w = parseFloat(d3.select('#dimGlyphContainer').style('width'))\n      let h = parseFloat(d3.select('#dimGlyphContainer').style('height')) / 1.25\n      let size = Math.min(w, h) - toPX('0.9rem') * 2.5\n      let fanR = size / 2 * this.fanRRatio\n      let fanInR = fanR * 0.1\n      let fanOutR = fanR * 0.9\n      let circleR = size / 2 * this.circleRRatio\n      d3.select('#dimGlyphSvg')\n        .attr('width', w)\n        .attr('height', h)\n      let svg = d3.select('#dimGlyphSvg').append('g')\n\n      drawFan(fanInR, fanOutR)\n      drawCircle(circleR)\n      drawDimText(circleR)\n      drawLegend()\n\n      function drawFan (inR, outR) {\n        const dims = Data.dims\n        let g = svg.append('g')\n          .attr('transform', `translate(${w / 2}, ${h / 2})`)\n\n        let div = Math.PI * 2 / dims.length\n        let fanAngleRatio = 0.3\n        let dimArc = d3.arc()\n          .outerRadius(outR)\n          .innerRadius(inR)\n          .startAngle(-div * fanAngleRatio)\n          .endAngle(div * fanAngleRatio)\n        \n        for (let i = 0; i < dims.length; i++) {\n          let angle = 360 / dims.length * i\n          g.append('g')\n            .attr('class', 'legend_dimFan')\n            .attr('transform', 'rotate(' + angle + ')')\n            .attr('id', `legend_dimFan${i}`)\n            .append('path')\n              .attr('d', dimArc())\n              .attr('fill', '#252525')\n        }\n      }\n\n      function drawCircle (r) {\n        let g = svg.append('g')\n          .attr('transform', `translate(${w / 2}, ${h / 2})`)\n        let dimLen = Data.dims.length\n        let dimR = r * 0.05\n        let circleCoords = []\n        for (let i = 0; i < dimLen; i++) {\n          circleCoords.push([\n            r * Math.sin(Math.PI * 2/ dimLen * i),\n            -r * Math.cos(Math.PI * 2 / dimLen * i)\n          ])\n        }\n\n        g.append('circle')\n          .attr('class', 'legend_boundaryCircle')\n          .attr('cx', 0)\n          .attr('cy', 0)\n          .attr('r', r)\n          .style('stroke-width', r * 0.02)\n          .style('stroke', '#252525')\n          .style('fill', 'none')\n        g.selectAll('.legend_dimPointsG')\n          .data(circleCoords)\n          .enter()\n          .append('g')\n          .attr('class', 'legend_dimPointsG')\n          .attr('id', (d, i) => `legend_dimPointsG${i}`)\n          .attr('transform', d => `translate(${d})`)\n          .each(function () {\n            let dimG = d3.select(this)\n            dimG.append('circle')\n              .attr('cx', 0)\n              .attr('cy', 0)\n              .attr('r', dimR)\n              .attr('fill', '#252525')\n              // .attr('stroke', '#252525')\n              // .attr('stroke-width', dimR * 0.2)\n          })\n      }\n\n      function drawDimText (r) {\n        let g = svg.append('g')\n          .attr('transform', `translate(${w / 2}, ${h / 2})`)\n        const dims = Data.dims\n        let dimLen = Data.dims.length\n        let circleCoords = []\n        let padding = parseFloat(toPX('0.35rem'))\n        for (let i = 0; i < dimLen; i++) {\n          // let dist = i === 0 || i === dimLen / 2 ? 2 * padding + r : padding + r\n          let dist = padding + r\n          if (i === 0) {\n            dist = 1.75 * padding + r\n          } else if (dimLen % 2 === 0 && i === dimLen / 2) {\n            dist = 1.75 * padding + r\n          } else if (dimLen % 2 === 1 && (i === Math.ceil(dimLen / 2) - 1 || i === Math.ceil(dimLen / 2))) {\n            dist = 1.75 * padding + r\n          }\n          circleCoords.push([\n            dist * Math.sin(Math.PI * 2 / dimLen * i),\n            -dist * Math.cos(Math.PI * 2 / dimLen * i)\n          ])\n        }\n        g.selectAll('.legend_text')\n          .data(circleCoords)\n          .enter()\n          .append('text')\n          .attr('class', 'legend_text')\n          .attr('id', (d, i) => `legend_text${i}`)\n          .attr('x', d => d[0])\n          .attr('y', d => d[1])\n          .style('dominant-baseline', 'middle')\n          .style('text-anchor', (d, i) => {\n            if (i === 0 || i === dimLen / 2) {\n              return 'middle'\n            } else if (i < dimLen / 2) {\n              return 'start'\n            } else {\n              return 'end'\n            }\n          })\n          .style('font-size', '0.85rem')\n          .text((d, i) => dims[i])\n        \n        // targeted modification: linebreak\n        const dy = 0.71\n        const linebreakObj = {\n          'OD280/OD315 of diluted wines': ['OD280/OD315', 'of diluted wines'],\n          'Alcalinity of ash': ['Alcalinity of', 'ash']\n        }\n        const linebreakDims = Object.keys(linebreakObj)\n        g.selectAll('.legend_text').each(function (p, idx) {\n          if (linebreakDims.indexOf(dims[idx]) > -1) {\n            const splitedDims = linebreakObj[dims[idx]]\n            const totalLineHeight = dy * (splitedDims.length - 1)\n            let lineHeight = []\n            for (let i = 0; i < splitedDims.length; i++) {\n              lineHeight.push(-totalLineHeight / 2 + dy * i)\n            }\n            const text = d3.select(this)\n            text.text(null)\n              .append('tspan')\n              .attr('x', p[0])\n              .attr('y', p[1])\n              .attr('dy', `${lineHeight[0]}rem`)\n              .text(splitedDims[0])\n            for (let i = 1; i < splitedDims.length; i++) {\n              text.append('tspan')\n                .attr('x', p[0])\n                .attr('y', p[1])\n                .attr('dy', `${lineHeight[i]}rem`)\n                .text(splitedDims[i])\n            }\n          }\n        })\n      }\n\n      function drawLegend () {\n        let g = svg.append('g')\n          .attr('transform', `translate(0, ${h})`)\n        let rowH = parseFloat(toPX('1rem'))\n        let legend_fanR = rowH\n        let legend_fanInR = legend_fanR * 0.1\n        let legend_fanOutR = legend_fanR * 0.9\n        let div = Math.PI / 4\n        let fanAngleRatio = 0.3\n        let dimArc = d3.arc()\n          .outerRadius(legend_fanOutR)\n          .innerRadius(legend_fanInR)\n          .startAngle(-div * fanAngleRatio)\n          .endAngle(div * fanAngleRatio)\n        let dimR = rowH / 2 * 0.9\n        let stripeW = w / 5\n        let stripeTextX = stripeW + rowH / 6\n\n        d3.select('#dimGlyphSvg').attr('height', h + 3 * rowH)\n        const dimGlyphContainerH = parseFloat(d3.select('#dimGlyphSvg').style('height'))\n        const dimGlyphContainerTop = parseFloat(d3.select('#dimGlyphContainer').style('top'))\n        d3.select('#dimGlyphContainer').style('height', dimGlyphContainerH + 'px')\n        const viewH = parseFloat(d3.select('#subMapContainer').style('height'))\n        d3.select('#subProjContainer')\n          .style('top', dimGlyphContainerTop + dimGlyphContainerH + 'px')\n          .style('height', viewH - dimGlyphContainerH + 'px')\n        \n        let col1X = w / 20\n        let col2X = w / 2\n        let row1 = g.append('g')\n        let row1Col1 = row1.append('g')\n          .attr('transform', `translate(${col1X}, 0)`)\n        let row1Col2 = row1.append('g')\n          .attr('transform', `translate(${col2X}, 0)`)\n        row1Col1.append('g')\n          .attr('transform', `translate(${stripeW / 2}, ${rowH})rotate(45)`)\n          // .attr('transform', 'rotate(45)')\n          .append('path')\n            .attr('d', dimArc())\n            .attr('fill', '#252525')\n        row1Col1.append('text')\n          .attr('x', stripeTextX)\n          .attr('y', rowH / 2)\n          .style('dominant-baseline', 'middle')\n          .style('font-size', '0.85rem')\n          .text('Included')\n        row1Col2.append('circle')\n          .attr('cx', dimR)\n          .attr('cy', rowH / 2)\n          .attr('r', dimR * 0.7)\n          .attr('fill', 'white')\n          .attr('stroke', '#252525')\n          .attr('stroke-width', dimR * 0.15)\n        row1Col2.append('circle')\n          .attr('cx', dimR)\n          .attr('cy', rowH / 2)\n          .attr('r', dimR * 0.325)\n          .attr('fill', '#252525')\n        row1Col2.append('text')\n          .attr('x', dimR * 2)\n          .attr('y', rowH / 2)\n          .style('dominant-baseline', 'middle')\n          .style('font-size', '0.85rem')\n          .text('Commonly included')\n        \n        let row2 = g.append('g')\n          .attr('transform', `translate(0, ${rowH})`)\n        let row2Col1 = row2.append('g')\n          .attr('transform', `translate(${col1X}, 0)`)\n        let row2Col2 = row2.append('g')\n          .attr('transform', `translate(${col2X}, 0)`)\n        row2Col1.append('g')\n          .attr('transform', `translate(${stripeW / 2}, ${rowH})rotate(45)`)\n          // .attr('transform', 'rotate(45)')\n          .append('path')\n            .attr('d', dimArc())\n            .attr('fill', 'none')\n            .attr('stroke-width', legend_fanR / 15)\n            .attr('stroke', '#252525')\n        row2Col1.append('text')\n          .attr('x', stripeTextX)\n          .attr('y', rowH / 2)\n          .style('dominant-baseline', 'middle')\n          .style('font-size', '0.85rem')\n          .text('Excluded')\n        row2Col2.append('circle')\n          .attr('cx', dimR)\n          .attr('cy', rowH / 2)\n          .attr('r', dimR * 0.55)\n          .attr('fill', 'white')\n          .attr('stroke', '#252525')\n          .attr('stroke-width', dimR * 0.15)\n        row2Col2.append('text')\n          .attr('x', dimR * 2)\n          .attr('y', rowH / 2)\n          .style('dominant-baseline', 'middle')\n          .style('font-size', '0.85rem')\n          .text('Commonly excluded')\n        \n        let row3 = g.append('g')\n          .attr('transform', `translate(0, ${2 * rowH})`)\n        let row3Col1 = row3.append('g')\n          .attr('transform', `translate(${col1X}, 0)`)\n        let row3Col2 = row3.append('g')\n          .attr('transform', `translate(${col2X}, 0)`)\n        row3Col1.append('image')\n          .attr('href', stripe)\n          .attr('x', 0)\n          .attr('y', 0)\n          .attr('height', rowH * 0.9)\n          .attr('width', stripeW)\n        row3Col1.append('text')\n          .attr('x', stripeTextX)\n          .attr('y', rowH / 2)\n          .style('dominant-baseline', 'middle')\n          .style('font-size', '0.85rem')\n          .text('Stability')\n        row3Col2.append('circle')\n          .attr('cx', dimR)\n          .attr('cy', rowH / 2)\n          .attr('r', dimR * 0.45)\n          .attr('fill', '#252525')\n        row3Col2.append('text')\n          .attr('x', dimR * 2)\n          .attr('y', rowH / 2)\n          .style('dominant-baseline', 'middle')\n          .style('font-size', '0.85rem')\n          .text('Normal')\n      }\n    },\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"less\">\n@navbar-height: 40px;\n@view-height: ~\"calc(100% - @{navbar-height})\";\n// @view-height: ~\"calc(100% - @{navbar-height} - @{border-size})\";\n@border-size: 1px;\n@subList-raw-width: 20%;\n@subList-real-width: ~\"calc(@{subList-raw-width} - @{border-size})\";\n@subMap-raw-width: 60%;\n@subMap-real-width: ~\"calc(@{subMap-raw-width} - @{border-size})\";\n@subProj-left: @subList-raw-width + @subMap-raw-width;\n@subProj-width: 100% - @subProj-left;\n@dimGlyph-height: 24%;\n@subProj-top: ~\"calc(@{navbar-height} + @{dimGlyph-height})\";\n@subProj-height: ~\"calc(@{view-height} - @{dimGlyph-height})\";\n\n#main {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  border-width: 0 @border-size @border-size @border-size;\n  border-style: solid;\n  border-color: #cccccc;\n  box-sizing: border-box;\n}\n\n#navbar {\n  height: @navbar-height;\n  #my-dropdown:focus, #my-dropdown:active, .show {\n    -webkit-box-shadow: none !important;\n    box-shadow: none !important;\n    outline: none !important;\n  }\n\n  .btn-secondary {\n    background-color: #888888;\n    border-color: #888888;\n  }\n  // .btn-secondary:active, .btn-secondary.active {\n  //   background-color: #5a6268;\n  //   border-color: #5a6268;\n  // }\n\n  #popover-nav {\n    position: absolute;\n    right: 100% - @subProj-left;\n  }\n}\n\n#subListContainer {\n  position: absolute;\n  left: 0px;\n  top: @navbar-height;\n  height: @view-height;\n  width: @subList-real-width;\n  border-width: 0px @border-size 0px 0px;\n  border-style: solid;\n  border-color: #cccccc;\n  box-sizing: border-box;\n}\n\n#subMapContainer {\n  position: absolute;\n  left: @subList-raw-width;\n  top: @navbar-height;\n  height: @view-height;\n  width: @subMap-real-width;\n  border-width: 0px @border-size 0px 0px;\n  border-style: solid;\n  border-color: #cccccc;\n  box-sizing: border-box;\n}\n\n#dimGlyphContainer {\n  position: absolute;\n  left: @subProj-left;\n  // top: @navbar-height;\n  top: 43px;\n  height: @dimGlyph-height;\n  width: @subProj-width;\n}\n\n#subProjContainer {\n  position: absolute;\n  left: @subProj-left;\n  // top: @navbar-height;\n  top: @subProj-top;\n  // height: @view-height;\n  height: @subProj-height;\n  width: @subProj-width;\n}\n\n.bg-info {\n  background-color: #888888 !important;\n  padding-top: 0 !important;\n  padding-bottom: 0 !important;\n}\n\n.dropdown-menu {\n  padding-top: 0 !important;\n  padding-bottom: 0 !important;\n}\n\n.dropdown-menu-left {\n  padding-top: 0 !important;\n  padding-bottom: 0 !important;\n  font-size: 0.5em !important;\n}\n\n.navbar-text {\n  color: rgb(255, 255, 255);\n  margin-left: 30px;\n}\n\nli {\n  list-style-type: none;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Main.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"loading-page\"}},[_c('div',{staticClass:\"background\"}),_vm._v(\" \"),_c('div',{staticClass:\"loading-icon\"},[_c('span',[_c('i',{staticClass:\"fa fa-spinner fa-spin\",attrs:{\"aria-hidden\":\"true\"}})])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-792ef50e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/LoadingPage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-792ef50e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./LoadingPage.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./LoadingPage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./LoadingPage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-792ef50e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./LoadingPage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-792ef50e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/LoadingPage.vue\n// module id = null\n// module chunks = ","<template>\n  <!-- <div id=\"loading-page\" v-bind:class=\"{active: loadingFlag}\"> -->\n  <div id=\"loading-page\">\n    <div class=\"background\"></div>\n    <div class=\"loading-icon\">\n      <span>\n        <i class=\"fa fa-spinner fa-spin\" aria-hidden=\"true\"></i>\n      </span>\n    </div>\n  </div>\n</template>\n\n<script>\n  // const d3 = require('d3')\n  import { mapState } from 'vuex'\n\n  export default {\n    name: 'LoadingPage',\n    data () {\n      return {\n        // loadingFlag: true\n      }\n    },\n    mounted() {},\n    computed: {\n      // ...mapState(['loadingPage'])\n    },\n    watch: {}\n  }\n</script>\n\n<style scoped lang=\"less\">\n  #loading-page {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display: none;\n    z-index: 1500;\n    top: 0;\n    display: block;\n\n    .background{\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      background-color: #ccc;\n      opacity: 0.7;\n    }\n\n    .loading-icon{\n      margin: auto;\n      width: 3rem;\n      height: 3rem;\n      font-size: 3rem;\n      position: absolute;\n      top: 50%; left: 50%;\n      transform: translate(-50%,-50%);\n    }\n  }\n  // #loading-page.active{\n  //   display: block;\n  // }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/LoadingPage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"subMap\"}},[_c('div',{attrs:{\"id\":\"map\"}}),_vm._v(\" \"),_c('MapPanel')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-098e9ad6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/SubMap/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-098e9ad6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-098e9ad6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/SubMap/index.vue\n// module id = null\n// module chunks = ","function quickSort(left, right, a, key) {\n  if (left > right) return\n  var i = left\n  var j = right\n  var benchMark = a[i]\n  var temp\n  while (i != j) {\n    // j\n    while (a[j][key] >= benchMark[key] && i < j) j--\n    // i\n    while (a[i][key] <= benchMark[key] && i < j) i++\n    if (i < j) {\n      temp = a[i]\n      a[i] = a[j]\n      a[j] = temp\n    }\n  }\n\n  a[left] = a[i]\n  a[i] = benchMark\n  quickSort(left, i - 1, a, key)\n  quickSort(i + 1, right, a, key)\n}\n\nvar MakeSet = (function() {\n  let set = new Set()\n  return function(x) {\n    x.parent = x\n    x.rank = 0\n    if (!set.has(x)) set.add(x)\n    return set\n  }\n})()\n\n// Find \n// function Find(x) {\n//     if (x.parent != x)\n//         Find(x.parent);\n//     return x.parent;\n// }\n\nfunction Find(x) {\n  if (x.parent != x) x.parent = Find(x.parent)\n  return x.parent\n}\n\nfunction Union(u, v) {\n  let uRoot = Find(u)\n  let vRoot = Find(v)\n  //  u  v \n  if (uRoot == vRoot) return\n  //  u  v \n  //  uRoot  vRoot , uRoot  vRoot \n  if (uRoot.rank < vRoot.rank) uRoot.parent = vRoot\n  //  uRoot  vRoot , vRoot  uRoot \n  else if (uRoot.rank > vRoot.rank) vRoot.parent = uRoot\n  //\n  else {\n    vRoot.parent = uRoot\n    uRoot.rank = uRoot.rank + 1\n  }\n}\n\nfunction Kruskal(G) {\n  let A = [] //A\n  for (let x of G.V) {\n    MakeSet(x)\n  }\n  //G.E\n  for (let e of G.E) {\n    quickSort(0, G.E.length - 1, G.E, 'w')\n  }\n  for (let e of G.E) {\n    let u = G.V[G.refer.get(e.u)]\n    let v = G.V[G.refer.get(e.v)]\n    if (Find(u) != Find(v)) {\n      A.push(e)\n      Union(u, v)\n    }\n  }\n  return A\n}\n\nfunction Vertex() {\n  if (!(this instanceof Vertex)) return new Vertex()\n  this.edges = null //\n  this.id = null //\n  this.data = null //\n}\n\n// -\nfunction Edge() {\n  if (!(this instanceof Edge)) return new Edge()\n  this.index = null //\n  this.sibling = null\n  this.w = null //\n}\n\n// -G\nfunction Graph() {\n  if (!(this instanceof Graph)) return new Graph()\n  this.V = [] //\n  this.E = []\n  this.refer = new Map() // \n}\nGraph.prototype = {\n  constructor: Graph,\n  //\n  // \n  initVertex: function(vertexs) {\n    // id\n    for (let v of vertexs) {\n      let vertex = Vertex()\n      vertex.id = v.id\n      this.V.push(vertex)\n    }\n    // \n    for (let i in this.V) {\n      this.refer.set(this.V[i].id, i)\n    }\n  },\n  //  \n  initEdge: (function() {\n    //\n    function createLink(index, len, edges, refer) {\n      if (index >= len) return null\n      let edgeNode = Edge()\n      edgeNode.index = refer.get(edges[index].id) //  \n      edgeNode.w = edges[index].w //\n      edgeNode.sibling = createLink(++index, len, edges, refer) // \n      return edgeNode\n    }\n    return function(edges) {\n      for (let field in edges) {\n        let index = this.refer.get(field) // V \n        let vertex = this.V[index] //\n        vertex.edges = createLink(\n          0,\n          edges[field].length,\n          edges[field],\n          this.refer\n        )\n      }\n    }\n  })(),\n  storageEdge: function(edges) {\n    this.E = edges\n  }\n}\n\nexport {Graph, Kruskal}\n\n\n// WEBPACK FOOTER //\n// ./src/components/SubMap/libs/mst.js","import Graph from './graph.js'\nimport { Graph as MST, Kruskal } from './mst.js'\nimport { ShapeInfo, Intersection } from \"@/../node_modules/kld-intersections/dist/index-esm.js\"\nimport { saveAs } from 'file-saver'\n\nclass Route {\n  constructor (leafNodes, gridScales, data) {\n    const self = this\n\n    if (data === undefined) {\n      this.nearestSeaRoute = false\n      // sea route construction: capk_ccap-cap pair\n      this.kc = 3\n      // sea route construction: cap$k_s$boundary subspaces\n      this.ks = 10\n      this.leafNodes = leafNodes\n      this.gridScales = gridScales\n      this.cls = []\n      for (let i = 0; i < Data.subHierClusters.length; i++) {\n        if (Array.isArray(Data.subHierClusters[i])) {\n          this.cls.push([].concat(...Data.subHierClusters[i]))\n        }\n      }\n      this.distMat = Data.subDistMat\n      this.caps = []\n      for (let i = 0; i < Data.subtree.children.length; i++) {\n        let childI = Data.subtree.children[i]\n        this.caps.push([])\n        this.caps[i].push(childI.data.centerLeafName[0])\n        for (let j = 0; j < childI.children.length; j++) {\n          let childIJ = childI.children[j]\n          let cap = childIJ.data.centerLeafName[0]\n          this.caps[i].push(cap)\n        }\n      }\n      // this.initShapeInfo(gridScales)\n      this.initShapeInfo(gridScales, 0.0015)\n      this.init(gridScales)\n      this.saveRes()\n    } else {\n      for (const key in data) {\n        if (key === 'landSubCoords') { // Map structure\n          this[key] = new Map()\n          for (const item of data[key]) {\n            this[key].set(item[0], item[1])\n          }\n        } else {\n          this[key] = data[key]\n        }\n      }\n    }\n  }\n\n  initShapeInfo (gridScales, expansion = 0) {\n    let g = d3.select('#subMap').select('.SubMapTiling')\n    this.shapes = []\n    // first cluster shape\n    for (let i = 0; i < Data.nationalCaps.length; i++) {\n      let center = g.select(`.SubCls_${i}`).data()[0].center\n      let points = g.select(`.SubCls_${i}`).data()[0].paths[0].points\n      let path = getPathFromPoints(center, points, gridScales, expansion)\n      this.shapes.push(ShapeInfo.path(d3.line()(path)))\n    }\n    // then outlier shape\n    for (let i = 0; i < Data.subtree.leaves.length; i++) {\n      let leaf = Data.subtree.leaves[i]\n      let edges = Array.from(g.selectAll('.SubMapGrids').filter(function () {\n        return d3.select(this).attr('index') === String(leaf)\n      }).data()[0].edges._c.values())\n      let lines = getLinesFromEdges(edges, gridScales, expansion)\n      for (let i = 0; i < lines.length; i++) {\n        this.shapes.push(ShapeInfo.line(lines[i].flat()))\n      }\n    }\n\n    function getPathFromPoints (center, points, scales, expansion) {\n      let path = []\n      let xRangeDiff = scales.x.range()[1] - scales.x.range()[0]\n      let yRangeDiff = scales.y.range()[1] - scales.y.range()[0]\n      for (let i = 0; i < points.length; i++) {\n        let [origX, origY] = bScale(scales, [points[i].coordinates.x, points[i].coordinates.y])\n        let x = origX < center[0] ? (origX - xRangeDiff * expansion) : (origX + xRangeDiff * expansion)\n        let y = origY < center[1] ? (origY - yRangeDiff * expansion) : (origY + yRangeDiff * expansion)\n        path.push([x, y])\n      }\n      return path\n    }\n\n    function getLinesFromEdges (edges, scales, expansion) {\n      let lines = []\n      for (let i = 0; i < edges.length; i++) {\n        lines.push([\n          bScale(scales, [edges[i].start.coordinates.x, edges[i].start.coordinates.y]),\n          bScale(scales, [edges[i].end.coordinates.x, edges[i].end.coordinates.y])\n        ])\n      }\n      return lines\n    }\n  }\n\n  init (gridScales) {\n    this.harborIcon = 'M512 0C375.467 0 273.067 106.974 273.067 238.933a238.387 238.387 0 0 0 170.666 227.874V879.07c-63.488-11.264-128-37.547-180.77-86.699C191.078 725.47 136.67 618.974 136.67 443.597a68.267 68.267 0 1 0-136.67 0C0 648.602 69.086 798.31 169.984 892.245 270.882 986.25 398.541 1024 512 1024c113.732 0 241.323-38.23 342.153-132.437s169.71-243.917 169.71-447.966c4.438-95.232-140.834-95.232-136.396 0 0 174.285-54.614 280.917-126.498 348.16-52.839 49.288-117.283 75.776-180.702 87.176V467.081a238.524 238.524 0 0 0 170.666-228.148C750.933 106.973 648.533 0 512 0z m0 136.533a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8z'\n    this.harborIconScale = 0.005\n    this.initLandRoute(gridScales)\n    this.initBoundaryGraph()\n    this.initWaterRoute(gridScales)\n    // Add the land routes constructed by the harbor\n    this.addLandRoute(gridScales)\n    this.splitLandRoute()\n    this.combineLandRoute()\n    this.getLandSubCoords()\n  }\n\n  saveRes () {\n    const blob = new Blob([JSON.stringify(this)], {type: \"text/plain;charset=utf-8\"})\n    saveAs(blob, `route.json`)\n  }\n\n  initLandRoute (gridScales) {\n    this.landGraph = []\n    this.landRoute = []\n    this.landMST = []\n    this.landRouteCoords = []\n\n    for (let i = 0; i < this.cls.length; i++) {\n      let subCls = this.cls[i]\n      let graph = {}\n      for (let j = 0; j < subCls.length; j++) {\n        let sub = subCls[j]\n        let node = this.leafNodes.find(node => node.ID === sub)\n        let neighborPositions = Array.from(node.neighbors.values())\n        let neighborNodes = {}\n        for (let k = 0; k < neighborPositions.length; k++) {\n          let neighborNode = this.leafNodes.find(node => JSON.stringify(Object.values(node.position)) === JSON.stringify(neighborPositions[k]))\n          if (neighborNode !== undefined) {\n            neighborNodes[neighborNode.ID] = this.distMat[sub][neighborNode.ID]\n          }\n        }\n        graph[sub] = neighborNodes\n      }\n      this.landGraph.push(new Graph(graph))\n      let route = {}\n      for (let j = 0; j < this.caps[i].length; j++) {\n        for (let k = j + 1; k < this.caps[i].length; k++) {\n          route[[this.caps[i][j], this.caps[i][k]]] = this.landGraph[i].findShortestPath(this.caps[i][j], this.caps[i][k]).map(Number)\n        }\n      }\n      let vertexes = []\n      let edges = []\n      for (let j = 0; j < this.caps[i].length; j++) {\n        vertexes.push({id: this.caps[i][j]})\n        for (let k = j + 1; k < this.caps[i].length; k++) {\n          edges.push({\n            u: this.caps[i][j],\n            v: this.caps[i][k],\n            w: route[[this.caps[i][j], this.caps[i][k]]].length\n          })\n        }\n      }\n      let mstGraph = MST()\n      mstGraph.initVertex(vertexes)\n      mstGraph.storageEdge(edges)\n      this.landMST[i] = Kruskal(mstGraph)\n      this.landRoute[i] = {}\n      this.landRouteCoords.push([])\n      for (let j = 0; j < this.landMST[i].length; j++) {\n        this.landRouteCoords[i].push([])\n        let thisRoute = route[[this.landMST[i][j].u, this.landMST[i][j].v]]\n        this.landRoute[i][[this.landMST[i][j].u, this.landMST[i][j].v]] = thisRoute\n        for (let k = 0; k < thisRoute.length; k++) {\n          let node = this.leafNodes.find(node => node.ID === thisRoute[k])\n          // this.landRouteCoords[i][j].push(node.center.coordinates)\n          this.landRouteCoords[i][j].push({\n            x: gridScales.x(node.center.coordinates.x),\n            y: gridScales.y(node.center.coordinates.y)\n          })\n        }\n      }\n    }\n  }\n\n  initBoundaryGraph () {\n    const self = this\n    const leafNodes = this.leafNodes\n    const cls = this.cls\n\n    const occupiedPositions = getOccupiedPositions()\n    const positionRange = getPositionRange(occupiedPositions)\n    const emptyPositions = getEmptyPositions(positionRange, occupiedPositions)\n    this.emptyPositions = emptyPositions\n    const clusterBoundarySubs = this._boundarySubs()\n    this.clusterBoundarySubs = JSON.parse(JSON.stringify(clusterBoundarySubs))\n    // const clusterBoundaryPositions = getClusterBoundaryPositions()\n    let clusterBoundaryPositions = this._boundarySubPositions()\n    this.clusterBoundaryPositions = JSON.parse(JSON.stringify(clusterBoundaryPositions))\n    clusterBoundaryPositions = clusterBoundaryPositions.flat()\n    const positions = emptyPositions.concat(clusterBoundaryPositions)\n\n    let graph = {}\n    for (let position of positions) {\n      let neighborNodes = {}\n      const neighborPositions = getAvaliableNeighborPositions(position, emptyPositions)\n      for (let neighborPosition of neighborPositions) {\n        neighborNodes[String(neighborPosition)] = this._neighborManhattanDist(position, neighborPosition)\n      }\n      graph[String(position)] = neighborNodes\n    }\n\n    this.boundaryGraph = new Graph(graph)\n\n    function getOccupiedPositions () {\n      let occupiedPositions = []\n\n      for (let i = 0; i < leafNodes.length; i++) {\n        occupiedPositions.push(Object.values(leafNodes[i].position))\n      }\n\n      return occupiedPositions\n    }\n\n    function getPositionRange (occupiedPositions) {\n      const xRange = d3.extent(occupiedPositions, d => d[0])\n      const yRange = d3.extent(occupiedPositions, d => d[1])\n\n      return [\n        // [xRange[0] - 1, xRange[1] + 1],\n        // [yRange[0] - 1, yRange[1] + 1]\n        xRange, yRange\n      ]\n    }\n\n    function getEmptyPositions (positionRange, occupiedPositions) {\n      let emptyPositions = []\n\n      for (let i = positionRange[0][0]; i < positionRange[0][1]; i++) {\n        for (let j = positionRange[1][0]; j < positionRange[1][1]; j++) {\n          if (!self._arrayAlreadyHasArray(occupiedPositions, [i, j])) {\n            emptyPositions.push([i, j])\n          }\n        }\n      }\n\n      return emptyPositions\n    }\n\n    function getClusterBoundaryPositions () {\n      let clusterBoundaryPositions = []\n\n      for (let subCls of cls) {\n        for (let sub of subCls) {\n          let node = leafNodes.find(node => node.ID === sub)\n          let nodePos = Object.values(node.position)\n          let neighborPositions = Array.from(node.neighbors.values())\n          for (let neighborPosition of neighborPositions) {\n            let neighborNode = leafNodes.find(node => JSON.stringify(Object.values(node.position)) === JSON.stringify(neighborPosition))\n            if (neighborNode === undefined) {\n              clusterBoundaryPositions.push(nodePos)\n              continue\n            }\n          }\n        }\n      }\n\n      clusterBoundaryPositions = clusterBoundaryPositions.map(JSON.stringify).reverse().filter(function (e, i, a) {\n        return a.indexOf(e, i + 1) === -1\n      }).reverse().map(JSON.parse)\n\n      return clusterBoundaryPositions\n    }\n\n    function getAvaliableNeighborPositions (position, emptyPositions) {\n      const neighborPositions = getNeighborPositions(position)\n      let avaliableNeighbors = []\n\n      for (let neighborPosition of neighborPositions) {\n        if (self._arrayAlreadyHasArray(emptyPositions, neighborPosition)) { // empty grid\n          avaliableNeighbors.push(neighborPosition)\n        }\n      }\n\n      return avaliableNeighbors\n    }\n\n    function getNeighborPositions (pos) {\n      let intPos = { i: pos[0], j: pos[1] }\n      let neighbors = []\n      let x0, x1, x2, x3\n      if (intPos.j % 2 === 0) {\n        x0 = 1\n        x1 = (intPos.i >= 0) ? 1 : 0\n        x2 = (intPos.i <= 0) ? -1 : 0\n        x3 = -1\n      } else {\n        x0 = (intPos.i === -1) ? 2 : 1\n        x1 = (intPos.i < 0) ? 1 : 0\n        x2 = (intPos.i > 0) ? -1 : 0\n        x3 = (intPos.i === 1) ? -2 : -1\n      }\n      // \n      neighbors.push([intPos.i + x0, intPos.j])\n      neighbors.push([intPos.i + x1, intPos.j + 1])\n      neighbors.push([intPos.i + x2, intPos.j + 1])\n      neighbors.push([intPos.i + x3, intPos.j])\n      neighbors.push([intPos.i + x2, intPos.j - 1])\n      neighbors.push([intPos.i + x1, intPos.j - 1])\n      return neighbors\n    }\n  }\n\n  initWaterRoute (gridScales) {\n    const self = this\n    this.waterGraph = {}\n    this.waterMST = null\n    this.waterRoute = {}\n    this.waterRouteCoords = {}\n    // harborcity\n    // harborCityPoscitypos\n    // harborPosharbor\n    this.harbor = []\n    this.harborCityPos = []\n    this.harborPos = []\n    this.harborCoords = []\n    this.harborRouteCorrespondence = []\n    this.seaGraph = []\n    this.seaRoutePos = []\n    this.seaRouteOD = []\n    this.seaRouteCoords = []\n\n    let route = {}\n    let routeDist = {}\n\n    // // route\n    // for (let i = 0; i < this.landGraph.length; i++) {\n    //   let graphI = copy2dObj(this.landGraph[i].map)\n    //   let boundarySubsI = getBoundarySubs(graphI)\n    //   for (let j = i + 1; j < this.landGraph.length; j++) {\n    //     let graphJ = copy2dObj(this.landGraph[j].map)\n    //     let boundarySubsJ = getBoundarySubs(graphJ)\n    //     let graphIJ = extendObj(graphI, graphJ)\n    //     for (let ii = 0; ii < boundarySubsI.length; ii++) {\n    //       let boundarySubI = boundarySubsI[ii]\n    //       for (let jj = 0; jj < boundarySubsJ.length; jj++) {\n    //         let boundarySubJ = boundarySubsJ[jj]\n    //         graphIJ[boundarySubI][boundarySubJ] = this.distMat[boundarySubI][boundarySubJ]\n    //         graphIJ[boundarySubJ][boundarySubI] = this.distMat[boundarySubI][boundarySubJ]\n    //       }\n    //     }\n    //     this.waterGraph[[i, j]] = new Graph(graphIJ)\n    //     // route[[i, j]] = this.waterGraph[[i, j]].findShortestPath(Data.nationalCaps[i], Data.nationalCaps[j]).map(Number)\n    //     let shortestCapitalPair = getShortestCapPair(i, j)\n    //     route[[i, j]] = this.waterGraph[[i, j]].findShortestPath(...shortestCapitalPair).map(Number)\n    //   }\n    // }\n\n    // // route v1\n    // let graphs = []\n    // for (let i = 0; i < this.cls.length; i++) {\n    //   let subCls = this.cls[i]\n    //   let graph = {}\n    //   for (let j = 0; j < subCls.length; j++) {\n    //     let sub = subCls[j]\n    //     let node = this.leafNodes.find(node => node.ID === sub)\n    //     let nodePos = Object.values(node.position)\n    //     let nodeCoords = getCoords(nodePos, gridScales)\n    //     let neighborPositions = Array.from(node.neighbors.values())\n    //     let neighborNodes = {}\n    //     for (let k = 0; k < neighborPositions.length; k++) {\n    //       let neighborNode = this.leafNodes.find(node => JSON.stringify(Object.values(node.position)) === JSON.stringify(neighborPositions[k]))\n    //       if (neighborNode !== undefined) {\n    //         let neighborCoords = getCoords(neighborPositions[k], gridScales)\n    //         // neighborNodes[neighborNode.ID] = euclideanDist(nodeCoords, neighborCoords)\n    //         neighborNodes[neighborNode.ID] = manhattanDist(nodePos, neighborPositions[k])\n    //       }\n    //     }\n    //     graph[sub] = neighborNodes\n    //   }\n    //   graphs.push(new Graph(graph))\n    // }\n    // for (let i = 0; i < graphs.length; i++) {\n    //   let graphI = copy2dObj(graphs[i].map)\n    //   let boundarySubsI = getBoundarySubs(graphI)\n    //   for (let j = i + 1; j < graphs.length; j++) {\n    //     let graphJ = copy2dObj(graphs[j].map)\n    //     let boundarySubsJ = getBoundarySubs(graphJ)\n    //     let graphIJ = extendObj(graphI, graphJ)\n    //     for (let ii = 0; ii < boundarySubsI.length; ii++) {\n    //       let boundarySubI = boundarySubsI[ii]\n    //       let boundarySubIPos = getSubPos(Number(boundarySubI))\n    //       let boundarySubICoords = getCoords(boundarySubIPos, gridScales)\n    //       for (let jj = 0; jj < boundarySubsJ.length; jj++) {\n    //         let boundarySubJ = boundarySubsJ[jj]\n    //         let boundarySubJPos = getSubPos(Number(boundarySubJ))\n    //         let boundarySubJCoords = getCoords(boundarySubJPos, gridScales)\n    //         // let dist = euclideanDist(boundarySubICoords, boundarySubJCoords)\n    //         let dist = manhattanDist(boundarySubIPos, boundarySubJPos)\n    //         graphIJ[boundarySubI][boundarySubJ] = dist\n    //         graphIJ[boundarySubJ][boundarySubI] = dist\n    //       }\n    //     }\n    //     this.waterGraph[[i, j]] = new Graph(graphIJ)\n    //     // route[[i, j]] = this.waterGraph[[i, j]].findShortestPath(Data.nationalCaps[i], Data.nationalCaps[j]).map(Number)\n    //     let shortestCapitalPair = getShortestCapPair(i, j)\n    //     route[[i, j]] = this.waterGraph[[i, j]].findShortestPath(...shortestCapitalPair).map(Number)\n    //   }\n    // }\n\n    // // route v2\n    let graphs = []\n    for (let i = 0; i < this.cls.length; i++) {\n      let subCls = this.cls[i]\n      let graph = {}\n      for (let j = 0; j < subCls.length; j++) {\n        let sub = subCls[j]\n        let node = this.leafNodes.find(node => node.ID === sub)\n        let nodePos = Object.values(node.position)\n        let neighborPositions = Array.from(node.neighbors.values())\n        let neighborNodes = {}\n        for (let k = 0; k < neighborPositions.length; k++) {\n          let neighborNode = this.leafNodes.find(node => JSON.stringify(Object.values(node.position)) === JSON.stringify(neighborPositions[k]))\n          if (neighborNode !== undefined) {\n            neighborNodes[neighborNode.ID] = this._neighborManhattanDist(nodePos, neighborPositions[k])\n          }\n        }\n        graph[sub] = neighborNodes\n      }\n      graphs.push(new Graph(graph))\n    }\n\n    // let date1 = new Date()\n\n    // for (let i = 0; i < graphs.length; i++) {\n    //   let graphI = copy2dObj(graphs[i].map)\n    //   // let boundarySubsI = getBoundarySubs(graphI)\n    //   const boundarySubsI = this.clusterBoundarySubs[i]\n    //   for (let j = i + 1; j < graphs.length; j++) {\n    //     let graphJ = copy2dObj(graphs[j].map)\n    //     // let boundarySubsJ = getBoundarySubs(graphJ)\n    //     const boundarySubsJ = this.clusterBoundarySubs[j]\n    //     let graphIJ = extendObj(graphI, graphJ)\n    //     for (let ii = 0; ii < boundarySubsI.length; ii++) {\n    //       let boundarySubI = boundarySubsI[ii]\n    //       // let boundarySubIPos = getSubPos(Number(boundarySubI))\n    //       const boundarySubIPos = this.clusterBoundaryPositions[i][ii]\n    //       for (let jj = 0; jj < boundarySubsJ.length; jj++) {\n    //         let boundarySubJ = boundarySubsJ[jj]\n    //         // let boundarySubJPos = getSubPos(Number(boundarySubJ))\n    //         const boundarySubJPos = this.clusterBoundaryPositions[j][jj]\n    //         let dist = this._boundarySubManhattanDist(boundarySubIPos, boundarySubJPos)\n    //         graphIJ[boundarySubI][boundarySubJ] = dist\n    //         graphIJ[boundarySubJ][boundarySubI] = dist\n    //       }\n    //     }\n    //     this.waterGraph[[i, j]] = new Graph(graphIJ)\n    //     // let shortestCapitalPair = getShortestCapPair(i, j)\n    //     // route[[i, j]] = this.waterGraph[[i, j]].findShortestPath(...shortestCapitalPair).map(Number)\n    //     const routeInfo = this._shortestPathBetweenCapPair(i, j)\n    //     route[[i, j]] = routeInfo.route\n    //     routeDist[[i, j]] = routeInfo.dist\n    //   }\n    // }\n\n    const nearestCapPair = this._nearestCapPair()\n    const uniqueCaps = this._capsInNearestCapPair(nearestCapPair)\n    const capNearestBoundarySubs = this._capNearestBoundarySubs(uniqueCaps)\n    for (let i = 0; i < graphs.length; i++) {\n      let graphI = copy2dObj(graphs[i].map)\n      for (let j = i + 1; j < graphs.length; j++) {\n        let graphJ = copy2dObj(graphs[j].map)\n        let graphIJ = extendObj(graphI, graphJ)\n        for (const thisCapPair of nearestCapPair[[i, j]]) {\n          const cap1BoundarySubs = capNearestBoundarySubs[thisCapPair[0]]\n          const cap2BoundarySubs = capNearestBoundarySubs[thisCapPair[1]]\n          for (const cap1BoundarySub of cap1BoundarySubs) {\n            const cap1BoundarySubPos = getSubPos(cap1BoundarySub)\n            for (const cap2BoundarySub of cap2BoundarySubs) {\n              const cap2BoundarySubPos = getSubPos(cap2BoundarySub)\n              const dist = this._boundarySubManhattanDist(cap1BoundarySubPos, cap2BoundarySubPos)\n              graphIJ[cap1BoundarySub][cap2BoundarySub] = dist\n              graphIJ[cap2BoundarySub][cap1BoundarySub] = dist\n            }\n          }\n        }\n        this.waterGraph[[i, j]] = new Graph(graphIJ)\n        const routeInfo = this._shortestPathBetweenCapPair(i, j)\n        route[[i, j]] = routeInfo.route\n        routeDist[[i, j]] = routeInfo.dist\n      }\n    }\n    \n    // let date2 = new Date()\n    // console.log('duration: ', (date2 - date1) / 1000)\n\n    let vertexes = []\n    let edges = []\n    for (let i = 0; i < this.landGraph.length; i++) {\n      vertexes.push({ id: i })\n      for (let j = i + 1; j < this.landGraph.length; j++) {\n        edges.push({\n          u: i,\n          v: j,\n          // w: getManhattanDist(route[[i, j]])\n          w: routeDist[[i, j]]\n        })\n      }\n    }\n    let mstGraph = MST()\n    mstGraph.initVertex(vertexes)\n    mstGraph.storageEdge(edges)\n    this.waterMST = Kruskal(mstGraph)\n    for (let i = 0; i < this.waterMST.length; i++) {\n      let routePair = [this.waterMST[i].u, this.waterMST[i].v]\n      this.waterRoute[routePair] = route[routePair]\n      this.waterRouteCoords[routePair] = []\n      for (let j = 0; j < this.waterRoute[routePair].length; j++) {\n        let routeSub = this.waterRoute[routePair][j]\n        let node = this.leafNodes.find(node => node.ID === routeSub)\n        let nodeCoordX = gridScales.x(node.center.coordinates.x)\n        let nodeCoordY = gridScales.y(node.center.coordinates.y)\n        this.waterRouteCoords[routePair].push({ x: nodeCoordX, y: nodeCoordY })\n        // if (\n        //   getBoundarySubs(this.landGraph[routePair[0]].map).indexOf(String(routeSub)) !== -1 ||\n        //   getBoundarySubs(this.landGraph[routePair[1]].map).indexOf(String(routeSub)) !== -1\n        // ) {\n        //   this.harbor.push(routeSub)\n        //   this.harborCityPos.push(Object.values(node.position))\n        //   // if (Data.file === 'Forestfires' && routeSub === 0) {\n        //   //   this.harborPos.push([12, 10])\n        //   // }\n        //   // else {\n        //     this.harborPos.push(getHarborPos(routeSub))\n        //   // }\n        // }\n      }\n      this.harborRouteCorrespondence.push(String(routePair))\n      this.harborRouteCorrespondence.push(String(routePair))\n      const routeHarbor = this._routeHarbor(this.waterRoute[routePair])\n      this.harbor.push(...routeHarbor)\n      const routeHarborPos = this._routeHarborPos(routeHarbor)\n      this.harborPos.push(...routeHarborPos)\n    }\n\n    // this.harbor = Array.from(new Set(this.harbor))\n    // this.harborCityPos = Array.from(new Set(this.harborCityPos.map(d => String(d)))).map(d => d.split(',').map(Number))\n\n    // this.harborPos = Array.from(new Set(this.harborPos))\n    for (let i = 0; i < this.harborPos.length; i++) {\n      this.harborCoords.push(getCoords(this.harborPos[i], gridScales))\n    }\n\n    for (let i = 0; i < Object.keys(this.waterRoute).length; i++) {\n      let thisRoute = Object.values(this.waterRoute)[i]\n      let thisHarbor = []\n      let thisHarborPos = []\n      let thisHarborCoords = []\n      // for (let j = 0; j < this.harbor.length; j++) {\n      //   if (thisRoute.indexOf(this.harbor[j]) !== -1) {\n      //     thisHarbor.push(this.harbor[j])\n      //     thisHarborPos.push(this.harborPos[j])\n      //     thisHarborCoords.push(this.harborCoords[j])\n      //   }\n      // }\n\n      for (let j = 0; j < thisRoute.length; j++) {\n        const indexes = this._allIndexes(this.harbor, thisRoute[j])\n        if (indexes.length > 0) {\n          const key = String(Object.keys(this.waterRoute)[i])\n          for (const idx of indexes) {\n            if (this.harborRouteCorrespondence[idx] === key) {\n              thisHarbor.push(this.harbor[idx])\n              thisHarborPos.push(this.harborPos[idx])\n              thisHarborCoords.push(this.harborCoords[idx])\n            }\n          }\n        }\n      }\n\n      for (let j = 0; j < thisHarbor.length - 1; j++) {\n        const harbor1ClsId = Number(this._findIndex(thisHarbor[j], Data.subHierClusters)[0])\n        const harbor2ClsId = Number(this._findIndex(thisHarbor[j + 1], Data.subHierClusters)[0])\n        \n        if (harbor1ClsId === harbor2ClsId) {\n          thisHarbor.splice(j, 1)\n          j--\n        }\n      }\n\n      for (let j = 0; j < thisHarbor.length; j++) {\n        const idx = this.harbor.indexOf(thisHarbor[j])\n        thisHarborPos.push(this.harborPos[idx])\n        thisHarborCoords.push(this.harborCoords[idx])\n      }\n\n      let candidateRouteSubsPos = getCandidateRouteSubsPos(thisHarbor)\n      let seaGraph\n      let seaRoutePos\n\n      // seaRoute\n      // if (this.nearestSeaRoute) {\n      //   seaGraph = constructSeaGraph(candidateRouteSubsPos)\n      //   seaRoutePos = seaGraph.findShortestPath(thisHarborPos[0].toString(), thisHarborPos[1].toString())\n      // } else {\n      //   let seaGraphAndPath = constructSeaGraphAndPath(candidateRouteSubsPos, thisHarborPos[0].toString(), thisHarborPos[1].toString())\n      //   seaGraph = seaGraphAndPath.seaGraph\n      //   seaRoutePos = seaGraphAndPath.seaRoutePos\n      // }\n      // let seaRouteCoords = getSeaRouteCoords(thisHarbor, seaRoutePos, gridScales)\n      // this.seaRoutePos.push(seaRoutePos)\n\n      seaGraph = constructSeaGraphByCoords(candidateRouteSubsPos, gridScales)\n      let seaRouteCoords = seaGraph.findShortestPath(String(thisHarborCoords[0]), String(thisHarborCoords[1])).map(d => d.split(',').map(Number))\n      // Midposition\n      seaRouteCoords.unshift(getHarborAndHarborPosMidCoords(thisHarbor[0], String(thisHarborPos[0]), gridScales))\n      seaRouteCoords.push(getHarborAndHarborPosMidCoords(thisHarbor[1], String(thisHarborPos[1]), gridScales))\n      seaRouteCoords = simplifyCoords(seaRouteCoords)\n\n      this.seaRouteOD.push(thisHarbor)\n      this.seaGraph.push(seaGraph)\n      this.seaRouteCoords.push(seaRouteCoords)\n    }\n\n    function copy2dObj (obj) {\n      let res = {}\n      for (let key in obj) {\n        res[key] = {}\n        for (let kkey in obj[key]) {\n          res[key][kkey] = obj[key][kkey]\n        }\n      }\n      return res\n    }\n\n    function extendObj (obj1, obj2) {\n      let res = {}\n      for (let key in obj1) {\n        res[key] = obj1[key]\n      }\n      for (let key in obj2) {\n        res[key] = obj2[key]\n      }\n      return res\n    }\n\n    function replaceArrElems (replacedArr, start1, end1, replacingArr, start2) {\n      let res = JSON.parse(JSON.stringify(replacedArr))\n      for (let i = start1; i < end1; i++) {\n        res[i] = replacingArr[start2 + i]\n      }\n      return res\n    }\n\n    function getShortestCapPair (country1, country2) {\n      let caps1 = self.caps[country1]\n      let caps2 = self.caps[country2]\n      let capPair = [caps1[0], caps2[0]]\n      let minDist = 99999\n      let currDist = 99999\n      for (let i = 0; i < caps1.length; i++) {\n        let cap1 = caps1[i]\n        let cap1Pos = getSubPos(cap1)\n        for (let j = 0; j < caps2.length; j++) {\n          let cap2 = caps2[j]\n          let cap2Pos = getSubPos(cap2)\n          currDist = manhattanDist(cap1Pos, cap2Pos)\n          if (currDist < minDist) {\n            minDist = currDist\n            capPair = [cap1, cap2]\n          }\n        }\n      }\n      return capPair\n    }\n\n    function getBoundarySubs (subGraph) {\n      let res = []\n      for (let key in subGraph) {\n        if (Object.keys(subGraph[key]).length !== 6) {\n          res.push(key)\n        }\n      }\n      return res\n    }\n\n    function getManhattanDist (routeSubs) {\n      let dist = 0\n      for (let i = 0; i < routeSubs.length - 1; i++) {\n        let subPos1 = getSubPos(routeSubs[i])\n        let subPos2 = getSubPos(routeSubs[i + 1])\n        dist += manhattanDist(subPos1, subPos2)\n      }\n      return dist\n    }\n\n    function getSubPos (subId) {\n      let node = self.leafNodes.find(node => node.ID === subId)\n      return [node.position.i, node.position.j]\n    }\n\n    function manhattanDist (arr1, arr2) {\n      let dist = 0\n      for (let i = 0; i < arr1.length; i++) {\n        dist += Math.abs(arr1[i] - arr2[i])\n      }\n      return dist\n    }\n\n    function euclideanDist (arr1, arr2) {\n      let dist = 0\n      for (let i = 0; i < arr1.length; i++) {\n        dist += Math.pow(arr1[i] - arr2[i], 2)\n      }\n      return dist\n    }\n\n    function getHarborPos (harbor) {\n      let node = self.leafNodes.find(node => node.ID === harbor)\n      let neighborPositions = Array.from(node.neighbors.values())\n      for (let i = 0; i < neighborPositions.length; i++) {\n        let neighborNode = self.leafNodes.find(node => JSON.stringify(Object.values(node.position)) === JSON.stringify(neighborPositions[i]))\n        if (neighborNode === undefined) {\n          return neighborPositions[i]\n        }\n      }\n    }\n\n    function getCoords (position, gridScales) {\n      let radius = 1\n      let posOThis = [parseInt(position[0]), parseInt(position[1])]\n      // let x = (posOThis[1] % 2 === 0) ? (2 * radius * posOThis[0]) : ((2 - 1 / Math.abs(posOThis[0])) * radius * posOThis[0])\n      let x\n      if (posOThis[1] % 2 === 0) {\n        x = 2 * radius * posOThis[0]\n      } else {\n        if (posOThis[0] === 0) {\n          x = 0\n        } else {\n          x = (2 - 1 / Math.abs(posOThis[0])) * radius * posOThis[0]\n        }\n      }\n      let y = Math.sqrt(3) * radius * posOThis[1]\n      return bScale(gridScales, [x, y])\n    }\n\n    function getCandidateRouteSubsPos (harbor) {\n      let range0 = getClusterPosRangeFromSub(harbor[0])\n      let range1 = getClusterPosRangeFromSub(harbor[1])\n      let xmin = Math.min(range0.x[0], range1.x[0]) - 3\n      let xmax = Math.max(range0.x[1], range1.x[1]) + 3\n      let ymin = Math.min(range0.y[0], range1.y[0]) - 3\n      let ymax = Math.max(range0.y[1], range1.y[1]) + 3\n      let res = []\n      for (let x = xmin; x < xmax + 1; x++) {\n        for (let y = ymin; y < ymax + 1; y++) {\n          if (self.leafNodes.find(node => node.position.i === x && node.position.j === y) === undefined) {\n            res.push(`${x},${y}`)\n            // res.push([x, y])\n          }\n        }\n      }\n      return res\n    }\n\n    function constructSeaGraphByCoords (subsPos, gridScales) {\n      let graph = {}\n      // 01-6\n      let linkableVertexIdPairs = [\n        [0, 1], [0, 2], [0, 3], [0, 4], [0, 5], [0, 6],\n        [1, 2], [1, 6],\n        [2, 3], [3, 4], [4, 5], [5, 6]\n      ].map(String)\n\n      for (let i = 0; i < subsPos.length; i++) {\n        let subPos = subsPos[i]\n        let neighborsPos = getNeighborsInPosition(subPos.split(',').map(Number))\n        let interCoords = getSubCenterAndVertexCoords(subPos.split(',').map(Number), gridScales)\n        let availableInterCoords = getAvaliableInterCoords(neighborsPos, subsPos, interCoords)\n        addIntraLinkToCoordGraph(graph, linkableVertexIdPairs, availableInterCoords)\n        // Add inter link to coord graph\n        for (let j = 0; j < neighborsPos.length; j++) {\n          let neighborPos = neighborsPos[j]\n          if (subsPos.indexOf(neighborPos) > -1) {\n            let subPosCoords = getCoords(subPos.split(',').map(Number), gridScales)\n            let neighborPosCoords = getCoords(neighborPos.split(',').map(Number), gridScales)\n            addToCoordGraph(graph, subPosCoords, neighborPosCoords)\n          }\n        }\n      }\n\n      return new Graph(graph)\n    }\n\n    function constructSeaGraphAndPath (subsPos, pos0, pos1) {\n      // 6\n      // minGraphNeighborNum\n      let graph = {}\n      let seaGraph\n      let seaRoutePos = null\n      let minGraphNeighborNum = 0\n\n      while (seaRoutePos === null) {\n        for (let i = 0; i < subsPos.length; i++) {\n          let subPos = subsPos[i]\n          graph[subPos] = {}\n          let neighborsPos = getNeighborsInPosition(subPos.split(',').map(Number))\n          let candidateNeighbors = []\n          for (let j = 0; j < neighborsPos.length; j++) {\n            let neighborPos = neighborsPos[j]\n            let inSubPos = subsPos.indexOf(neighborPos) !== -1\n            let neighborsPosOfNeighbor = getNeighborsInPosition(neighborPos.split(',').map(Number))\n            let neighborOfNeighborIsNode = false\n            for (let k = 0; k < neighborsPosOfNeighbor.length; k++) {\n              let neighborPosOfNeighbor = neighborsPosOfNeighbor[k].split(',').map(Number)\n              let neighborNodeOfNeighbor = self.leafNodes.find(node => node.position.i === neighborPosOfNeighbor[0] && node.position.j === neighborPosOfNeighbor[1])\n              if (neighborNodeOfNeighbor !== undefined) {\n                neighborOfNeighborIsNode = true\n                break\n              }\n            }\n            if (inSubPos) {\n              if (!neighborOfNeighborIsNode) {\n                graph[subPos][neighborPos] = 1\n              } else {\n                candidateNeighbors.push(neighborPos)\n              }\n            }\n          }\n          if (Object.keys(graph[subPos]).length <= minGraphNeighborNum) {\n            for (let j = 0; j < candidateNeighbors.length; j++) {\n              graph[subPos][candidateNeighbors[j]] = 1\n            }\n          }\n        }\n  \n        seaGraph = new Graph(graph)\n        seaRoutePos = seaGraph.findShortestPath(pos0, pos1)\n        minGraphNeighborNum++\n      }\n\n      return { seaGraph: seaGraph, seaRoutePos: seaRoutePos }\n    }\n\n    function constructSeaGraph (subsPos) {\n      let graph = {}\n      for (let i = 0; i < subsPos.length; i++) {\n        let subPos = subsPos[i]\n        graph[subPos] = {}\n        let neighborsPos = getNeighborsInPosition(subPos.split(',').map(Number))\n        for (let j = 0; j < neighborsPos.length; j++) {\n          let neighborPos = neighborsPos[j]\n          let inSubPos = subsPos.indexOf(neighborPos) !== -1\n          if (inSubPos) {\n            graph[subPos][neighborPos] = 1\n          }\n        }\n      }\n      return new Graph(graph)\n    }\n\n    function getNeighborsInPosition (pos) {\n      let intPos = { i: pos[0], j: pos[1] }\n      let neighbors = []\n      let x0, x1, x2, x3\n      if (intPos.j % 2 === 0) {\n        x0 = 1\n        x1 = (intPos.i >= 0) ? 1 : 0\n        x2 = (intPos.i <= 0) ? -1 : 0\n        x3 = -1\n      } else {\n        x0 = (intPos.i === -1) ? 2 : 1\n        x1 = (intPos.i < 0) ? 1 : 0\n        x2 = (intPos.i > 0) ? -1 : 0\n        x3 = (intPos.i === 1) ? -2 : -1\n      }\n      // \n      neighbors.push([intPos.i + x0, intPos.j])\n      neighbors.push([intPos.i + x1, intPos.j + 1])\n      neighbors.push([intPos.i + x2, intPos.j + 1])\n      neighbors.push([intPos.i + x3, intPos.j])\n      neighbors.push([intPos.i + x2, intPos.j - 1])\n      neighbors.push([intPos.i + x1, intPos.j - 1])\n      return neighbors.map(String)\n    }\n\n    function getSubCenterAndVertexCoords (pos, gridScales) {\n      let coords = []\n      let centerCoords = getCoords(pos, gridScales)\n      let rightCenterCoords = getCoords([pos[0] + 1, pos[1]], gridScales)\n      let halfDiagonalLen = (rightCenterCoords[0] - centerCoords[0]) / 2 / Math.cos(Math.PI / 6)\n      coords[0] = centerCoords\n      for (let i = 0; i < 6; i++) {\n        let coord = [\n          // \n          centerCoords[0] + halfDiagonalLen * Math.cos(-Math.PI / 6 + Math.PI / 3 * i),\n          centerCoords[1] + halfDiagonalLen * Math.sin(-Math.PI / 6 + Math.PI / 3 * i)\n        ]\n        coords.push(coord)\n      }\n      return coords\n    }\n\n    function getAvaliableInterCoords (neighborsPos, subsPos, interCoords) {\n      let availableInterCoords = new Map()\n      // \n      for (let i = 0; i < interCoords.length; i++) {\n        availableInterCoords.set(i, interCoords[i])\n      }\n      for (let i = 0; i < neighborsPos.length; i++) {\n        if (subsPos.indexOf(neighborsPos[i]) === -1) {\n          if (i === 5) {\n            availableInterCoords.delete(1)\n            availableInterCoords.delete((i + 1))\n          } else {\n            availableInterCoords.delete((i + 1))\n            availableInterCoords.delete((i + 2))\n          }\n        }\n      }\n      return availableInterCoords\n    }\n\n    function addIntraLinkToCoordGraph (graph, linkableVertexIdPairs, availableInterCoords) {\n      let vertexIndices = Array.from(availableInterCoords.keys())\n      for (let i = 0; i < vertexIndices.length; i++) {\n        for (let j = 0; j < vertexIndices.length; j++) {\n          let idPair = String([vertexIndices[i], vertexIndices[j]])\n          if (linkableVertexIdPairs.indexOf(idPair) > -1) {\n            let coordI = availableInterCoords.get(vertexIndices[i])\n            let coordJ = availableInterCoords.get(vertexIndices[j])\n            addToCoordGraph(graph, coordI, coordJ)\n            addToCoordGraph(graph, coordJ, coordI)\n          }\n        }\n      }\n    }\n\n    function addToCoordGraph (graph, coord1, coord2) {\n      let strCoord1 = String(coord1)\n      let strCoord2 = String(coord2)\n      if (!graph.hasOwnProperty(strCoord1)) {\n        graph[strCoord1] = {}\n      }\n      if (!graph[strCoord1].hasOwnProperty(strCoord2)) {\n        let dist = getCoordDist(coord1, coord2)\n        graph[strCoord1][strCoord2] = dist\n      }\n    }\n\n    function getCoordDist (coord1, coord2) {\n      return Math.sqrt(Math.pow((coord1[0] - coord2[0]), 2) + Math.pow((coord1[1] - coord2[1]), 2))\n    }\n\n    function getSeaRouteCoords (harbor, routePos, gridScales) {\n      let coords = []\n      coords.push(getHarborAndHarborPosMidCoords(harbor[0], routePos[0], gridScales))\n      for (let i = 0; i < routePos.length; i++) {\n        coords.push(getCoords(routePos[i].split(',').map(Number), gridScales))\n      }\n      coords.push(getHarborAndHarborPosMidCoords(harbor[1], routePos[routePos.length - 1], gridScales))\n      return coords\n    }\n\n    function getHarborAndHarborPosMidCoords(harbor, routePos, gridScales) {\n      let harborNode = self.leafNodes.find(node => node.ID === harbor)\n      let harborRealPos = [harborNode.position.i, harborNode.position.j]\n      let harborRealCoords = getCoords(harborRealPos, gridScales)\n      let harborMapPos = routePos.split(',').map(Number)\n      let harborMapCoords = getCoords(harborMapPos, gridScales)\n      return [\n        harborRealCoords[0] + (harborMapCoords[0] - harborRealCoords[0]) / 2,\n        harborRealCoords[1] + (harborMapCoords[1] - harborRealCoords[1]) / 2\n      ]\n    }\n\n    function getClusterPosRangeFromSub (sub) {\n      let clsID = Number(self._findIndex(sub, Data.subHierClusters)[0])\n      let clsMembers = Data.subHierClusters[clsID].flat()\n      let xPos = []\n      let yPos = []\n      for (let i = 0; i < clsMembers.length; i++) {\n        let node = self.leafNodes.find(node => node.ID === clsMembers[i])\n        xPos.push(node.position.i)\n        yPos.push(node.position.j)\n      }\n      return {\n        x: d3.extent(xPos),\n        y: d3.extent(yPos)\n      }\n    }\n\n    function simplifyCoords (coords) {\n      let simplifiedCoords = []\n      for (let i = 0; i < coords.length - 1; i++) {\n        let coord0 = coords[i]\n        let coord0Next = coords[i + 1]\n        simplifiedCoords.push([\n          [coord0[0], coord0[1]],\n          [coord0Next[0], coord0Next[1]]\n        ])\n        let simplifiedCoordsLen = simplifiedCoords.length\n        for (let j = i + 1; j < coords.length - 1; j++) {\n          i = j - 1\n          let line1 = JSON.parse(JSON.stringify(simplifiedCoords[simplifiedCoordsLen - 1]))\n          let coord2 = coords[j]\n          let coord3 = coords[j + 1]\n          let line2 = [coord2, coord3]\n          // if (equalSlope(line1, line2)) {\n          //   simplifiedCoords[simplifiedCoordsLen - 1][1] = [coord3[0], coord3[1]]\n          // } else {\n          //   let mergedLine = [[coord0[0], coord0[1]], [coord3[0], coord3[1]]]\n          //   if (!self.shapeIntersect(mergedLine)) {\n          //     simplifiedCoords[simplifiedCoordsLen - 1][1] = [coord3[0], coord3[1]]\n          //   } else {\n          //     break\n          //   }\n          // }\n          let mergedLine = [[coord0[0], coord0[1]], [coord3[0], coord3[1]]]\n          if (!self.shapeIntersect(mergedLine)) {\n            simplifiedCoords[simplifiedCoordsLen - 1][1] = [coord3[0], coord3[1]]\n          } else {\n            break\n          }\n          if (j === coords.length - 2) {\n            return mergeCoords(simplifiedCoords)\n          }\n        }\n      }\n      return mergeCoords(simplifiedCoords)\n    }\n\n    function equalSlope (line1, line2) {\n      let tolerance = 0.01\n      if (line1[0][0] === line1[1][0] && line1[1][0] === line2[1][0]) {\n        return true\n      } else {\n        return Math.abs(slope(line1) - slope(line2)) < tolerance\n      }\n    }\n\n    function slope (line) {\n      return (line[1][1] - line[0][1]) / (line[1][0] - line[0][0])\n    }\n\n    function mergeCoords (coordsOfLines) {\n      let lineCoords = []\n      lineCoords.push(...coordsOfLines[0])\n      for (let i = 1; i < coordsOfLines.length; i++) {\n        lineCoords.push(coordsOfLines[i][1])\n      }\n      return lineCoords\n    }\n  }\n\n  _routeHarbor (route) {\n    for (let i = 0; i < route.length - 1; i++) {\n      const clsID1 = Number(this._findIndex(route[i], Data.subHierClusters)[0])\n      const clsID2 = Number(this._findIndex(route[i + 1], Data.subHierClusters)[0])\n      if (clsID1 !== clsID2) {\n        return [route[i], route[i + 1]]\n      }\n    }\n  }\n\n  _allIndexes (arr, val) {\n    let indexes = []\n    let i\n\n    for(i = 0; i < arr.length; i++) {\n      if (arr[i] === val) {\n        indexes.push(i)\n      }\n    }\n\n    return indexes\n}\n\n  // harborPos\n  // _routeHarborPos (routeHarbor) {\n  //   const harbor1 = routeHarbor[0]\n  //   const harbor2 = routeHarbor[1]\n\n  //   const harbor1Node = this.leafNodes.find(node => node.ID === harbor1)\n  //   const harbor2Node = this.leafNodes.find(node => node.ID === harbor2)\n\n  //   const harbor1EmptyNeighborPositions = this._getSubEmptyNeighborPositions(harbor1Node)\n  //   const harbor2EmptyNeighborPositions = this._getSubEmptyNeighborPositions(harbor2Node)\n\n  //   const angle = this._angle(\n  //     harbor1Node.center.coordinates.x, harbor1Node.center.coordinates.y,\n  //     harbor2Node.center.coordinates.x, harbor2Node.center.coordinates.y\n  //   )\n\n  //   let minAngleDiff = 99999\n  //   let currAngleDiff = 99999\n  //   let harborPos\n  //   for (const position1 of harbor1EmptyNeighborPositions) {\n  //     const coords1 = getCoords(position1, this.gridScales)\n  //     for (const position2 of harbor2EmptyNeighborPositions) {\n  //       const coords2 = getCoords(position2, this.gridScales)\n  //       const neighborAngle = this._angle(coords1[0], coords1[1], coords2[0], coords2[1])\n  //       currAngleDiff = Math.abs(neighborAngle - angle)\n  //       if (currAngleDiff < minAngleDiff) {\n  //         harborPos = [position1, position2]\n  //         minAngleDiff = currAngleDiff\n  //       }\n  //     }\n  //   }\n\n  //   return harborPos\n\n  //   function getCoords (position, gridScales) {\n  //     let radius = 1\n  //     let posOThis = [parseInt(position[0]), parseInt(position[1])]\n  //     // let x = (posOThis[1] % 2 === 0) ? (2 * radius * posOThis[0]) : ((2 - 1 / Math.abs(posOThis[0])) * radius * posOThis[0])\n  //     let x\n  //     if (posOThis[1] % 2 === 0) {\n  //       x = 2 * radius * posOThis[0]\n  //     } else {\n  //       if (posOThis[0] === 0) {\n  //         x = 0\n  //       } else {\n  //         x = (2 - 1 / Math.abs(posOThis[0])) * radius * posOThis[0]\n  //       }\n  //     }\n  //     let y = Math.sqrt(3) * radius * posOThis[1]\n  //     return bScale(gridScales, [x, y])\n  //   }\n  // }\n\n  _nearestCapPair () {\n    let pair = {}\n\n    const caps = this.caps\n    for (let i = 0; i < caps.length; i++) {\n      for (let j = i + 1; j < caps.length; j++) {\n        let thisPair = {}\n        for (let p = 0; p < caps[i].length; p++) {\n          const cap1 = caps[i][p]\n          for (let q = 0; q < caps[j].length; q++) {\n            const cap2 = caps[j][q]\n            thisPair[[cap1, cap2]] = this._subCoordsEuclideanDist(cap1, cap2)\n          }\n        }\n        const thisSortedCapPair = Object.keys(thisPair).sort(function (a, b) { return thisPair[a] - thisPair[b] })\n        pair[[i, j]] = thisSortedCapPair.slice(0, this.kc).map(item => item.split(',').map(Number))\n      }\n    }\n\n    return pair\n  }\n\n  _subCoordsEuclideanDist (sub1, sub2) {\n    const coords1 = this._getCoordsFromSub(sub1)\n    const coords2 = this._getCoordsFromSub(sub2)\n\n    return Math.sqrt(Math.pow(coords1[0] - coords2[0], 2) + Math.pow(coords1[1] - coords2[1], 2))\n  }\n\n  _getCoordsFromSub (sub) {\n    const node = this.leafNodes.find(node => node.ID === sub)\n    return [\n      this.gridScales.x(node.center.coordinates.x),\n      this.gridScales.y(node.center.coordinates.y)\n    ]\n  }\n\n  _capsInNearestCapPair (pair) {\n    let caps = []\n\n    for (const pairArr of Object.values(pair)) {\n      for (const capPair of pairArr) {\n        caps.push(...capPair)\n      }\n    }\n\n    return Array.from(new Set(caps))\n  }\n\n  _capNearestBoundarySubs (caps) {\n    let capNearestBoundarySubs = {}\n\n    for (const cap of caps) {\n      const clsId = Number(this._findIndex(cap, Data.subHierClusters)[0])\n      const thisClsBoundarySubs = this.clusterBoundarySubs[clsId]\n      let thisPair = {}\n      for (const sub of thisClsBoundarySubs) {\n        thisPair[sub] = this._subCoordsEuclideanDist(cap, sub)\n      }\n      const thisSortedPair = Object.keys(thisPair).sort(function (a, b) { return thisPair[a] - thisPair[b] })\n      capNearestBoundarySubs[cap] = thisSortedPair.slice(0, this.ks).map(Number)\n    }\n\n    return capNearestBoundarySubs\n  }\n\n  _boundarySubs () {\n    let boundarySubs = []\n\n    for (const subCls of this.cls) {\n      let clsBoundarySubs = []\n      for (let sub of subCls) {\n        let node = this.leafNodes.find(node => node.ID === sub)\n        let neighborPositions = Array.from(node.neighbors.values())\n        for (let neighborPosition of neighborPositions) {\n          let neighborNode = this.leafNodes.find(node => JSON.stringify(Object.values(node.position)) === JSON.stringify(neighborPosition))\n          if (neighborNode === undefined) {\n            clsBoundarySubs.push(sub)\n            continue\n          }\n        }\n      }\n      clsBoundarySubs = clsBoundarySubs.map(JSON.stringify).reverse().filter(function (e, i, a) {\n        return a.indexOf(e, i + 1) === -1\n      }).reverse().map(JSON.parse)\n      boundarySubs.push(clsBoundarySubs)\n    }\n\n    return boundarySubs\n  }\n\n  _boundarySubPositions () {\n    let subPositions = []\n\n    for (const thisClsBoundarySubs of this.clusterBoundarySubs) {\n      let thisClsSubPositions = []\n      for (const sub of thisClsBoundarySubs) {\n        thisClsSubPositions.push(this._subPos(sub))\n      }\n      subPositions.push(thisClsSubPositions)\n    }\n\n    return subPositions\n  }\n\n  _subPos (subId) {\n    const node = this.leafNodes.find(node => node.ID === subId)\n    return [node.position.i, node.position.j]\n  }\n\n  // harborPos\n  _routeHarborPos (routeHarbor) {\n    const harbor1 = routeHarbor[0]\n    const harbor2 = routeHarbor[1]\n\n    const harbor1Pos = Object.values(this.leafNodes.find(node => node.ID === harbor1).position)\n    const harbor2Pos = Object.values(this.leafNodes.find(node => node.ID === harbor2).position)\n\n    let graph = this._copy2dObj(this.boundaryGraph.map)\n    \n    for (let key in graph[String(harbor2Pos)]) {\n      graph[key][String(harbor2Pos)] = graph[String(harbor2Pos)][key]\n    }\n\n    graph = new Graph(graph)\n    const route = graph.findShortestPath(String(harbor1Pos), String(harbor2Pos))\n    const harborPos = [route[1].split(',').map(Number), route[route.length - 2].split(',').map(Number)]\n\n    return harborPos\n  }\n\n  _angle (x1, y1, x2, y2) {\n    let angle = Math.atan2(y2 - y1, x2 - x1)\n    angle *= 180 / Math.PI\n    if (angle < 0) {\n      angle += 360\n    }\n    return angle\n  }\n\n  _getSubEmptyNeighborPositions (node) {\n    const neighborPositions = Array.from(node.neighbors.values())\n    let emptyNeighborPositions = []\n\n    for (let neighborPosition of neighborPositions) {\n      if (this._arrayAlreadyHasArray(this.emptyPositions, neighborPosition)) {\n        emptyNeighborPositions.push(neighborPosition)\n      }\n    }\n\n    return emptyNeighborPositions\n  }\n\n  _findIndex (valueToSearch, theArray, currentIndex) {\n    if (currentIndex == undefined) currentIndex = ''\n    if (Array.isArray(theArray)) {\n      for (var i = 0; i < theArray.length; i++) {\n        if (Array.isArray(theArray[i])) {\n          let newIndex = this._findIndex(valueToSearch, theArray[i], currentIndex + i + ',')\n          if (newIndex) return newIndex\n        } else if (theArray[i] == valueToSearch) {\n          return currentIndex + i\n        }\n      }\n    } else if (theArray == valueToSearch) {\n      return currentIndex + i\n    }\n    return false\n  }\n\n  _arrayAlreadyHasArray (arr, subarr) {\n    for (let i = 0; i < arr.length; i++) {\n      let checker = false\n      for (let j = 0; j < arr[i].length; j++) {\n        if (arr[i][j] === subarr[j]) {\n          checker = true\n        } else {\n          checker = false\n          break\n        }\n      }\n      if (checker) {\n        return true\n      }\n    }\n    return false\n  }\n\n  _neighborManhattanDist (arr1, arr2) {\n    // arr1arr2position arr2d arr\n    // \n    // 12\n\n    if (arr1[1] === arr2[1]) {\n      return 1\n    } else {\n      return 2\n    }\n    // return 2\n  }\n\n  // boundary graphboundary1boundary2neighbor\n  // boundary graph\n  // boundary2neighborboundary2link\n  _boundarySubManhattanDist (arr1, arr2) {\n    let graph = this._copy2dObj(this.boundaryGraph.map)\n    \n    for (let key in graph[String(arr2)]) {\n      graph[key][String(arr2)] = graph[String(arr2)][key]\n    }\n\n    graph = new Graph(graph)\n    const route = graph.findShortestPath(String(arr1), String(arr2))\n\n    let dist = Infinity\n    if (route !== null) {\n      dist = this._routeManhattanDist(graph, route)\n    }\n\n    return dist\n  }\n\n  _routeManhattanDist (graph, route) {\n    let dist = 0\n\n    for (let i = 0; i < route.length - 1; i++) {\n      dist += graph.map[route[i]][route[i + 1]]\n    }\n\n    return dist\n  }\n\n  _copy2dObj (obj) {\n    let res = {}\n    for (let key in obj) {\n      res[key] = {}\n      for (let kkey in obj[key]) {\n        res[key][kkey] = obj[key][kkey]\n      }\n    }\n    return res\n  }\n\n  _shortestPathBetweenCapPair (country1, country2) {\n    const graph = this.waterGraph[[country1, country2]]\n    const self = this\n\n    const caps1 = self.caps[country1]\n    const caps2 = self.caps[country2]\n    let minRoute\n    let minDist = 99999\n    let currDist = 99999\n\n    for (let i = 0; i < caps1.length; i++) {\n      const cap1 = caps1[i]\n      for (let j = 0; j < caps2.length; j++) {\n        const cap2 = caps2[j]\n        const route = graph.findShortestPath(cap1, cap2)\n        currDist = this._routeManhattanDist(graph, route)\n        if (currDist < minDist) {\n          minDist = currDist\n          minRoute = JSON.parse(JSON.stringify(route)).map(Number)\n        }\n      }\n    }\n\n    return { route: minRoute, dist: minDist }\n  }\n\n  addLandRoute (gridScales) {\n    const self = this\n    for (let i = 0; i < this.landRoute.length; i++) {\n      for (let j = 0; j < this.harbor.length; j++) {\n        if (Number(this._findIndex(this.harbor[j], Data.subHierClusters)[0]) === i) {\n          // let thisRoute = this.landGraph[i].findShortestPath(Data.nationalCaps[i], this.harbor[j]).map(Number)\n          let nearestCap = getNearestCap(i, this.harbor[j])\n          // let thisRoute = this.landGraph[i].findShortestPath(nearestCap, this.harbor[j]).map(Number)\n          let thisRoute\n          if (nearestCap === this.harbor[j]) {\n            thisRoute = [nearestCap, nearestCap]\n          } else {\n            thisRoute = this.landGraph[i].findShortestPath(nearestCap, this.harbor[j]).map(Number)\n          }\n          let thisCoords = []\n          // this.landRoute[i][[Data.nationalCaps[i], this.harbor[j]]] = thisRoute\n          this.landRoute[i][[nearestCap, this.harbor[j]]] = thisRoute\n          for (let k = 0; k < thisRoute.length; k++) {\n            let node = this.leafNodes.find(node => node.ID === thisRoute[k])\n            let nodeCoordX = gridScales.x(node.center.coordinates.x)\n            let nodeCoordY = gridScales.y(node.center.coordinates.y)\n            thisCoords.push({\n              x: nodeCoordX,\n              y: nodeCoordY\n            })\n            if (k === thisRoute.length - 1) {\n              thisCoords.push({\n                x: nodeCoordX + (this.harborCoords[j][0] - nodeCoordX) / 2,\n                y: nodeCoordY + (this.harborCoords[j][1] - nodeCoordY) / 2\n              })\n            }\n          }\n          this.landRouteCoords[i].push(thisCoords)\n        }\n      }\n    }\n\n    function getNearestCap (country, city) {\n      let caps = self.caps[country]\n      let cityPos = getSubPos(city)\n      let minDist = 99999\n      let currDist = 99999\n      let nearestCap\n      for (let i = 0; i < caps.length; i++) {\n        let cap = caps[i]\n        let capPos = getSubPos(cap)\n        currDist = manhattanDist(capPos, cityPos)\n        if (currDist < minDist) {\n          minDist = currDist\n          nearestCap = cap\n        }\n      }\n      return nearestCap\n    }\n\n    function getSubPos (subId) {\n      let node = self.leafNodes.find(node => node.ID === subId)\n      return [node.position.i, node.position.j]\n    }\n\n    function manhattanDist (arr1, arr2) {\n      let dist = 0\n      for (let i = 0; i < arr1.length; i++) {\n        dist += Math.abs(arr1[i] - arr2[i])\n      }\n      return dist\n    }\n  }\n\n  // land route\n  // \n  splitLandRoute () {\n    const self = this\n    this.landSplittedRoute = []\n    this.landSplittedRouteCoords = []\n    for (let i = 0; i < this.landRoute.length; i++) {\n      this.landSplittedRoute[i] = []\n      this.landSplittedRouteCoords[i] = []\n      let routes = Object.values(this.landRoute[i])\n      for (let j = 0; j < routes.length; j++) {\n        let route = routes[j]\n        let coords = this.landRouteCoords[i][j]\n        this.landSplittedRoute[i] = this.landSplittedRoute[i].concat(splitRoute(route))\n        this.landSplittedRouteCoords[i] = this.landSplittedRouteCoords[i].concat(splitRouteCoords(route, coords))\n      }\n      removeDuplicateElems(this.landSplittedRoute[i], this.landSplittedRouteCoords[i])\n    }\n\n    function splitRoute (route) {\n      let splittedRoute = []\n      for (let i = 0; i < route.length - 1; i++) {\n        splittedRoute.push([route[i], route[i + 1]])\n      }\n      return splittedRoute\n    }\n\n    function splitRouteCoords (route, coords) {\n      let splittedRouteCoords = []\n      for (let i = 0; i < route.length - 1; i++) {\n        if ((self.harbor.indexOf(route[i + 1]) > -1) && (coords[i + 2] !== undefined)) {\n          splittedRouteCoords.push([coords[i], coords[i + 1], coords[i + 2]])\n        } else {\n          splittedRouteCoords.push([coords[i], coords[i + 1]])\n        }\n      }\n      return splittedRouteCoords\n    }\n\n    function removeDuplicateElems (splittedRoute, splittedCoords) {\n      let removedIndices = []\n      for(let i = 0; i < splittedRoute.length; i++) {\n        for(let j = i + 1; j < splittedRoute.length; ) {\n          if(splittedRoute[i][0] == splittedRoute[j][0] && splittedRoute[i][1] == splittedRoute[j][1]) {\n            // Found the same. Remove it.\n            splittedRoute.splice(j, 1)\n            removedIndices.push(j)\n          }\n          else {\n            // No match. Go ahead.\n            j++\n          }\n        }    \n      }\n      for (let i = 0; i < removedIndices.length; i++) {\n        splittedCoords.splice(removedIndices[i], 1)\n      }\n    }\n  }\n\n  shapeIntersect(line) {\n    let lineShape = ShapeInfo.line(line.flat())\n    for (let i = 0; i < this.shapes.length; i++) {\n      let intersections = Intersection.intersect(this.shapes[i], lineShape)\n      if (intersections.points.length > 0) {\n        return true\n      }\n    }\n    return false\n  }\n\n  // \n  // \n  combineLandRoute () {\n    this.landCombinedRoute = []\n    this.landCombinedRouteCoords = []\n    for (let i = 0; i < this.landSplittedRoute.length; i++) {\n      this.landCombinedRoute[i] = []\n      this.landCombinedRouteCoords[i] = []\n      let routes = this.landSplittedRoute[i]\n      let coordsOfRoutes = this.landSplittedRouteCoords[i]\n      let combinedRoute = JSON.parse(JSON.stringify(routes[0]))\n      let combinedRouteCoords = JSON.parse(JSON.stringify(coordsOfRoutes[0]))\n      for (let j = 0; j < routes.length - 1; j++) {\n        let nextCoords = coordsOfRoutes[j + 1]\n        if (routes[j][1] === routes[j + 1][0]) {\n          combinedRoute.push(routes[j + 1][1])\n          for (let k = 1; k < nextCoords.length; k++) {\n            combinedRouteCoords.push(nextCoords[k])\n          }\n        } else if (routes[j][0] === routes[j + 1][1]) {\n          combinedRoute.unshift(routes[j + 1][0])\n          for (let k = nextCoords.length - 2; k > -1; k--) {\n            combinedRouteCoords.unshift(nextCoords[k])\n          }\n        }else {\n          this.landCombinedRoute[i].push(combinedRoute)\n          this.landCombinedRouteCoords[i].push(combinedRouteCoords)\n          combinedRoute = JSON.parse(JSON.stringify(routes[j + 1]))\n          combinedRouteCoords = JSON.parse(JSON.stringify(nextCoords))\n        }\n      }\n      this.landCombinedRoute[i].push(combinedRoute)\n      this.landCombinedRouteCoords[i].push(combinedRouteCoords)\n\n      if (this.landCombinedRoute[i].length > 1) {\n        for (let j = 0; j < this.landCombinedRoute[i].length; j++) {\n          for (let k = j + 1; k < this.landCombinedRoute[i].length; ) {\n            let routeJLen = this.landCombinedRoute[i][j].length\n            let routeKLen = this.landCombinedRoute[i][k].length\n            if (this.landCombinedRoute[i][j][0] === this.landCombinedRoute[i][k][0]) {\n              // kjfront\n              manipulateArr(this.landCombinedRoute[i], j, k, true, 'front')\n              manipulateArr(this.landCombinedRouteCoords[i], j, k, true, 'front')\n            } else if (this.landCombinedRoute[i][j][0] === this.landCombinedRoute[i][k][routeKLen - 1]) {\n              // kjfront\n              manipulateArr(this.landCombinedRoute[i], j, k, false, 'front')\n              manipulateArr(this.landCombinedRouteCoords[i], j, k, false, 'front')\n            } else if (this.landCombinedRoute[i][j][routeJLen - 1] === this.landCombinedRoute[i][k][0]) {\n              // kjend\n              manipulateArr(this.landCombinedRoute[i], j, k, false, 'end')\n              manipulateArr(this.landCombinedRouteCoords[i], j, k, false, 'end')\n            } else if (this.landCombinedRoute[i][j][routeJLen - 1] === this.landCombinedRoute[i][k][routeKLen - 1]) {\n              // kjend\n              manipulateArr(this.landCombinedRoute[i], j, k, true, 'end')\n              manipulateArr(this.landCombinedRouteCoords[i], j, k, true, 'end')\n            } else {\n              k++\n            }\n          }\n        }\n      }\n    }\n\n    function manipulateArr (arr, concatIdx, spliceIdx, reverse, loc) {\n      let spliceArr = arr.splice(spliceIdx, 1)[0]\n      if (reverse) {\n        spliceArr.reverse()\n      }\n      if (loc === 'front') {\n        arr[concatIdx].splice(0, 1)\n        arr[concatIdx] = spliceArr.concat(arr[concatIdx])\n      } else if (loc === 'end') {\n        arr[concatIdx].splice(arr[concatIdx].length - 1, 1)\n        arr[concatIdx] = arr[concatIdx].concat(spliceArr)\n      }\n    }\n  }\n\n  getLandSubCoords () {\n    this.landSubCoords = new Map()\n    for (let i = 0; i < this.landSplittedRoute.length; i++) {\n      let routes = this.landSplittedRoute[i]\n      let coordsOfRoutes = this.landSplittedRouteCoords[i]\n      for (let j = 0; j < routes.length; j++) {\n        let route = routes[j]\n        let coords = coordsOfRoutes[j]\n        this.landSubCoords.set(route[0], coords[0])\n        if (this.harbor.indexOf(route[1]) > -1) {\n          this.landSubCoords.set(route[1], [coords[1], coords[2]])\n        } else {\n          this.landSubCoords.set(route[1], coords[1])\n        }\n      }\n    }\n  }\n\n  draw (v_g) {\n    this.drawLandRoute(v_g)\n    // this.drawHarbor(v_g)\n    this.drawSeaRoute(v_g)\n  }\n\n  drawLandRoute (v_g) {\n    const self = this\n    const line = d3.line()\n      .x(d => d.x)\n      .y(d => d.y)\n    v_g.selectAll('.mapLandRoute')\n      // .data(this.landRoute)\n      // .data(this.landSplittedRoute)\n      .data(this.landCombinedRoute)\n      .enter()\n      .append('g')\n      .attr('class', 'mapLandRoute')\n      .attr('id', (d, i) => `mapLandRoute${i}`)\n      .each(drawRoute)\n    \n    function drawRoute (p, idx) {\n      let g = d3.select(this)\n      g.selectAll('.landRoute')\n        // .data(self.landRouteCoords[idx])\n        // .data(self.landSplittedRouteCoords[idx])\n        .data(self.landCombinedRouteCoords[idx])\n        .enter()\n        .append('path')\n        .attr('class', 'landRoute')\n        // .attr('od', (d, i) => Object.keys(p)[i])\n        // .attr('od', (d, i) => p[i])\n        .attr('id', (d, i) => `landRoute${idx}_${i}`)\n        .attr('d', line)\n    }\n  }\n\n  drawHarbor (v_g) {\n    const self = this\n    v_g\n      .append('g')\n      .attr('class', 'mapHarbor')\n      .selectAll('.harbor')\n      // .data(this.harborPos)\n      .data(this.harborCoords)\n      .enter()\n      .append('g')\n      .attr('class', 'harbor')\n      // .attr('transform', d => `translate(${getCoords(d, gridScales)})scale(${self.harborIconScale})`)\n      .attr('transform', d => `translate(${d})scale(${self.harborIconScale})`)\n      .style('opacity', 0)\n      .append('path')\n      .attr('d', this.harborIcon)\n    \n    let gSize = v_g.select('.harbor').node().getBoundingClientRect()\n\n    v_g.select('.mapHarbor').selectAll('.harbor')\n      .attr('transform', function () {\n        return getNewHarborCoords(d3.select(this), gSize)\n      })\n      .style('opacity', 1)\n\n    function getNewHarborCoords (thisHarbor, gSize) {\n      let prevTranslate = self.getTranslate(thisHarbor)\n      let mapSvgTransform = getTransformation(d3.select('#mapSvg').attr('transform'))\n      let newTranslate = [prevTranslate[0] - gSize.width / 2 / mapSvgTransform.scaleX, prevTranslate[1] - gSize.height / 2 / mapSvgTransform.scaleY]\n      return `translate(${newTranslate})scale(${self.harborIconScale})`\n    }\n  }\n\n  drawSeaRoute (v_g) {\n    const self = this\n\n    const line = d3.line()\n      .x(d => d[0])\n      .y(d => d[1])\n      .curve(d3.curveCatmullRom.alpha(1))\n    v_g.append('g')\n      .attr('class', 'mapSeaRoute')\n      .selectAll('.seaRoute')\n      .data(this.seaRouteCoords)\n      .enter()\n      .append('path')\n      .attr('class', 'seaRoute')\n      // .attr('od', getSeaRouteOD)\n      .attr('od', (d, i) => this.seaRouteOD[i])\n      .attr('id', (d, i) => `seaRoute${i}`)\n      .attr('d', line)\n    \n    function getSeaRouteOD (p, idx) {\n      // let thisRoutePos = self.seaRoutePos[idx]\n      // let harborPos0 = thisRoutePos[0]\n      // let harborPos1 = thisRoutePos[thisRoutePos.length - 1]\n      // return `${getHarborFromPos(harborPos0)},${getHarborFromPos(harborPos1)}`\n      let harborCoord0 = p[1]\n      let harborCoord1 = p[p.length - 2]\n      return `${getHarborFromCoord(harborCoord0)},${getHarborFromCoord(harborCoord1)}`\n    }\n\n    function getHarborFromPos (pos) {\n      for (let i = 0; i < self.harborPos.length; i++) {\n        if (pos === String(self.harborPos[i])) {\n          return self.harbor[i]\n        }\n      }\n    }\n\n    function getHarborFromCoord (coord) {\n      return self.harbor[self.harborCoords.map(String).indexOf(String(coord))]\n    }\n  }\n\n  drawHighlightLandRoute (v_g, routeCoords) {\n    const line = d3.line()\n      .x(d => d.x)\n      .y(d => d.y)\n    v_g.selectAll('.hightlightLandRoute')\n      .data(routeCoords)\n      .enter()\n      .append('path')\n      .attr('class', 'hightlightLandRoute')\n      .attr('d', line)\n      .style('visibility', 'hidden')\n  }\n\n  showHighlightLandRoute (v_g) {\n    v_g.selectAll('.hightlightLandRoute')\n      .style('visibility', 'visible')\n  }\n\n  getTranslate (g) {\n    let transform = g.attr('transform')\n    let leftBracketPos = transform.indexOf('(')\n    let commaPos = transform.indexOf(',')\n    let rightBracketPos = transform.indexOf(')')\n    return [\n      parseFloat(transform.substring(leftBracketPos + 1, commaPos)),\n      parseFloat(transform.substring(commaPos + 1, rightBracketPos))\n    ]\n  }\n}\n\n// basic\nfunction bScale (v_scales, v_data) {\n  return [v_scales.x(v_data[0]), v_scales.y(v_data[1])]\n}\n\nlet exportClass = () => {\n  return (...params) => {\n    return new Route(...params)\n  }\n}\n\nexport default exportClass()\n\n\n// WEBPACK FOOTER //\n// ./src/components/SubMap/libs/route.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"subList\"}},[_c('div',{attrs:{\"id\":\"list\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"hist\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2374d2f0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/SubList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2374d2f0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SubList.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SubList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SubList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2374d2f0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./SubList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/SubList.vue\n// module id = null\n// module chunks = ","const numeric = require('numeric')\n\nclass Visibility {\n  constructor (parent, center, ringDiameter, glyphSize, clusterLevel, colors, duration, updateChangeLevelByMap) {\n    this.zoomScale = 1\n    let extent = [1, Math.sqrt(clusterLevel) + 1]\n    let maxLevel = Math.log(Math.pow(extent[1], 4)) / Math.log(2)\n    let zoomer = d3.zoom()\n      // no longer in d3 v4 - zoom initialises with zoomIdentity, so it's already at origin\n      // .translate([0, 0])\n      // .scale(1)\n      .scaleExtent(extent)\n      .on('zoom', e => {\n        let translate = [d3.event.transform.x, d3.event.transform.y]\n        let scale = d3.event.transform.k\n        this.zoomScale = scale\n        d3.select('.SubMapTiling').attr('transform', d3.event.transform)\n        this.update(translate, scale)\n      })\n    this.roundView = false\n    this.center = center\n    this.diameter = ringDiameter\n    this.glyphSize = glyphSize\n    this.clsLevel = clusterLevel\n    this.colors = colors\n    this.parent = parent\n    this.zoom = {\n      extent: extent,\n      maxLevel: maxLevel,\n      zoomer: zoomer\n    }\n    this.duration = duration\n    this.container = null\n    this.ctr = maxLevel / clusterLevel\n    this.div = this.ctr * 0.5\n    this.clsToScale = clusterLevel => { return Math.pow(Math.pow(2, clusterLevel * this.ctr), 0.25) }\n    this.updateChangeLevelByMap = updateChangeLevelByMap\n  } // end of constructor of Visible\n\n  // changeVisible:   change the visibility of an element\n  changeVisible (selection, visibleFunc, givenOpacity = false) {\n    selection.interrupt()\n      .transition()\n      .duration(this.duration)\n      .attr('opacity', function (d, i) {\n        let visible = visibleFunc(this)\n        if (visible) {\n          d3.select(this).classed('visible', true)\n          if (givenOpacity) {\n            return visible\n          } else {\n            return 1\n          }\n        } else {\n          d3.select(this).classed('visible', false)\n          return 0\n        }\n      })\n      .on('end', () => {\n        // ** Do not know why the order of elements will be changed **\n        this.parent.d3el.selectAll('.mapLandRoute').raise()\n        this.parent.d3el.selectAll('.mapCaps').raise()\n        if (document.getElementsByClassName('travelIcon').length !== 0) {\n          this.parent.d3el.selectAll('.travelIcon').raise()\n        }\n      })\n  } // end of changeVisible\n\n  pointVisible (position) {\n    if (this.roundView) {\n      let ringRRatio = this.parent.snapshotPar.ringRRatio\n      position[0] = position[0] * this.scale - this.center[0] + this.translate[0]\n      position[1] = position[1] * this.scale - this.center[1] + this.translate[1]\n      let pr = Math.sqrt(position[0] * position[0] + position[1] * position[1])\n      return (pr + this.glyphSize * this.scale <= this.diameter * ringRRatio - 8 * 0.9)\n    } else {\n      return true\n    }\n  } // end of pointVisible\n\n  SubClsVisible (clsVisibility, zoomLevel) {\n    let clsVisibleFunc = container => {\n      let visible\n      if (!d3.select(container).classed('Outliers')) {\n        let clusterID = d3.select(container).attr('clsID').split('_')\n        let baseline = (clusterID.length - 1) * this.ctr\n        visible = zoomLevel >= baseline - this.div && zoomLevel < baseline + this.div\n        clsVisibility[clusterID.length - 1].atLevel = visible\n      } else {\n        let baseline = (this.clsLevel - 1) * this.ctr\n        visible = zoomLevel < baseline + this.div\n      }\n      return visible\n    } // end of clsVisibleFunc\n    let Cls = this.parent.d3el.selectAll('.SubMapClusters')\n    let thisObject = this\n    this.changeVisible(Cls, clsVisibleFunc)\n    this.parent.d3el\n      .selectAll('.visible .SubClsPath')\n      .each(function (path) {\n        let position = d3.select(this).attr('pos').split('_')\n        let lineVisible = thisObject.pointVisible(position[0].split(',')) && thisObject.pointVisible(position[1].split(','))\n        d3.select(this).attr('display', lineVisible ? 'block' : 'none')\n      })\n  } // end of SubClsVisible\n\n  MapRouteVisible (zoomLevel) {\n    let routeVisibleFunc = container => {\n      let baseline = this.clsLevel * this.ctr\n      if (zoomLevel >= baseline - this.div && zoomLevel < baseline + this.div) {\n        // let originalOpacity = this.parent.pattern ? parseFloat(d3.select(container).attr('ptOpacity')) : 1.0\n        let originalOpacity = 1.0\n        return !((this.div - Math.abs(zoomLevel - baseline)) / this.div * originalOpacity)\n      } else {\n        return true\n      }\n    }\n    let route = this.parent.d3el.selectAll('.mapLandRoute')\n    this.changeVisible(route, routeVisibleFunc)\n  }\n\n  MapCapVisible (zoomLevel) {\n    let capVisibleFunc = container => {\n      let baseline = this.clsLevel * this.ctr\n      if (zoomLevel >= baseline - this.div && zoomLevel < baseline + this.div) {\n        // let originalOpacity = this.parent.pattern ? parseFloat(d3.select(container).attr('ptOpacity')) : 1.0\n        let originalOpacity = 1.0\n        return !((this.div - Math.abs(zoomLevel - baseline)) / this.div * originalOpacity)\n      } else {\n        return true\n      }\n    }\n    let cap = this.parent.d3el.selectAll('.mapCaps')\n    this.changeVisible(cap, capVisibleFunc)\n  }\n\n  SubGlyphVisible (zoomLevel) {\n    let glyphVisibleFunc = container => {\n      let baseline = this.clsLevel * this.ctr\n      if (zoomLevel >= baseline - this.div && zoomLevel < baseline + this.div) {\n        let originalOpacity = this.parent.pattern ? parseFloat(d3.select(container).attr('ptOpacity')) : 1.0\n        return ((this.div - Math.abs(zoomLevel - baseline)) / this.div * originalOpacity)\n      } else {\n        return false\n      }\n    } // end of glyphVisibleFunc\n    let Cls = this.parent.d3el.selectAll('.dimFan')\n    this.changeVisible(Cls, glyphVisibleFunc, true)\n  } // end of SubGlyphVisible\n\n  SubGridVisible (clsVisibility, scales) {\n    let visible = new Set()\n    let thisObject = this\n    this.parent.d3el\n      .selectAll('.SubMapGrids')\n      .classed('visible', false)\n      .classed('invisible', true)\n      .interrupt()\n      .transition()\n      .duration(this.duration)\n      .attr('opacity', 0)\n    let transform = getTransform(this.parent.d3el.select('.SubMapTiling').attr('transform'))\n    let colors = this.parent.colors\n    let gridFunc = function (grid) {\n      let position = d3.select(this).attr('position').split('_')\n      if (thisObject.pointVisible(position) && grid.id != null) {\n        visible.add(grid.id)\n        let globalPosition = bScale(scales, grid.pos)\n        let scale = transform.scale\n        let trans = transform.translate\n        if (transform.scaleFirst) {\n          globalPosition[0] =\n            globalPosition[0] * scale + trans[0]\n          globalPosition[1] =\n            globalPosition[1] * scale + trans[1]\n        } else {\n          globalPosition[0] =\n            (globalPosition[0] + trans[0]) * scale\n          globalPosition[1] =\n            (globalPosition[1] + trans[1]) * scale\n        }\n        clsVisibility.update(grid.id, colors[grid.id], globalPosition)\n      }\n      return clsVisibility\n    }\n    let visibleContainers = this.parent.d3el\n      .selectAll('.SubMapGrids')\n      .filter(gridFunc)\n      .attr('display', 'block')\n      .classed('visible', true)\n      .classed('invisible', false)\n    visibleContainers\n      .interrupt()\n      .transition()\n      .duration(this.duration)\n      .attr('opacity', function () {\n        let zgOpacity = parseFloat(d3.select(this).attr('zgOpacity'))\n        let ftOpacity = parseFloat(d3.select(this).attr('ftOpacity'))\n        let ptOpacity = parseFloat(d3.select(this).attr('ptOpacity'))\n        zgOpacity = isNaN(zgOpacity) ? 1.0 : zgOpacity\n        ftOpacity = isNaN(ftOpacity) ? 1.0 : ftOpacity\n        ptOpacity = isNaN(ptOpacity) ? 1.0 : ptOpacity\n        return zgOpacity * ftOpacity * ptOpacity\n      })\n    setTimeout(() => {\n      this.parent.d3el\n        .selectAll('.SubMapGrids.invisible')\n        .attr('display', 'none')\n    })\n\n    function getTransform (v_transform) {\n      let t_trans = v_transform,\n        t_return = {\n          scale: 1.0,\n          translate: [0, 0],\n          scaleFirst: true\n        }\n      if (t_trans != null && t_trans != '') {\n        let t_indScale = t_trans.indexOf('scale'),\n          t_indTrans = t_trans.indexOf('translate'),\n          t_translate, t_scale,\n          t_scaleFirst, t_scaleLength, t_transLength\n        t_scaleFirst = t_return.scaleFirst = (t_indScale >= 0 && t_indScale > t_indTrans)\n        if (t_indScale < 0) {\n          t_scaleLength = 0\n          if (t_indTrans < 0) {\n            t_transLength = 0\n          } else {\n            t_transLength = t_trans.length\n          }\n        } else {\n          if (t_indTrans < 0) {\n            t_transLength = 0\n            t_scaleLength = t_trans.length\n          } else {\n            if (t_scaleFirst) {\n              t_transLength = t_indScale\n              t_scaleLength = t_trans.length - t_transLength\n            } else {\n              t_scaleLength = t_transLength\n              t_transLength = t_trans.length - t_scaleLength\n            }\n          }\n        }\n        if (t_scaleLength > 0) {\n          t_scale = t_trans.slice(t_indScale, t_indScale + t_scaleLength).replace('scale', '').replace('(', '').replace(')', '')\n          t_return.scale = parseFloat(t_scale)\n        }\n        if (t_transLength > 0) {\n          t_translate = t_trans.slice(t_indTrans, t_indScale + t_transLength).replace('translate', '').replace('(', '').replace(')', '').split(',')\n          t_return.translate[0] = parseFloat(t_translate[0])\n          t_return.translate[1] = parseFloat(t_translate[1])\n        }\n      }\n      return t_return\n    }\n  } // end of SubGridVisible\n\n  initializeVisible () {\n    let clsVisibility = this.parent.currClusters.visible\n    let clusterPaths = this.parent.currClusters.paths\n    let parent = this.parent\n    if (clsVisibility == null) {\n      clsVisibility = this.parent.currClusters.visible = []\n      clsVisibility.dictionary = new Map()\n      let paths = this.parent.currClusters.paths\n      for (let i = 0; i < paths.length; i++) {\n        let zoomLevelPaths = paths[i]\n        let zoomLevelVisible = []\n        zoomLevelVisible.atLevel = false\n        for (let j = 0; j < zoomLevelPaths.length; j++) {\n          let outlier = zoomLevelPaths[j].outlier\n          if (!outlier) {\n            let ids = zoomLevelPaths[j].ids\n            for (let k = 0; k < ids.length; k++) {\n              zoomLevelVisible.push({\n                index: [j, k],\n                clsID: [...zoomLevelPaths[j].previous, k].join('_'),\n                visible: false,\n                positions: [],\n                colors: [],\n                avgPos: null,\n                avgCol: bGetMeanVector(bSubArray(this.colors, ids[k], [0, 1, 2]), false),\n                SShotAngle: 0\n              })\n            }\n          }\n        }\n        clsVisibility.push(zoomLevelVisible)\n      }\n      clsVisibility.update = function (givenID, color, position) {\n        let findFunc = d => {\n          return d === givenID\n        }\n        for (let i = 0; i < this.length; i++) {\n          if (!this[i].atLevel) {\n            continue\n          }\n          let zoomLevelVisible = this[i]\n          let dictionary = this.dictionary\n          for (let j = 0; j < zoomLevelVisible.length; j++) {\n            let visibleItem = zoomLevelVisible[j]\n            let index = visibleItem.index\n            let ids = clusterPaths[i][index[0]].ids[index[1]]\n            let id = ids.findIndex(findFunc)\n            if (id >= 0) {\n              visibleItem.visible = true\n              visibleItem.positions.push(position)\n              visibleItem.colors.push(color)\n              dictionary.set(givenID, [i, j])\n              break\n            }\n          }\n        }\n      } // end of clsVisibility.update\n      clsVisibility.updateColors = function (colorsMap) {\n        let filterFunc = function () {\n          let index = d3.select(this).attr('index')\n          let returned = false\n          if (colorsMap.has(index)) {\n            returned = true\n            let color = bGetMeanVector(colorsMap.get(index), false)\n            // color = bvColToHcl(color)\n            color = bvColToRgb(color)\n          }\n          return returned\n        }\n        parent.d3el.selectAll('.SubMapSShot').filter(filterFunc)\n      } // end of clsVisibility.updateColors\n    } else {\n      clsVisibility.dictionary = new Map()\n      for (let i = 0; i < clsVisibility.length; i++) {\n        let zoomLevelVisible = clsVisibility[i]\n        clsVisibility[i].atLevel = false\n        for (let j = 0; j < zoomLevelVisible.length; j++) {\n          let zoomLevelVisibleItem = zoomLevelVisible[j]\n          zoomLevelVisibleItem.visible = false\n          zoomLevelVisibleItem.avgPos = null\n          zoomLevelVisibleItem.avgCol = null\n          zoomLevelVisibleItem.sshotAngle = 0\n        }\n      }\n    }\n    return clsVisibility\n  } // end of initializeVisible\n\n  SubSnapshotVisible (clsVisibility) {\n    let center = this.center\n    let angleIntervel = 180 / this.parent.snapshotPar.angInterval\n    for (let i = 0; i < clsVisibility.length; i++) {\n      let zoomLevelVisible = clsVisibility[i]\n      for (let j = 0; j < zoomLevelVisible.length; j++) {\n        let zoomLevelVisibleItem = zoomLevelVisible[j]\n        if (zoomLevelVisibleItem.positions.length > 0) {\n          let averagePosition = (zoomLevelVisibleItem.avgPos = bGetMeanVector(zoomLevelVisibleItem.positions, false))\n          let angle = bGetAngle(center, averagePosition)\n          angle = Math.round(angle / Math.PI * angleIntervel) * Math.PI / angleIntervel\n          zoomLevelVisibleItem.positions = []\n          zoomLevelVisibleItem.SShotAngle = angle\n        }\n        if (zoomLevelVisibleItem.colors.length > 0) {\n          zoomLevelVisibleItem.avgCol = bGetMeanVector(\n            zoomLevelVisibleItem.colors,\n            false\n          )\n          zoomLevelVisibleItem.colors = []\n        }\n      }\n    }\n  } // end of SubSnapshotVisible\n\n  update (translate, scale, duration) {\n    const self = this\n    let zoomLevel = Math.log(Math.pow(scale, 4)) / Math.log(2)\n    let clsVisibility = this.initializeVisible()\n    this.scale = scale\n    this.translate = translate\n    this.MapCapVisible(zoomLevel)\n    this.MapRouteVisible(zoomLevel)\n    this.SubClsVisible(clsVisibility, zoomLevel)\n    let currLevel\n    for (let i = 0; i < clsVisibility.length; i++) {\n      if (clsVisibility[i].atLevel === true) {\n        currLevel = i\n      }\n    }\n    this.updateChangeLevelByMap({\n      level: currLevel\n    })\n    if (currLevel === 1) { // provincial level\n      d3.selectAll('.SubMapGrids').filter(function () {\n        let leaves = []\n        for (let i = 0; i < Data.subtree.children.length; i++) {\n          leaves.push(...JSON.parse(JSON.stringify(Data.subtree.children[i].leaves)))\n        }\n        return leaves.indexOf(Number(d3.select(this).attr('index'))) !== -1\n      }).each(function () {\n        d3.select(this).select('.cell')\n          .transition()\n          .duration(self.duration)\n          .style('stroke', '#ccc')\n          .style('stroke-width', '0.025rem')\n          .style('stroke-linecap', 'round')\n      })\n    } else {\n      d3.selectAll('.SubMapGrids').filter(function () {\n        let leaves = []\n        for (let i = 0; i < Data.subtree.children.length; i++) {\n          leaves.push(...JSON.parse(JSON.stringify(Data.subtree.children[i].leaves)))\n        }\n        return leaves.indexOf(Number(d3.select(this).attr('index'))) !== -1\n      }).each(function () {\n        d3.select(this).select('.cell')\n          .transition()\n          .duration(self.duration)\n          .style('stroke', '#ccc')\n          .style('stroke-width', '0px')\n          .style('stroke-linecap', 'round')\n      })\n    }\n    this.SubGlyphVisible(zoomLevel)\n    this.SubGridVisible(clsVisibility, this.parent.scales)\n    this.SubSnapshotVisible(clsVisibility)\n    this.parent.updateClusterInfo(false)\n  } // end of update\n\n  toLevel (self, center, zoomLevel, duration) {\n    let zoomScale = this.clsToScale(zoomLevel)\n    // let trans = [-center[0] * zoomScale, -center[1] * zoomScale]\n    let trans = [-center[0], -center[1]]\n    let zoomer = this.zoom.zoomer\n\n    let transform = d3.zoomIdentity\n      // .translate(0, 0)\n      .translate(trans[0], trans[1])\n      .scale(zoomScale)\n\n    d3.select(self).transition().duration(this.duration).call(zoomer.transform, transform)\n\n    let oldScale = this.zoomScale\n    if (zoomScale > oldScale) {\n      this.update(trans, zoomScale, this.duration)\n    } else {\n      setTimeout(() => {\n        this.update(trans, zoomScale, this.duration)\n      }, this.duration)\n    }\n  }\n\n  prepareContainer (container) {\n    let returned = (this.container = container\n      .append('g')\n      // .call(this.zoom.zoomer)\n      // .on('dblclick.zoom', null)\n      .append('g')\n      .attr('class', 'SubMapTiling'))\n      .call(this.zoom.zoomer)\n      .on('dblclick.zoom', null)\n    return returned\n  } // end of prepareContainer\n}\n\nlet exportClass = () => {\n  return (...params) => {\n    return new Visibility(...params)\n  }\n}\n\nexport default exportClass()\n\n// basic\nfunction bGetMeanVector (v_arr, v_isColVec) {\n  let t_arr = v_isColVec ? v_arr : numeric.transpose(v_arr),\n    t_dim = numeric.dim(t_arr),\n    t_mean = new Array(t_dim[0]),\n    t_num = t_dim[1]\n  for (let i = 0; i < t_arr.length; i++) {\n    t_mean[i] = numeric.sum(t_arr[i]) / t_num\n  }\n  return t_mean\n}\n\nfunction bScale (v_scales, v_data) {\n  return [v_scales.x(v_data[0]), v_scales.y(v_data[1])]\n}\n\nfunction bSubArray (v_arr, v_row_indeces, v_col_indeces) {\n  let t_arr = new Array(v_row_indeces.length)\n  for (let i = 0; i < t_arr.length; i++) {\n    t_arr[i] = new Array(v_col_indeces.length)\n  }\n  for (let i = 0; i < v_row_indeces.length; i++) {\n    let t_i = v_row_indeces[i]\n    for (let j = 0; j < v_col_indeces.length; j++) {\n      let t_j = v_col_indeces[j]\n      t_arr[i][j] = v_arr[t_i][t_j]\n    }\n  }\n  return t_arr\n}\n\nfunction bGetAngle (v_start, v_end) {\n  let t_dx = v_end[0] - v_start[0],\n    t_dy = v_end[1] - v_start[1],\n    t_PI = Math.PI,\n    t_tolerance = Number.EPSILON * 100,\n    t_angle\n  if (Math.abs(t_dx) < t_tolerance) {\n    if (Math.abs(t_dy) > t_tolerance) {\n      t_angle = (t_dy > 0 ? 1 : (-1)) * t_PI * 0.5\n    }\n  } else {\n    t_angle = Math.atan(t_dy / t_dx)\n    if (t_dx < 0) {\n      t_angle += t_PI\n    }\n  }\n  return t_angle\n}\n\n// basicView\nfunction bvColToHcl (v_colArr) {\n  const color = {\n    h: d3.scaleLinear().domain([0, 1]).range([0, 360]),\n    c: d3.scaleLinear().domain([0, 1]).range([30, 80]),\n    l: d3.scaleLinear().domain([0, 1]).range([150 * 0.3, 150 * 0.6]) // d3 l range[0, 150]\n  }\n  let t_col = [\n    color.h(v_colArr[0]),\n    color.c(v_colArr[1]),\n    color.l(v_colArr[2])\n  ]\n  // let t_col = [~~(255 * v_colArr[0]), ~~(255 * v_colArr[1]), ~~(255 * v_colArr[2])]\n  return d3.hcl(...t_col)\n}\n\nfunction bvColToRgb (v_colArr) {\n  let t_col = [~~(255 * v_colArr[0]), ~~(255 * v_colArr[1]), ~~(255 * v_colArr[2])]\n  return 'rgb(' + t_col + ')'\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/SubMap/libs/visibility.js","let GeoElements = {}\nlet exportClass = (className) => {\n  return (...params) => {\n    return new className(...params)\n  }\n}\n\nclass Point {\n  constructor (externalID, coordinates) {\n    this.type = 'point'\n    this.ID = externalID\n    this.tolerance = Number.EPSILON * 100\n    this.coordinates = this.getCoordinates(coordinates)\n  }\n\n  getCoordinates (coordinates) {\n    let x = coordinates[0]\n    let y = coordinates[1]\n    if (Math.abs(x) < this.tolerance) { x = 0 }\n    if (Math.abs(y) < this.tolerance) { y = 0 }\n    return { x: x, y: y }\n  }\n}\nGeoElements.Point = exportClass(Point)\n\nclass Edge {\n  constructor (externalID, startCoordinates, endCoordinates, nghPositions) {\n    this.type = 'edge'\n    this.ID = externalID\n    this.start = GeoElements.Point(0, startCoordinates)\n    this.end = GeoElements.Point(1, endCoordinates)\n    this.length = this.getLength()\n    this.tolerance = Number.EPSILON * 100\n    this.nghPositions = this.getNeighbors(nghPositions)\n  } // end of constructor of Edge\n\n  // get the length of the edge\n  getLength () {\n    let start = this.start\n    let end = this.end\n    return Math.sqrt(Math.pow(end.coordinates.x - start.coordinates.x, 2) + Math.pow(end.coordinates.y - start.coordinates.y, 2))\n  } // end of getLength\n\n  // whether this edge is same to another edge\n  sameTo (thatEdge) {\n    if (this.nghPositions != null && thatEdge.nghPositions != null) {\n      return this.nghPositions === thatEdge.nghPositions\n    } else {\n      return this.compareWith(thatEdge)\n    }\n  } // end of sameTo\n\n  // compare this edge  with another edge\n  compareWith (thatEdge, compareFunc, direction = false) {\n    let s2s = Math.sqrt(Math.pow(this.start.coordinates.x - thatEdge.start.coordinates.x, 2) + Math.pow(this.start.coordinates.y - thatEdge.start.coordinates.y, 2))\n    let e2e = Math.sqrt(Math.pow(this.end.coordinates.x - thatEdge.end.coordinates.x, 2) + Math.pow(this.end.coordinates.y - thatEdge.end.coordinates.y, 2))\n    let s2e = Math.sqrt(Math.pow(this.start.coordinates.x - thatEdge.end.coordinates.x, 2) + Math.pow(this.start.coordinates.y - thatEdge.end.coordinates.y, 2))\n    let e2s = Math.sqrt(Math.pow(this.end.coordinates.x - thatEdge.start.coordinates.x, 2) + Math.pow(this.end.coordinates.y - thatEdge.start.coordinates.y, 2))\n    if (compareFunc == null) {\n      if (!direction) {\n        return (s2s < this.tolerance && e2e < this.tolerance) || (s2e < this.tolerance && e2s < this.tolerance)\n      } else {\n        return (s2s < this.tolerance && e2e < this.tolerance)\n      }\n    } else {\n      return compareFunc.call(this, [s2s, e2e], [s2e, e2s])\n    }\n  } // end of compare\n\n  // connect this edge with another edge\n  connectTo (thatEdge) {\n    let compareFunc = function ([s2s, e2e], [s2e, e2s]) {\n      if (s2s < this.tolerance && e2e < this.tolerance) {\n        return [this.start, this.end]\n      }\n      if (s2e < this.tolerance && e2s < this.tolerance) {\n        return [this.start, this.end]\n      }\n      if (s2s < this.tolerance) {\n        return [this.end, this.start, thatEdge.end]\n      }\n      if (e2s < this.tolerance) {\n        return [this.start, this.end, thatEdge.end]\n      }\n      if (e2e < this.tolerance) {\n        return [this.start, this.end, thatEdge.start]\n      }\n      if (s2e < this.tolerance) {\n        return [this.end, this.start, thatEdge.start]\n      }\n      return false\n    }\n    return this.compareWith(thatEdge, compareFunc)\n  } // end of connectTo\n\n  getNeighbors (nghPositions) {\n    if (nghPositions == null) {\n      return null\n    } else {\n      let neighbors = ''\n      if (nghPositions[0][0] < nghPositions[1][0]) {\n        neighbors = [nghPositions[0].join(','), nghPositions[1].join(',')].join('_')\n      }\n      if (nghPositions[0][0] > nghPositions[1][0]) {\n        neighbors = [nghPositions[1].join(','), nghPositions[0].join(',')].join('_')\n      }\n      if (nghPositions[0][0] === nghPositions[1][0]) {\n        if (nghPositions[0][1] < nghPositions[1][1]) {\n          neighbors = [nghPositions[0].join(','), nghPositions[1].join(',')].join('_')\n        } else {\n          neighbors = [nghPositions[1].join(','), nghPositions[0].join(',')].join('_')\n        }\n      }\n      return neighbors\n    }\n  }\n}\nGeoElements.Edge = exportClass(Edge)\n\nclass Path {\n  constructor (externalID, points, closed) {\n    this.type = 'path'\n    this.ID = externalID\n    this.points = points\n    this.closed = closed\n  }\n}\nGeoElements.Path = exportClass(Path)\n\nGeoElements.Methods = {\n  getPathsByEdges: function (edges) {\n    // indices\n    let indices = []\n    for (let i = 0; i < edges.length; i++) {\n      indices.push(i)\n    }\n    let currentEdge = edges[indices[0]]\n    indices.splice(0, 1)\n    // paths\n    let paths = []\n    paths.push([])\n    let isNewPath = true\n    let pathID = 0\n    // while there are still edges, connect them\n    while (indices.length > 0) {\n      let matchFound = false\n      for (let i = 0; i < indices.length; i++) { // loop until a match is found\n        let connectPath = currentEdge.connectTo(edges[indices[i]])\n        if (connectPath !== false && connectPath != null) {\n          matchFound = true // found the match\n          if (isNewPath) {\n            // new path:   put in the whole path\n            isNewPath = false\n            paths[pathID].push(...connectPath)\n          } else {\n            // old path:   put in the last point\n            if (connectPath[2] == null) {\n              console.log(currentEdge, edges[indices[i]])\n            }\n            paths[pathID].push(connectPath[2])\n          }\n          currentEdge = edges[indices[i]]\n          indices.splice(i, 1)\n          break\n        }\n      }\n      if (!matchFound) { // match not found\n        // the old edge is abandoned\n        // indices\n        currentEdge = edges[indices[0]]\n        indices.splice(0, 1)\n        // paths\n        paths.push([])\n        isNewPath = true\n        pathID++\n      }\n    }\n    let Paths = []\n    for (let i = 0; i < paths.length; i++) {\n      if (paths[i].length === 0) { // an empty path\n        continue\n      }\n      let newPath = GeoElements.Path(`Path_${Paths.length}`, paths[i], true)\n      Paths.push(newPath)\n    }\n    return Paths\n  }\n}\n\nexport default GeoElements\n\n\n// WEBPACK FOOTER //\n// ./src/components/SubMap/libs/geoElements.js","import GeoElements from './geoElements.js'\n\nclass Hexagon {\n  constructor (externalID, radius, integerPosition) {\n    this.update(externalID, radius, integerPosition)\n  }\n\n  // update the parameters of the cell\n  update (externalID, radius, integerPosition) {\n    if (externalID != null) {\n      this.ID = externalID\n    }\n    if (radius != null) {\n      this.radius = radius\n    }\n    if (integerPosition != null) {\n      this.position = {\n        i: Math.round(integerPosition[0]),\n        j: Math.round(integerPosition[1])\n      }\n    }\n    if (radius || integerPosition) {\n      this.center = GeoElements.Point('center', this.getCenterCoordinates())\n      this.neighbors = this.getNeighborsInPosition()\n      this.edges = this.getEdges()\n    }\n  }\n\n  getCenterCoordinates () {\n    let intPos = this.position\n    return this.getCoordinatesByPosition(this.radius, [intPos.i, intPos.j])\n  }\n\n  getCoordinatesByPosition (radius, position) {\n    let posOThis = [parseInt(position[0]), parseInt(position[1])]\n    let x = (posOThis[1] % 2 === 0) ? (2 * radius * posOThis[0]) : ((2 - 1 / Math.abs(posOThis[0])) * radius * posOThis[0])\n    let y = Math.sqrt(3) * radius * posOThis[1]\n    return [x, y]\n  }\n\n  // get the positions of its neighbors\n  getNeighborsInPosition () {\n    let neighbors = new Map() // map: direction in degree (key) - position (value)\n    let intPos = this.position\n    let x0, x1, x2, x3\n    if (intPos.j % 2 === 0) {\n      x0 = 1\n      x1 = (intPos.i >= 0) ? 1 : 0\n      x2 = (intPos.i <= 0) ? -1 : 0\n      x3 = -1\n    } else {\n      x0 = (intPos.i === -1) ? 2 : 1\n      x1 = (intPos.i < 0) ? 1 : 0\n      x2 = (intPos.i > 0) ? -1 : 0\n      x3 = (intPos.i === 1) ? -2 : -1\n    }\n    neighbors.set(0, [intPos.i + x0, intPos.j])\n    neighbors.set(60, [intPos.i + x1, intPos.j + 1])\n    neighbors.set(120, [intPos.i + x2, intPos.j + 1])\n    neighbors.set(180, [intPos.i + x3, intPos.j])\n    neighbors.set(240, [intPos.i + x2, intPos.j - 1])\n    neighbors.set(300, [intPos.i + x1, intPos.j - 1])\n    return neighbors\n  }\n\n  getEdges () {\n    // Step 1:   get the vertexes\n    let vertexes = new Map() // map: direction in degree (key) - Point (value)\n    let vertexDistance = this.radius * 2 * Math.sqrt(3) / 3\n    for (let i = 0; i < 6; i++) {\n      let directionInDegree = 30 + 60 * i // range:   [30, 330]\n      let directionInArc = directionInDegree / 180 * Math.PI\n      let x = this.center.coordinates.x + vertexDistance * Math.cos(directionInArc)\n      let y = this.center.coordinates.y + vertexDistance * Math.sin(directionInArc)\n      let vertexCoordinates = [x, y]\n      vertexes.set(directionInDegree, vertexCoordinates)\n    }\n    // Step 2:   get the edges\n    let edges = new Map() // map: direction in degree (key) - Edge (value)\n    let newEdge = GeoElements.Edge\n    for (let i = 0; i < 6; i++) {\n      let directionInDegree = 60 * i // range: [0, 300]\n      let startDirection = directionInDegree - 30\n      let endDirection = directionInDegree + 30\n      if (startDirection < 0) { startDirection += 360 }\n      let edgeNghPosition = this.neighbors.get(directionInDegree)\n      let thisPosition = [this.position.i, this.position.j]\n      let edge = newEdge(directionInDegree, vertexes.get(startDirection), vertexes.get(endDirection), [thisPosition, edgeNghPosition])\n      edges.set(directionInDegree, edge)\n    }\n    return edges\n  }\n\n  getPositionByCoordinates (radius, coordinates) {\n    let j = Math.round(coordinates[1] * Math.sqrt(3) / (3 * radius))\n    let i = coordinates[0] / (2 * radius)\n    if (j % 2 === 0) {\n      i = Math.round(i)\n    } else {\n      if (i > 0) {\n        i = Math.round(i + 0.5)\n      } else {\n        i = Math.round(i - 0.5)\n      }\n    }\n    return [i, j]\n  }\n\n  tryToMove (absolutePosition, moveVector) {\n    let newJ = absolutePosition[1] + moveVector[1]\n    let newI = absolutePosition[0] + moveVector[0]\n    if (moveVector[1] % 2 !== 0 && absolutePosition[1] % 2 !== 0) {\n      newI = newI - 1 // by default: move to the left (follow the even rows)\n    }\n    return [newI, newJ]\n  }\n\n  getPositionRange (positions) {\n    // Case 1:   a single point\n    if (positions.length === 1) {\n      return [positions[0]]\n    }\n    // Case 2:   a group of points\n    let extPosition = { i: { min: Infinity, max: -Infinity }, j: { min: Infinity, max: -Infinity } }\n    for (let position of positions) {\n      extPosition.i.max = Math.max(position[0], extPosition.i.max)\n      extPosition.i.min = Math.min(position[0], extPosition.i.min)\n      extPosition.j.max = Math.max(position[1], extPosition.j.max)\n      extPosition.j.min = Math.min(position[1], extPosition.j.min)\n    }\n    return [\n      [extPosition.i.min, extPosition.j.min],\n      [extPosition.i.max, extPosition.j.max]\n    ]\n  }\n\n  changePosition (originalPosition, reverse = false) {\n    let original = [parseInt(originalPosition[0]), parseInt(originalPosition[1])]\n    let newPosition = [original[0], original[1]]\n    if (!reverse) {\n      if (original[1] % 2 !== 0 && original[0] <= 0) {\n        newPosition[0] = newPosition[0] + 1\n      }\n    } else {\n      if (original[1] % 2 !== 0 && original[0] <= 0) {\n        newPosition[0] = newPosition[0] - 1\n      }\n    }\n    return newPosition\n  }\n\n  move (moveVector) {\n    // mind:   move the point according to a specific direction to avoid shape distortion\n    let absolutePosition = this.changePosition([this.position.i, this.position.j])\n    let newJ = absolutePosition[1] + moveVector[1]\n    let newI = absolutePosition[0] + moveVector[0]\n    if (moveVector[1] % 2 !== 0 && absolutePosition[1] % 2 !== 0) {\n      newI = newI - 1 // by default:   move to the left (follow the even rows)\n    }\n    let originalPosition = this.changePosition([newI, newJ], true)\n    this.update(null, null, originalPosition)\n  }\n}\n\nlet exportClass = () => {\n  return (...params) => {\n    return new Hexagon(...params)\n  }\n}\n\nexport default exportClass()\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/SubMap/libs/hexagon.js","export default class SubCluster {\n  constructor (dcdID, subTree, anchor, levelOThis, cellRadius, polygonCreator) {\n    this.ID = dcdID\n    this.subTree = subTree\n    this.path2This = subTree.index // including the its own dcdID\n    this.level = levelOThis\n    this.isTopChild = (this.level === 1)\n    this.center = anchor\n    this.cellRadius = cellRadius\n    this.polygonCreator = polygonCreator\n    this.numberODCD = subTree.dict.length\n    this.glbTraversalOrder = subTree.data.glbTraversalOrder\n    this.allLeaves = new Map() // leafName - node\n    this.altitude\n    this.contour\n    this.occupied = new Map() // position ('i_j') - leafName\n    this.neighbors = new Set() // position ('i_j')\n    this.cls = Data.subHierClusters[this.path2This[0]]\n    this.subClsNum = countSubCls(this.cls)\n    this.alternativeMap = new Map() // position ('i_j') - leafName\n    // layout 2 layout 1\n    this.layout1 = true\n    this.initialize()\n\n    function countSubCls(cls) {\n      let num = 0\n      for (let i = 0; i < cls.length; i++) {\n        if (Array.isArray(cls[i])) {\n          num++\n        }\n      }\n      return num\n    }\n  }\n\n  initialize () {\n    // layout the center\n    if (this.isTopChild) {\n      this.centerLeafName = this.subTree.data.centerLeafName[0]\n      this.center.ID = this.centerLeafName // update the center\n      this.layoutLeaf(this.centerLeafName, this.center)\n    }\n  }\n\n  layoutLeaf (leafName, leafNode) {\n    this.allLeaves.set(leafName, leafNode) // update allLeaves\n    this.updateRecords(leafName, leafNode)\n  }\n\n  updateRecords (leafName, leafNode) {\n    let leafPosition = leafNode.position.i + '_' + leafNode.position.j\n    this.occupied.set(leafPosition, leafName) // update the occupied list\n\n    this.alternativeMap.delete(leafPosition)\n\n    this.neighbors.delete(leafPosition)\n    for (let neighbor of leafNode.neighbors) {\n      let nghPosition = neighbor[1] // [nghAngle, nghPosition]\n      let nghPositionInStore = nghPosition[0] + '_' + nghPosition[1]\n      if (!this.occupied.has(nghPositionInStore)) {\n        this.neighbors.add(nghPositionInStore)\n      }\n    }\n  }\n\n  layoutAll (distMatrix, existingList, forbiddenList) {\n    const self = this\n    let prevLeafPositions = []\n    let sameCluster = false\n    for (let traversalOrder = 0; traversalOrder < this.numberODCD; traversalOrder++) {\n      let leafName = this.glbTraversalOrder[traversalOrder] // the alternative leaf\n      if (leafName === this.centerLeafName) {\n        continue\n      }\n      let nextLeafName = null\n      if (traversalOrder < this.numberODCD - 1) {\n        nextLeafName = this.glbTraversalOrder[traversalOrder + 1]\n        if (nextLeafName === this.centerLeafName) {\n          if (traversalOrder < this.numberODCD - 2) {\n            nextLeafName = this.glbTraversalOrder[traversalOrder + 2]\n          } else {\n            nextLeafName = null\n          }\n        }\n      }\n      \n      let alternativeList = new Set() // alternatives - position\n\n      let leafPosition\n      this.getAltPositions(leafName, nextLeafName, existingList, forbiddenList, alternativeList)\n      if (this.layout1) {\n        leafPosition = this.getLeafPosition1(alternativeList)\n      } else {\n        leafPosition = this.getLeafPosition2(prevLeafPositions, sameCluster, alternativeList)\n        prevLeafPositions.push(JSON.parse(JSON.stringify(leafPosition)))\n        sameCluster = checkIfSameCluster(leafName, nextLeafName)\n        if (!sameCluster) {\n          prevLeafPositions = []\n        }\n      }\n\n      // this.getAltPositions(existingList, forbiddenList, alternativeList)\n      // let weights = new Map() // position - leaf2leafWeights\n      // this.getAltWeights(distMatrix, existingList, leafName, weights)\n      // let leafPosition = this.getLeafPosition(alternativeList, weights)\n      if (isNaN(leafPosition[0]) || isNaN(leafPosition[1])) {\n        console.error('top tree: ' + this.ID + ' - leaf: ' + leafName)\n      }\n      let leafNode = this.polygonCreator(leafName, this.cellRadius, leafPosition)\n      this.layoutLeaf(leafName, leafNode)\n    }\n\n    function checkIfSameCluster (leafName, nextLeafName) {\n      let id = findIndex(leafName, self.cls)\n      let nextId = findIndex(nextLeafName, self.cls)\n      if (typeof id === 'string' && typeof nextId === 'string') {\n        return id.substr(0, 1) === nextId.substr(0, 1)\n      }\n      return false\n    }\n\n    function findIndex (valueToSearch, theArray, currentIndex) {\n      if (currentIndex == undefined) currentIndex = ''\n      if (Array.isArray(theArray)) {\n        for (var i = 0; i < theArray.length; i++) {\n          if (Array.isArray(theArray[i])) {\n            let newIndex = findIndex(valueToSearch, theArray[i], currentIndex + i + ',')\n            if (newIndex) return newIndex\n          } else if (theArray[i] == valueToSearch) {\n            return currentIndex + i\n          }\n        }\n      } else if (theArray == valueToSearch) {\n        return currentIndex + i\n      }\n      return false\n    }\n  }\n\n  // getAltPositions (existingList, forbiddenList, alternativeList) {\n  //   for (let neighbor of this.neighbors) {\n  //     if (!existingList.has(neighbor) && !forbiddenList.has(neighbor)) {\n  //       alternativeList.add(neighbor)\n  //     }\n  //   }\n  // }\n\n  getAltPositions (leafName, nextLeafName, existingList, forbiddenList, alternativeList) {\n    for (let neighbor of this.neighbors) {\n      if (!existingList.has(neighbor) && !forbiddenList.has(neighbor)) {\n        alternativeList.add(neighbor)\n        this.alternativeMap.set(neighbor, leafName)\n      }\n    }\n\n    let id = findIndex(leafName, this.cls)\n    let nextId = findIndex(nextLeafName, this.cls)\n    let equal = false\n    if (typeof id === 'string' && typeof nextId === 'string') {\n      id = id.substr(0, 1)\n      nextId = nextId.substr(0, 1)\n      if (Number(id) < this.subClsNum && Number(nextId) < this.subClsNum) {\n        equal = id === nextId\n      } else {\n        equal = true\n      }\n    }\n    if (!equal) {\n      this.neighbors.clear()\n    }\n\n    function findIndex (valueToSearch, theArray, currentIndex) {\n      if (currentIndex == undefined) currentIndex = ''\n      if (Array.isArray(theArray)) {\n        for (var i = 0; i < theArray.length; i++) {\n          if (Array.isArray(theArray[i])) {\n            let newIndex = findIndex(valueToSearch, theArray[i], currentIndex + i + ',')\n            if (newIndex) return newIndex\n          } else if (theArray[i] == valueToSearch) {\n            return currentIndex + i\n          }\n        }\n      } else if (theArray == valueToSearch) {\n        return currentIndex + i\n      }\n      return false\n    }\n  }\n\n  getLeafPosition1 (alternativeList) {\n    let firstAlternative = alternativeList.values().next().value.split('_')\n    return [parseInt(firstAlternative[0]), parseInt(firstAlternative[1])]\n  }\n\n  getLeafPosition2 (prevLeafPositions, sameCluster, alternativeList) {\n    let leafPos\n    let breakFlag = false\n    if (sameCluster) {\n      for (let i = 0; i < prevLeafPositions.length; i++) {\n        let prevPos = { i: prevLeafPositions[i][0], j: prevLeafPositions[i][1] }\n        let prevLeafNeighbors = Array.from(getNeighborsInPosition(prevPos).values())\n        for (let i = 0; i < prevLeafNeighbors.length; i++) {\n          let prevLeafNeighbor = `${prevLeafNeighbors[i][0]}_${prevLeafNeighbors[i][1]}`\n          if (alternativeList.has(prevLeafNeighbor)) {\n            leafPos = prevLeafNeighbor.split('_')\n            breakFlag = true\n            break\n          }\n        }\n        if (breakFlag) {\n          break\n        }\n      }\n      if (leafPos === undefined) {\n        leafPos = alternativeList.values().next().value.split('_')\n      }\n    } else {\n      leafPos = alternativeList.values().next().value.split('_')\n    }\n\n    function getNeighborsInPosition (position) {\n      let neighbors = new Map() // map: direction in degree (key) - position (value)\n      let intPos = position\n      let x0, x1, x2, x3\n      if (intPos.j % 2 === 0) {\n        x0 = 1\n        x1 = (intPos.i >= 0) ? 1 : 0\n        x2 = (intPos.i <= 0) ? -1 : 0\n        x3 = -1\n      } else {\n        x0 = (intPos.i === -1) ? 2 : 1\n        x1 = (intPos.i < 0) ? 1 : 0\n        x2 = (intPos.i > 0) ? -1 : 0\n        x3 = (intPos.i === 1) ? -2 : -1\n      }\n      neighbors.set(0, [intPos.i + x0, intPos.j])\n      neighbors.set(60, [intPos.i + x1, intPos.j + 1])\n      neighbors.set(120, [intPos.i + x2, intPos.j + 1])\n      neighbors.set(180, [intPos.i + x3, intPos.j])\n      neighbors.set(240, [intPos.i + x2, intPos.j - 1])\n      neighbors.set(300, [intPos.i + x1, intPos.j - 1])\n      return neighbors\n    }\n    return [parseInt(leafPos[0]), parseInt(leafPos[1])]\n  }\n\n  // getLeafPosition (alternativeList, weights) {\n  //   let scoreFunc = (thisCoords, thatCoords, weight) => {\n  //     let distX = thisCoords[0] - thatCoords[0]\n  //     let distY = thisCoords[1] - thatCoords[1]\n  //     let distance = Math.sqrt(Math.pow(distX, 2) + Math.pow(distY, 2))\n  //     let angle = distX === 0 ? (Math.PI / 2) : Math.atan(distY / distX)\n  //     let scoreValue = weight / (distance * distance)\n  //     return [scoreValue * Math.cos(angle), scoreValue * Math.sin(angle)]\n  //   }\n  //   let maxScore = -Infinity\n  //   let leafPosition\n  //   for (let position of alternativeList) {\n  //     let thisPosition = position.split('_')\n  //     let thisCoords = this.center.getCoordinatesByPosition(this.cellRadius, thisPosition)\n  //     let score = [0, 0]\n  //     for (let p2w of weights) {\n  //       let thatPosition = p2w[0].split('_')\n  //       let thatCoords = this.center.getCoordinatesByPosition(this.cellRadius, thatPosition)\n  //       let thatScore = scoreFunc(thisCoords, thatCoords, p2w[1])\n  //       score = [score[0] + thatScore[0], score[1] + thatScore[1]] // add up the forces\n  //     }\n  //     let scoreValue = Math.sqrt(score[0] * score[0] + score[1] * score[1])\n  //     if (scoreValue > maxScore) {\n  //       maxScore = scoreValue\n  //       leafPosition = thisPosition\n  //     }\n  //   }\n  //   return [parseInt(leafPosition[0]), parseInt(leafPosition[1])]\n  // }\n\n  getAltWeights (distMatrix, existingList, thisLeaf, weights) {\n    let weightFunc = (dist) => {\n      return 1 / (dist * dist)\n    }\n    // weights of the siblings (leafs in the same subtree)\n    for (let leafPosition of this.occupied) {\n      let distance = distMatrix[thisLeaf][leafPosition[1]]\n      weights.set(leafPosition[0], weightFunc(distance))\n    }\n    // weights of the others (existing list)\n    for (let leafPosition of existingList) {\n      let distance = distMatrix[thisLeaf][leafPosition[1]]\n      weights.set(leafPosition[0], weightFunc(distance))\n    }\n  }\n\n  move (moveVector) {\n    this.occupied.clear()\n    this.neighbors.clear()\n    for (let leaf of this.allLeaves) {\n      leaf[1].move(moveVector)\n      this.updateRecords(leaf[0], leaf[1])\n    }\n    return this.occupied\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/SubMap/libs/subCluster.js","import Hexagon from './hexagon.js'\nimport SubCluster from './subCluster.js'\nimport GeoElements from './geoElements.js'\n\nexport default class MapLayout {\n  constructor (subtree, subDistMat, subs, gridScaling) {\n    this.subTree = subtree // references to the parameters, not new variables\n    this.path2This = subtree.index\n    this.distMatrix = subDistMat\n    this.cellRadius = 1\n    this.centerLeafName = null\n    this.codes = subs\n    this.polygonCreator = Hexagon\n    this.polygon = this.polygonCreator('core', this.cellRadius, [0, 0])\n    this.numberOChildren = subtree.children.length\n    this.numberOLeaves = subtree.leaves.length\n    this.numberODCD = subtree.dict.length // DCD: all leaves\n    this.numberOAnchors = subtree.data.initProjection.length\n    this.gridScaling = gridScaling\n    this.allLeaves = new Map() // leafName - node\n    this.occupied = new Map() // position ('i_j') - leafName\n    this.descendants = new Map() // prefix ('child_' or 'leaf_') + childCID / leafName - node\n    this.dcdTraversalOrder = this.subTree.data.dscTraversalOrder\n  }\n\n  getMap () {\n    this.layoutAnchors()\n    this.layoutAll()\n    this.summarize()\n    this.seamCarving()\n  }\n\n  layoutAnchors () {\n    let initProjection = this.subTree.data.initProjection\n    let gridRadius = Math.round(Math.sqrt(this.numberODCD * this.gridScaling)) // gridRadius: the amount of grids in one direction\n    let gridRange = { x: { min: -gridRadius, max: gridRadius }, y: { min: -gridRadius, max: gridRadius } }\n    let extrema = { x: { min: Infinity, max: -Infinity }, y: { min: Infinity, max: -Infinity } }\n    for (let anchorID = 0; anchorID < this.numberOAnchors; anchorID++) {\n      let anchor = initProjection[anchorID]\n      if (anchor[0] < extrema.x.min) { extrema.x.min = anchor[0] }\n      if (anchor[0] > extrema.x.max) { extrema.x.max = anchor[0] }\n      if (anchor[1] < extrema.y.min) { extrema.y.min = anchor[1] }\n      if (anchor[1] > extrema.y.max) { extrema.y.max = anchor[1] }\n    }\n    // the order in dcdDistMatrix: [children, leaves], which does not follow the dcdTraversalOrder\n    let centerInfo = this.dcdTraversalOrder[0]\n    let anchorOccupied = new Set()\n    for (let anchorID = 0; anchorID < this.numberOAnchors; anchorID++) {\n      // Step 1: transform the projection coordinates into grid coordinates\n      let originalCoords = initProjection[anchorID]\n      let newCoords = []\n      newCoords[0] = (originalCoords[0] - extrema.x.min) / (extrema.x.max - extrema.x.min) * (gridRange.x.max - gridRange.x.min) + gridRange.x.min\n      newCoords[1] = (originalCoords[1] - extrema.y.min) / (extrema.y.max - extrema.y.min) * (gridRange.y.max - gridRange.y.min) + gridRange.y.min\n      newCoords[0] = newCoords[0] * 2 * this.cellRadius\n      newCoords[1] = newCoords[1] * 2 * this.cellRadius\n      // Step 2: transform the grid coordinates into integer positions\n      let anchorPosition = this.polygon.getPositionByCoordinates(this.cellRadius, newCoords)\n      let positionID = anchorPosition.join('_')\n      if (!anchorOccupied.has(positionID)) {\n        // not occupied, than use it\n        anchorOccupied.add(positionID)\n        // sparse anchors:   block the neighbors of the occupied cell\n        let node = this.polygonCreator('try', this.cellRadius, anchorPosition)\n        for (let neighbor of node.neighbors) {\n          let nghPositionID = neighbor[1].join('_')\n          anchorOccupied.add(nghPositionID)\n        }\n      } else {\n        // occupied, than assign a new position\n        let node = this.polygonCreator('try', this.cellRadius, anchorPosition)\n        let existingList = new Map([\n          [positionID, node]\n        ])\n        // find a new position\n        // line 76-101: \n        let foundMatch = false\n        while (!foundMatch) {\n          let newExistingList = new Map()\n          for (let existingNode of existingList) {\n            for (let neighbor of existingNode[1].neighbors) {\n              let nghPositionID = neighbor[1].join('_')\n              if (!anchorOccupied.has(nghPositionID)) {\n                // not occupied, than use it\n                anchorPosition = neighbor[1]\n                positionID = nghPositionID\n                foundMatch = true\n                break\n              } else {\n                if (!newExistingList.has(nghPositionID)) {\n                  let nghNode = this.polygonCreator('try', this.cellRadius, neighbor[1])\n                  newExistingList.set(nghPositionID, nghNode)\n                }\n              }\n            }\n            if (foundMatch) { break }\n          }\n          if (!foundMatch) { // all neighbors have been used\n            existingList = newExistingList\n          }\n        }\n        anchorOccupied.add(positionID)\n        // sparse anchors:   block the neighbors of the occupied cell\n        node = this.polygonCreator('try', this.cellRadius, anchorPosition)\n        for (let neighbor of node.neighbors) {\n          let nghPositionID = neighbor[1].join('_')\n          anchorOccupied.add(nghPositionID)\n        }\n      }\n      // Step 3: see if the anchor represents a child\n      let isChild = anchorID < this.numberOChildren\n      let anchorName\n      let anchor\n      if (isChild) {\n        // is a child, then create a SubCluster\n        let childCID = anchorID\n        anchorName = 'child_' + childCID\n        anchor = this.polygonCreator(childCID, this.cellRadius, anchorPosition)\n        let subClusterNode = new SubCluster(childCID, this.subTree.children[childCID], anchor, 1, this.cellRadius, this.polygonCreator)\n        this.descendants.set(anchorName, subClusterNode)\n        // get the centerLeafName\n        if (centerInfo[1] === 0 && centerInfo[0] === childCID) {\n          this.centerLeafName = subClusterNode.centerLeafName\n        }\n      } else {\n        // not a child, then put in the anchor\n        let leafID = anchorID - this.numberOChildren\n        let leafName = this.subTree.leaves[leafID]\n        anchorName = 'leaf_' + leafName\n        anchor = this.polygonCreator(leafName, this.cellRadius, anchorPosition)\n        this.descendants.set(anchorName, anchor)\n        this.allLeaves.set(leafName, anchor)\n        this.occupied.set(anchor.position.i + '_' + anchor.position.j, leafName)\n        if (centerInfo[1] === -1 && centerInfo[0] === leafName) {\n          this.centerLeafName = leafName\n        }\n      }\n    }\n  }\n\n  // cluster, first-level outlierlayoutAnchors\n  layoutAll () {\n    // the layout process needs to follow the dcdTraversalOrder\n    for (let traversalOrder = 0; traversalOrder < this.dcdTraversalOrder.length; traversalOrder++) {\n      let dcdInfo = this.dcdTraversalOrder[traversalOrder]\n      if (dcdInfo[1] === -1) { // this is a direct leaf\n        continue\n      } else { // this is a child\n        let childCID = dcdInfo[0]\n        let childCluster = this.descendants.get('child_' + childCID)\n        // Step 1: get the forbidden list and the existing list\n        let [existingList, forbiddenList] = this.prepare4Layout(childCID)\n        // Step 2: layout for this cluster\n        childCluster.layoutAll(this.distMatrix, existingList, forbiddenList)\n        this.allLeaves = new Map([...this.allLeaves, ...childCluster.allLeaves])\n        this.occupied = new Map([...this.occupied, ...childCluster.occupied])\n      }\n    }\n  }\n\n  prepare4Layout (childCID) {\n    let extList = new Map() // Map:   position - leafName\n    let fbdList = new Set() // Set:   position:   'i_j'\n    for (let traversalOrder = 0; traversalOrder < this.dcdTraversalOrder.length; traversalOrder++) {\n      let dcdInfo = this.dcdTraversalOrder[traversalOrder]\n      if (dcdInfo[1] === -1) { // this is a direct leaf\n        // put in the descendant itself\n        let descendant = this.descendants.get('leaf_' + dcdInfo[0])\n        extList.set(descendant.position.i + '_' + descendant.position.j, dcdInfo[0])\n        // put in the neighbors\n        let neighbors = descendant.neighbors // this is a map\n        for (let neighbor of neighbors) {\n          fbdList.add(neighbor[1].join('_'))\n        }\n      } else { // this is a child\n        if (dcdInfo[0] !== childCID) { // not itself\n          // put in the descendant itself\n          let descendant = this.descendants.get('child_' + dcdInfo[0])\n          extList = new Map([...extList, ...descendant.occupied])\n          // put in the neighbors\n          let neighbors = descendant.neighbors // this is a set\n          fbdList = new Set([...fbdList, ...neighbors])\n        }\n      }\n    }\n    return [extList, fbdList]\n  }\n\n  summarize () {\n    // Step 1: prepare the factors\n    let xFactor = 1\n    let yFactor = 2 * Math.sqrt(3) / 3\n    // Step 2: get the range of coordinates\n    let extCoords = { x: { min: Infinity, max: -Infinity }, y: { min: Infinity, max: -Infinity } }\n    for (let leaf of this.allLeaves) {\n      let leafCoords = leaf[1].center.coordinates\n      extCoords.x.max = Math.max(leafCoords.x, extCoords.x.max)\n      extCoords.x.min = Math.min(leafCoords.x, extCoords.x.min)\n      extCoords.y.max = Math.max(leafCoords.y, extCoords.y.max)\n      extCoords.y.min = Math.min(leafCoords.y, extCoords.y.min)\n    }\n    extCoords.x.max = extCoords.x.max + 3 * this.cellRadius * xFactor\n    extCoords.x.min = extCoords.x.min - 3 * this.cellRadius * xFactor\n    extCoords.y.max = extCoords.y.max + 3 * this.cellRadius * yFactor\n    extCoords.y.min = extCoords.y.min - 3 * this.cellRadius * yFactor\n    extCoords.aspectRatio = (extCoords.y.max - extCoords.y.min) / (extCoords.x.max - extCoords.x.min)\n    this.coordsRange = extCoords\n    // Step 3: get the range of integer positions\n    let extPosition = { i: { min: Infinity, max: -Infinity }, j: { min: Infinity, max: -Infinity } }\n    for (let leaf of this.allLeaves) {\n      let leafPosition = leaf[1].position\n      extPosition.i.max = Math.max(leafPosition.i, extPosition.i.max)\n      extPosition.i.min = Math.min(leafPosition.i, extPosition.i.min)\n      extPosition.j.max = Math.max(leafPosition.j, extPosition.j.max)\n      extPosition.j.min = Math.min(leafPosition.j, extPosition.j.min)\n    }\n    extPosition.i.max = extPosition.i.max + 1\n    extPosition.i.min = extPosition.i.min - 1\n    extPosition.j.max = extPosition.j.max + 1\n    extPosition.j.min = extPosition.j.min - 1\n    this.positionRange = extPosition\n  }\n\n  seamCarving () {\n    // Step 1: rough carve\n    this.roughCarving()\n    // // Step 2: fine carve\n    if (Data.file === 'Forestfires') return\n    // this.fineCarving()\n  }\n\n  roughCarving () {\n    let moveVectors = this.getRoughCarvingVectors()\n    this.moveDescendants(moveVectors)\n    this.summarize()\n  }\n\n  fineCarving () {\n    let moveVectors = this.getFineCarvingVectors()\n    this.moveDescendants(moveVectors)\n    this.summarize()\n  }\n\n  getRoughCarvingVectors () {\n    // Step 1: prepare the ranges and the center\n    // first-level cluster and outlierrange,\n    // rangerangecenter\n    let carveNode = this.polygonCreator('carve', this.cellRadius, [0, 0])\n    let overallRange = []\n    let rangeSegments = new Map()\n    let moveVectors = new Map()\n    for (let traversalOrder = 0; traversalOrder < this.dcdTraversalOrder.length; traversalOrder++) {\n      let dcdInfo = this.dcdTraversalOrder[traversalOrder]\n      if (dcdInfo[1] === -1) { // this is a direct leaf\n        let leafName = dcdInfo[0]\n        let ID = 'leaf_' + leafName\n        moveVectors.set(ID, [0, 0])\n        let leafNode = this.descendants.get(ID)\n        // x<=0\n        // \n        let leafPosition = carveNode.changePosition([leafNode.position.i, leafNode.position.j])\n        // range[leafPosition]\n        let range = carveNode.getPositionRange([leafPosition])\n        rangeSegments.set(ID, range)\n        overallRange = [...overallRange, ...range]\n      } else { // this is a child\n        let childCID = dcdInfo[0]\n        let ID = 'child_' + childCID\n        moveVectors.set(ID, [0, 0])\n        let childCluster = this.descendants.get(ID)\n        let positions = []\n        for (let leaf of childCluster.allLeaves) {\n          let leafPosition = carveNode.changePosition([leaf[1].position.i, leaf[1].position.j])\n          positions.push(leafPosition)\n        }\n        let range = carveNode.getPositionRange(positions)\n        rangeSegments.set(ID, range)\n        overallRange = [...overallRange, ...range]\n      }\n    }\n    overallRange = carveNode.getPositionRange(overallRange)\n    let centerPosition = {\n      i: Math.round((overallRange[0][0] + overallRange[1][0]) / 2),\n      j: Math.round((overallRange[0][1] + overallRange[1][1]) / 2)\n    }\n    this.centerPosition = centerPosition\n    // Step 2: decide which rows and columns should be carved\n    let carveRows = new Map()\n    for (let row = overallRange[0][1]; row <= overallRange[1][1]; row++) {\n      carveRows.set(row, true)\n    }\n    let carveColumns = new Map()\n    for (let column = overallRange[0][0]; column <= overallRange[1][0]; column++) {\n      carveColumns.set(column, true)\n    }\n    for (let segment of rangeSegments) {\n      let ranges = segment[1]\n      if (ranges.length === 1) {\n        carveRows.set(ranges[0][1] - 1, false)\n        carveRows.set(ranges[0][1], false)\n        carveColumns.set(ranges[0][0] - 1, false)\n        carveColumns.set(ranges[0][0], false)\n      } else {\n        for (let row = ranges[0][1]; row <= ranges[1][1]; row++) {\n          carveRows.set(row - 1, false)\n          carveRows.set(row, false)\n        }\n        for (let column = ranges[0][0]; column <= ranges[1][0]; column++) {\n          carveColumns.set(column - 1, false)\n          carveColumns.set(column, false)\n        }\n      }\n    }\n    // Step 3: derive the moveVectors\n    // carve points: where to start the carving\n    let carvePointsRow = new Map() // -- row - IDs to start carve\n    let carvePointsColumn = new Map() // -- column - IDs to start carve\n    for (let segment of rangeSegments) {\n      let ID = segment[0]\n      let carvePointRow\n      let carvePointColumn\n      let ranges = segment[1]\n      if (ranges.length === 1) { // this is a direct leaf\n        carvePointRow = ranges[0][1]\n        carvePointColumn = ranges[0][0]\n      } else { // this is a child\n        // for the rows\n        if (ranges[0][1] > centerPosition.j) { // Case 1:   positive side to the center\n          carvePointRow = ranges[0][1]\n        }\n        if (ranges[1][1] < centerPosition.j) { // Case 2:   negative side to the center\n          carvePointRow = ranges[1][1]\n        }\n        // Case 3: across the center, doesn't need to be carved\n        // for the columns\n        if (ranges[0][0] > centerPosition.i) { // Case 1:   positive side to the center\n          carvePointColumn = ranges[0][0]\n        }\n        if (ranges[1][0] < centerPosition.j) { // Case 2:   negative side to the center\n          carvePointColumn = ranges[1][0]\n        }\n        // Case 3: across the center, doesn't need to be carved\n      }\n      let IDsRow = carvePointsRow.get(carvePointRow) || []\n      IDsRow = [...IDsRow, ID]\n      carvePointsRow.set(carvePointRow, IDsRow)\n      let IDsColumn = carvePointsColumn.get(carvePointColumn) || []\n      IDsColumn = [...IDsColumn, ID]\n      carvePointsColumn.set(carvePointColumn, IDsColumn)\n    }\n    // count the carves\n    // for the rows\n    let carveValue = 0\n    for (let row = centerPosition.j; row <= overallRange[1][1]; row++) { // the positive side\n      if (carveRows.get(row)) {\n        carveValue--\n      }\n      if (carvePointsRow.has(row)) {\n        let IDs = carvePointsRow.get(row)\n        for (let ID of IDs) {\n          let vector = moveVectors.get(ID)\n          vector[1] = carveValue\n          moveVectors.set(ID, vector)\n        }\n      }\n    }\n    carveValue = 0\n    for (let row = centerPosition.j; row >= overallRange[0][1]; row--) { // the negative side\n      if (carveRows.get(row)) {\n        carveValue++\n      }\n      if (carvePointsRow.has(row)) {\n        let IDs = carvePointsRow.get(row)\n        for (let ID of IDs) {\n          let vector = moveVectors.get(ID)\n          vector[1] = carveValue\n          moveVectors.set(ID, vector)\n        }\n      }\n    }\n    // for the columns\n    carveValue = 0\n    for (let column = centerPosition.i; column <= overallRange[1][0]; column++) { // the positive side\n      if (carveColumns.get(column)) {\n        carveValue--\n      }\n      if (carvePointsColumn.has(column)) {\n        let IDs = carvePointsColumn.get(column)\n        for (let ID of IDs) {\n          let vector = moveVectors.get(ID)\n          vector[0] = carveValue\n          moveVectors.set(ID, vector)\n        }\n      }\n    }\n    carveValue = 0\n    for (let column = centerPosition.i; column >= overallRange[0][0]; column--) { // the negative side\n      if (carveColumns.get(column)) {\n        carveValue++\n      }\n      if (carvePointsColumn.has(column)) {\n        let IDs = carvePointsColumn.get(column)\n        for (let ID of IDs) {\n          let vector = moveVectors.get(ID)\n          vector[0] = carveValue\n          moveVectors.set(ID, vector)\n        }\n      }\n    }\n    return moveVectors\n  }\n\n  getFineCarvingVectors () {\n    // Step 1: prepare the ranges, the center and the cell energies\n    let carveNode = this.polygonCreator('carve', this.cellRadius, [0, 0])\n    let cellEnergy = new Map()\n    let cellsODCD = new Map()\n    let overallRange = []\n    let moveVectors = new Map()\n    // Step 1-1: the ranges and the energies\n    for (let dcdInfo of this.dcdTraversalOrder) {\n      if (dcdInfo[1] === -1) { // this is a direct leaf\n        let leafName = dcdInfo[0]\n        let ID = 'leaf_' + leafName\n        moveVectors.set(ID, [0, 0])\n        let leafNode = this.descendants.get(ID)\n        let leafPosition = carveNode.changePosition([leafNode.position.i, leafNode.position.j])\n        let allCells = []\n        // set the energies for the leaf nodes\n        cellEnergy.set(leafPosition.join('_'), Infinity)\n        allCells.push(leafPosition)\n        // get the range\n        let range = carveNode.getPositionRange(allCells)\n        overallRange = [...overallRange, ...range]\n        // set the energies for the neighbors\n        for (let neighbor of leafNode.neighbors) { // this is a map\n          let neighborPosition = carveNode.changePosition(neighbor[1])\n          cellEnergy.set(neighborPosition.join('_'), Infinity)\n          allCells.push(neighborPosition)\n        }\n        cellsODCD.set(ID, allCells)\n      } else { // this is a child\n        let childCID = dcdInfo[0]\n        let ID = 'child_' + childCID\n        moveVectors.set(ID, [0, 0])\n        let childCluster = this.descendants.get(ID)\n        let allCells = []\n        for (let leaf of childCluster.allLeaves) {\n          let leafPosition = carveNode.changePosition([leaf[1].position.i, leaf[1].position.j])\n          // set the energies for the leaf nodes\n          cellEnergy.set(leafPosition.join('_'), Infinity)\n          allCells.push(leafPosition)\n        }\n        // get the range\n        let range = carveNode.getPositionRange(allCells)\n        overallRange = [...overallRange, ...range]\n        // set the energies for the neighbors\n        let neighbors = childCluster.neighbors\n        for (let neighbor of neighbors) { // this is a set\n          let neighborPosition = carveNode.changePosition(neighbor.split('_'))\n          cellEnergy.set(neighborPosition.join('_'), Infinity)\n          allCells.push(neighborPosition)\n        }\n        cellsODCD.set(ID, allCells)\n      }\n    }\n    overallRange = carveNode.getPositionRange(overallRange)\n    // set the energies\n    for (let row = overallRange[0][1]; row <= overallRange[1][1]; row++) {\n      for (let column = overallRange[0][0]; column <= overallRange[1][0]; column++) {\n        let positionID = column + '_' + row\n        if (!cellEnergy.has(positionID)) {\n          cellEnergy.set(positionID, 0)\n        }\n      }\n    }\n    // get the center\n    let centerPosition = {\n      i: Math.round((overallRange[0][0] + overallRange[1][0]) / 2),\n      j: Math.round((overallRange[0][1] + overallRange[1][1]) / 2)\n    }\n    this.centerPosition = centerPosition\n    // Step 1-2: get the directions\n    let moveOrders = []\n    let moveDirections = new Map()\n    for (let dcdInfo of this.dcdTraversalOrder) {\n      if (dcdInfo[1] === -1) { // this is a direct leaf\n        let leafName = dcdInfo[0]\n        let ID = 'leaf_' + leafName\n        let leafPosition = cellsODCD.get(ID)[0]\n        // \n        let direction = [centerPosition.i - leafPosition[0], centerPosition.j - leafPosition[1]]\n        moveDirections.set(ID, direction)\n      } else { // this is a child\n        let childCID = dcdInfo[0]\n        let ID = 'child_' + childCID\n        let childCluster = this.descendants.get(ID)\n        let direction = [0, 0]\n        let distance = Infinity\n        let directionUpdated = [false, false]\n        let dontMove = [false, false]\n        for (let leaf of childCluster.allLeaves) {\n          let leafPosition = carveNode.changePosition([leaf[1].position.i, leaf[1].position.j])\n          let directionOLeaf = [centerPosition.i - leafPosition[0], centerPosition.j - leafPosition[1]]\n          if (!directionUpdated[0]) {\n            direction[0] = directionOLeaf[0]\n            directionUpdated[0] = true\n          } else {\n            if (!dontMove[0] && direction[0] * directionOLeaf[0] <= 0) { // across the center, doesn't need to move\n              dontMove[0] = true\n              direction[0] = 0\n            }\n          }\n          if (!directionUpdated[1]) {\n            direction[1] = directionOLeaf[1]\n            directionUpdated[1] = true\n          } else {\n            if (!dontMove[1] && direction[1] * directionOLeaf[1] <= 0) { // across the center, doesn't need to move\n              dontMove[1] = true\n              direction[1] = 0\n            }\n          }\n          if (dontMove[0] && dontMove[1]) {\n            distance = Infinity\n          } else {\n            let distanceOLeaf = Math.pow(directionOLeaf[0], 2) + Math.pow(directionOLeaf[1], 2)\n            if (distanceOLeaf < distance) {\n              distance = distanceOLeaf\n            }\n            if (!dontMove[0]) {\n              direction[0] = directionOLeaf[0]\n            }\n            if (!dontMove[1]) {\n              direction[1] = directionOLeaf[1]\n            }\n          }\n        }\n        moveDirections.set(ID, direction)\n        moveOrders.push([ID, distance])\n      }\n    }\n    // pack the leaves\n    let leafCells = []\n    let directionUpdated = [false, false]\n    let leafDirection = [0, 0]\n    let leafDistance = Infinity\n    for (let dcd of cellsODCD) {\n      let leafID = dcd[0]\n      if (leafID.includes('child')) {\n        continue\n      }\n      leafCells = [...leafCells, ...dcd[1]]\n      cellsODCD.delete(leafID)\n      let directionOLeaf = moveDirections.get(leafID)\n      moveDirections.delete(leafID)\n      if (!directionUpdated[0]) {\n        leafDirection[0] = directionOLeaf[0]\n        directionUpdated[0] = true\n      } else {\n        if (leafDirection[0] * directionOLeaf[0] <= 0) { // across the center, doesn't need to move\n          leafDirection[0] = 0\n        }\n      }\n      if (!directionUpdated[1]) {\n        leafDirection[1] = directionOLeaf[1]\n        directionUpdated[1] = true\n      } else {\n        if (leafDirection[1] * directionOLeaf[1] <= 0) { // across the center, doesn't need to move\n          leafDirection[1] = 0\n        }\n      }\n      if (!(leafDirection[0] === 0 && leafDirection[1] === 0)) {\n        let distanceOLeaf = Math.pow(directionOLeaf[0], 2) + Math.pow(directionOLeaf[1], 2)\n        leafDistance = Math.min(leafDistance, distanceOLeaf)\n      }\n    }\n    cellsODCD.set('leaves', leafCells)\n    moveDirections.set('leaves', leafDirection)\n    moveOrders.push(['leaves', leafDistance])\n\n    // \n    for (const [ID, direction] of moveDirections.entries()) {\n      const noMoveDirection = [0, 0]\n      if (direction.length === noMoveDirection.length && direction.every((value, idx) => value === noMoveDirection[idx])) {\n        moveDirections.delete(ID)\n        for (let i = 0; i < moveOrders.length; i++) {\n          if (moveOrders[i][0] === ID) {\n            moveOrders.splice(i, 1)\n          }\n        }\n      }\n    }\n\n    moveOrders.sort(function (a, b) { return a[1] > b[1] })\n\n    // block the center\n    // cellEnergy.set(centerPosition.i + '_' + centerPosition.j, Infinity)\n    // Step 2: try to move the cells\n    let failed = false\n    let moveDistances = []\n    let oldCellEnergy = new Map([...cellEnergy])\n    let newCellsODCD = new Map()\n    let distanceStep = 1\n    while (!failed) {\n      failed = true\n      let newCellEnergy = new Map([...oldCellEnergy])\n      for (let i = 0; i < moveOrders.length; i++) {\n        if (moveDistances[i] == null) {\n          moveDistances[i] = 0\n        }\n        moveDistances[i] = moveDistances[i] + distanceStep\n        let ID = moveOrders[i][0]\n        let newCells = newCellsODCD.get(ID)\n        let originalCells = cellsODCD.get(ID)\n        if (newCells == null) {\n          newCells = []\n          for (let cell of originalCells) {\n            newCells.push([cell[0], cell[1]])\n          }\n        }\n        let failedOThis = this.tryToMove(true, moveDistances[i], moveDirections.get(ID), distanceStep, carveNode, newCellEnergy, originalCells, newCells)\n        newCellsODCD.set(ID, newCells)\n        if (failedOThis) {\n          moveDistances[i] = moveDistances[i] - distanceStep\n        }\n        failed = !((!failed) || (!failedOThis))\n      }\n      if (!failed) {\n        oldCellEnergy = new Map([...newCellEnergy])\n      }\n    }\n    cellEnergy = new Map([...oldCellEnergy])\n    for (let i = 0; i < moveOrders.length; i++) {\n      let ID = moveOrders[i][0]\n      let vector = this.tryToMove(false, moveDistances[i], moveDirections.get(ID), distanceStep)\n      if (ID === 'leaves') {\n        for (let dcdInfo of this.dcdTraversalOrder) {\n          if (dcdInfo[1] === -1) {\n            moveVectors.set('leaf_' + dcdInfo[0], vector)\n          }\n        }\n      } else {\n        moveVectors.set(ID, vector)\n      }\n    }\n    return moveVectors\n  }\n\n  moveDescendants (moveVectors) {\n    this.occupied.clear()\n    for (let dcdMoveVector of moveVectors) {\n      let dcdID = dcdMoveVector[0]\n      let vector = dcdMoveVector[1]\n      if (dcdID.includes('leaf')) {\n        let leafName = parseInt(dcdID.replace('leaf_', ''))\n        let leafNode = this.descendants.get(dcdID)\n        leafNode.move(vector)\n        let leafPosition = leafNode.position.i + '_' + leafNode.position.j\n        this.occupied.set(leafPosition, leafName)\n      } else {\n        let newOccupied = this.descendants.get(dcdID).move(vector)\n        this.occupied = new Map([...this.occupied, ...newOccupied])\n      }\n    }\n  }\n\n  tryToMove (trying, distance, direction, step, tryNode, cellEnergy, cells, newCells) {\n    // Step 1: prepare the moving vector\n    let moveValues = [0, 0]\n    let failed = false\n    let directionDistance = Math.sqrt(Math.pow(direction[0], 2) + Math.pow(direction[1], 2))\n    moveValues[0] = Math.round(distance / directionDistance * direction[0])\n    moveValues[1] = Math.round(distance / directionDistance * direction[1])\n    if (!trying) {\n      return moveValues\n    } else {\n      // Step 2: clear its own energies\n      for (let newCell of newCells) {\n        cellEnergy.set(newCell.join('_'), 0)\n      }\n      newCells.splice(0, newCells.length) // clear the array, note that 'newCells = []' doesn't work\n      // Step 3: try the new positions\n      for (let cell of cells) {\n        let newCell = tryNode.tryToMove(cell, moveValues)\n        if (cellEnergy.get(newCell.join('_')) !== 0) {\n          failed = true\n          break\n        }\n      }\n      // Step 4: update the energies\n      if (failed) {\n        moveValues[0] = Math.round((distance - step) / directionDistance * direction[0])\n        moveValues[1] = Math.round((distance - step) / directionDistance * direction[1])\n      }\n      for (let cell of cells) {\n        let newCell = tryNode.tryToMove(cell, moveValues)\n        cellEnergy.set(newCell.join('_'), Infinity)\n        newCells.push(newCell)\n      }\n      return failed\n    }\n  }\n\n  getClusterContours (clusters) {\n    let clusterContours = []\n    for (let clusterID = 0; clusterID < clusters.length; clusterID++) {\n      // construct the contour of each cluster\n      let contour = { paths: null, lines: null }\n      let cluster = clusters[clusterID]\n      let nonRepeatEdges = new Map()\n      // Step 1:   get the non-repeat edges\n      for (let leafName of cluster) {\n        // get the leaf\n        let leafNode = this.allLeaves.get(leafName)\n        // examine its edges\n        for (let leafEdgeEntry of leafNode.edges) {\n          let edge = leafEdgeEntry[1]\n          let edgePosition = edge.nghPositions\n          if (!nonRepeatEdges.has(edgePosition)) {\n            nonRepeatEdges.set(edgePosition, edge)\n          } else {\n            nonRepeatEdges.delete(edgePosition)\n          }\n        }\n      }\n      let contourEdges = []\n      for (let edge of nonRepeatEdges) {\n        contourEdges.push(edge[1])\n      }\n      contour.lines = contourEdges\n      // Step 2:   get the contours\n      contour.paths = GeoElements.Methods.getPathsByEdges(contourEdges)\n      clusterContours[clusterID] = contour\n    }\n    return clusterContours\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/SubMap/libs/mapLayout.js","module.exports = __webpack_public_path__ + \"static/img/bremm.e1b1e89.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/color/bremm.png\n// module id = yqkC\n// module chunks = 1"],"sourceRoot":""}